<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Python-Argparse详解, JackHCC">
    <meta name="description" content="Python Argparse学习记录">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Python-Argparse详解 | JackHCC</title>
    <link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/favicon.png">

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/css/matery.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/css/my.css">
    
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/jquery/jquery.min.js"></script>
    
<meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="JackHCC" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-hopscotch.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper head-container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/me.jpg" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">JackHCC</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="" class="waves-effect waves-light">

      
      <i class="fas fa-list" style="zoom: 0.6;"></i>
      
      <span>Tools</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="https://creativecc.cn/" target="_blank" rel="noopener">
          
          <i class="fas fa-book" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>Creative工具导航</span>
        </a>
      </li>
      
      <li>
        <a href="https://blog.creativecc.cn/Arxiv-NLP-Reporter/" target="_blank" rel="noopener">
          
          <i class="fas fa-film" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>NLP每日论文</span>
        </a>
      </li>
      
      <li>
        <a href="http://chat.creativecc.cn/" target="_blank" rel="noopener">
          
          <i class="fas fa-music" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>RocketChat聊天室</span>
        </a>
      </li>
      
      <li>
        <a href="/contact">
          
          <i class="fas fa-comments" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>Contact留言板</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/me.jpg" class="logo-img circle responsive-img">
        
        <div class="logo-name">JackHCC</div>
        <div class="logo-desc">
            
            Make the world betterrrr!!!
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-list"></i>
			
			Tools
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>   
				
                  <a href="https://creativecc.cn/ " target="_blank" rel="noopener" style="margin-left:75px";>
				  
				   <i class="fa fas fa-book" style="position: absolute;left:50px" ></i>
			      
		          <span>Creative工具导航</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="https://blog.creativecc.cn/Arxiv-NLP-Reporter/ " target="_blank" rel="noopener" style="margin-left:75px";>
				  
				   <i class="fa fas fa-film" style="position: absolute;left:50px" ></i>
			      
		          <span>NLP每日论文</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="http://chat.creativecc.cn/ " target="_blank" rel="noopener" style="margin-left:75px";>
				  
				   <i class="fa fas fa-music" style="position: absolute;left:50px" ></i>
			      
		          <span>RocketChat聊天室</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/contact " style="margin-left:75px";>
				  
				   <i class="fa fas fa-comments" style="position: absolute;left:50px" ></i>
			      
		          <span>Contact留言板</span>
                  </a>
                </li>
               
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/JackHCC/JackHCC.github.io" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>

        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/JackHCC/JackHCC.github.io" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    
<script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/featureimages/5.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Python-Argparse详解</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 30px;
        bottom: 146px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Argparse/">
                                <span class="chip bg-color">Argparse</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Python/" class="post-category">
                                Python
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-09-22
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2021-11-06
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    12.1k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    52 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>

        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <p>有关 Python 命令行解析的更简单介绍，请参阅 <a href="https://docs.python.org/2.7/howto/argparse.html#id1" target="_blank" rel="noopener">argparse 教程</a>。</p>
<p><code>argparse</code>模块可以轻松编写用户友好的命令行界面。该程序定义了它需要的参数，<code>argparse</code>并将找出如何解析这些参数<code>sys.argv</code>。<code>argparse</code>模块还会自动生成帮助和用法消息，并在用户给出程序无效参数时发出错误。</p>
<h2 id="1-示例"><a href="#1-示例" class="headerlink" title="1.示例"></a>1.示例</h2><p>下面的代码是一个 Python 程序，它接受一个整数列表并产生总和或最大值：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> argparse

parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>description<span class="token operator">=</span><span class="token string">'Process some integers.'</span><span class="token punctuation">)</span>
parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'integers'</span><span class="token punctuation">,</span> metavar<span class="token operator">=</span><span class="token string">'N'</span><span class="token punctuation">,</span> type<span class="token operator">=</span>int<span class="token punctuation">,</span> nargs<span class="token operator">=</span><span class="token string">'+'</span><span class="token punctuation">,</span>
                    help<span class="token operator">=</span><span class="token string">'an integer for the accumulator'</span><span class="token punctuation">)</span>
parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--sum'</span><span class="token punctuation">,</span> dest<span class="token operator">=</span><span class="token string">'accumulate'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_const'</span><span class="token punctuation">,</span>
                    const<span class="token operator">=</span>sum<span class="token punctuation">,</span> default<span class="token operator">=</span>max<span class="token punctuation">,</span>
                    help<span class="token operator">=</span><span class="token string">'sum the integers (default: find the max)'</span><span class="token punctuation">)</span>

args <span class="token operator">=</span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> args<span class="token punctuation">.</span>accumulate<span class="token punctuation">(</span>args<span class="token punctuation">.</span>integers<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>假设上面的 Python 代码保存在一个名为的文件中<code>prog.py</code>，它可以在命令行运行并提供有用的帮助信息：</p>
<pre class="line-numbers language-python"><code class="language-python">$ python prog<span class="token punctuation">.</span>py <span class="token operator">-</span>h
usage<span class="token punctuation">:</span> prog<span class="token punctuation">.</span>py <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token operator">-</span>sum<span class="token punctuation">]</span> N <span class="token punctuation">[</span>N <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>

Process some integers<span class="token punctuation">.</span>

positional arguments<span class="token punctuation">:</span>
 N           an integer <span class="token keyword">for</span> the accumulator

optional arguments<span class="token punctuation">:</span>
 <span class="token operator">-</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token operator">-</span>help  show this help message <span class="token operator">and</span> exit
 <span class="token operator">-</span><span class="token operator">-</span>sum       sum the integers <span class="token punctuation">(</span>default<span class="token punctuation">:</span> find the max<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>当使用适当的参数运行时，它会输出命令行整数的总和或最大值：</p>
<pre class="line-numbers language-python"><code class="language-python">$ python prog<span class="token punctuation">.</span>py <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span>
<span class="token number">4</span>

$ python prog<span class="token punctuation">.</span>py <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token operator">-</span><span class="token operator">-</span>sum
<span class="token number">10</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果传入无效参数，它将发出错误：</p>
<pre class="line-numbers language-python"><code class="language-python">$ python prog<span class="token punctuation">.</span>py a b c
usage<span class="token punctuation">:</span> prog<span class="token punctuation">.</span>py <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token operator">-</span>sum<span class="token punctuation">]</span> N <span class="token punctuation">[</span>N <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
prog<span class="token punctuation">.</span>py<span class="token punctuation">:</span> error<span class="token punctuation">:</span> argument N<span class="token punctuation">:</span> invalid int value<span class="token punctuation">:</span> <span class="token string">'a'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3 id="1-1-创建一个解析器"><a href="#1-1-创建一个解析器" class="headerlink" title="1.1.  创建一个解析器"></a>1.1.  创建一个解析器</h3><p>使用的第一步<code>argparse</code>是创建一个<code>ArgumentParser</code>对象：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>description<span class="token operator">=</span><span class="token string">'Process some integers.'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><code>ArgumentParser</code>对象将包含将命令行解析为 Python 数据类型所需的全部信息。</p>
<h3 id="1-2-添加参数"><a href="#1-2-添加参数" class="headerlink" title="1.2. 添加参数"></a>1.2. 添加参数</h3><p><code>ArgumentParser</code>通过调用<code>add_argument()</code>方法来完成关于程序参数的信息填充。通常，这些调用将告诉<code>ArgumentParser</code>如何在命令行上取出字符串并将它们转换为对象。该信息在<code>parse_args()</code>被调用时被存储和使用。例如：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'integers'</span><span class="token punctuation">,</span> metavar<span class="token operator">=</span><span class="token string">'N'</span><span class="token punctuation">,</span> type<span class="token operator">=</span>int<span class="token punctuation">,</span> nargs<span class="token operator">=</span><span class="token string">'+'</span><span class="token punctuation">,</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>                     help<span class="token operator">=</span><span class="token string">'an integer for the accumulator'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--sum'</span><span class="token punctuation">,</span> dest<span class="token operator">=</span><span class="token string">'accumulate'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_const'</span><span class="token punctuation">,</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>                     const<span class="token operator">=</span>sum<span class="token punctuation">,</span> default<span class="token operator">=</span>max<span class="token punctuation">,</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>                     help<span class="token operator">=</span><span class="token string">'sum the integers (default: find the max)'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>稍后，调用<code>parse_args()</code>将返回一个具有两个属性的对象，<code>integers</code>和<code>accumulate</code>。<code>integers</code>属性将是一个或多个整数的列表，如果在命令行中指定了该<code>accumulate</code>属性<code>sum()</code>，则该属性将是该函数，如果<code>--sum</code>属性不是该属性，则该属性将是<code>max()</code>函数。</p>
<h3 id="1-3-解析参数"><a href="#1-3-解析参数" class="headerlink" title="1.3. 解析参数"></a>1.3. 解析参数</h3><p><code>ArgumentParser</code>通过该<code>parse_args()</code>方法解析参数。这将检查命令行，将每个参数转换为适当的类型，然后调用相应的操作。在大多数情况下，这意味着一个简单的<code>Namespace</code>对象将由从命令行解析出来的属性建立起来：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'--sum'</span><span class="token punctuation">,</span> <span class="token string">'7'</span><span class="token punctuation">,</span> <span class="token string">'-1'</span><span class="token punctuation">,</span> <span class="token string">'42'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>accumulate<span class="token operator">=</span><span class="token operator">&lt;</span>built<span class="token operator">-</span><span class="token keyword">in</span> function sum<span class="token operator">></span><span class="token punctuation">,</span> integers<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>在一个脚本中，<code>parse_args()</code>通常会被调用，不带任何参数，并且<code>ArgumentParser</code>会自动从<code>sys.argv</code>中确定命令行参数。</p>
<h2 id="2-ArgumentParser-对象"><a href="#2-ArgumentParser-对象" class="headerlink" title="2. ArgumentParser 对象"></a>2. ArgumentParser 对象</h2><pre><code>class argparse.ArgumentParser(prog=None, usage=None, description=None, epilog=None, parents=[], formatter_class=argparse.HelpFormatter, prefix_chars='-', fromfile_prefix_chars=None, argument_default=None, conflict_handler='error', add_help=True)</code></pre><p>创建一个新的<code>ArgumentParser</code>对象。所有参数都应该作为关键字参数传递。下面的每个参数都有自己的更详细的描述，但总之它们是：</p>
<ul>
<li><p>prog - 程序的名称（默认：<code>sys.argv[0]</code>）</p>
</li>
<li><p>usage - 描述程序使用情况的字符串（默认值：从添加到解析器的参数生成）</p>
</li>
<li><p>description - 在参数帮助之前显示的文本（默认值：无）</p>
</li>
<li><p>epilog  - 在参数帮助后显示的文本（默认值：无）</p>
</li>
<li><p>parents - <code>ArgumentParser</code>也应包含其参数的对象列表</p>
</li>
<li><p>formatter_class  - 用于自定义帮助输出的类</p>
</li>
<li><p>prefix_chars  - 前缀可选参数的字符集（默认值：’ - ‘）</p>
</li>
<li><p>fromfile_prefix_chars -该组文件前缀字符从额外的参数应该读（默认值：<code>None</code>）</p>
</li>
<li><p>argument_default -为参数的全局默认值（默认值：<code>None</code>）</p>
</li>
<li><p>conflict_handler  - 解决冲突选项的策略（通常不需要）</p>
</li>
<li><p>add_help -添加<code>-h/--help</code>选项解析器（默认值：<code>True</code>）</p>
</li>
</ul>
<p>以下部分描述如何使用每个这些。</p>
<h3 id="2-1-PROG"><a href="#2-1-PROG" class="headerlink" title="2.1. PROG"></a>2.1. PROG</h3><p>默认情况下，<code>ArgumentParser</code>对象用于<code>sys.argv[0]</code>确定如何在帮助消息中显示程序的名称。这个默认值几乎总是可取的，因为它会使帮助消息与命令行上的程序调用方式相匹配。例如，考虑<code>myprogram.py</code>使用以下代码命名的文件：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> argparse
parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token string">'foo help'</span><span class="token punctuation">)</span>
args <span class="token operator">=</span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>该程序的帮助将显示<code>myprogram.py</code>为程序名称（不管程序从何处被调用）：</p>
<pre class="line-numbers language-python"><code class="language-python">$ python myprogram<span class="token punctuation">.</span>py <span class="token operator">-</span><span class="token operator">-</span>help
usage<span class="token punctuation">:</span> myprogram<span class="token punctuation">.</span>py <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token operator">-</span>foo FOO<span class="token punctuation">]</span>

optional arguments<span class="token punctuation">:</span>
 <span class="token operator">-</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token operator">-</span>help  show this help message <span class="token operator">and</span> exit
 <span class="token operator">-</span><span class="token operator">-</span>foo FOO   foo help
$ cd <span class="token punctuation">.</span><span class="token punctuation">.</span>
$ python subdir<span class="token operator">/</span>myprogram<span class="token punctuation">.</span>py <span class="token operator">-</span><span class="token operator">-</span>help
usage<span class="token punctuation">:</span> myprogram<span class="token punctuation">.</span>py <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token operator">-</span>foo FOO<span class="token punctuation">]</span>

optional arguments<span class="token punctuation">:</span>
 <span class="token operator">-</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token operator">-</span>help  show this help message <span class="token operator">and</span> exit
 <span class="token operator">-</span><span class="token operator">-</span>foo FOO   foo help<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>要更改此默认行为，可以使用以下<code>prog=</code>参数提供另一个值<code>ArgumentParser</code>：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'myprogram'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>print_help<span class="token punctuation">(</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> myprogram <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span>

optional arguments<span class="token punctuation">:</span>
 <span class="token operator">-</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token operator">-</span>help  show this help message <span class="token operator">and</span> exit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>请注意，程序名称（无论从参数确定<code>sys.argv[0]</code>还是从<code>prog=</code>参数确定）都可用于使用<code>%(prog)s</code>格式说明符来帮助消息。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'myprogram'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token string">'foo of the %(prog)s program'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>print_help<span class="token punctuation">(</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> myprogram <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token operator">-</span>foo FOO<span class="token punctuation">]</span>

optional arguments<span class="token punctuation">:</span>
 <span class="token operator">-</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token operator">-</span>help  show this help message <span class="token operator">and</span> exit
 <span class="token operator">-</span><span class="token operator">-</span>foo FOO   foo of the myprogram program<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="2-2-Usage"><a href="#2-2-Usage" class="headerlink" title="2.2. Usage"></a>2.2. Usage</h3><p>默认情况下，根据它包含的参数<code>ArgumentParser</code>计算使用情况消息：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'PROG'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> nargs<span class="token operator">=</span><span class="token string">'?'</span><span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token string">'foo help'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">,</span> nargs<span class="token operator">=</span><span class="token string">'+'</span><span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token string">'bar help'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>print_help<span class="token punctuation">(</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> PROG <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token operator">-</span>foo <span class="token punctuation">[</span>FOO<span class="token punctuation">]</span><span class="token punctuation">]</span> bar <span class="token punctuation">[</span>bar <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>

positional arguments<span class="token punctuation">:</span>
 bar          bar help

optional arguments<span class="token punctuation">:</span>
 <span class="token operator">-</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token operator">-</span>help   show this help message <span class="token operator">and</span> exit
 <span class="token operator">-</span><span class="token operator">-</span>foo <span class="token punctuation">[</span>FOO<span class="token punctuation">]</span>  foo help<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>默认消息可以用<code>usage=</code>关键字参数覆盖：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'PROG'</span><span class="token punctuation">,</span> usage<span class="token operator">=</span><span class="token string">'%(prog)s [options]'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> nargs<span class="token operator">=</span><span class="token string">'?'</span><span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token string">'foo help'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">,</span> nargs<span class="token operator">=</span><span class="token string">'+'</span><span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token string">'bar help'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>print_help<span class="token punctuation">(</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> PROG <span class="token punctuation">[</span>options<span class="token punctuation">]</span>

positional arguments<span class="token punctuation">:</span>
 bar          bar help

optional arguments<span class="token punctuation">:</span>
 <span class="token operator">-</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token operator">-</span>help   show this help message <span class="token operator">and</span> exit
 <span class="token operator">-</span><span class="token operator">-</span>foo <span class="token punctuation">[</span>FOO<span class="token punctuation">]</span>  foo help<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>%(prog)s</code>格式说明可填写程序名称您的使用情况的信息。</p>
<h3 id="2-3-Description"><a href="#2-3-Description" class="headerlink" title="2.3. Description"></a>2.3. Description</h3><p>大多数对<code>ArgumentParser</code>构造函数的调用将使用<code>description=</code>关键字参数。这个观点简要介绍了程序的功能和工作原理。在帮助消息中，说明显示在命令行用法字符串和各种参数的帮助消息之间：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>description<span class="token operator">=</span><span class="token string">'A foo that bars'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>print_help<span class="token punctuation">(</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> argparse<span class="token punctuation">.</span>py <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span>

A foo that bars

optional arguments<span class="token punctuation">:</span>
 <span class="token operator">-</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token operator">-</span>help  show this help message <span class="token operator">and</span> exit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>默认情况下，描述将被行包裹，以便它符合给定的空间。要改变这种行为，请参阅 formatter_class 参数。</p>
<h3 id="2-4-epilog"><a href="#2-4-epilog" class="headerlink" title="2.4. epilog"></a>2.4. epilog</h3><p>一些程序喜欢在参数描述之后显示程序的附加描述。这样的文本可以使用<code>epilog=</code>参数来指定<code>ArgumentParser</code>：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     description<span class="token operator">=</span><span class="token string">'A foo that bars'</span><span class="token punctuation">,</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     epilog<span class="token operator">=</span><span class="token string">"And that's how you'd foo a bar"</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>print_help<span class="token punctuation">(</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> argparse<span class="token punctuation">.</span>py <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span>

A foo that bars

optional arguments<span class="token punctuation">:</span>
 <span class="token operator">-</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token operator">-</span>help  show this help message <span class="token operator">and</span> exit

And that<span class="token string">'s how you'</span>d foo a bar<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>与描述参数一样，<code>epilog=</code>文本在默认情况下是行包装的，但此行为可以使用 formatter_class 参数进行调整<code>ArgumentParser</code>。</p>
<h3 id="2-5-父母（parents）"><a href="#2-5-父母（parents）" class="headerlink" title="2.5. 父母（parents）"></a>2.5. 父母（parents）</h3><p>有时，几个解析器共享一组通用参数。可以使用具有所有共享参数并传递给<code>parents=</code>参数的单个解析器，而不是重复这些参数的定义<code>ArgumentParser</code>。<code>parents=</code>参数获取<code>ArgumentParser</code>对象列表，收集所有位置和可选操作，并将这些操作添加到<code>ArgumentParser</code>正在构建的对象中：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parent_parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>add_help<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parent_parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--parent'</span><span class="token punctuation">,</span> type<span class="token operator">=</span>int<span class="token punctuation">)</span>

<span class="token operator">>></span><span class="token operator">></span> foo_parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>parents<span class="token operator">=</span><span class="token punctuation">[</span>parent_parser<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> foo_parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> foo_parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'--parent'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'XXX'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>foo<span class="token operator">=</span><span class="token string">'XXX'</span><span class="token punctuation">,</span> parent<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token operator">>></span><span class="token operator">></span> bar_parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>parents<span class="token operator">=</span><span class="token punctuation">[</span>parent_parser<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> bar_parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--bar'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> bar_parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'--bar'</span><span class="token punctuation">,</span> <span class="token string">'YYY'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>bar<span class="token operator">=</span><span class="token string">'YYY'</span><span class="token punctuation">,</span> parent<span class="token operator">=</span>None<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>请注意，大多数父解析器将指定<code>add_help=False</code>。否则，<code>ArgumentParser</code>将会看到两个<code>-h/--help</code>选项（一个在父项中，一个在子项中）并引发错误。</p>
<p>注意</p>
<p>在传递<code>parents=</code>它们之前，您必须完全初始化解析器。如果在子解析器之后更改父解析器，那些更改将不会反映到子解析器中。</p>
<h3 id="2-6-formatter-class"><a href="#2-6-formatter-class" class="headerlink" title="2.6. formatter_class"></a>2.6. formatter_class</h3><p><code>ArgumentParser</code>对象允许通过指定备用格式类来自定义帮助格式。目前，有三个这样的类：</p>
<pre><code>class argparse.RawDescriptionHelpFormatterclass argparse.RawTextHelpFormatterclass argparse.ArgumentDefaultsHelpFormatter</code></pre><p>前两个允许更多的控制如何显示文本描述，而最后一个自动添加有关参数默认值的信息。</p>
<p>默认情况下，<code>ArgumentParser</code>对象将命令行帮助消息中的描述和结语文本换行：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     prog<span class="token operator">=</span><span class="token string">'PROG'</span><span class="token punctuation">,</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     description<span class="token operator">=</span><span class="token triple-quoted-string string">'''this description
...         was indented weird
...             but that is okay'''</span><span class="token punctuation">,</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     epilog<span class="token operator">=</span><span class="token triple-quoted-string string">'''
...             likewise for this epilog whose whitespace will
...         be cleaned up and whose words will be wrapped
...         across a couple lines'''</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>print_help<span class="token punctuation">(</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> PROG <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span>

this description was indented weird but that <span class="token keyword">is</span> okay

optional arguments<span class="token punctuation">:</span>
 <span class="token operator">-</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token operator">-</span>help  show this help message <span class="token operator">and</span> exit

likewise <span class="token keyword">for</span> this epilog whose whitespace will be cleaned up <span class="token operator">and</span> whose words
will be wrapped across a couple lines<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>RawDescriptionHelpFormatter</code>作为<code>formatter_class=</code>指示描述和epilog已经被正确格式化并且不应该被行包裹传递：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     prog<span class="token operator">=</span><span class="token string">'PROG'</span><span class="token punctuation">,</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     formatter_class<span class="token operator">=</span>argparse<span class="token punctuation">.</span>RawDescriptionHelpFormatter<span class="token punctuation">,</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     description<span class="token operator">=</span>textwrap<span class="token punctuation">.</span>dedent<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''\
...         Please do not mess up this text!
...         --------------------------------
...             I have indented it
...             exactly the way
...             I want it
...         '''</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>print_help<span class="token punctuation">(</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> PROG <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span>

Please do <span class="token operator">not</span> mess up this text!
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
   I have indented it
   exactly the way
   I want it

optional arguments<span class="token punctuation">:</span>
 <span class="token operator">-</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token operator">-</span>help  show this help message <span class="token operator">and</span> exit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>RawTextHelpFormatter</code> 为各种帮助文本保留空格，包括参数说明。</p>
<p>其他格式化程序类可用，<code>ArgumentDefaultsHelpFormatter</code>将添加有关每个参数的默认值的信息：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     prog<span class="token operator">=</span><span class="token string">'PROG'</span><span class="token punctuation">,</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     formatter_class<span class="token operator">=</span>argparse<span class="token punctuation">.</span>ArgumentDefaultsHelpFormatter<span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> type<span class="token operator">=</span>int<span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token number">42</span><span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token string">'FOO!'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">,</span> nargs<span class="token operator">=</span><span class="token string">'*'</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token string">'BAR!'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>print_help<span class="token punctuation">(</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> PROG <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token operator">-</span>foo FOO<span class="token punctuation">]</span> <span class="token punctuation">[</span>bar <span class="token punctuation">[</span>bar <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">]</span>

positional arguments<span class="token punctuation">:</span>
 bar         BAR! <span class="token punctuation">(</span>default<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

optional arguments<span class="token punctuation">:</span>
 <span class="token operator">-</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token operator">-</span>help  show this help message <span class="token operator">and</span> exit
 <span class="token operator">-</span><span class="token operator">-</span>foo FOO   FOO! <span class="token punctuation">(</span>default<span class="token punctuation">:</span> <span class="token number">42</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="2-7-prefix-chars"><a href="#2-7-prefix-chars" class="headerlink" title="2.7. prefix_chars"></a>2.7. prefix_chars</h3><p>大多数命令行选项将<code>-</code>用作前缀，例如<code>-f/--foo</code>。需要支持不同或额外前缀字符的解析器，例如像<code>+f</code>or 这样的选项<code>/foo</code>，可以使用<code>prefix_chars=</code>ArgumentParser构造函数的参数来指定它们：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'PROG'</span><span class="token punctuation">,</span> prefix_chars<span class="token operator">=</span><span class="token string">'-+'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'+f'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'++bar'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token string">'+f X ++bar Y'</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>bar<span class="token operator">=</span><span class="token string">'Y'</span><span class="token punctuation">,</span> f<span class="token operator">=</span><span class="token string">'X'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>该<code>prefix_chars=</code>参数默认为<code>'-'</code>。提供一组不包含的字符<code>-</code>将导致<code>-f/--foo</code>选项不被允许。</p>
<h3 id="2-8-fromfile-prefix-chars"><a href="#2-8-fromfile-prefix-chars" class="headerlink" title="2.8. fromfile_prefix_chars"></a>2.8. fromfile_prefix_chars</h3><p>有时候，例如当处理特别长的参数列表时，将参数列表保存在文件中而不是在命令行输入它可能是有意义的。如果将<code>fromfile_prefix_chars=</code>参数赋予<code>ArgumentParser</code>构造函数，那么以任何指定字符开头的参数将被视为文件，并将被它们包含的参数替换。例如：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">with</span> open<span class="token punctuation">(</span><span class="token string">'args.txt'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fp<span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     fp<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'-f\nbar'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>fromfile_prefix_chars<span class="token operator">=</span><span class="token string">'@'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'-f'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'-f'</span><span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'@args.txt'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>f<span class="token operator">=</span><span class="token string">'bar'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>从文件中读取的参数必须默认为每行一个（但也可参见<code>convert_arg_line_to_args()</code>），并且将它们视为与命令行中原始文件引用参数位于同一位置。所以在上面的例子中，表达式<code>['-f', 'foo', '@args.txt']</code>被认为等同于表达式<code>['-f', 'foo', '-f', 'bar']</code>。</p>
<p><code>fromfile_prefix_chars=</code>参数默认为<code>None</code>，这意味着争论就永远不会文件引用处理。</p>
<h3 id="2-9-argument-default"><a href="#2-9-argument-default" class="headerlink" title="2.9. argument_default"></a>2.9. argument_default</h3><p>一般来说，参数默认值是通过传递一个默认值来指定的，<code>add_argument()</code>或者通过调用<code>set_defaults()</code>具有一组特定名称/值对的方法来指定参数默认值。然而，有时候，为参数指定单个解析器范围的默认值可能很有用。这可以通过传递<code>argument_default=</code>关键字参数来完成<code>ArgumentParser</code>。例如，要全局禁止<code>parse_args()</code>调用中的属性创建，我们提供<code>argument_default=SUPPRESS</code>：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>argument_default<span class="token operator">=</span>argparse<span class="token punctuation">.</span>SUPPRESS<span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">,</span> nargs<span class="token operator">=</span><span class="token string">'?'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'BAR'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>bar<span class="token operator">=</span><span class="token string">'BAR'</span><span class="token punctuation">,</span> foo<span class="token operator">=</span><span class="token string">'1'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="2-10-conflict-handler"><a href="#2-10-conflict-handler" class="headerlink" title="2.10. conflict_handler"></a>2.10. conflict_handler</h3><p><code>ArgumentParser</code>对象不允许具有相同选项字符串的两个操作。默认情况下，<code>ArgumentParser</code>如果尝试使用已在使用的选项字符串创建参数，则会引发异常：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'PROG'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'-f'</span><span class="token punctuation">,</span> <span class="token string">'--foo'</span><span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token string">'old foo help'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token string">'new foo help'</span><span class="token punctuation">)</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
 <span class="token punctuation">.</span><span class="token punctuation">.</span>
ArgumentError<span class="token punctuation">:</span> argument <span class="token operator">-</span><span class="token operator">-</span>foo<span class="token punctuation">:</span> conflicting option string<span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token operator">-</span><span class="token operator">-</span>foo<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>有时（例如，在使用父母（parents）时），使用相同的选项字符串覆盖任何较旧的参数可能会很有用。为了获得这种行为，该值<code>'resolve'</code>可以提供给<code>conflict_handler=</code>参数<code>ArgumentParser</code>：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'PROG'</span><span class="token punctuation">,</span> conflict_handler<span class="token operator">=</span><span class="token string">'resolve'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'-f'</span><span class="token punctuation">,</span> <span class="token string">'--foo'</span><span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token string">'old foo help'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token string">'new foo help'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>print_help<span class="token punctuation">(</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> PROG <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span>f FOO<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token operator">-</span>foo FOO<span class="token punctuation">]</span>

optional arguments<span class="token punctuation">:</span>
 <span class="token operator">-</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token operator">-</span>help  show this help message <span class="token operator">and</span> exit
 <span class="token operator">-</span>f FOO      old foo help
 <span class="token operator">-</span><span class="token operator">-</span>foo FOO   new foo help<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>请注意，如果<code>ArgumentParser</code>对象的所有选项字符串都被覆盖，对象只会删除一个操作。因此，在上面的示例中，旧的<code>-f/--foo</code>操作保留为<code>-f</code>操作，因为只有<code>--foo</code>选项字符串被覆盖。</p>
<h3 id="2-11-add-help"><a href="#2-11-add-help" class="headerlink" title="2.11. add_help"></a>2.11. add_help</h3><p>默认情况下，ArgumentParser 对象添加一个选项，该选项只显示解析器的帮助消息。例如，考虑一个名为<code>myprogram.py</code>包含以下代码的文件：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> argparse
parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token string">'foo help'</span><span class="token punctuation">)</span>
args <span class="token operator">=</span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果<code>-h</code>或<code>--help</code>在命令行中提供，则会打印参数帮助器的帮助：</p>
<pre class="line-numbers language-python"><code class="language-python">$ python myprogram<span class="token punctuation">.</span>py <span class="token operator">-</span><span class="token operator">-</span>help
usage<span class="token punctuation">:</span> myprogram<span class="token punctuation">.</span>py <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token operator">-</span>foo FOO<span class="token punctuation">]</span>

optional arguments<span class="token punctuation">:</span>
 <span class="token operator">-</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token operator">-</span>help  show this help message <span class="token operator">and</span> exit
 <span class="token operator">-</span><span class="token operator">-</span>foo FOO   foo help<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>偶尔，禁用此帮助选项可能会有用。这可以通过<code>False</code>作为<code>add_help=</code>参数传递给<code>ArgumentParser</code>：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'PROG'</span><span class="token punctuation">,</span> add_help<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token string">'foo help'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>print_help<span class="token punctuation">(</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> PROG <span class="token punctuation">[</span><span class="token operator">-</span><span class="token operator">-</span>foo FOO<span class="token punctuation">]</span>

optional arguments<span class="token punctuation">:</span>
 <span class="token operator">-</span><span class="token operator">-</span>foo FOO  foo help<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>帮助选项通常是<code>-h/--help</code>。这是一个例外，如果<code>prefix_chars=</code>指定并且不包括<code>-</code>，在这种情况下<code>-h</code>并且<code>--help</code>不是有效的选项。在这种情况下，第一个字符<code>prefix_chars</code>用于作为帮助选项的前缀：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'PROG'</span><span class="token punctuation">,</span> prefix_chars<span class="token operator">=</span><span class="token string">'+/'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>print_help<span class="token punctuation">(</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> PROG <span class="token punctuation">[</span><span class="token operator">+</span>h<span class="token punctuation">]</span>

optional arguments<span class="token punctuation">:</span>
  <span class="token operator">+</span>h<span class="token punctuation">,</span> <span class="token operator">+</span><span class="token operator">+</span>help  show this help message <span class="token operator">and</span> exit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="3-add-argument（）方法"><a href="#3-add-argument（）方法" class="headerlink" title="3. add_argument（）方法"></a>3. add_argument（）方法</h2><pre><code>ArgumentParser.add_argument(name or flags...[, action][, nargs][, const][, default][, type][, choices][, required][, help][, metavar][, dest])</code></pre><p>定义如何解析单个命令行参数。下面的每个参数都有自己的更详细的描述，但总之它们是：</p>
<ul>
<li><p>name or falgs - 名称或选项字符串列表，例如<code>foo</code>或<code>-f, --foo</code>。</p>
</li>
<li><p>action  - 在命令行中遇到此参数时要采取的基本操作类型。</p>
</li>
<li><p>nargs  - 应该使用的命令行参数的数量。</p>
</li>
<li><p>const  - 一些动作和 nargs 选择所需的常量值。</p>
</li>
<li><p>default  - 如果参数在命令行中不存在，则生成的值。</p>
</li>
<li><p>type  - 命令行参数应该转换的类型。</p>
</li>
<li><p>choices（选项） - 一个允许参数值的容器。</p>
</li>
<li><p>required（必需） - 是否可以省略命令行选项（仅限可选项）。</p>
</li>
<li><p>help（帮助） - 对参数做了什么的简要描述。</p>
</li>
<li><p>metavar  - 用法消息中参数的名称。</p>
</li>
<li><p>dest  - 要添加到返回对象的属性的名称<code>parse_args()</code>。</p>
</li>
</ul>
<p>以下部分描述如何使用每个这些。</p>
<h3 id="3-1-名称或标志（name-or-flags）"><a href="#3-1-名称或标志（name-or-flags）" class="headerlink" title="3.1. 名称或标志（name or flags）"></a>3.1. 名称或标志（<strong>name or flags</strong>）</h3><p><code>add_argument()</code>方法必须知道是否需要一个可选参数（如<code>-f</code>or或）<code>--foo</code>，或位置参数（如文件名列表）。<code>add_argument()</code>因此传递给它的第一个参数必须是一系列标志或一个简单的参数名称。例如，可以创建一个可选参数，如下所示：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'-f'</span><span class="token punctuation">,</span> <span class="token string">'--foo'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>而一个位置参数可以创建如下：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>当<code>parse_args()</code>被调用时，可选参数将由<code>-</code>前缀标识，其余参数将被假定为位置：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'PROG'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'-f'</span><span class="token punctuation">,</span> <span class="token string">'--foo'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'BAR'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>bar<span class="token operator">=</span><span class="token string">'BAR'</span><span class="token punctuation">,</span> foo<span class="token operator">=</span>None<span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'BAR'</span><span class="token punctuation">,</span> <span class="token string">'--foo'</span><span class="token punctuation">,</span> <span class="token string">'FOO'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>bar<span class="token operator">=</span><span class="token string">'BAR'</span><span class="token punctuation">,</span> foo<span class="token operator">=</span><span class="token string">'FOO'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> <span class="token string">'FOO'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> PROG <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span>f FOO<span class="token punctuation">]</span> bar
PROG<span class="token punctuation">:</span> error<span class="token punctuation">:</span> too few arguments<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="3-2-action"><a href="#3-2-action" class="headerlink" title="3.2. action"></a>3.2. action</h3><p><code>ArgumentParser</code>对象将命令行参数与操作相关联。这些操作可以完成任何与它们相关的命令行参数的任何操作，尽管大多数操作只是为返回的对象添加一个属性<code>parse_args()</code>。<code>action</code>关键字参数指定的命令行参数应该如何处理。提供的操作是：</p>
<ul>
<li><p><code>'store'</code> - 这只是存储参数的值。这是默认操作。例如：parser = argparse.ArgumentParser（）&gt;&gt;&gt; parser.add_argument（’ -  foo’）&gt;&gt;&gt; parser.parse_args（’ -  foo 1’.split（））命名空间（foo =’1’）</p>
</li>
<li><p><code>'store_const'</code> - 这存储由 const 关键字参数指定的值。该<code>'store_const'</code>操作最常用于指定某种标志的可选参数。例如：</p>
</li>
</ul>
<blockquote>
<p>parser = argparse.ArgumentParser() &gt;&gt;&gt; parser.add_argument(‘–foo’, action=’store_const’, const=42) &gt;&gt;&gt; parser.parse_args(‘–foo’) Namespace(foo=42) </p>
</blockquote>
<ul>
<li><p><code>'store_true'</code>和<code>'store_false'</code>-这些都是特殊情况下<code>'store_const'</code>使用，用于存储值<code>True</code>和<code>False</code>分别。此外，他们创造的默认值<code>False</code>，并<code>True</code>分别。例如：parser = argparse.ArgumentParser（）&gt;&gt;&gt; parser.add_argument（’ -  foo’，action =’store_true’）&gt;&gt;&gt; parser.add_argument（’ -  bar’，action =’store_false’）&gt;&gt; &gt; parser.add_argument（’ -  baz’，action =’store_false’）&gt;&gt;&gt; parser.parse_args（’ -  foo –bar’.split（））命名空间（bar = False，baz = True，foo = True ）</p>
</li>
<li><p><code>'append'</code> - 这存储一个列表，并将每个参数值附加到列表中。这对于允许多次指定选项很有用。用法示例：</p>
</li>
</ul>
<blockquote>
<p>parser = argparse.ArgumentParser() &gt;&gt;&gt; parser.add_argument(‘–foo’, action=’append’) &gt;&gt;&gt; parser.parse_args(‘–foo 1 –foo 2’.split()) Namespace(foo=’1’, ‘2’) </p>
</blockquote>
<ul>
<li><p><code>'append_const'</code> - 存储一个列表，并将 const 关键字参数指定的值附加到列表中。（请注意，const关键字参数默认为<code>None</code>。）<code>'append_const'</code>当多个参数需要将常量存储到同一列表时，该操作通常很有用。例如：parser = argparse.ArgumentParser（）&gt;&gt;&gt; parser.add_argument（’ -  str’，dest =’types’，action =’append_const’，const = str）&gt;&gt;&gt; parser.add_argument（’ -  int ‘，dest =’types’，action =’append_const’，const = int）&gt;&gt;&gt; parser.parse_args（’ -  str –int’.split（））命名空间（types = &lt;type’str’&gt;，type ‘int’&gt;）</p>
</li>
<li><p><code>'count'</code> - 这会计算关键字参数发生的次数。例如，这对增加冗长级别很有用：</p>
</li>
</ul>
<blockquote>
<p>parser = argparse.ArgumentParser() &gt;&gt;&gt; parser.add_argument(‘–verbose’, ‘-v’, action=’count’) &gt;&gt;&gt; parser.parse_args(‘-vvv’) Namespace(verbose=3) </p>
</blockquote>
<ul>
<li><p><code>'help'</code> - 这将显示当前解析器中所有选项的完整帮助消息，然后退出。默认情况下，帮助操作会自动添加到解析器中。请参阅<code>ArgumentParser</code>有关如何创建输出的详细信息。</p>
</li>
<li><p><code>'version'</code>- 这需要调用<code>add_argument()</code>中的<code>version=</code>关键字参数，并打印版本信息并在调用时退出：</p>
</li>
</ul>
<blockquote>
<p>import argparse &gt;&gt;&gt; parser = argparse.ArgumentParser(prog=’PROG’) &gt;&gt;&gt; parser.add_argument(‘–version’, action=’version’, version=’%(prog)s 2.0’) &gt;&gt;&gt; parser.parse_args(‘–version’) PROG 2.0 </p>
</blockquote>
<p>您也可以通过传递一个 Action 子类或其他实现相同接口的对象来指定一个任意的动作。推荐的方法是扩展<code>Action</code>，覆盖<code>__call__</code>方法和可选的<code>__init__</code>方法。</p>
<p>自定义操作的示例：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">class</span> <span class="token class-name">FooAction</span><span class="token punctuation">(</span>argparse<span class="token punctuation">.</span>Action<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> option_strings<span class="token punctuation">,</span> dest<span class="token punctuation">,</span> nargs<span class="token operator">=</span>None<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>         <span class="token keyword">if</span> nargs <span class="token keyword">is</span> <span class="token operator">not</span> None<span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>             <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">"nargs not allowed"</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>         super<span class="token punctuation">(</span>FooAction<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>option_strings<span class="token punctuation">,</span> dest<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">def</span> <span class="token function">__call__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> parser<span class="token punctuation">,</span> namespace<span class="token punctuation">,</span> values<span class="token punctuation">,</span> option_string<span class="token operator">=</span>None<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>         <span class="token keyword">print</span> <span class="token string">'%r %r %r'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>namespace<span class="token punctuation">,</span> values<span class="token punctuation">,</span> option_string<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>         setattr<span class="token punctuation">(</span>namespace<span class="token punctuation">,</span> self<span class="token punctuation">.</span>dest<span class="token punctuation">,</span> values<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> action<span class="token operator">=</span>FooAction<span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">,</span> action<span class="token operator">=</span>FooAction<span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> args <span class="token operator">=</span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token string">'1 --foo 2'</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>bar<span class="token operator">=</span>None<span class="token punctuation">,</span> foo<span class="token operator">=</span>None<span class="token punctuation">)</span> <span class="token string">'1'</span> None
Namespace<span class="token punctuation">(</span>bar<span class="token operator">=</span><span class="token string">'1'</span><span class="token punctuation">,</span> foo<span class="token operator">=</span>None<span class="token punctuation">)</span> <span class="token string">'2'</span> <span class="token string">'--foo'</span>
<span class="token operator">>></span><span class="token operator">></span> args
Namespace<span class="token punctuation">(</span>bar<span class="token operator">=</span><span class="token string">'1'</span><span class="token punctuation">,</span> foo<span class="token operator">=</span><span class="token string">'2'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>有关更多详情，请参阅<code>Action</code>。</p>
<h3 id="3-3-nargs"><a href="#3-3-nargs" class="headerlink" title="3.3. nargs"></a>3.3. nargs</h3><p>ArgumentParser 对象通常会将单个命令行参数与要执行的单个操作相关联。<code>nargs</code>关键字参数与单个动作不同数量的命令行参数。支持的值是：</p>
<ul>
<li><p><code>N</code>（一个整数）。<code>N</code>命令行中的参数将汇集到一个列表中。例如：parser = argparse.ArgumentParser（）&gt;&gt;&gt; parser.add_argument（’ -  foo’，nargs = 2）&gt;&gt;&gt; parser.add_argument（’bar’，nargs = 1）&gt;&gt;&gt; parser.parse_args（’ c –foo a b’.split（））命名空间（bar =’c’，foo =’a’，’b’）注意，<code>nargs=1</code>生成一个项目的列表。这与项目自行生成的默认值不同。</p>
</li>
<li><p><code>'?'</code>。如有可能，将从命令行中消耗一个参数，并将其作为单个项目生成。如果没有命令行参数，则会生成默认值。请注意，对于可选参数，还有一个额外的情况 - 选项字符串存在，但后面没有命令行参数。在这种情况下，const 的值将被生成。一些例子来说明这一点：</p>
</li>
</ul>
<blockquote>
<p>parser = argparse.ArgumentParser() &gt;&gt;&gt; parser.add_argument(‘–foo’, nargs=’?’, const=’c’, default=’d’) &gt;&gt;&gt; parser.add_argument(‘bar’, nargs=’?’, default=’d’) &gt;&gt;&gt; parser.parse_args(‘XX’, ‘–foo’, ‘YY’) Namespace(bar=’XX’, foo=’YY’) &gt;&gt;&gt; parser.parse_args(‘XX’, ‘–foo’) Namespace(bar=’XX’, foo=’c’) &gt;&gt;&gt; parser.parse_args([]) Namespace(bar=’d’, foo=’d’) </p>
</blockquote>
<p>关于<code>nargs='?'</code>更常见的用途之一是允许可选的输入和输出文件：</p>
<blockquote>
<p>parser = argparse.ArgumentParser() &gt;&gt;&gt; parser.add_argument(‘infile’, nargs=’?’, type=argparse.FileType(‘r’), …                     default=sys.stdin) &gt;&gt;&gt; parser.add_argument(‘outfile’, nargs=’?’, type=argparse.FileType(‘w’), …                     default=sys.stdout) &gt;&gt;&gt; parser.parse_args(‘input.txt’, ‘output.txt’) Namespace(infile=&lt;open file ‘input.txt’, mode ‘r’ at 0x…&gt;,           outfile=&lt;open file ‘output.txt’, mode ‘w’ at 0x…&gt;) &gt;&gt;&gt; parser.parse_args([]) Namespace(infile=&lt;open file ‘<stdin>‘, mode ‘r’ at 0x…&gt;,           outfile=&lt;open file ‘<stdout>‘, mode ‘w’ at 0x…&gt;) </stdout></stdin></p>
</blockquote>
<ul>
<li><p><code>'*'</code>。所有存在的命令行参数都被收集到一个列表中。请注意，具有多个位置参数通常没有多大意义<code>nargs='*'</code>，但可以使用多个可选参数<code>nargs='*'</code>。例如：parser = argparse.ArgumentParser（）&gt;&gt;&gt; parser.add_argument（’ -  foo’，nargs =’<em>‘）&gt;&gt;&gt; parser.add_argument（’ -  bar’，nargs =’</em>‘）&gt;&gt; &gt; parser.add_argument（’baz’，nargs =’*’）&gt;&gt;&gt; parser.parse_args（’ab –foo xy –bar 1 2’.split（））命名空间（bar =’1’，’2’ ，baz =’a’，’b’，foo =’x’，’y’）</p>
</li>
<li><p><code>'+'</code>。就像<code>'*'</code>现在所有的命令行参数都被收集到一个列表中。此外，如果没有至少一个命令行参数，则会生成错误消息。例如：</p>
</li>
</ul>
<blockquote>
<p>parser = argparse.ArgumentParser(prog=’PROG’) &gt;&gt;&gt; parser.add_argument(‘foo’, nargs=’+’) &gt;&gt;&gt; parser.parse_args(‘a’, ‘b’) Namespace(foo=’a’, ‘b’) &gt;&gt;&gt; parser.parse_args([]) usage: PROG -h foo foo … PROG: error: too few arguments </p>
</blockquote>
<ul>
<li><p><code>argparse.REMAINDER</code>。所有其余的命令行参数都被收集到一个列表中。这对于派发到其他命令行实用程序的命令行实用程序通常很有用：parser = argparse.ArgumentParser（prog =’PROG’）&gt;&gt;&gt; parser.add_argument（’ -  foo’）&gt;&gt;&gt; parser.add_argument（’command ‘）&gt;&gt;&gt; parser.add_argument（’args’，nargs = argparse.REMAINDER）&gt;&gt;&gt; print parser.parse_args（’ -  foo B cmd –arg1 XX ZZ’.split（））命名空间（args =’ - -arg1’，’XX’，’ZZ’，command =’cmd’，foo =’B’）如果<code>nargs</code>未提供关键字参数，则消耗的参数数目由动作决定。通常这意味着一个命令行参数将被消耗，并且会生成一个单独的项目（不是列表）。常量的<code>const</code>论点<code>add_argument()</code>用于保存不从命令行读取的常量值，但是对于各种<code>ArgumentParser</code>操作是必需的。它最常见的两种用途是：</p>
</li>
<li><p>当<code>add_argument()</code>用<code>action='store_const'</code>或者调用<code>action='append_const'</code>。这些操作将该<code>const</code>值添加到<code>parse_args()</code>返回的对象的某个属性中。有关示例，请参阅操作说明。</p>
</li>
<li><p>当<code>add_argument()</code>用选项字符串（如<code>-f</code>or <code>--foo</code>）和<code>nargs='?'</code>。这会创建一个可选参数，后面跟零个或一个命令行参数。在解析命令行时，如果选项字符串遇到后面没有命令行参数，<code>const</code>则会取而代之的是值。有关示例，请参阅 nargs 说明。</p>
</li>
</ul>
<p>使用<code>'store_const'</code>和<code>'append_const'</code>操作时，<code>const</code>必须给出关键字参数。对于其他操作，它默认为<code>None</code>。</p>
<h3 id="3-5-默认（default）"><a href="#3-5-默认（default）" class="headerlink" title="3.5. 默认（default）"></a>3.5. 默认（default）</h3><p>所有可选参数和一些位置参数可以在命令行中省略。如果命令行参数不存在，那么其值缺省为的<code>default</code>关键字参数<code>add_argument()</code>将<code>None</code>指定应使用的值。对于可选参数，当选项字符串不存在于命令行时，将使用该<code>default</code>值：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token number">42</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>foo<span class="token operator">=</span><span class="token string">'2'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>foo<span class="token operator">=</span><span class="token number">42</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果<code>default</code>值是一个字符串，则解析器会将该值解析为一个命令行参数。特别是，在设置<code>Namespace</code>返回值的属性之前，解析器应用任何类型转换参数（如果提供的话）。否则，解析器按原样使用该值：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--length'</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token string">'10'</span><span class="token punctuation">,</span> type<span class="token operator">=</span>int<span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--width'</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token number">10.5</span><span class="token punctuation">,</span> type<span class="token operator">=</span>int<span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>length<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">10.5</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>对于 nargs 等于<code>?</code>或者<code>*</code>的位置参数，当没有命令行参数存在时使用<code>default</code>值：</p>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token operator">></span><span class="token operator">></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span><span class="token function">ArgumentParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">></span><span class="token operator">></span><span class="token operator">></span> parser<span class="token punctuation">.</span><span class="token function">add_argument</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> nargs<span class="token operator">=</span><span class="token string">'?'</span><span class="token punctuation">,</span> <span class="token keyword">default</span><span class="token operator">=</span><span class="token number">42</span><span class="token punctuation">)</span>
<span class="token operator">></span><span class="token operator">></span><span class="token operator">></span> parser<span class="token punctuation">.</span><span class="token function">parse_args</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token function">Namespace</span><span class="token punctuation">(</span>foo<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">)</span>
<span class="token operator">></span><span class="token operator">></span><span class="token operator">></span> parser<span class="token punctuation">.</span><span class="token function">parse_args</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token function">Namespace</span><span class="token punctuation">(</span>foo<span class="token operator">=</span><span class="token number">42</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果命令行参数不存在，则提供<code>default=argparse.SUPPRESS</code>不导致添加属性：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> default<span class="token operator">=</span>argparse<span class="token punctuation">.</span>SUPPRESS<span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>foo<span class="token operator">=</span><span class="token string">'1'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="3-6-类型（type）"><a href="#3-6-类型（type）" class="headerlink" title="3.6. 类型（type）"></a>3.6. 类型（type）</h3><p>默认情况下，<code>ArgumentParser</code>对象以简单的字符串读取命令行参数。但是，通常命令行字符串应该被解释为另一种类型，如一个<code>float</code>或<code>int</code>。所述<code>type</code>的关键字<code>add_argument()</code>参数允许执行任何必要的类型检查和类型转换。常见的内置类型和函数可以直接用作<code>type</code>参数的值：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> type<span class="token operator">=</span>int<span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">,</span> type<span class="token operator">=</span>file<span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token string">'2 temp.txt'</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>bar<span class="token operator">=</span><span class="token operator">&lt;</span>open file <span class="token string">'temp.txt'</span><span class="token punctuation">,</span> mode <span class="token string">'r'</span> at 0x<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span><span class="token punctuation">,</span> foo<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>有关当将<code>type</code>参数应用于默认参数的信息，请参阅 default 关键字参数部分。</p>
<p>为了简化各种类型的文件的使用，argparse 模块提供了工厂文件类型，该文件类型包含对象的参数<code>mode=</code>和<code>bufsize=</code>参数<code>file</code>。例如，<code>FileType('w')</code>可以用来创建一个可写文件：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">,</span> type<span class="token operator">=</span>argparse<span class="token punctuation">.</span>FileType<span class="token punctuation">(</span><span class="token string">'w'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'out.txt'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>bar<span class="token operator">=</span><span class="token operator">&lt;</span>open file <span class="token string">'out.txt'</span><span class="token punctuation">,</span> mode <span class="token string">'w'</span> at 0x<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>type=</code> 可以采用任何可以调用单个字符串参数的可调用方法，并返回转换后的值：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">def</span> <span class="token function">perfect_square</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     value <span class="token operator">=</span> int<span class="token punctuation">(</span>string<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     sqrt <span class="token operator">=</span> math<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">if</span> sqrt <span class="token operator">!=</span> int<span class="token punctuation">(</span>sqrt<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>         msg <span class="token operator">=</span> <span class="token string">"%r is not a perfect square"</span> <span class="token operator">%</span> string
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>         <span class="token keyword">raise</span> argparse<span class="token punctuation">.</span>ArgumentTypeError<span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">return</span> value
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'PROG'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> type<span class="token operator">=</span>perfect_square<span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'9'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>foo<span class="token operator">=</span><span class="token number">9</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'7'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> PROG <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> foo
PROG<span class="token punctuation">:</span> error<span class="token punctuation">:</span> argument foo<span class="token punctuation">:</span> <span class="token string">'7'</span> <span class="token keyword">is</span> <span class="token operator">not</span> a perfect square<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>选择关键字参数对于类型检查器来说可能更为方便，它只需检查一系列值：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'PROG'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> type<span class="token operator">=</span>int<span class="token punctuation">,</span> choices<span class="token operator">=</span>xrange<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'7'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>foo<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'11'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> PROG <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">}</span>
PROG<span class="token punctuation">:</span> error<span class="token punctuation">:</span> argument foo<span class="token punctuation">:</span> invalid choice<span class="token punctuation">:</span> <span class="token number">11</span> <span class="token punctuation">(</span>choose <span class="token keyword">from</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>请参阅选项部分了解更多详情。</p>
<h3 id="3-7-选择（choices）"><a href="#3-7-选择（choices）" class="headerlink" title="3.7.选择（choices）"></a>3.7.选择（choices）</h3><p>一些命令行参数应该从一组受限制的值中选择。这些可以通过将容器对象作为<em>选择</em>关键字参数传递给<code>add_argument()</code>。在解析命令行时，将检查参数值，如果参数不是可接受值之一，则会显示错误消息：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'game.py'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'move'</span><span class="token punctuation">,</span> choices<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'rock'</span><span class="token punctuation">,</span> <span class="token string">'paper'</span><span class="token punctuation">,</span> <span class="token string">'scissors'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'rock'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>move<span class="token operator">=</span><span class="token string">'rock'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'fire'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> game<span class="token punctuation">.</span>py <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">{</span>rock<span class="token punctuation">,</span>paper<span class="token punctuation">,</span>scissors<span class="token punctuation">}</span>
game<span class="token punctuation">.</span>py<span class="token punctuation">:</span> error<span class="token punctuation">:</span> argument move<span class="token punctuation">:</span> invalid choice<span class="token punctuation">:</span> <span class="token string">'fire'</span> <span class="token punctuation">(</span>choose <span class="token keyword">from</span> <span class="token string">'rock'</span><span class="token punctuation">,</span>
<span class="token string">'paper'</span><span class="token punctuation">,</span> <span class="token string">'scissors'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>请注意，在执行任何类型转换后，将检查包含在<em>选择</em>容器中的内容，以便<em>选择</em>容器中的对象类型应与指定的类型匹配：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'doors.py'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'door'</span><span class="token punctuation">,</span> type<span class="token operator">=</span>int<span class="token punctuation">,</span> choices<span class="token operator">=</span>range<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'3'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>door<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'4'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> doors<span class="token punctuation">.</span>py <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span>
doors<span class="token punctuation">.</span>py<span class="token punctuation">:</span> error<span class="token punctuation">:</span> argument door<span class="token punctuation">:</span> invalid choice<span class="token punctuation">:</span> <span class="token number">4</span> <span class="token punctuation">(</span>choose <span class="token keyword">from</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>任何支持<code>in</code>操作符的对象都可以作为<em>选择</em>值传递，因此所有<code>dict</code>对象，<code>set</code>对象，自定义容器等都是受支持的。</p>
<h3 id="3-8-需求（required）"><a href="#3-8-需求（required）" class="headerlink" title="3.8. 需求（required）"></a>3.8. 需求（required）</h3><p>通常情况下，<code>argparse</code>模块假定标志像<code>-f</code>和<code>--bar</code>表示<em>可选</em>参数，这些参数在命令行中总是可以省略。要创建<em>所需</em>的选项，<code>True</code>可以为<code>required=</code>关键字参数指定<code>add_argument()</code>：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> required<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> <span class="token string">'BAR'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>foo<span class="token operator">=</span><span class="token string">'BAR'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> argparse<span class="token punctuation">.</span>py <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token operator">-</span>foo FOO<span class="token punctuation">]</span>
argparse<span class="token punctuation">.</span>py<span class="token punctuation">:</span> error<span class="token punctuation">:</span> option <span class="token operator">-</span><span class="token operator">-</span>foo <span class="token keyword">is</span> required<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如示例所示，如果某个选项被标记为<code>required</code>，<code>parse_args()</code>则会在命令行中不存在该选项时报告错误。</p>
<p>注意</p>
<p>所需的选项通常被认为是不好的形式，因为用户期望<em>选项</em>是<em>可选的</em>，因此应尽可能避免。</p>
<h3 id="3-9-帮助（help）"><a href="#3-9-帮助（help）" class="headerlink" title="3.9. 帮助（help）"></a>3.9. 帮助（help）</h3><p><code>help</code>值是一个包含参数简要描述的字符串。当用户请求帮助时（通常通过使用<code>-h</code>或<code>--help</code>通过命令行），这些<code>help</code>描述将与每个参数一起显示：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'frobble'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">,</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>                     help<span class="token operator">=</span><span class="token string">'foo the bars before frobbling'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">,</span> nargs<span class="token operator">=</span><span class="token string">'+'</span><span class="token punctuation">,</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>                     help<span class="token operator">=</span><span class="token string">'one of the bars to be frobbled'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'-h'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> frobble <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token operator">-</span>foo<span class="token punctuation">]</span> bar <span class="token punctuation">[</span>bar <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>

positional arguments<span class="token punctuation">:</span>
 bar     one of the bars to be frobbled

optional arguments<span class="token punctuation">:</span>
 <span class="token operator">-</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token operator">-</span>help  show this help message <span class="token operator">and</span> exit
 <span class="token operator">-</span><span class="token operator">-</span>foo   foo the bars before frobbling<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这些<code>help</code>字符串可以包含各种格式说明符，以避免重复诸如程序名称或参数默认值之类的内容。可用符包括节目名称，<code>%(prog)s</code>和大多数<code>add_argument()</code>关键字参数，如<code>%(default)s</code>，<code>%(type)s</code>等：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'frobble'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">,</span> nargs<span class="token operator">=</span><span class="token string">'?'</span><span class="token punctuation">,</span> type<span class="token operator">=</span>int<span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token number">42</span><span class="token punctuation">,</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>                     help<span class="token operator">=</span><span class="token string">'the bar to %(prog)s (default: %(default)s)'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>print_help<span class="token punctuation">(</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> frobble <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">[</span>bar<span class="token punctuation">]</span>

positional arguments<span class="token punctuation">:</span>
 bar     the bar to frobble <span class="token punctuation">(</span>default<span class="token punctuation">:</span> <span class="token number">42</span><span class="token punctuation">)</span>

optional arguments<span class="token punctuation">:</span>
 <span class="token operator">-</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token operator">-</span>help  show this help message <span class="token operator">and</span> exit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>argparse</code>支持通过将某些选项的帮助条目设置<code>help</code>的值为<code>argparse.SUPPRESS</code>：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'frobble'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> help<span class="token operator">=</span>argparse<span class="token punctuation">.</span>SUPPRESS<span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>print_help<span class="token punctuation">(</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> frobble <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span>

optional arguments<span class="token punctuation">:</span>
  <span class="token operator">-</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token operator">-</span>help  show this help message <span class="token operator">and</span> exit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="3-10-metavar"><a href="#3-10-metavar" class="headerlink" title="3.10. metavar"></a>3.10. metavar</h3><p>当<code>ArgumentParser</code>生成帮助消息时，需要一些方法来引用每个预期的参数。默认情况下，ArgumentParser 对象使用 dest 值作为每个对象的“名称”。默认情况下，对于位置参数操作，dest 值直接使用，对于可选参数操作，dest 值是大写的。所以，一个单独的位置参数<code>dest='bar'</code>将被称为<code>bar</code>。<code>--foo</code>单个命令行参数后面的单个可选参数将被称为<code>FOO</code>。一个例子：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token string">'X --foo Y'</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>bar<span class="token operator">=</span><span class="token string">'X'</span><span class="token punctuation">,</span> foo<span class="token operator">=</span><span class="token string">'Y'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>print_help<span class="token punctuation">(</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span>  <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token operator">-</span>foo FOO<span class="token punctuation">]</span> bar

positional arguments<span class="token punctuation">:</span>
 bar

optional arguments<span class="token punctuation">:</span>
 <span class="token operator">-</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token operator">-</span>help  show this help message <span class="token operator">and</span> exit
 <span class="token operator">-</span><span class="token operator">-</span>foo FOO<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>另一个名称可以用以下方式指定<code>metavar</code>：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> metavar<span class="token operator">=</span><span class="token string">'YYY'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">,</span> metavar<span class="token operator">=</span><span class="token string">'XXX'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token string">'X --foo Y'</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>bar<span class="token operator">=</span><span class="token string">'X'</span><span class="token punctuation">,</span> foo<span class="token operator">=</span><span class="token string">'Y'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>print_help<span class="token punctuation">(</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span>  <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token operator">-</span>foo YYY<span class="token punctuation">]</span> XXX

positional arguments<span class="token punctuation">:</span>
 XXX

optional arguments<span class="token punctuation">:</span>
 <span class="token operator">-</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token operator">-</span>help  show this help message <span class="token operator">and</span> exit
 <span class="token operator">-</span><span class="token operator">-</span>foo YYY<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>请注意，<code>metavar</code>只会更改<em>显示的</em>名称 - <code>parse_args()</code>对象上属性的名称仍由 dest 值确定。</p>
<p>不同的值<code>nargs</code>可能会导致 metavar 被多次使用。提供一个元组来<code>metavar</code>为每个参数指定一个不同的显示：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'PROG'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'-x'</span><span class="token punctuation">,</span> nargs<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> nargs<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> metavar<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'baz'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>print_help<span class="token punctuation">(</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> PROG <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span>x X X<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token operator">-</span>foo bar baz<span class="token punctuation">]</span>

optional arguments<span class="token punctuation">:</span>
 <span class="token operator">-</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token operator">-</span>help     show this help message <span class="token operator">and</span> exit
 <span class="token operator">-</span>x X X
 <span class="token operator">-</span><span class="token operator">-</span>foo bar baz<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="3-11-dest"><a href="#3-11-dest" class="headerlink" title="3.11. dest"></a>3.11. dest</h3><p>大多数<code>ArgumentParser</code>操作都会添加一些值作为返回对象的属性<code>parse_args()</code>。该属性的名称由<code>dest</code>关键字参数确定<code>add_argument()</code>。对于位置参数操作，<code>dest</code>通常作为第一个参数提供给<code>add_argument()</code>：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'XXX'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>bar<span class="token operator">=</span><span class="token string">'XXX'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>对于可选的参数操作，<code>dest</code>通常从选项字符串推断值。通过取第一个长选项字符串并剥离初始字符串来<code>ArgumentParser</code>生成<code>dest</code>值。如果没有提供长选项<code>--</code>字符串，则<code>dest</code>将通过剥离初始字符从第一个短选项<code>-</code>字符串派生。任何内部<code>-</code>字符都将转换为<code>_</code>字符以确保该字符串是有效的属性名称。下面的例子说明了这种行为：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'-f'</span><span class="token punctuation">,</span> <span class="token string">'--foo-bar'</span><span class="token punctuation">,</span> <span class="token string">'--foo'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'-x'</span><span class="token punctuation">,</span> <span class="token string">'-y'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token string">'-f 1 -x 2'</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>foo_bar<span class="token operator">=</span><span class="token string">'1'</span><span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token string">'2'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token string">'--foo 1 -y 2'</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>foo_bar<span class="token operator">=</span><span class="token string">'1'</span><span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token string">'2'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>dest</code> 允许提供自定义属性名称：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> dest<span class="token operator">=</span><span class="token string">'bar'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token string">'--foo XXX'</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>bar<span class="token operator">=</span><span class="token string">'XXX'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="3-12-行动类（Action-classes）"><a href="#3-12-行动类（Action-classes）" class="headerlink" title="3.12. 行动类（Action classes）"></a>3.12. 行动类（Action classes）</h3><p>Action 类实现 Action API，这是一个可调用的函数，它返回一个可从命令行处理参数的可调用对象。任何遵循此 API 的对象都可以作为<code>action</code>参数传递给<code>add_argument()</code>。</p>
<pre><code>class argparse.Action(option_strings, dest, nargs=None, const=None, default=None, type=None, choices=None, required=False, help=None, metavar=None)</code></pre><p>ArgumentParser 使用 Action 对象来表示解析来自命令行的一个或多个字符串的单个参数所需的信息。Action 类必须接受两个位置参数以及传递给<code>ArgumentParser.add_argument()</code>除<code>action</code>它自身以外的任何关键字参数。</p>
<p>Action 的实例（或任何可调用的<code>action</code>参数的返回值）应该具有定义的属性“dest”，“option_strings”，“default”，“type”，“required”，“help”等。确定这些属性的最简单方法是调用<code>Action.__init__</code>。</p>
<p>动作实例应该是可调用的，所以子类必须重载该<code>__call__</code>方法，该方法应该接受四个参数：</p>
<ul>
<li><p><code>parser</code>  - 包含此操作的 ArgumentParser 对象。</p>
</li>
<li><p><code>namespace</code>- 将被<code>parse_args()</code>返回的<code>Namespace</code>对象。大多数操作都使用<code>setattr()</code>对象添加属性。</p>
</li>
<li><p><code>values</code> - 关联的命令行参数，应用了任何类型的转换。类型转换用 type 关键字参数指定<code>add_argument()</code>。</p>
</li>
<li><p><code>option_string</code> - 用于调用此操作的选项字符串。<code>option_string</code>参数是可选的，如果该动作与位置参数相关联，则该参数将不存在。</p>
</li>
</ul>
<p><code>__call__</code>方法可能会执行任意操作，但通常会在<code>namespace</code>基于<code>dest</code>和<code>values</code>上设置属性。</p>
<h2 id="4-parse-args（）方法"><a href="#4-parse-args（）方法" class="headerlink" title="4. parse_args（）方法"></a>4. parse_args（）方法</h2><pre><code>ArgumentParser.parse_args(args=None, namespace=None)</code></pre><p>将参数字符串转换为对象并将它们分配为命名空间的属性。返回填充的命名空间。</p>
<p>先前的调用<code>add_argument()</code>确切地确定创建了哪些对象以及如何分配对象。有关<code>add_argument()</code>详细信息，请参阅文档。</p>
<p>默认情况下，参数字符串从中获取<code>sys.argv</code>，以及<code>Namespace</code>为属性创建一个新的空对象。</p>
<h3 id="4-1-选项值语法"><a href="#4-1-选项值语法" class="headerlink" title="4.1. 选项值语法"></a>4.1. 选项值语法</h3><p><code>parse_args()</code>方法支持多种指定选项值的方式（如果需要的话）。在最简单的情况下，该选项及其值作为两个单独的参数传递：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'PROG'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'-x'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'-x'</span><span class="token punctuation">,</span> <span class="token string">'X'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>foo<span class="token operator">=</span>None<span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token string">'X'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> <span class="token string">'FOO'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>foo<span class="token operator">=</span><span class="token string">'FOO'</span><span class="token punctuation">,</span> x<span class="token operator">=</span>None<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>对于长选项（名称长于单个字符的选项），该选项和值也可以作为单个命令行参数传递，<code>=</code>用于将它们分开：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'--foo=FOO'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>foo<span class="token operator">=</span><span class="token string">'FOO'</span><span class="token punctuation">,</span> x<span class="token operator">=</span>None<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>对于短期选项（选项只有一个字符长），选项和它的值可以连接起来：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'-xX'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>foo<span class="token operator">=</span>None<span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token string">'X'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>只要使用一个前<code>-</code>缀，几个简短的选项就可以结合在一起，只要最后一个选项（或者它们中没有一个）需要一个值：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'PROG'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'-x'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'-y'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'-z'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'-xyzZ'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> z<span class="token operator">=</span><span class="token string">'Z'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="4-2-无效的参数"><a href="#4-2-无效的参数" class="headerlink" title="4.2. 无效的参数"></a>4.2. 无效的参数</h3><p>在解析命令行时，<code>parse_args()</code>检查各种错误，包括不明确的选项，无效的类型，无效的选项，错误的位置参数数量等。遇到此类错误时，它会退出并将错误与使用消息一起打印出来：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'PROG'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> type<span class="token operator">=</span>int<span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">,</span> nargs<span class="token operator">=</span><span class="token string">'?'</span><span class="token punctuation">)</span>

<span class="token operator">>></span><span class="token operator">></span> <span class="token comment" spellcheck="true"># invalid type</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> <span class="token string">'spam'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> PROG <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token operator">-</span>foo FOO<span class="token punctuation">]</span> <span class="token punctuation">[</span>bar<span class="token punctuation">]</span>
PROG<span class="token punctuation">:</span> error<span class="token punctuation">:</span> argument <span class="token operator">-</span><span class="token operator">-</span>foo<span class="token punctuation">:</span> invalid int value<span class="token punctuation">:</span> <span class="token string">'spam'</span>

<span class="token operator">>></span><span class="token operator">></span> <span class="token comment" spellcheck="true"># invalid option</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'--bar'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> PROG <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token operator">-</span>foo FOO<span class="token punctuation">]</span> <span class="token punctuation">[</span>bar<span class="token punctuation">]</span>
PROG<span class="token punctuation">:</span> error<span class="token punctuation">:</span> no such option<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token operator">-</span>bar

<span class="token operator">>></span><span class="token operator">></span> <span class="token comment" spellcheck="true"># wrong number of arguments</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'spam'</span><span class="token punctuation">,</span> <span class="token string">'badger'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> PROG <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token operator">-</span>foo FOO<span class="token punctuation">]</span> <span class="token punctuation">[</span>bar<span class="token punctuation">]</span>
PROG<span class="token punctuation">:</span> error<span class="token punctuation">:</span> extra arguments found<span class="token punctuation">:</span> badger<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="4-3-包含的参数"><a href="#4-3-包含的参数" class="headerlink" title="4.3. 包含的参数-"></a>4.3. 包含的参数<code>-</code></h3><p>每当用户明确犯了错误，<code>parse_args()</code>方法都会尝试给出错误，但有些情况本质上是不明确的。例如，命令行参数<code>-1</code>可能是尝试指定选项或试图提供位置参数。这里的<code>parse_args()</code>方法很谨慎：位置参数可能只有<code>-</code>在它们看起来像负数时才会开始，解析器中没有任何选项看起来像负数：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'PROG'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'-x'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> nargs<span class="token operator">=</span><span class="token string">'?'</span><span class="token punctuation">)</span>

<span class="token operator">>></span><span class="token operator">></span> <span class="token comment" spellcheck="true"># no negative number options, so -1 is a positional argument</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'-x'</span><span class="token punctuation">,</span> <span class="token string">'-1'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>foo<span class="token operator">=</span>None<span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token string">'-1'</span><span class="token punctuation">)</span>

<span class="token operator">>></span><span class="token operator">></span> <span class="token comment" spellcheck="true"># no negative number options, so -1 and -5 are positional arguments</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'-x'</span><span class="token punctuation">,</span> <span class="token string">'-1'</span><span class="token punctuation">,</span> <span class="token string">'-5'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>foo<span class="token operator">=</span><span class="token string">'-5'</span><span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token string">'-1'</span><span class="token punctuation">)</span>

<span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'PROG'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'-1'</span><span class="token punctuation">,</span> dest<span class="token operator">=</span><span class="token string">'one'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> nargs<span class="token operator">=</span><span class="token string">'?'</span><span class="token punctuation">)</span>

<span class="token operator">>></span><span class="token operator">></span> <span class="token comment" spellcheck="true"># negative number options present, so -1 is an option</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'-1'</span><span class="token punctuation">,</span> <span class="token string">'X'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>foo<span class="token operator">=</span>None<span class="token punctuation">,</span> one<span class="token operator">=</span><span class="token string">'X'</span><span class="token punctuation">)</span>

<span class="token operator">>></span><span class="token operator">></span> <span class="token comment" spellcheck="true"># negative number options present, so -2 is an option</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'-2'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> PROG <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span> ONE<span class="token punctuation">]</span> <span class="token punctuation">[</span>foo<span class="token punctuation">]</span>
PROG<span class="token punctuation">:</span> error<span class="token punctuation">:</span> no such option<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">2</span>

<span class="token operator">>></span><span class="token operator">></span> <span class="token comment" spellcheck="true"># negative number options present, so both -1s are options</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'-1'</span><span class="token punctuation">,</span> <span class="token string">'-1'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> PROG <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span> ONE<span class="token punctuation">]</span> <span class="token punctuation">[</span>foo<span class="token punctuation">]</span>
PROG<span class="token punctuation">:</span> error<span class="token punctuation">:</span> argument <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span> expected one argument<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果您的位置参数必须以开头<code>-</code>且看起来不像负数，那么您可以插入伪参数<code>'--'</code>，该伪参数<code>parse_args()</code>指示之后的所有内容都是位置参数：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'--'</span><span class="token punctuation">,</span> <span class="token string">'-f'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>foo<span class="token operator">=</span><span class="token string">'-f'</span><span class="token punctuation">,</span> one<span class="token operator">=</span>None<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="4-4-参数缩写（前缀匹配）"><a href="#4-4-参数缩写（前缀匹配）" class="headerlink" title="4.4. 参数缩写（前缀匹配）"></a>4.4. 参数缩写（前缀匹配）</h3><p>如果缩写是明确的（前缀匹配唯一选项），<code>parse_args()</code>方法允许将长选项缩写为前缀：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'PROG'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'-bacon'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'-badger'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token string">'-bac MMM'</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>bacon<span class="token operator">=</span><span class="token string">'MMM'</span><span class="token punctuation">,</span> badger<span class="token operator">=</span>None<span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token string">'-bad WOOD'</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>bacon<span class="token operator">=</span>None<span class="token punctuation">,</span> badger<span class="token operator">=</span><span class="token string">'WOOD'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token string">'-ba BA'</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> PROG <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span>bacon BACON<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span>badger BADGER<span class="token punctuation">]</span>
PROG<span class="token punctuation">:</span> error<span class="token punctuation">:</span> ambiguous option<span class="token punctuation">:</span> <span class="token operator">-</span>ba could match <span class="token operator">-</span>badger<span class="token punctuation">,</span> <span class="token operator">-</span>bacon<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>对于可能产生多个选项的参数会产生错误。</p>
<h3 id="4-5-sys-argv之外"><a href="#4-5-sys-argv之外" class="headerlink" title="4.5. sys.argv之外"></a>4.5. <code>sys.argv</code>之外</h3><p>有时候可能有一个 ArgumentParser 解析其他的<code>sys.argv</code>参数。这可以通过传递一个<code>parse_args()</code>字符串列表来完成。这对于在交互式提示下进行测试很有用：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token string">'integers'</span><span class="token punctuation">,</span> metavar<span class="token operator">=</span><span class="token string">'int'</span><span class="token punctuation">,</span> type<span class="token operator">=</span>int<span class="token punctuation">,</span> choices<span class="token operator">=</span>xrange<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     nargs<span class="token operator">=</span><span class="token string">'+'</span><span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token string">'an integer in the range 0..9'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token string">'--sum'</span><span class="token punctuation">,</span> dest<span class="token operator">=</span><span class="token string">'accumulate'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_const'</span><span class="token punctuation">,</span> const<span class="token operator">=</span>sum<span class="token punctuation">,</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     default<span class="token operator">=</span>max<span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token string">'sum the integers (default: find the max)'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">,</span> <span class="token string">'4'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>accumulate<span class="token operator">=</span><span class="token operator">&lt;</span>built<span class="token operator">-</span><span class="token keyword">in</span> function max<span class="token operator">></span><span class="token punctuation">,</span> integers<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">,</span> <span class="token string">'4'</span><span class="token punctuation">,</span> <span class="token string">'--sum'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>accumulate<span class="token operator">=</span><span class="token operator">&lt;</span>built<span class="token operator">-</span><span class="token keyword">in</span> function sum<span class="token operator">></span><span class="token punctuation">,</span> integers<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="4-6-名称空间对象"><a href="#4-6-名称空间对象" class="headerlink" title="4.6. 名称空间对象"></a>4.6. 名称空间对象</h3><pre><code>class argparse.Namespace</code></pre><p>简单的类默认使用<code>parse_args()</code>创建一个对象来保存属性并返回它。</p>
<p>这个类是故意简单的，只是一个<code>object</code>具有可读字符串表示的子类。如果您更喜欢使用类似字典的属性视图，则可以使用标准的 Python 语言<code>vars()</code>：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> args <span class="token operator">=</span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> <span class="token string">'BAR'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> vars<span class="token punctuation">(</span>args<span class="token punctuation">)</span>
<span class="token punctuation">{</span><span class="token string">'foo'</span><span class="token punctuation">:</span> <span class="token string">'BAR'</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>将属性赋值给已经存在的对象<code>ArgumentParser</code>而不是新<code>Namespace</code>对象也可能是有用的。这可以通过指定<code>namespace=</code>关键字参数来实现：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">class</span> <span class="token class-name">C</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">pass</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">>></span><span class="token operator">></span> c <span class="token operator">=</span> C<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span>args<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> <span class="token string">'BAR'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> namespace<span class="token operator">=</span>c<span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> c<span class="token punctuation">.</span>foo
<span class="token string">'BAR'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="5-其他公用事业"><a href="#5-其他公用事业" class="headerlink" title="5. 其他公用事业"></a>5. 其他公用事业</h2><h3 id="5-1-子命令"><a href="#5-1-子命令" class="headerlink" title="5.1. 子命令"></a>5.1. 子命令</h3><pre><code>ArgumentParser.add_subparsers([title][, description][, prog][, parser_class][, action][, option_string][, dest][, help][, metavar])</code></pre><p>许多程序分割它们的功能分成若干子命令，例如，<code>svn</code>程序可以调用像子命令<code>svn checkout</code>，<code>svn update</code>和<code>svn commit</code>。当程序执行需要不同种类的命令行参数的几个不同功能时，以这种方式拆分功能可能是一个特别好的想法。<code>ArgumentParser</code>支持用该<code>add_subparsers()</code>方法创建这样的子命令。该<code>add_subparsers()</code>方法通常不带参数调用，并返回一个特殊的操作对象。该对象有一个方法，<code>add_parser()</code>它接受一个命令名和任何<code>ArgumentParser</code>构造函数参数，并返回一个<code>ArgumentParser</code>可以像平常一样修改的对象。</p>
<p>参数描述：</p>
<ul>
<li><p>title  - 帮助输出中的子分析器组的标题; 如果提供了描述，则默认为“子命令”，否则使用标题作为位置参数</p>
</li>
<li><p>描述（description） - 默认情况下帮助输出中的子分析器组的说明 <code>None</code> </p>
</li>
<li><p>prog  - 将使用子命令帮助显示的使用信息，默认情况下程序的名称和子分析器参数前的任何位置参数</p>
</li>
<li><p>parser_class  - 将用于创建子分析器实例的类，默认情况下是当前分析器的类（例如，ArgumentParser）</p>
</li>
<li><p>操作（action） - 在命令行中遇到此参数时要采取的基本操作类型</p>
</li>
<li><p>dest  - 存储子命令名称的属性名称; 默认情况下<code>None</code>不存储任何值</p>
</li>
<li><p>帮助（help） - 默认帮助帮助输出中的子分析器组 <code>None</code> </p>
</li>
<li><p>metavar  - 字符串在帮助中显示可用的子命令; 默认情况下它是<code>None</code>和呈现形式为{cmd1，cmd2，..}的子命令</p>
</li>
</ul>
<p>一些示例用法：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token comment" spellcheck="true"># create the top-level parser</span>
<span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'PROG'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token string">'foo help'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> subparsers <span class="token operator">=</span> parser<span class="token punctuation">.</span>add_subparsers<span class="token punctuation">(</span>help<span class="token operator">=</span><span class="token string">'sub-command help'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token comment" spellcheck="true"># create the parser for the "a" command</span>
<span class="token operator">>></span><span class="token operator">></span> parser_a <span class="token operator">=</span> subparsers<span class="token punctuation">.</span>add_parser<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token string">'a help'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser_a<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">,</span> type<span class="token operator">=</span>int<span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token string">'bar help'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token comment" spellcheck="true"># create the parser for the "b" command</span>
<span class="token operator">>></span><span class="token operator">></span> parser_b <span class="token operator">=</span> subparsers<span class="token punctuation">.</span>add_parser<span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token string">'b help'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser_b<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--baz'</span><span class="token punctuation">,</span> choices<span class="token operator">=</span><span class="token string">'XYZ'</span><span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token string">'baz help'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token comment" spellcheck="true"># parse some argument lists</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'12'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>bar<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">,</span> foo<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'--baz'</span><span class="token punctuation">,</span> <span class="token string">'Z'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>baz<span class="token operator">=</span><span class="token string">'Z'</span><span class="token punctuation">,</span> foo<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>请注意，返回的对象<code>parse_args()</code>将仅包含由命令行选择的主分析器和子分析器的属性（而不是任何其他子分析器）。因此，在上面的示例中，当指定<code>a</code>命令时，只有<code>foo</code>和<code>bar</code>属性存在，并且在<code>b</code>指定命令时，只有<code>foo</code>和<code>baz</code>属性存在。</p>
<p>同样，当从分析器请求帮助消息时，只会打印该特定分析器的帮助。帮助消息将不包括父解析器或同级解析器消息。（但是，每个子分析器命令的帮助消息可以通过提供<code>help=</code>参数给出<code>add_parser()</code>如上所示。）</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'--help'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> PROG <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token operator">-</span>foo<span class="token punctuation">]</span> <span class="token punctuation">{</span>a<span class="token punctuation">,</span>b<span class="token punctuation">}</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

positional arguments<span class="token punctuation">:</span>
  <span class="token punctuation">{</span>a<span class="token punctuation">,</span>b<span class="token punctuation">}</span>   sub<span class="token operator">-</span>command help
    a     a help
    b     b help

optional arguments<span class="token punctuation">:</span>
  <span class="token operator">-</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token operator">-</span>help  show this help message <span class="token operator">and</span> exit
  <span class="token operator">-</span><span class="token operator">-</span>foo   foo help

<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'--help'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> PROG a <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> bar

positional arguments<span class="token punctuation">:</span>
  bar     bar help

optional arguments<span class="token punctuation">:</span>
  <span class="token operator">-</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token operator">-</span>help  show this help message <span class="token operator">and</span> exit

<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'--help'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> PROG b <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token operator">-</span>baz <span class="token punctuation">{</span>X<span class="token punctuation">,</span>Y<span class="token punctuation">,</span>Z<span class="token punctuation">}</span><span class="token punctuation">]</span>

optional arguments<span class="token punctuation">:</span>
  <span class="token operator">-</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token operator">-</span>help     show this help message <span class="token operator">and</span> exit
  <span class="token operator">-</span><span class="token operator">-</span>baz <span class="token punctuation">{</span>X<span class="token punctuation">,</span>Y<span class="token punctuation">,</span>Z<span class="token punctuation">}</span>  baz help<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>add_subparsers()</code>方法还支持<code>title</code>和<code>description</code>关键字参数。当出现任何一个时，子分析器的命令将出现在帮助输出中的他们自己的组中。例如：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> subparsers <span class="token operator">=</span> parser<span class="token punctuation">.</span>add_subparsers<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">'subcommands'</span><span class="token punctuation">,</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>                                    description<span class="token operator">=</span><span class="token string">'valid subcommands'</span><span class="token punctuation">,</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>                                    help<span class="token operator">=</span><span class="token string">'additional help'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> subparsers<span class="token punctuation">.</span>add_parser<span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> subparsers<span class="token punctuation">.</span>add_parser<span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'-h'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span>  <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">{</span>foo<span class="token punctuation">,</span>bar<span class="token punctuation">}</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

optional arguments<span class="token punctuation">:</span>
  <span class="token operator">-</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token operator">-</span>help  show this help message <span class="token operator">and</span> exit

subcommands<span class="token punctuation">:</span>
  valid subcommands

  <span class="token punctuation">{</span>foo<span class="token punctuation">,</span>bar<span class="token punctuation">}</span>   additional help<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>处理子命令的一种特别有效的方式是将该<code>add_subparsers()</code>方法的使用与调用<code>set_defaults()</code>结合起来，以便每个子分析器知道应该执行哪个 Python 函数。例如：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token comment" spellcheck="true"># sub-command functions</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">def</span> <span class="token function">foo</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">print</span> args<span class="token punctuation">.</span>x <span class="token operator">*</span> args<span class="token punctuation">.</span>y
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">def</span> <span class="token function">bar</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">print</span> <span class="token string">'((%s))'</span> <span class="token operator">%</span> args<span class="token punctuation">.</span>z
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token comment" spellcheck="true"># create the top-level parser</span>
<span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> subparsers <span class="token operator">=</span> parser<span class="token punctuation">.</span>add_subparsers<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token comment" spellcheck="true"># create the parser for the "foo" command</span>
<span class="token operator">>></span><span class="token operator">></span> parser_foo <span class="token operator">=</span> subparsers<span class="token punctuation">.</span>add_parser<span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser_foo<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'-x'</span><span class="token punctuation">,</span> type<span class="token operator">=</span>int<span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser_foo<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'y'</span><span class="token punctuation">,</span> type<span class="token operator">=</span>float<span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser_foo<span class="token punctuation">.</span>set_defaults<span class="token punctuation">(</span>func<span class="token operator">=</span>foo<span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token comment" spellcheck="true"># create the parser for the "bar" command</span>
<span class="token operator">>></span><span class="token operator">></span> parser_bar <span class="token operator">=</span> subparsers<span class="token punctuation">.</span>add_parser<span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser_bar<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'z'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser_bar<span class="token punctuation">.</span>set_defaults<span class="token punctuation">(</span>func<span class="token operator">=</span>bar<span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token comment" spellcheck="true"># parse the args and call whatever function was selected</span>
<span class="token operator">>></span><span class="token operator">></span> args <span class="token operator">=</span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token string">'foo 1 -x 2'</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> args<span class="token punctuation">.</span>func<span class="token punctuation">(</span>args<span class="token punctuation">)</span>
<span class="token number">2.0</span>
<span class="token operator">>></span><span class="token operator">></span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token comment" spellcheck="true"># parse the args and call whatever function was selected</span>
<span class="token operator">>></span><span class="token operator">></span> args <span class="token operator">=</span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token string">'bar XYZYX'</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> args<span class="token punctuation">.</span>func<span class="token punctuation">(</span>args<span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token punctuation">(</span>XYZYX<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这样，您可以<code>parse_args()</code>在参数分析完成后调用适当的函数。将功能与这样的动作相关联通常是处理每个子分析器的不同动作的最简单方法。但是，如果需要检查被调用的子分析器的名称，则该调用的<code>dest</code>关键字参数<code>add_subparsers()</code>将起作用：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> subparsers <span class="token operator">=</span> parser<span class="token punctuation">.</span>add_subparsers<span class="token punctuation">(</span>dest<span class="token operator">=</span><span class="token string">'subparser_name'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> subparser1 <span class="token operator">=</span> subparsers<span class="token punctuation">.</span>add_parser<span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> subparser1<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'-x'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> subparser2 <span class="token operator">=</span> subparsers<span class="token punctuation">.</span>add_parser<span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> subparser2<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'y'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'frobble'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>subparser_name<span class="token operator">=</span><span class="token string">'2'</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">'frobble'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="5-2-FileType-对象"><a href="#5-2-FileType-对象" class="headerlink" title="5.2. FileType 对象"></a>5.2. FileType 对象</h3><pre><code>class argparse.FileType(mode='r', bufsize=None)</code></pre><p><code>FileType</code>工厂创建一个可以传递给类型参数的对象<code>ArgumentParser.add_argument()</code>。将<code>FileType</code>对象作为类型的参数将以具有所请求模式和缓冲区大小的文件的形式打开命令行参数：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--output'</span><span class="token punctuation">,</span> type<span class="token operator">=</span>argparse<span class="token punctuation">.</span>FileType<span class="token punctuation">(</span><span class="token string">'wb'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'--output'</span><span class="token punctuation">,</span> <span class="token string">'out'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>output<span class="token operator">=</span><span class="token operator">&lt;</span>open file <span class="token string">'out'</span><span class="token punctuation">,</span> mode <span class="token string">'wb'</span> at 0x<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>FileType 对象理解伪参数<code>'-'</code>并自动将其转换<code>sys.stdin</code>为可读<code>FileType</code>对象和<code>sys.stdout</code>可写<code>FileType</code>对象：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'infile'</span><span class="token punctuation">,</span> type<span class="token operator">=</span>argparse<span class="token punctuation">.</span>FileType<span class="token punctuation">(</span><span class="token string">'r'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'-'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>infile<span class="token operator">=</span><span class="token operator">&lt;</span>open file <span class="token string">'&lt;stdin>'</span><span class="token punctuation">,</span> mode <span class="token string">'r'</span> at 0x<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="5-3-参数组"><a href="#5-3-参数组" class="headerlink" title="5.3. 参数组"></a>5.3. 参数组</h3><pre><code>ArgumentParser.add_argument_group(title=None, description=None)</code></pre><p>默认情况下，<code>ArgumentParser</code>在显示帮助消息时将命令行参数分组为“位置参数”和“可选参数”。当比这个默认参数有一个更好的概念组参数时，可以使用该<code>add_argument_group()</code>方法创建适当的组：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'PROG'</span><span class="token punctuation">,</span> add_help<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> group <span class="token operator">=</span> parser<span class="token punctuation">.</span>add_argument_group<span class="token punctuation">(</span><span class="token string">'group'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> group<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token string">'foo help'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> group<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token string">'bar help'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>print_help<span class="token punctuation">(</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> PROG <span class="token punctuation">[</span><span class="token operator">-</span><span class="token operator">-</span>foo FOO<span class="token punctuation">]</span> bar

group<span class="token punctuation">:</span>
  bar    bar help
  <span class="token operator">-</span><span class="token operator">-</span>foo FOO  foo help<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>add_argument_group()</code>方法返回一个参数组对象，它有一个<code>add_argument()</code>像普通的方法<code>ArgumentParser</code>。当将参数添加到组中时，解析器将其视为与普通参数类似，但将参数显示在单独的组中以获取帮助消息。<code>add_argument_group()</code>方法接受可用于自定义此显示的<em>标题</em>和<em>描述</em>参数：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'PROG'</span><span class="token punctuation">,</span> add_help<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> group1 <span class="token operator">=</span> parser<span class="token punctuation">.</span>add_argument_group<span class="token punctuation">(</span><span class="token string">'group1'</span><span class="token punctuation">,</span> <span class="token string">'group1 description'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> group1<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token string">'foo help'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> group2 <span class="token operator">=</span> parser<span class="token punctuation">.</span>add_argument_group<span class="token punctuation">(</span><span class="token string">'group2'</span><span class="token punctuation">,</span> <span class="token string">'group2 description'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> group2<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--bar'</span><span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token string">'bar help'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>print_help<span class="token punctuation">(</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> PROG <span class="token punctuation">[</span><span class="token operator">-</span><span class="token operator">-</span>bar BAR<span class="token punctuation">]</span> foo

group1<span class="token punctuation">:</span>
  group1 description

  foo    foo help

group2<span class="token punctuation">:</span>
  group2 description

  <span class="token operator">-</span><span class="token operator">-</span>bar BAR  bar help<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>请注意，任何不在用户定义组中的参数将返回到通常的“位置参数”和“可选参数”部分。</p>
<h3 id="5-4-相互排斥"><a href="#5-4-相互排斥" class="headerlink" title="5.4. 相互排斥"></a>5.4. 相互排斥</h3><pre><code>ArgumentParser.add_mutually_exclusive_group(required=False)</code></pre><p>创建一个互斥组。<code>argparse</code>将确保在命令行中仅存在互斥组中的一个参数：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'PROG'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> group <span class="token operator">=</span> parser<span class="token punctuation">.</span>add_mutually_exclusive_group<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> group<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> group<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--bar'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_false'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'--foo'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>bar<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> foo<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'--bar'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>bar<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> foo<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> <span class="token string">'--bar'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> PROG <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token operator">-</span>foo <span class="token operator">|</span> <span class="token operator">-</span><span class="token operator">-</span>bar<span class="token punctuation">]</span>
PROG<span class="token punctuation">:</span> error<span class="token punctuation">:</span> argument <span class="token operator">-</span><span class="token operator">-</span>bar<span class="token punctuation">:</span> <span class="token operator">not</span> allowed <span class="token keyword">with</span> argument <span class="token operator">-</span><span class="token operator">-</span>foo<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>add_mutually_exclusive_group()</code>方法还接受<em>必需的</em>参数，以指示至少需要一个互斥参数：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>prog<span class="token operator">=</span><span class="token string">'PROG'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> group <span class="token operator">=</span> parser<span class="token punctuation">.</span>add_mutually_exclusive_group<span class="token punctuation">(</span>required<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> group<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> group<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--bar'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_false'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
usage<span class="token punctuation">:</span> PROG <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token operator">-</span>foo <span class="token operator">|</span> <span class="token operator">-</span><span class="token operator">-</span>bar<span class="token punctuation">)</span>
PROG<span class="token punctuation">:</span> error<span class="token punctuation">:</span> one of the arguments <span class="token operator">-</span><span class="token operator">-</span>foo <span class="token operator">-</span><span class="token operator">-</span>bar <span class="token keyword">is</span> required<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>请注意，目前互斥的参数组不支持<em>标题</em>和<em>描述</em><code>add_argument_group()</code>参数。</p>
<h3 id="5-5-解析器默认"><a href="#5-5-解析器默认" class="headerlink" title="5.5. 解析器默认"></a>5.5. 解析器默认</h3><pre><code>ArgumentParser.set_defaults(**kwargs)</code></pre><p>大多数情况下，通过检查命令行参数和参数操作来完全确定<code>parse_args()</code>返回的对象的属性。<code>set_defaults()</code>允许一些额外的属性被确定，而不需要检查命令行的添加：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> type<span class="token operator">=</span>int<span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>set_defaults<span class="token punctuation">(</span>bar<span class="token operator">=</span><span class="token number">42</span><span class="token punctuation">,</span> baz<span class="token operator">=</span><span class="token string">'badger'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'736'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>bar<span class="token operator">=</span><span class="token number">42</span><span class="token punctuation">,</span> baz<span class="token operator">=</span><span class="token string">'badger'</span><span class="token punctuation">,</span> foo<span class="token operator">=</span><span class="token number">736</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>请注意，解析器级别的默认值总是覆盖参数级别的默认值：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token string">'bar'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>set_defaults<span class="token punctuation">(</span>foo<span class="token operator">=</span><span class="token string">'spam'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Namespace<span class="token punctuation">(</span>foo<span class="token operator">=</span><span class="token string">'spam'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>解析器级别的默认值在使用多个解析器时可能特别有用。请参阅<code>add_subparsers()</code>方法以获取此类型的示例。</p>
<pre><code>ArgumentParser.get_default(dest)</code></pre><p>获取默认值的命名空间属性，为通过设置<code>add_argument()</code>或通过<code>set_defaults()</code>：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token string">'badger'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>get_default<span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>
<span class="token string">'badger'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="5-6-打印帮助"><a href="#5-6-打印帮助" class="headerlink" title="5.6. 打印帮助"></a>5.6. 打印帮助</h3><p>在大多数典型的应用程序中，<code>parse_args()</code>将负责格式化和打印任何使用或错误消息。但是，有几种格式化方法可用：</p>
<pre><code>ArgumentParser.print_usage(file=None)</code></pre><p>打印关于<code>ArgumentParser</code>应该如何在命令行上调用的简要说明。如果<em>文件</em>是<code>None</code>，假定<code>sys.stdout</code>。</p>
<pre><code>ArgumentParser.print_help(file=None)</code></pre><p>打印帮助信息，包括程序使用情况和关于使用注册的参数的信息<code>ArgumentParser</code>。如果<em>文件</em>是<code>None</code>，假定<code>sys.stdout</code>。</p>
<p>也有这些方法的变体，只是返回一个字符串，而不是打印它：</p>
<pre><code>ArgumentParser.format_usage()</code></pre><p>返回一个字符串，其中包含<code>ArgumentParser</code>应该如何在命令行上调用的简要说明。</p>
<pre><code>ArgumentParser.format_help()</code></pre><p>返回一个包含帮助信息的字符串，包括程序使用情况和有关使用<code>ArgumentParser</code>注册的参数的信息。</p>
<h3 id="5-7-部分解析"><a href="#5-7-部分解析" class="headerlink" title="5.7. 部分解析"></a>5.7. 部分解析</h3><pre><code>ArgumentParser.parse_known_args(args=None, namespace=None)</code></pre><p>有时脚本可能只解析一些命令行参数，将剩下的参数传递给另一个脚本或程序。在这些情况下，<code>parse_known_args()</code>方法可能很有用。它的工作方式很像，<code>parse_args()</code>只是在出现额外参数时不会产生错误。相反，它会返回一个包含已填充名称空间和剩余参数字符串列表的两个项目元组。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> parser<span class="token punctuation">.</span>parse_known_args<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'--foo'</span><span class="token punctuation">,</span> <span class="token string">'--badger'</span><span class="token punctuation">,</span> <span class="token string">'BAR'</span><span class="token punctuation">,</span> <span class="token string">'spam'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>Namespace<span class="token punctuation">(</span>bar<span class="token operator">=</span><span class="token string">'BAR'</span><span class="token punctuation">,</span> foo<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'--badger'</span><span class="token punctuation">,</span> <span class="token string">'spam'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>警告</p>
<p>前缀匹配规则适用于<code>parse_known_args()</code>。解析器可能会使用一个选项，即使它只是其中一个已知选项的前缀，而不是将它留在剩余的参数列表中。</p>
<h3 id="5-8-自定义文件解析"><a href="#5-8-自定义文件解析" class="headerlink" title="5.8. 自定义文件解析"></a>5.8. 自定义文件解析</h3><pre><code>ArgumentParser.convert_arg_line_to_args(arg_line)</code></pre><p>从文件读取的参数（请参阅构造<code>ArgumentParser</code>函数的 <em>fromfile_prefix_chars</em> 关键字参数）每行读取一个参数。<code>convert_arg_line_to_args()</code>可以替代更好的阅读。</p>
<p>该方法采用一个参数 <em>arg_line</em>，它是从参数文件中读取的字符串。它返回从此字符串解析的参数列表。按顺序从参数文件中读取每行一次的方法。</p>
<p>这种方法的有用重写是将每个空格分隔的单词作为参数对待：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">convert_arg_line_to_args</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> arg_line<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> arg_line<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="5-9-退出方法"><a href="#5-9-退出方法" class="headerlink" title="5.9. 退出方法"></a>5.9. 退出方法</h3><pre><code>ArgumentParser.exit(status=0, message=None)</code></pre><p>该方法终止程序，以指定的<em>状态</em>退出，并且如果给定，则在此之前打印<em>消息</em>。</p>
<pre><code>ArgumentParser.error(message)</code></pre><p>此方法将包含<em>消息</em>的使用消息打印到标准错误，并终止状态代码为2的程序。</p>
<h2 id="6-升级-optparse-代码"><a href="#6-升级-optparse-代码" class="headerlink" title="6. 升级 optparse 代码"></a>6. 升级 optparse 代码</h2><p>最初，<code>argparse</code>模块试图保持兼容性<code>optparse</code>。但是，<code>optparse</code>很难透明地进行扩展，尤其是需要支持新的<code>nargs=</code>说明符和更好的使用消息所需的更改。当<code>optparse</code>大多数内容都被复制粘贴或猴子修补时，尝试维持向后兼容性似乎不再实际可行。</p>
<p><code>argparse</code>模块以多种方式改进了标准库<code>optparse</code>模块，包括：</p>
<ul>
<li><p>处理位置参数。</p>
</li>
<li><p>支持子命令。</p>
</li>
<li><p>允许像<code>+</code>和<code>/</code>的替代选项前缀。</p>
</li>
<li><p>处理零个或多个以及一个或多个样式的参数。</p>
</li>
<li><p>生成更多信息的使用信息。</p>
</li>
<li><p>为定制<code>type</code>和<code>action</code>提供更简单的界面。</p>
</li>
</ul>
<p>从一个部分升级路径<code>optparse</code>到<code>argparse</code>：</p>
<ul>
<li><p>用<code>optparse.OptionParser.add_option()</code>调用替换所有<code>ArgumentParser.add_argument()</code>调用。</p>
</li>
<li><p>更换<code>(options, args) = parser.parse_args()</code>用<code>args = parser.parse_args()</code>并添加额外<code>ArgumentParser.add_argument()</code>的定位参数调用。请记住，之前调用的内容<code>options</code>现在<code>argparse</code>称为<code>args</code>。</p>
</li>
<li><p>使用<code>type</code>或<code>action</code>参数替换<code>callback_*</code>回调操作和关键字参数。</p>
</li>
<li><p>将<code>type</code>关键字参数的字符串名称替换为相应的类型对象（例如 int，float，complex 等）。</p>
</li>
<li><p>用<code>Namespace</code>更换<code>optparse.Values</code>和<code>optparse.OptionError</code>同时用<code>ArgumentError</code>更换<code>optparse.OptionValueError</code>。</p>
</li>
<li><p>用隐式参数替换字符串，例如<code>%default</code>或<code>%prog</code>使用标准 Python 语法来使用字典格式化字符串，也就是<code>%(default)s</code>和<code>%(prog)s</code>。</p>
</li>
<li><p>用<code>version</code>调用来替换 OptionParser 构造函数参数<code>parser.add_argument('--version', action='version', version='&lt;the version&gt;')</code>。</p>
</li>
</ul>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://jackhcc.github.io" rel="external nofollow noreferrer">杰克成</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://jackhcc.github.io/posts/blog-python18.html">https://jackhcc.github.io/posts/blog-python18.html</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="https://jackhcc.github.io" target="_blank">杰克成</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Argparse/">
                                    <span class="chip bg-color">Argparse</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/share/css/share.min.css">

<div id="article-share">
    
    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/reward/aliqr.png" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/reward/wxqr.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>
            
        </div>
    </div>

    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/gitalk/gitalk.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/css/my-gitalk.css">

<div class="card gitalk-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="gitalk-container" class="card-content"></div>
</div>

<script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/gitalk/gitalk.min.js"></script>
<script>
    let gitalk = new Gitalk({
        clientID: '3821a0bbb773038a51fc',
        clientSecret: '4b30b507d67ec5497ec0e77f43f80cb3e0d7dd3a',
        repo: 'JackHCC.github.io',
        owner: 'JackHCC',
        admin: "JackHCC",
        id: '2021-09-22T18-52-28',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });

    gitalk.render('gitalk-container');
</script>
    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/posts/paper-bs.html">
                    <div class="card-image">
                        
                        
                        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/featureimages/20.jpg" class="responsive-img" alt="Batch Size对神经网络训练的影响">
                        
                        <span class="card-title">Batch Size对神经网络训练的影响</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            Batch Size对神经网络训练的实验结果
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-09-23
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Paper/" class="post-category">
                                    Paper
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Batch-Size/">
                        <span class="chip bg-color">Batch Size</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/posts/Network-ARP.html">
                    <div class="card-image">
                        
                        
                        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/featureimages/4.jpg" class="responsive-img" alt="Network ARP协议">
                        
                        <span class="card-title">Network ARP协议</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            ARP协议图解
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-09-21
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Network/" class="post-category">
                                    Network
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/ARP/">
                        <span class="chip bg-color">ARP</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('4'),
            headingSelector: 'h1, h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>



    <footer class="page-footer bg-color">
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2020</span>
            <a href="https://jackhcc.github.io" target="_blank">杰克成</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">3591.2k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2020";
                    var startMonth = "2";
                    var startDate = "27";
                    var startHour = "6";
                    var startMinute = "30";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/JackHCC" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:jackcc0701@163.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>



    <a href="https://www.facebook.com/profile.php?id=100046343443643" class="tooltipped" target="_blank" data-tooltip="关注我的Facebook: https://www.facebook.com/profile.php?id=100046343443643" data-position="top" data-delay="50">
        <i class="fab fa-facebook-f"></i>
    </a>



    <a href="https://twitter.com/JackChe66021834" class="tooltipped" target="_blank" data-tooltip="关注我的Twitter: https://twitter.com/JackChe66021834" data-position="top" data-delay="50">
        <i class="fab fa-twitter"></i>
    </a>



    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=2508074836" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 2508074836" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>



    <a href="https://weibo.com/u/6885584679" class="tooltipped" target="_blank" data-tooltip="关注我的微博: https://weibo.com/u/6885584679" data-position="top" data-delay="50">
        <i class="fab fa-weibo"></i>
    </a>



    <a href="https://www.zhihu.com/people/8f8482f01f0d6a04e844efe32e0f0710" class="tooltipped" target="_blank" data-tooltip="关注我的知乎: https://www.zhihu.com/people/8f8482f01f0d6a04e844efe32e0f0710" data-position="top" data-delay="50">
        <i class="fab fa-zhihu1">知</i>
    </a>



</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/materialize/materialize.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/aos/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/js/matery.js"></script>

    <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas>
    <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script>
    <script type="text/javascript" src="/js/fireworks.js"></script>

    <script type="text/javascript">
        //只在桌面版网页启用特效
        var windowWidth = $(window).width();
        if (windowWidth > 768) {
            document.write('<script type="text/javascript" src="/js/sakura.js"><\/script>'); }
    </script>

    <!-- weather -->
	<script type="text/javascript">
	WIDGET = {FID: 'TToslpmkVO'}
	</script>
	<script type="text/javascript" src="https://apip.weatherdt.com/float/static/js/r.js?v=1111"></script>


    <!-- Global site tag (gtag.js) - Google Analytics -->


    <!-- Baidu Analytics -->

<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

    <!-- Baidu Push -->

    
    
    <script async src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/others/busuanzi.pure.mini.js"></script>
    

    
        <script src="//code.tidio.co/kqhlkxviiccyoa0czpfpu4ijuey9hfre.js"></script>
        <script> 
            $(document).ready(function () {
                setInterval(change_Tidio, 50);  
                function change_Tidio() { 
                    var tidio=$("#tidio-chat iframe");
                    if(tidio.css("display")=="block"&& $(window).width()>977 ){
                        document.getElementById("tidio-chat-iframe").style.bottom= ($("div#backTop.top-scroll").css("display")=="none" &&$(window).width()>977)>0? "-40px" : ($("div.toc-title").length&&$(window).width()>977)>0?"85px":"20px";   
                        document.getElementById("tidio-chat-iframe").style.right="-15px";   
                        document.getElementById("tidio-chat-iframe").style.height=parseInt(tidio.css("height"))>=520?"520px":tidio.css("height");
                        document.getElementById("tidio-chat-iframe").style.zIndex="997";
                    } 
                    else if(tidio.css("display")=="block"&&$(window).width()>601 &&$(window).width()<992 ){
                        document.getElementById("tidio-chat-iframe").style.bottom= ($("div#backTop.top-scroll").css("display")=="none" && 601< $(window).width()<992)>0? "-40px":"20px" ;   
                        document.getElementById("tidio-chat-iframe").style.right="-15px"; 
                        document.getElementById("tidio-chat-iframe").style.zIndex="997";
                    }
                    else if(tidio.css("display")=="block"&&$(window).width()<601 && parseInt(tidio.css("height"))<230){
                        document.getElementById("tidio-chat-iframe").style.bottom= ($("div#backTop.top-scroll").css("display")=="none" && $(window).width()<601)>0? "-10px":"45px" ;   
                        document.getElementById("tidio-chat-iframe").style.zIndex="997";
                    }
                    if( tidio.css("display")=="block"&&$(window).width()<601 && parseInt(tidio.css("height"))>=230){
                        document.getElementById("tidio-chat-iframe").style.zIndex="998";
                    }
                } 
            }); 
        </script>
    

    

    
    <script type="text/javascript" color="0,0,255"
        pointColor="0,0,255" opacity='0.7'
        zIndex="-1" count="99"
        src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/background/canvas-nest.js"></script>
    

    

    
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/background/ribbon-dynamic.js" async="async"></script>
    
    
    
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/instantpage/instantpage.js" type="module"></script>
    

        <script src="//cdn.jsdelivr.net/npm/js-base64/base64.min.js"></script>
        <script>
        $('a').each(function() {
          const $this = $(this);
          const href = $this.attr('href');
          if (href && href.match('^((http|https|thunder|qqdl|ed2k|Flashget|qbrowser|ftp|rtsp|mms)://)')) {
            const strs = href.split('/');
            if (strs.length >= 3) {
                const host = strs[2];
                if (host !== 'your_domain' || window.location.host) {
                    $this.attr('href', '/go.html?u='+Base64.encode(href)+'').attr('rel', 'external nofollow noopener noreferrer');
                    if (true) {
                        $this.attr('target', '_blank');
                    }
                }
            }
          }
        });
        </script><script>!function(e){var c=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function i(){for(var r=0;r<c.length;r++)t=c[r],0<=(n=t.getBoundingClientRect()).bottom&&0<=n.left&&n.top<=(e.innerHeight||document.documentElement.clientHeight)&&function(){var t,n,e,i,o=c[r];t=o,n=function(){c=c.filter(function(t){return o!==t})},e=new Image,i=t.getAttribute("data-original"),e.onload=function(){t.src=i,n&&n()},e.src=i}();var t,n}i(),e.addEventListener("scroll",function(){var t,n;t=i,n=e,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(n)},500)})}(this);</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script></body>

</html>

