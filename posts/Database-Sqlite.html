<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="SQLite详解, JackHCC">
    <meta name="description" content="SQLite数据库详解">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>SQLite详解 | JackHCC</title>
    <link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/favicon.png">

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/css/matery.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/css/my.css">
    
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/jquery/jquery.min.js"></script>
    
<meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="JackHCC" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-hopscotch.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper head-container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/me.jpg" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">JackHCC</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="" class="waves-effect waves-light">

      
      <i class="fas fa-list" style="zoom: 0.6;"></i>
      
      <span>Tools</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="https://creativecc.cn/" target="_blank" rel="noopener">
          
          <i class="fas fa-book" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>Creative工具导航</span>
        </a>
      </li>
      
      <li>
        <a href="https://blog.creativecc.cn/Arxiv-NLP-Reporter/" target="_blank" rel="noopener">
          
          <i class="fas fa-film" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>NLP每日论文</span>
        </a>
      </li>
      
      <li>
        <a href="http://chat.creativecc.cn/" target="_blank" rel="noopener">
          
          <i class="fas fa-music" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>RocketChat聊天室</span>
        </a>
      </li>
      
      <li>
        <a href="/contact">
          
          <i class="fas fa-comments" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>Contact留言板</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/me.jpg" class="logo-img circle responsive-img">
        
        <div class="logo-name">JackHCC</div>
        <div class="logo-desc">
            
            Make the world betterrrr!!!
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-list"></i>
			
			Tools
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>   
				
                  <a href="https://creativecc.cn/ " target="_blank" rel="noopener" style="margin-left:75px";>
				  
				   <i class="fa fas fa-book" style="position: absolute;left:50px" ></i>
			      
		          <span>Creative工具导航</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="https://blog.creativecc.cn/Arxiv-NLP-Reporter/ " target="_blank" rel="noopener" style="margin-left:75px";>
				  
				   <i class="fa fas fa-film" style="position: absolute;left:50px" ></i>
			      
		          <span>NLP每日论文</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="http://chat.creativecc.cn/ " target="_blank" rel="noopener" style="margin-left:75px";>
				  
				   <i class="fa fas fa-music" style="position: absolute;left:50px" ></i>
			      
		          <span>RocketChat聊天室</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/contact " style="margin-left:75px";>
				  
				   <i class="fa fas fa-comments" style="position: absolute;left:50px" ></i>
			      
		          <span>Contact留言板</span>
                  </a>
                </li>
               
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/JackHCC/JackHCC.github.io" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>

        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/JackHCC/JackHCC.github.io" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    
<script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/featureimages/7.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">SQLite详解</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 30px;
        bottom: 146px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/SQLite/">
                                <span class="chip bg-color">SQLite</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Database/" class="post-category">
                                Database
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-08-25
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2021-11-06
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    33.1k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    147 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>

        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="SQLite简介"><a href="#SQLite简介" class="headerlink" title="SQLite简介"></a>SQLite简介</h1><p>SQLite是嵌入式关系数据库管理系统。 它是独立的，无服务器的，零配置和事务性SQL数据库引擎。</p>
<p>SQLite官方网站是：<a href="http://www.sqlite.org/" target="_blank" rel="noopener">http://www.sqlite.org/</a> ，有关所有SQLite的资料都可以从这个网站上找到。打开如下图</p>
<p><img src="/images/loading.gif" data-original="../images/language/image-20210828105947082.png" alt=""></p>
<h2 id="为什么要用SQLite？"><a href="#为什么要用SQLite？" class="headerlink" title="为什么要用SQLite？"></a>为什么要用SQLite？</h2><ul>
<li>SQLite不需要一个单独的服务器进程或系统操作（服务器）。</li>
<li>SQLite 不需要配置，这意味着它不需要安装或管理。</li>
<li>一个完整的SQLite数据库可存储在跨平台的磁盘文件中。</li>
<li>SQLite是非常小，重量轻，小于400KB完全配置或小于250KB的省略可选功能。</li>
<li>SQLite是自配置的，独立的，这意味着它不需要任何外部的依赖。</li>
<li>SQLite的交易是完全符合ACID，允许多个进程或线程安全访问。</li>
<li>SQLite支持大多数（SQL2）符合SQL92标准的查询语言功能。</li>
<li>SQLite是在ANSI-C编写的，并提供了简单和易于使用的API。</li>
<li>SQLite可在UNIX（在Linux，Mac OS-X，Android，IOS）和Windows（Win32中，WINCE，WinRT的）中运行。</li>
</ul>
<h1 id="SQLite快速入门"><a href="#SQLite快速入门" class="headerlink" title="SQLite快速入门"></a>SQLite快速入门</h1><h2 id="1-SQLite是什么？"><a href="#1-SQLite是什么？" class="headerlink" title="1. SQLite是什么？"></a>1. SQLite是什么？</h2><p>SQLite是一种开源，零配置，独立的，独立的，事务关系数据库引擎，旨在嵌入到应用程序中。</p>
<h2 id="2-SQLite入门步骤"><a href="#2-SQLite入门步骤" class="headerlink" title="2. SQLite入门步骤"></a>2. SQLite入门步骤</h2><p>如果这是您第一次使用SQLite，应该先学习这一部分。 按照这<code>3</code>个简单的步骤，快速开始使用SQLite。</p>
<ol>
<li>首先，第一个重要的问题：什么是SQLite？ 在开始使用SQLite之前，简要了解一下SQLite。</li>
<li>其次，知道如何在您的计算机上下载和安装SQLite GUI工具。</li>
<li>第三，介绍如何创建SQLite示例数据库，并引导完成使用示例数据库进行练习操作的步骤。</li>
</ol>
<h3 id="2-1-安装SQLite数据库"><a href="#2-1-安装SQLite数据库" class="headerlink" title="2.1 安装SQLite数据库"></a>2.1 安装SQLite数据库</h3><p>SQLite以其零配置而闻名，所以不需要复杂的设置或管理。 下面来看看如何在系统上安装SQLite。</p>
<h4 id="在Windows上安装SQLite"><a href="#在Windows上安装SQLite" class="headerlink" title="在Windows上安装SQLite"></a>在Windows上安装SQLite</h4><p>按照以下步骤进行：</p>
<ul>
<li>打开SQLite官方网站，转到下载页面 - <a href="http://www.sqlite.org/download.html" target="_blank" rel="noopener">http://www.sqlite.org/download.html</a> 并下载预编译的Windows二进制文件。</li>
<li>下载<code>sqlite-dll</code>和<code>sqlite-shell</code>的zip文件以及<code>sqlite-tools-win32-x86-3170000.zip</code>文件。<br><img src="/images/loading.gif" data-original="../images/language/image-20210828110326907.png" alt=""></li>
<li>创建一个文件夹：<code>D:/software/sqlite</code>并放置这些文件。</li>
</ul>
<p><img src="/images/loading.gif" data-original="../images/language/image-20210828110340859.png" alt=""></p>
<ul>
<li>进入<code>D:/software/sqlite</code>目录并打开<code>sqlite3</code>命令。它将如下所示：</li>
</ul>
<pre class="line-numbers language-shell"><code class="language-shell">D:\software\sqlite> sqlite3
SQLite version 3.18.0 2017-03-28 18:48:43
Enter ".help" for usage hints.
Connected to a transient in-memory database.
Use ".open FILENAME" to reopen on a persistent database.
sqlite>
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>上述方法有助于永久创建数据库，附加数据库和分离数据库。在SQLite中执行CRUD操作有另一种方法。在这种方法中，不需要设置路径。下面我们来看看如何操作 -</p>
<ul>
<li>只需下载SQlite预编译的二进制zip文件：<code>sqlite-tools-win32-x86-3170000.zip</code>。</li>
<li>解压到目录：<code>D:/software/sqlite</code>。</li>
<li>直接双击运行<code>sqlite3.exe</code>应用程序，得到如下结果 -</li>
</ul>
<p><img src="/images/loading.gif" data-original="../images/basic/872160529_10433.png" alt=""></p>
<p>现在就可以在这里执行SQLite查询。 但是在这里，数据是暂时的，一旦你关闭了电脑，就将失去操作过的所有数据记录。因为使用这种方法不能创建，附加或分离数据库。</p>
<h4 id="在Linux上安装SQLite"><a href="#在Linux上安装SQLite" class="headerlink" title="在Linux上安装SQLite"></a>在Linux上安装SQLite</h4><p>当前，几乎所有的Linux操作系统都将SQLite作为一部分一起发布。可使用以下命令来检查你的机器上是否安装了SQLite。</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ sqlite3
SQLite version 3.7.15.2 2013-01-09 11:53:05
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite>
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果没有看到上面的结果，那么你的Linux机器上就还没有安装SQLite。可以按照以下步骤安装SQLite：</p>
<p>打开转到SQLite下载页面( <a href="http://www.sqlite.org/download.html" target="_blank" rel="noopener">http://www.sqlite.org/download.html</a> )，并从源代码部分下载文件：<code>sqlite-autoconf-*.tar.gz</code> 。</p>
<p>按照以下步骤操作：</p>
<pre class="line-numbers language-shell"><code class="language-shell">$ tar xvfz sqlite-autoconf-3071502.tar.gz
$ cd sqlite-autoconf-3071502
$ ./configure --prefix=/usr/local
$ make
$ make install
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="2-2-SQLite语法大全"><a href="#2-2-SQLite语法大全" class="headerlink" title="2.2. SQLite语法大全"></a>2.2. SQLite语法大全</h3><p>语法是一组独特的规则和约定。 以下是SQLite的语法列表。</p>
<p><strong>区分大小写：</strong></p>
<ul>
<li>SQLite不区分大小写。但是，有一些区分大小写的命令。例如：<code>GLOB</code>和<code>glob</code>在SQLite语句中有不同的含义。</li>
</ul>
<p><strong>注释：</strong></p>
<ul>
<li>注释用于在SQLite代码中增加代码的可读性。</li>
<li>注释不能嵌套。</li>
<li>注释以两个连续的“ <code>-</code> ”字符。</li>
<li>也可使用“<code>/*</code>”字符开始，并延伸至下一个“<code>*/</code>”字符对所包括的内容视为注释。</li>
</ul>
<p><strong>SQLite语句</strong></p>
<p>所有的SQLite语句都是以关键字(如：<code>SELECT</code>，<code>INSERT</code>，<code>UPDATE</code>，<code>DELETE</code>，<code>ALTER</code>，<code>DROP</code>等)开始的。所有语句都以分号(<code>;</code>)结尾。</p>
<p><strong>SQLite ANALYZE语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">ANALYZE</span><span class="token punctuation">;</span>  
<span class="token comment" spellcheck="true">-- or  </span>
<span class="token keyword">ANALYZE</span> database_name<span class="token punctuation">;</span>  
<span class="token comment" spellcheck="true">-- or  </span>
<span class="token keyword">ANALYZE</span> database_name<span class="token punctuation">.</span>table_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite AND/OR子句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN  
<span class="token keyword">FROM</span>   table_name  
<span class="token keyword">WHERE</span>  CONDITION<span class="token number">-1</span> {<span class="token operator">AND</span><span class="token operator">|</span><span class="token operator">OR</span>} CONDITION<span class="token number">-2</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite ALTER TABLE语句的语法</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">ADD</span> <span class="token keyword">COLUMN</span> column_def<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>SQLite ALTER TABLE语句(Rename)语句的语法</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">RENAME</span> <span class="token keyword">TO</span> new_table_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>SQLite ATTACH DATABASE语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql">ATTACH <span class="token keyword">DATABASE</span> <span class="token string">'DatabaseName'</span> <span class="token keyword">As</span> <span class="token string">'Alias-Name'</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>SQLite BEGIN TRANSACTION语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">BEGIN</span><span class="token punctuation">;</span>  
<span class="token comment" spellcheck="true">-- or  </span>
<span class="token keyword">BEGIN</span> EXCLUSIVE <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite BETWEEN语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN  
<span class="token keyword">FROM</span>   table_name  
<span class="token keyword">WHERE</span>  column_name <span class="token operator">BETWEEN</span> val<span class="token number">-1</span> <span class="token operator">AND</span> val<span class="token number">-2</span><span class="token punctuation">;</span>  
SQLite <span class="token keyword">COMMIT</span> Statement:  
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite CREATE INDEX语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> index_name  
<span class="token keyword">ON</span> table_name <span class="token punctuation">(</span> column_name <span class="token keyword">COLLATE</span> NOCASE <span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite CREATE UNIQUE INDEX语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">UNIQUE</span> <span class="token keyword">INDEX</span> index_name  
<span class="token keyword">ON</span> table_name <span class="token punctuation">(</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite CREATE TABLE语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> table_name<span class="token punctuation">(</span>  
   column1 datatype<span class="token punctuation">,</span>  
   column2 datatype<span class="token punctuation">,</span>  
   column3 datatype<span class="token punctuation">,</span>  
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  
   columnN datatype<span class="token punctuation">,</span>  
   <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span> one <span class="token operator">or</span> more <span class="token keyword">columns</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite CREATE TRIGGER语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TRIGGER</span> database_name<span class="token punctuation">.</span>trigger_name   
BEFORE <span class="token keyword">INSERT</span> <span class="token keyword">ON</span> table_name <span class="token keyword">FOR EACH ROW</span>  
<span class="token keyword">BEGIN</span>   
   stmt1<span class="token punctuation">;</span>   
   stmt2<span class="token punctuation">;</span>  
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  
<span class="token keyword">END</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite CREATE VIEW语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> database_name<span class="token punctuation">.</span>view_name  <span class="token keyword">AS</span>  
<span class="token keyword">SELECT</span> statement<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite CREATE VIRTUAL TABLE语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> VIRTUAL <span class="token keyword">TABLE</span> database_name<span class="token punctuation">.</span>table_name <span class="token keyword">USING</span> weblog<span class="token punctuation">(</span> access<span class="token punctuation">.</span>log <span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token comment" spellcheck="true">-- or  </span>
<span class="token keyword">CREATE</span> VIRTUAL <span class="token keyword">TABLE</span> database_name<span class="token punctuation">.</span>table_name <span class="token keyword">USING</span> fts3<span class="token punctuation">(</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite COMMIT TRANSACTION语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">COMMIT</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>SQLite COUNT语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>column_name<span class="token punctuation">)</span>  
<span class="token keyword">FROM</span>   table_name  
<span class="token keyword">WHERE</span>  CONDITION<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite DELETE语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> table_name  
<span class="token keyword">WHERE</span>  {CONDITION}<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite DETACH DATABASE语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql">DETACH <span class="token keyword">DATABASE</span> <span class="token string">'Alias-Name'</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>SQLite DISTINCT语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN  
<span class="token keyword">FROM</span>   table_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite DROP INDEX语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> database_name<span class="token punctuation">.</span>index_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>SQLite DROP TABLE语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> database_name<span class="token punctuation">.</span>table_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>SQLite DROP VIEW语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> database_name<span class="token punctuation">.</span>view_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>SQLite DROP TRIGGER 语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> database_name<span class="token punctuation">.</span>trigger_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>SQLite EXISTS语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN  
<span class="token keyword">FROM</span>   table_name  
<span class="token keyword">WHERE</span>  column_name <span class="token keyword">EXISTS</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span>   table_name <span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite EXPLAIN语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">EXPLAIN</span> <span class="token keyword">INSERT</span> statement<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>  
<span class="token comment" spellcheck="true">-- or   </span>
<span class="token keyword">EXPLAIN</span> QUERY <span class="token keyword">PLAN</span> <span class="token keyword">SELECT</span> statement<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite GLOB语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN  
<span class="token keyword">FROM</span>   table_name  
<span class="token keyword">WHERE</span>  column_name GLOB { PATTERN }<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite GROUP BY语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>column_name<span class="token punctuation">)</span>  
<span class="token keyword">FROM</span>   table_name  
<span class="token keyword">WHERE</span>  CONDITION  
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> column_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite HAVING语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>column_name<span class="token punctuation">)</span>  
<span class="token keyword">FROM</span>   table_name  
<span class="token keyword">WHERE</span>  CONDITION  
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> column_name  
<span class="token keyword">HAVING</span> <span class="token punctuation">(</span>arithematic <span class="token keyword">function</span> condition<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite INSERT INTO语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> table_name<span class="token punctuation">(</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN<span class="token punctuation">)</span>  
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span> value1<span class="token punctuation">,</span> value2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>valueN<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite IN语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN  
<span class="token keyword">FROM</span>   table_name  
<span class="token keyword">WHERE</span>  column_name <span class="token operator">IN</span> <span class="token punctuation">(</span>val<span class="token number">-1</span><span class="token punctuation">,</span> val<span class="token number">-2</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>val<span class="token operator">-</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite Like语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN  
<span class="token keyword">FROM</span>   table_name  
<span class="token keyword">WHERE</span>  column_name <span class="token operator">LIKE</span> { PATTERN }<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite NOT IN语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN  
<span class="token keyword">FROM</span>   table_name  
<span class="token keyword">WHERE</span>  column_name <span class="token operator">NOT</span> <span class="token operator">IN</span> <span class="token punctuation">(</span>val<span class="token number">-1</span><span class="token punctuation">,</span> val<span class="token number">-2</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>val<span class="token operator">-</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite ORDER BY语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN  
<span class="token keyword">FROM</span>   table_name  
<span class="token keyword">WHERE</span>  CONDITION  
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> column_name {<span class="token keyword">ASC</span><span class="token operator">|</span><span class="token keyword">DESC</span>}<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite PRAGMA语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql">PRAGMA pragma_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>有关<code>pragma</code>的几个示例：</p>
<pre class="line-numbers language-sql"><code class="language-sql">PRAGMA page_size<span class="token punctuation">;</span>  
PRAGMA cache_size <span class="token operator">=</span> <span class="token number">1024</span><span class="token punctuation">;</span>  
PRAGMA table_info<span class="token punctuation">(</span>table_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite RELEASE SAVEPOINT语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">RELEASE</span> savepoint_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>SQLite REINDEX语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql">REINDEX collation_name<span class="token punctuation">;</span>  
REINDEX database_name<span class="token punctuation">.</span>index_name<span class="token punctuation">;</span>  
REINDEX database_name<span class="token punctuation">.</span>table_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite ROLLBACK语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">ROLLBACK</span><span class="token punctuation">;</span>  
<span class="token comment" spellcheck="true">-- or  </span>
<span class="token keyword">ROLLBACK</span> <span class="token keyword">TO</span> <span class="token keyword">SAVEPOINT</span> savepoint_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite SAVEPOINT语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SAVEPOINT</span> savepoint_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>SQLite SELECT语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN  
<span class="token keyword">FROM</span>   table_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite UPDATE语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">UPDATE</span> table_name  
<span class="token keyword">SET</span> column1 <span class="token operator">=</span> value1<span class="token punctuation">,</span> column2 <span class="token operator">=</span> value2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN<span class="token operator">=</span>valueN  
<span class="token punctuation">[</span> <span class="token keyword">WHERE</span>  CONDITION <span class="token punctuation">]</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite VACUUM语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql">VACUUM<span class="token punctuation">;</span>  
SQLite <span class="token keyword">WHERE</span> Clause:  
<span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN  
<span class="token keyword">FROM</span>   table_name  
<span class="token keyword">WHERE</span>  CONDITION<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="3-SQLite基础"><a href="#3-SQLite基础" class="headerlink" title="3. SQLite基础"></a>3. SQLite基础</h2><p>本节介绍可用于SQLite的基本SQL语句。首先将学习如何创建数据库，并执行<code>CURD</code>操作数据。 如果您已经熟悉SQL(那最好不过，不熟悉也没有关系)，则会注意到SQLite中SQL方言和SQL标准之间的差异。</p>
<ul>
<li>SQLite查询数据 – 使用SELECT语句从单个表或多个表中查询数据。</li>
<li>SQLite Order By – 以升序或降序对结果集进行排序。</li>
<li>SQLite Select Distinct – 使用<code>DISTINCT</code>子句从表查询唯一行(去除重复行)。</li>
<li>SQLite Where  – 使用各种条件过滤行结果集。</li>
<li>SQLite Limit – 限制要返回的行数。LIMIT子句可用于获取查询返回的必要数据。</li>
<li>SQLite IN – 检查值是否匹配值或子查询列表中的任何值。</li>
<li>SQLite Like – 基于使用通配符的模式匹配查询数据：百分号(<code>％</code>)和下划线(<code>_</code>)。</li>
<li>SQLite Glob – 确定字符串是否匹配指定的UNIX模式。</li>
<li>SQLite Group By – 根据指定的条件将数据集合分组。 <code>GROUP BY</code>子句可用于分组总结数据以进行报告。</li>
<li>SQLite Having – 指定过滤由<code>GROUP BY</code>子句分组汇总的组的条件。</li>
<li>SQLite内连接 – 使用<code>inner join</code>子句查询来自多个表的数据。</li>
<li>SQLite左连接 – 使用<code>left join</code>子句组合查询来自多个表的数据。</li>
<li>SQLite交叉连接 – 演示如何使用交叉连接子句来生成连接中涉及的表的结果集的笛卡尔乘积。</li>
<li>SQLite自连接 – 将表连接到其自身以创建将行与其他行连接在同一个表中的结果集。</li>
<li>SQLite Union – 将多个查询的结果集合合到单个结果集中。还讨论了UNION和UNION ALL子句之间的差异。</li>
<li>SQLite全外连接 – 显示如何使用<code>left join</code>和<code>union</code>子句来模拟SQLite中的完整外连接。</li>
<li>SQLite Case – 为查询添加条件逻辑。</li>
<li>SQLite子查询 – 介绍SQLite子查询和相关子查询。</li>
</ul>
<h2 id="4-SQLite数据更新"><a href="#4-SQLite数据更新" class="headerlink" title="4. SQLite数据更新"></a>4. SQLite数据更新</h2><p>这部分将介绍如何使用<code>insert</code>，<code>update</code>和<code>delete</code>语句更新表中的数据。</p>
<p>SQLite insert语句 – 将行数据插入到表中<br>SQLite update语句 – 更新表中存在行数据记录。<br>SQLite delete语句 – 从表中删除存在行数据记录。</p>
<h2 id="5-使用数据库对象"><a href="#5-使用数据库对象" class="headerlink" title="5. 使用数据库对象"></a>5. 使用数据库对象</h2><p>在本节中，将演示如何使用SQL数据定义语言创建数据库对象，如：表，视图，索引。</p>
<ul>
<li>SQLite数据类型 – 介绍SQLite动态类型系统及其重要概念：存储类，表现类型和类型关联。</li>
<li>SQLite创建表 – 演示如何使用<code>CREATE TABLE</code>语句在数据库中创建新表。</li>
<li>SQLite主键 – 演示如何使用<code>PRIMARY KEY</code>约束来定义表的主键。</li>
<li>SQLite AUTOINCREMENT – 演示如何使用<code>AUTOINCREMENT</code>属性的工作原理以及为什么情况下应该避免使用它。</li>
<li>SQLite修改表定义 – 演示如何使用<code>ALTER TABLE</code>语句将新行添加到现有表中并重命名表。 还提供执行其他操作的步骤，例如：删除列，重命名列等。</li>
<li>SQLite删除表 – 演示如何从数据库中删除指定表。</li>
<li>SQLite创建视图 – 介绍视图概念，并演示如何在数据库中创建视图。</li>
<li>SQLite索引 – 演示如何使用和创建索引，以及如何利用索引来加快查询。</li>
<li>SQLite表达式索引 – 演示如何使用基于表达式的索引</li>
<li>SQLite VACUUM – 优化数据库文件。</li>
<li>SQLite触发器 – 在SQLite数据库中管理触发器。</li>
</ul>
<h2 id="6-SQLite函数"><a href="#6-SQLite函数" class="headerlink" title="6. SQLite函数"></a>6. SQLite函数</h2><p><strong>SQLite聚合函数</strong></p>
<p>聚合函数将多行的值组合成一个值，该值可以作为分组的度量，例如：最小值，最大值，平均值，总数等。SQLite支持以下聚合函数：</p>
<ul>
<li>SQLite AVG()函数 - 返回一个分组中所有值的平均值。</li>
<li>SQLite COUNT()函数 - 计算一个分组中的总数量/数目。</li>
<li>SQLite MAX()函数 - 返回在一个分组中所有值的最大值。</li>
<li>SQLite MIN()函数 - 返回在一个分组中所有值最小值。</li>
<li>SQLite SUM()函数 - 返回一个分组中所有值的总和。</li>
</ul>
<h1 id="SQLite是什么？"><a href="#SQLite是什么？" class="headerlink" title="SQLite是什么？"></a>SQLite是什么？</h1><p>SQLite是嵌入式关系数据库管理系统。 它是独立的，无服务器的，零配置和事务性SQL数据库引擎。</p>
<p>SQLite可以自由地用于商业或私有的任何目的。 换句话说，“SQLite是一种开源，零配置，独立的，独立的，旨在嵌入到应用程序中的事务关系数据库引擎”。</p>
<p>SQLite与其他SQL数据库不同，SQLite没有单独的服务器进程。 它直接读取和写入普通磁盘文件。 具有多个表，索引，触发器和视图的完整SQL数据库包含在单个磁盘文件中。</p>
<h2 id="SQLite历史"><a href="#SQLite历史" class="headerlink" title="SQLite历史"></a>SQLite历史</h2><p>SQLite最初是在2000年8月设计的。它被命名为SQLite，因为它与其他数据库管理系统(如SQL Server或Oracle)不同，它是非常轻量的(小于500Kb大小)。</p>
<table>
<thead>
<tr>
<th>年份</th>
<th>有关事件</th>
</tr>
</thead>
<tbody><tr>
<td>2000</td>
<td>SQLite由D. Richard Hipp设计，目的是不需要管理程序的管理。</td>
</tr>
<tr>
<td>2000</td>
<td>在8月份，SQLite 1.0与GNU数据库管理器一起发布。</td>
</tr>
<tr>
<td>2011</td>
<td>Hipp宣布将UNQl接口添加到SQLite数据库并开发UNQLite(面向文档的数据库)。</td>
</tr>
</tbody></table>
<h2 id="SQLite特性"><a href="#SQLite特性" class="headerlink" title="SQLite特性"></a>SQLite特性</h2><p>以下是为什么SQLite比其他轻量级数据库受欢迎的功能列表：</p>
<ul>
<li>SQLite是完全免费的：SQLite是开源的。 因此，不需要许可证就可以自由地使用它。</li>
<li>SQLite是无服务器的：SQLite不需要服务器进程或系统来操作。</li>
<li>SQLite非常灵活：它可以在同一个会话上同时处理多个数据库。</li>
<li>SQLite不需要配置：SQLite无需设置或管理。</li>
<li>SQLite是一个跨平台的数据库系统：除了在大多数平台，如Windows，Mac OS，Linux和Unix。 它也可以用于许多嵌入式操作系统，如Symbian,Android和Windows CE上使用。</li>
<li>存储数据很容易：SQLite提供了一种有效的数据存储方式。</li>
<li>列长度可变：列的长度是可变的，不是固定的。 它有助于您只分配一个字段所需的空间。 例如，如果您有一个<code>varchar(200)</code>的列，并且在其上放置了一个<code>10</code>个字符的长度值，那么SQLite将仅为该值分配<code>20</code>个字符的空间，而不是整个<code>200</code>个空间。</li>
<li>提供大量的API：SQLite为大多数的编程语言提供了API。 例如：<code>.Net</code>语言(Visual Basic，C＃)，PHP，Java，Objective C，Python和许多其他编程语言提供了相应的API。</li>
<li>SQLite是用ANSI-C编写的，提供简单易用的API。</li>
<li>SQLite在UNIX(Linux，Mac OS-X，Android，iOS)和Windows(Win32，WinCE，WinRT)上均可用。</li>
</ul>
<h2 id="SQLite优点和缺点"><a href="#SQLite优点和缺点" class="headerlink" title="SQLite优点和缺点"></a>SQLite优点和缺点</h2><p><strong>SQLite的优点</strong></p>
<ul>
<li>SQLite是一个非常轻量级的数据库。 因此在电脑，手机，相机，家用电子设备等设备的嵌入式软件是非常好的选择。</li>
<li>SQLite的数据存储非常简单高效。 当您需要存储文件存档时，SQLite可以生成较小数据量的存档，并且包含常规ZIP存档的大量元数据。</li>
<li>SQLite可以用作临时数据集，以对应用程序中的一些数据进行一些处理。</li>
<li>在SQLite数据库中，数据查询非常简单。 您可以将数据加载到SQLite内存数据库中，并随时提取数据。可以按照您想要的方式提取数据。</li>
<li>SQLite提供了一种简单有效的方式来处理数据，而不是以内存变量来做数据处理。 例如：如果您正在开发一个程序，并且有一些记录要对其进行一些计算。 然后，您可以创建一个SQLite数据库并在其中插入记录，查询，可以选择记录并直接进行所需的计算。</li>
<li>SQLite非常容易学习和使用。它不需要任何安装和配置。只需复制计算机中的SQLite库，就可以创建数据库了。</li>
</ul>
<p><strong>SQLite的缺点</strong></p>
<ul>
<li>SQLite一般用于处理小到中型数据存储，对于高并发高流量的应用不适用。</li>
</ul>
<h2 id="SQLite命令大全"><a href="#SQLite命令大全" class="headerlink" title="SQLite命令大全"></a>SQLite命令大全</h2><p>SQLite命令与SQL命令类似。 有三种类型的SQLite命令：</p>
<ul>
<li><strong>DDL</strong>：数据定义语言</li>
<li><strong>DML</strong>：数据操作语言</li>
<li><strong>DQL</strong>：数据查询语言</li>
</ul>
<h3 id="数据定义语言"><a href="#数据定义语言" class="headerlink" title="数据定义语言"></a>数据定义语言</h3><p>数据定义语言中主要有三个命令：</p>
<ul>
<li><strong>CREATE</strong>：此命令用于创建表，数据库中的表或其他对象的视图。</li>
<li><strong>ALTER</strong>：此命令用于修改现有的数据库对象，如表。</li>
<li><strong>DROP</strong>：<code>DROP</code>命令用于删除整个表，数据库中的表或其他对象的视图。</li>
</ul>
<h3 id="数据操作语言"><a href="#数据操作语言" class="headerlink" title="数据操作语言"></a>数据操作语言</h3><p>数据操作语言中主要有三个命令：</p>
<ul>
<li><strong>INSERT</strong>：此命令用于创建记录。</li>
<li><strong>UPDATE</strong>：用于修改记录。</li>
<li><strong>DELETE</strong>：用于删除记录。</li>
</ul>
<h3 id="数据查询语言"><a href="#数据查询语言" class="headerlink" title="数据查询语言"></a>数据查询语言</h3><ul>
<li><strong>SELECT</strong>：此命令用于从一个或多个表中检索某些记录。</li>
</ul>
<h3 id="SQLite的点命令"><a href="#SQLite的点命令" class="headerlink" title="SQLite的点命令"></a>SQLite的点命令</h3><p>以下是SQLite点(<code>.</code>)命令的列表。 这些命令不会以分号(<code>;</code>)终止。</p>
<p><strong>.help</strong></p>
<p>可在任何时候使用“<code>.help</code>”检查点命令列表。</p>
<p>例如：</p>
<pre><code>QLite version 3.18.0 2017-03-28 18:48:43
Enter ".help" for usage hints.
Connected to a transient in-memory database.
Use ".open FILENAME" to reopen on a persistent database.
sqlite&gt; .help
.auth ON|OFF           Show authorizer callbacks
.backup ?DB? FILE      Backup DB (default "main") to FILE
.bail on|off           Stop after hitting an error.  Default OFF
.binary on|off         Turn binary output on or off.  Default OFF
.changes on|off        Show number of rows changed by SQL
.check GLOB            Fail if output since .testcase does not match
.clone NEWDB           Clone data into NEWDB from the existing database
.databases             List names and files of attached databases
.dbinfo ?DB?           Show status information about the database
.dump ?TABLE? ...      Dump the database in an SQL text format
                         If TABLE specified, only dump tables matching
                         LIKE pattern TABLE.
.echo on|off           Turn command echo on or off
.eqp on|off|full       Enable or disable automatic EXPLAIN QUERY PLAN
.exit                  Exit this program
.explain ?on|off|auto? Turn EXPLAIN output mode on or off or to automatic
.fullschema ?--indent? Show schema and the content of sqlite_stat tables
.headers on|off        Turn display of headers on or off
.help                  Show this message
.import FILE TABLE     Import data from FILE into TABLE
.imposter INDEX TABLE  Create imposter table TABLE on index INDEX
.indexes ?TABLE?       Show names of all indexes
                         If TABLE specified, only show indexes for tables
                         matching LIKE pattern TABLE.
.limit ?LIMIT? ?VAL?   Display or change the value of an SQLITE_LIMIT
.lint OPTIONS          Report potential schema issues. Options:
                         fkey-indexes     Find missing foreign key indexes
.load FILE ?ENTRY?     Load an extension library
.log FILE|off          Turn logging on or off.  FILE can be stderr/stdout
.mode MODE ?TABLE?     Set output mode where MODE is one of:
                         ascii    Columns/rows delimited by 0x1F and 0x1E
                         csv      Comma-separated values
                         column   Left-aligned columns.  (See .width)
                         html     HTML &lt;table&gt; code
                         insert   SQL insert statements for TABLE
                         line     One value per line
                         list     Values delimited by "|"
                         quote    Escape answers as for SQL
                         tabs     Tab-separated values
                         tcl      TCL list elements
.nullvalue STRING      Use STRING in place of NULL values
.once FILENAME         Output for the next SQL command only to FILENAME
.open ?--new? ?FILE?   Close existing database and reopen FILE
                         The --new starts with an empty file
.output ?FILENAME?     Send output to FILENAME or stdout
.print STRING...       Print literal STRING
.prompt MAIN CONTINUE  Replace the standard prompts
.quit                  Exit this program
.read FILENAME         Execute SQL in FILENAME
.restore ?DB? FILE     Restore content of DB (default "main") from FILE
.save FILE             Write in-memory database into FILE
.scanstats on|off      Turn sqlite3_stmt_scanstatus() metrics on or off
.schema ?PATTERN?      Show the CREATE statements matching PATTERN
                          Add --indent for pretty-printing
.selftest ?--init?     Run tests defined in the SELFTEST table
.separator COL ?ROW?   Change the column separator and optionally the row
                         separator for both the output mode and .import
.sha3sum ?OPTIONS...?  Compute a SHA3 hash of database content
.shell CMD ARGS...     Run CMD ARGS... in a system shell
.show                  Show the current values for various settings
.stats ?on|off?        Show stats or turn stats on or off
.system CMD ARGS...    Run CMD ARGS... in a system shell
.tables ?TABLE?        List names of tables
                         If TABLE specified, only list tables matching
                         LIKE pattern TABLE.
.testcase NAME         Begin redirecting output to 'testcase-out.txt'
.timeout MS            Try opening locked tables for MS milliseconds
.timer on|off          Turn SQL timer on or off
.trace FILE|off        Output each SQL statement as it is run
.vfsinfo ?AUX?         Information about the top-level VFS
.vfslist               List all available VFSes
.vfsname ?AUX?         Print the name of the VFS stack
.width NUM1 NUM2 ...   Set column widths for "column" mode
                         Negative values right-justify</code></pre><p>以上是各种SQLite的点(<code>.</code>)命令的列表。 命令及其描述如下表所示：</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>.backup ?db? file</code></td>
<td>备份数据库(默认“<code>main</code>”)到文件中</td>
</tr>
<tr>
<td><code>.bail on/off</code></td>
<td>遇到错误后停止,默认为<code>off</code></td>
</tr>
<tr>
<td><code>.databases</code></td>
<td>附件数据库的列表名称和文件</td>
</tr>
<tr>
<td><code>.dump ?table?</code></td>
<td>以sql文本格式转储数据库。如果指定表，则只转储表匹配像模式表。</td>
</tr>
<tr>
<td><code>.echo on/off</code></td>
<td>打开或关闭<code>echo</code>命令</td>
</tr>
<tr>
<td><code>.exit</code></td>
<td>退出<code>sqlite</code>提示符</td>
</tr>
<tr>
<td><code>.explain on/off</code></td>
<td>转向输出模式适合说明<code>on/off</code>。如没有参参数，则它为<code>on</code>。</td>
</tr>
<tr>
<td><code>.header(s) on/off</code></td>
<td>打开或关闭标题的显示</td>
</tr>
<tr>
<td><code>.help</code></td>
<td>显示指定帮助消息</td>
</tr>
<tr>
<td><code>.import file table</code></td>
<td>将数据从文件导入表</td>
</tr>
<tr>
<td><code>.indices ?table?</code></td>
<td>显示所有索引的名称。如果指定表，则只显示匹配的表的索引，如模式表。</td>
</tr>
<tr>
<td><code>.load file ?entry?</code></td>
<td>加载扩展库</td>
</tr>
<tr>
<td><code>.log file/off</code></td>
<td>打开或关闭日志记录。文件可以是<code>stderr/stdout</code></td>
</tr>
<tr>
<td><code>.mode mode</code></td>
<td>设置输出模式</td>
</tr>
<tr>
<td><code>.nullvalue string</code></td>
<td>打印字符串代替空值</td>
</tr>
<tr>
<td><code>.output filename</code></td>
<td>发送输出到文件名</td>
</tr>
<tr>
<td><code>.output stdout</code></td>
<td>发送输出到屏幕</td>
</tr>
<tr>
<td><code>.print string...</code></td>
<td>打印文字字符串</td>
</tr>
<tr>
<td><code>.prompt main continue</code></td>
<td>替换标准提示</td>
</tr>
<tr>
<td><code>.quit</code></td>
<td>退出<code>sqlite</code>提示符</td>
</tr>
<tr>
<td><code>.read filename</code></td>
<td>在文件名中执行sql</td>
</tr>
<tr>
<td><code>.schema ?table?</code></td>
<td>显示创建语句。如果指定表，则只显示与模式表匹配的表。</td>
</tr>
<tr>
<td><code>.separator string</code></td>
<td>更改分隔符由输出模式和<code>.import</code>使用</td>
</tr>
<tr>
<td><code>.show</code></td>
<td>显示各种设置的当前值</td>
</tr>
<tr>
<td><code>.stats on/off</code></td>
<td>打开或关闭统计信息</td>
</tr>
<tr>
<td><code>.tables ?pattern?</code></td>
<td>列出匹配类似模式的表的名称</td>
</tr>
<tr>
<td><code>.timeout ms</code></td>
<td>尝试打开锁定的表毫秒</td>
</tr>
<tr>
<td><code>.width num num</code></td>
<td>设置“列”模式的列宽</td>
</tr>
<tr>
<td><code>.timer on/off</code></td>
<td>打开或关闭cpu定时器测量</td>
</tr>
</tbody></table>
<p><strong>.show命令</strong></p>
<p>可以使用<code>.show</code>命令查看SQLite命令提示符的默认设置。</p>
<p><img src="/images/loading.gif" data-original="../images/basic/408140533_41757.png" alt=""></p>
<blockquote>
<p><strong>注意</strong>：不要在<code>sqlite&gt;</code>提示符和<code>.</code>命令之间放置空格，否则将不起作用。</p>
</blockquote>
<p><strong>其它特殊点命令</strong></p>
<p>有一些点(<code>.</code>)命令用于格式化输出。这些命令是：</p>
<pre class="line-numbers language-shell"><code class="language-shell">.header on

.mode column

.timer on<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="SQLite语法大全"><a href="#SQLite语法大全" class="headerlink" title="SQLite语法大全"></a>SQLite语法大全</h2><p>语法是一组独特的规则和约定。 以下是SQLite的语法列表。</p>
<p><strong>区分大小写：</strong></p>
<ul>
<li>SQLite不区分大小写。但是，有一些区分大小写的命令。例如：<code>GLOB</code>和<code>glob</code>在SQLite语句中有不同的含义。</li>
</ul>
<p><strong>注释：</strong></p>
<ul>
<li>注释用于在SQLite代码中增加代码的可读性。</li>
<li>注释不能嵌套。</li>
<li>注释以两个连续的“ <code>-</code> ”字符。</li>
<li>也可使用“<code>/*</code>”字符开始，并延伸至下一个“<code>*/</code>”字符对所包括的内容视为注释。</li>
</ul>
<p><strong>SQLite语句</strong></p>
<p>所有的SQLite语句都是以关键字(如：<code>SELECT</code>，<code>INSERT</code>，<code>UPDATE</code>，<code>DELETE</code>，<code>ALTER</code>，<code>DROP</code>等)开始的。所有语句都以分号(<code>;</code>)结尾。</p>
<p><strong>SQLite ANALYZE语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">ANALYZE</span><span class="token punctuation">;</span>  
<span class="token comment" spellcheck="true">-- or  </span>
<span class="token keyword">ANALYZE</span> database_name<span class="token punctuation">;</span>  
<span class="token comment" spellcheck="true">-- or  </span>
<span class="token keyword">ANALYZE</span> database_name<span class="token punctuation">.</span>table_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite AND/OR子句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN  
<span class="token keyword">FROM</span>   table_name  
<span class="token keyword">WHERE</span>  CONDITION<span class="token number">-1</span> {<span class="token operator">AND</span><span class="token operator">|</span><span class="token operator">OR</span>} CONDITION<span class="token number">-2</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite ALTER TABLE语句的语法</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">ADD</span> <span class="token keyword">COLUMN</span> column_def<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>SQLite ALTER TABLE语句(Rename)语句的语法</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">RENAME</span> <span class="token keyword">TO</span> new_table_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>SQLite ATTACH DATABASE语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql">ATTACH <span class="token keyword">DATABASE</span> <span class="token string">'DatabaseName'</span> <span class="token keyword">As</span> <span class="token string">'Alias-Name'</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>SQLite BEGIN TRANSACTION语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">BEGIN</span><span class="token punctuation">;</span>  
<span class="token comment" spellcheck="true">-- or  </span>
<span class="token keyword">BEGIN</span> EXCLUSIVE <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite BETWEEN语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN  
<span class="token keyword">FROM</span>   table_name  
<span class="token keyword">WHERE</span>  column_name <span class="token operator">BETWEEN</span> val<span class="token number">-1</span> <span class="token operator">AND</span> val<span class="token number">-2</span><span class="token punctuation">;</span>  
SQLite <span class="token keyword">COMMIT</span> Statement:  
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite CREATE INDEX语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> index_name  
<span class="token keyword">ON</span> table_name <span class="token punctuation">(</span> column_name <span class="token keyword">COLLATE</span> NOCASE <span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite CREATE UNIQUE INDEX语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">UNIQUE</span> <span class="token keyword">INDEX</span> index_name  
<span class="token keyword">ON</span> table_name <span class="token punctuation">(</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite CREATE TABLE语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> table_name<span class="token punctuation">(</span>  
   column1 datatype<span class="token punctuation">,</span>  
   column2 datatype<span class="token punctuation">,</span>  
   column3 datatype<span class="token punctuation">,</span>  
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  
   columnN datatype<span class="token punctuation">,</span>  
   <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span> one <span class="token operator">or</span> more <span class="token keyword">columns</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite CREATE TRIGGER语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TRIGGER</span> database_name<span class="token punctuation">.</span>trigger_name   
BEFORE <span class="token keyword">INSERT</span> <span class="token keyword">ON</span> table_name <span class="token keyword">FOR EACH ROW</span>  
<span class="token keyword">BEGIN</span>   
   stmt1<span class="token punctuation">;</span>   
   stmt2<span class="token punctuation">;</span>  
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  
<span class="token keyword">END</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite CREATE VIEW语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> database_name<span class="token punctuation">.</span>view_name  <span class="token keyword">AS</span>  
<span class="token keyword">SELECT</span> statement<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite CREATE VIRTUAL TABLE语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> VIRTUAL <span class="token keyword">TABLE</span> database_name<span class="token punctuation">.</span>table_name <span class="token keyword">USING</span> weblog<span class="token punctuation">(</span> access<span class="token punctuation">.</span>log <span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token comment" spellcheck="true">-- or  </span>
<span class="token keyword">CREATE</span> VIRTUAL <span class="token keyword">TABLE</span> database_name<span class="token punctuation">.</span>table_name <span class="token keyword">USING</span> fts3<span class="token punctuation">(</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite COMMIT TRANSACTION语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">COMMIT</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>SQLite COUNT语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>column_name<span class="token punctuation">)</span>  
<span class="token keyword">FROM</span>   table_name  
<span class="token keyword">WHERE</span>  CONDITION<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite DELETE语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> table_name  
<span class="token keyword">WHERE</span>  {CONDITION}<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite DETACH DATABASE语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql">DETACH <span class="token keyword">DATABASE</span> <span class="token string">'Alias-Name'</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>SQLite DISTINCT语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN  
<span class="token keyword">FROM</span>   table_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite DROP INDEX语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> database_name<span class="token punctuation">.</span>index_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>SQLite DROP TABLE语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> database_name<span class="token punctuation">.</span>table_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>SQLite DROP VIEW语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> database_name<span class="token punctuation">.</span>view_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>SQLite DROP TRIGGER 语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> database_name<span class="token punctuation">.</span>trigger_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>SQLite EXISTS语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN  
<span class="token keyword">FROM</span>   table_name  
<span class="token keyword">WHERE</span>  column_name <span class="token keyword">EXISTS</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span>   table_name <span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite EXPLAIN语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">EXPLAIN</span> <span class="token keyword">INSERT</span> statement<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>  
<span class="token comment" spellcheck="true">-- or   </span>
<span class="token keyword">EXPLAIN</span> QUERY <span class="token keyword">PLAN</span> <span class="token keyword">SELECT</span> statement<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite GLOB语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN  
<span class="token keyword">FROM</span>   table_name  
<span class="token keyword">WHERE</span>  column_name GLOB { PATTERN }<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite GROUP BY语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>column_name<span class="token punctuation">)</span>  
<span class="token keyword">FROM</span>   table_name  
<span class="token keyword">WHERE</span>  CONDITION  
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> column_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite HAVING语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>column_name<span class="token punctuation">)</span>  
<span class="token keyword">FROM</span>   table_name  
<span class="token keyword">WHERE</span>  CONDITION  
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> column_name  
<span class="token keyword">HAVING</span> <span class="token punctuation">(</span>arithematic <span class="token keyword">function</span> condition<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite INSERT INTO语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> table_name<span class="token punctuation">(</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN<span class="token punctuation">)</span>  
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span> value1<span class="token punctuation">,</span> value2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>valueN<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite IN语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN  
<span class="token keyword">FROM</span>   table_name  
<span class="token keyword">WHERE</span>  column_name <span class="token operator">IN</span> <span class="token punctuation">(</span>val<span class="token number">-1</span><span class="token punctuation">,</span> val<span class="token number">-2</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>val<span class="token operator">-</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite Like语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN  
<span class="token keyword">FROM</span>   table_name  
<span class="token keyword">WHERE</span>  column_name <span class="token operator">LIKE</span> { PATTERN }<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite NOT IN语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN  
<span class="token keyword">FROM</span>   table_name  
<span class="token keyword">WHERE</span>  column_name <span class="token operator">NOT</span> <span class="token operator">IN</span> <span class="token punctuation">(</span>val<span class="token number">-1</span><span class="token punctuation">,</span> val<span class="token number">-2</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>val<span class="token operator">-</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite ORDER BY语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN  
<span class="token keyword">FROM</span>   table_name  
<span class="token keyword">WHERE</span>  CONDITION  
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> column_name {<span class="token keyword">ASC</span><span class="token operator">|</span><span class="token keyword">DESC</span>}<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite PRAGMA语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql">PRAGMA pragma_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>有关<code>pragma</code>的几个示例：</p>
<pre class="line-numbers language-sql"><code class="language-sql">PRAGMA page_size<span class="token punctuation">;</span>  
PRAGMA cache_size <span class="token operator">=</span> <span class="token number">1024</span><span class="token punctuation">;</span>  
PRAGMA table_info<span class="token punctuation">(</span>table_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite RELEASE SAVEPOINT语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">RELEASE</span> savepoint_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>SQLite REINDEX语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql">REINDEX collation_name<span class="token punctuation">;</span>  
REINDEX database_name<span class="token punctuation">.</span>index_name<span class="token punctuation">;</span>  
REINDEX database_name<span class="token punctuation">.</span>table_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite ROLLBACK语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">ROLLBACK</span><span class="token punctuation">;</span>  
<span class="token comment" spellcheck="true">-- or  </span>
<span class="token keyword">ROLLBACK</span> <span class="token keyword">TO</span> <span class="token keyword">SAVEPOINT</span> savepoint_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite SAVEPOINT语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SAVEPOINT</span> savepoint_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>SQLite SELECT语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN  
<span class="token keyword">FROM</span>   table_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite UPDATE语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">UPDATE</span> table_name  
<span class="token keyword">SET</span> column1 <span class="token operator">=</span> value1<span class="token punctuation">,</span> column2 <span class="token operator">=</span> value2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN<span class="token operator">=</span>valueN  
<span class="token punctuation">[</span> <span class="token keyword">WHERE</span>  CONDITION <span class="token punctuation">]</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>SQLite VACUUM语句的语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql">VACUUM<span class="token punctuation">;</span>  
SQLite <span class="token keyword">WHERE</span> Clause:  
<span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN  
<span class="token keyword">FROM</span>   table_name  
<span class="token keyword">WHERE</span>  CONDITION<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="SQLite数据类型"><a href="#SQLite数据类型" class="headerlink" title="SQLite数据类型"></a>SQLite数据类型</h2><p>SQLite数据类型用于指定任何对象的数据类型。 SQLite中的每列，变量和表达式都有相关的数据类型。 这些数据类型在创建表时使用。 SQLite使用更通用的动态类型系统。 在SQLite中，值的数据类型与值本身相关联，而不是与其容器相关联。</p>
<h3 id="SQLite数据类型的类型"><a href="#SQLite数据类型的类型" class="headerlink" title="SQLite数据类型的类型"></a>SQLite数据类型的类型</h3><p><strong>SQLite存储类</strong></p>
<p>SQLite数据库中存储的值是以下存储类之一：</p>
<table>
<thead>
<tr>
<th>存储类</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>NULL</td>
<td>表示值为空(<code>null</code>)值。</td>
</tr>
<tr>
<td>INTEGER</td>
<td>表示值是一个有符号整数，根据值的大小存储在<code>1</code>,<code>2</code>,<code>3</code>,<code>4</code>,<code>6</code>或<code>8</code>个字节中。</td>
</tr>
<tr>
<td>REAL</td>
<td>表示值是一个浮点值，存储为<code>8</code>位IEEE浮点数。</td>
</tr>
<tr>
<td>text</td>
<td>表示值是一个文本字符串，使用数据库编码(<code>utf-8</code>，<code>utf-16be</code>或utf-16le)存储</td>
</tr>
<tr>
<td>BLOB</td>
<td>表示值是一个数据块，与输入的数据完全相同。</td>
</tr>
</tbody></table>
<blockquote>
<p><strong>注意</strong>：SQLite存储类比数据类型更通用一些。 例如：<code>INTEGER</code>存储类包括不同长度的<code>6</code>种不同的整数数据类型。</p>
</blockquote>
<h3 id="SQLite的近似类型"><a href="#SQLite的近似类型" class="headerlink" title="SQLite的近似类型"></a>SQLite的近似类型</h3><p>SQLite支持列的类型近似性。列可以存储任何类型的数据，但是列的首选存储类称为它的近似性类型。</p>
<p>在SQLite3数据库中有以下类型近似可用于分配。</p>
<table>
<thead>
<tr>
<th>存储类</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>TEXT</td>
<td>此列可使用存储类为<code>NULL</code>，<code>TEXT</code>或<code>BLOB</code>来存储所有数据。</td>
</tr>
<tr>
<td>NUMERIC</td>
<td>此列可包含使用所有五个存储类的值。</td>
</tr>
<tr>
<td>INTEGER</td>
<td>它的行为与带有转换表达式异常的具有数字近似的列相同。</td>
</tr>
<tr>
<td>REAL</td>
<td>它的行为类似于具有数字近似的列(除了它将整数值强制以浮点表示)</td>
</tr>
<tr>
<td>NONE</td>
<td>具有近似性<code>NONE</code>的列不会将一个存储类转为另一个存储类型</td>
</tr>
</tbody></table>
<h3 id="SQLite近似和类型名称"><a href="#SQLite近似和类型名称" class="headerlink" title="SQLite近似和类型名称"></a>SQLite近似和类型名称</h3><p>以下是可以在创建SQLite表时使用的各种数据类型名称的列表。</p>
<table>
<thead>
<tr>
<th>数据类型</th>
<th>相应的近似类型</th>
</tr>
</thead>
<tbody><tr>
<td>INT INTEGER TINYINT SMALLINT MEDIUMINT BIGINT UNSIGNED BIG INT INT2 INT8</td>
<td>INTEGER</td>
</tr>
<tr>
<td>CHARACTER(20) VARCHAR(255) VARYING CHARACTER(255) NCHAR(55) NATIVE CHARACTER(70) NVARCHAR(100) TEXT CLOB</td>
<td>TEXT</td>
</tr>
<tr>
<td>BLOB - 未指定数据类型</td>
<td>NONE</td>
</tr>
<tr>
<td>REAL DOUBLE DOUBLE PRECISION FLOAT</td>
<td>REAL</td>
</tr>
<tr>
<td>NUMERIC DECIMAL(10,5) BOOLEAN DATE DATETIME</td>
<td>NUMERIC</td>
</tr>
</tbody></table>
<h3 id="日期和时间数据类型"><a href="#日期和时间数据类型" class="headerlink" title="日期和时间数据类型"></a>日期和时间数据类型</h3><p>在SQLite中，没有单独的类型来存储日期和时间。 但是可以将日期和时间存储为TEXT，REAL或INTEGER值。</p>
<table>
<thead>
<tr>
<th>存储类</th>
<th>日期格式</th>
</tr>
</thead>
<tbody><tr>
<td>TEXT</td>
<td>它以“<code>yyyy-mm-dd hh:mm:ss.sss</code>” 格式指定日期</td>
</tr>
<tr>
<td>REAL</td>
<td>它规定了从公元前4714年11月24日在格林威治中午以后的天数。</td>
</tr>
<tr>
<td>INTEGER</td>
<td>它指定从<code>1970-01-01 00:00:00</code> utc开始的秒数。</td>
</tr>
</tbody></table>
<h3 id="布尔数据类型"><a href="#布尔数据类型" class="headerlink" title="布尔数据类型"></a>布尔数据类型</h3><p>在SQLite中，没有一个单独的布尔存储类。一个代替办法是将布尔值存储为整数<code>0</code>(假)和<code>1</code>(真)。</p>
<h2 id="SQLite运算符"><a href="#SQLite运算符" class="headerlink" title="SQLite运算符"></a>SQLite运算符</h2><p>当使用<code>WHERE</code>子句执行比较和算术运算时需要使用到运算符，SQLite运算符是SQLite语句中使用的保留字或字符。</p>
<p>可以使用运算符来指定条件和SQLite语句中多个条件的连接。</p>
<p>SQLite中主要有<code>4</code>种类型的运算符：</p>
<ul>
<li>算术运算符</li>
<li>比较运算符</li>
<li>逻辑运算符</li>
<li>按位运算符</li>
</ul>
<h3 id="SQLite算术运算符"><a href="#SQLite算术运算符" class="headerlink" title="SQLite算术运算符"></a>SQLite算术运算符</h3><p>下表指定了SQLite中的算术运算符。 在这个表中，有两个变量“<code>a</code>”和“<code>b</code>”，它们的值分别是<code>50</code>和<code>100</code>。</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>+</code></td>
<td>加法运算符：用于将运算符两侧的值相加</td>
<td><code>a+b = 150</code></td>
</tr>
<tr>
<td><code>-</code></td>
<td>减法运算符：用于从左操作数减去右操作数。</td>
<td><code>a-b = -50</code></td>
</tr>
<tr>
<td><code>*</code></td>
<td>乘法运算符：用于将运算符两边的操作数相乘。</td>
<td><code>a*b = 5000</code></td>
</tr>
<tr>
<td><code>/</code></td>
<td>除法运算符：它是将左操作数除以右操作数。</td>
<td><code>a/b = 0.5</code></td>
</tr>
<tr>
<td><code>%</code></td>
<td>模数运算符：用于通过左操作数除以右操作数并返回余数。</td>
<td><code>b/a = 0</code></td>
</tr>
</tbody></table>
<h3 id="SQLite比较运算符"><a href="#SQLite比较运算符" class="headerlink" title="SQLite比较运算符"></a>SQLite比较运算符</h3><p>下表中列出了SQLite中的比较运算符。 在这个表中，有两个变量“<code>a</code>”和“<code>b</code>”，它们的值分别是<code>50</code>和<code>100</code>。</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>==</code></td>
<td>它用于检查两个操作数的值是否相等，如果是，则条件求值结果为<code>true</code>，否则返回<code>false</code>。</td>
<td><code>(a == b)</code>的结果为<code>false</code>。</td>
</tr>
<tr>
<td><code>=</code></td>
<td>它用于检查两个操作数的值是否相等，如果是，则条件求值结果为<code>true</code>，否则返回<code>false</code>。</td>
<td><code>(a = b)</code>的结果为<code>false</code>。</td>
</tr>
<tr>
<td><code>!=</code></td>
<td>它用于检查两个操作数的值是否相等，如果两个值不相等则条件求值结果为<code>true</code>。</td>
<td><code>(a != b)</code>的结果为<code>true</code>。</td>
</tr>
<tr>
<td><code>&lt;&gt;</code></td>
<td>它用于检查两个操作数的值是否相等，如果两个值不相等则条件求值结果为<code>true</code>。</td>
<td><code>(a &lt;&gt; b)</code>的结果为<code>true</code>。</td>
</tr>
<tr>
<td><code>&gt;</code></td>
<td>它用于检查左操作数的值是否大于右操作数的值，如果是，则条件求值结果为<code>true</code>。</td>
<td><code>(a &gt; b)</code>结果为<code>false</code></td>
</tr>
<tr>
<td><code>&lt;</code></td>
<td>它用于检查左操作数的值是否小于右操作数的值，如果是，则条件求值结果为<code>true</code>。</td>
<td><code>(a &lt; b)</code>结果为<code>true</code></td>
</tr>
<tr>
<td><code>&gt;=</code></td>
<td>用于检查左操作数的值是否大于或等于右操作数的值，如果是，则条件求值结果为<code>true</code>。</td>
<td><code>(a &gt;= b)</code>结果为<code>false</code></td>
</tr>
<tr>
<td><code>&lt;=</code></td>
<td>它用于检查左操作数的值是否小于或等于右操作数的值，如果是，则条件求值结果为<code>true</code>。</td>
<td><code>(a &lt;= b)</code>结果为<code>true</code></td>
</tr>
<tr>
<td><code>!&lt;</code></td>
<td>它用于检查左操作数的值是否<strong>不小于</strong>右操作数的值，如果是，则条件求值结果为<code>true</code>。</td>
<td><code>(a !&lt; b)</code>结果为<code>false</code></td>
</tr>
<tr>
<td><code>!&gt;</code></td>
<td>它用于检查左操作数的值是否<strong>不大于</strong>右操作数的值，如果是，则条件求值结果为<code>true</code>。</td>
<td><code>(a !&gt; b)</code>结果为<code>true</code></td>
</tr>
</tbody></table>
<h3 id="SQLite逻辑运算符"><a href="#SQLite逻辑运算符" class="headerlink" title="SQLite逻辑运算符"></a>SQLite逻辑运算符</h3><p>以下是SQLite中的逻辑运算符列表：</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>AND</td>
<td>AND运算符允许在SQL语句WHERE子句中存在(或使用)多个条件。</td>
</tr>
<tr>
<td>BETWEEN</td>
<td>BETWEEN运算符用于搜索位于给定最小值和最大值的范围内的值。</td>
</tr>
<tr>
<td>EXISTS</td>
<td>EXISTS运算符用于搜索符合特定条件的指定表中的行的存在。</td>
</tr>
<tr>
<td>IN</td>
<td>IN运算符用于将值与已指定的文字值列表中的值进行比较。</td>
</tr>
<tr>
<td>NOT IN</td>
<td>IN运算符用于将值与指定的文字值列表中的值进行比较的否定。</td>
</tr>
<tr>
<td>LIKE</td>
<td>LIKE运算符用于使用通配符运算符将值与类似值进行比较。</td>
</tr>
<tr>
<td>GLOB</td>
<td>GLOB运算符用于使用通配符运算符将值与类似值进行比较。 此外，<code>glob</code>是区分大小写的，这点不同于<code>like</code>操作符。</td>
</tr>
<tr>
<td>NOT</td>
<td>NOT运算符反转使用它的逻辑运算符的含义。 例如：<code>NOT EXISTS</code>，<code>NOT BETWEEN</code>，<code>NOT IN</code>等。这些被称为否定运算符。</td>
</tr>
<tr>
<td>OR</td>
<td>OR运算符用于组合SQL语句where子句中的多个条件。</td>
</tr>
<tr>
<td>IS NULL</td>
<td><code>NULL</code>运算符用于将值与空(<code>null</code>)值进行比较。</td>
</tr>
<tr>
<td>IS</td>
<td><code>IS</code>运算符工作类似于<code>=</code>运算符</td>
</tr>
<tr>
<td>IS NOT</td>
<td><code>IS NOT</code>操作符类似于<code>!=</code>运算符</td>
</tr>
<tr>
<td><img src="/images/loading.gif" data-original="../images/basic/654160556_27031.png" alt="img"></td>
<td>该运算符用于将运算符两侧的两个不同的字符串连接创建为一个新的字符串。</td>
</tr>
<tr>
<td>UNIQUE</td>
<td>UNIQUE运算符搜索指定表的每一行记录的唯一性(值不重复)。</td>
</tr>
</tbody></table>
<h3 id="SQLite位运算符"><a href="#SQLite位运算符" class="headerlink" title="SQLite位运算符"></a>SQLite位运算符</h3><p>SQLite位运算符工作在位上并执行逐位操作。</p>
<p>下面是二进制<code>AND</code>(<code>＆</code>)和二进制<code>OR</code>(<code>|</code>)的真值表：</p>
<table>
<thead>
<tr>
<th>p</th>
<th>q</th>
<th>p&amp;q</th>
<th><img src="/images/loading.gif" data-original="../images/basic/964170501_50985.png" alt="img"></th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
</tbody></table>
<p>假设有两个变量“<code>a</code>”和“<code>b</code>”，两个变量的值分别是：<code>60</code>和<code>13</code>。那么<code>a</code>和<code>b</code>的二进制值是：</p>
<pre class="line-numbers language-shell"><code class="language-shell">a= 0011 1100

b= 0000 1101

a&b = 0000 1100

a|b = 0011 1101

~a = 1100 0011
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>&amp;</td>
<td>如果二进制AND运算符应用在两个操作数上，则二进制AND运算符将对该结果复制一位。</td>
<td>(<code>a &amp; b</code>) 将会得到 <code>12</code>也就是 <code>0000 1100</code></td>
</tr>
<tr>
<td><img src="/images/loading.gif" data-original="../images/basic/or.png" alt="img"></td>
<td>二进制OR运算符如果存在于任一操作数中，则复制一位。</td>
<td>(a<img src="/images/loading.gif" data-original="../images/basic/or.png" alt="img">)b) 将会得到 <code>61</code>也就是 <code>0011 1101</code></td>
</tr>
<tr>
<td>~</td>
<td>二进制补码运算符是一元的，具有“翻转”位的作用。</td>
<td>(<code>~a</code>) 将会得到<code>-61</code> 也就是 <code>1100 0011</code></td>
</tr>
<tr>
<td>&lt;&lt;</td>
<td>二进制左移操作符，左操作数值按右操作数指定的位数向左移动。</td>
<td><code>a &lt;&lt; 2</code> 将会得到 <code>240</code> 也就是 <code>1111 0000</code></td>
</tr>
<tr>
<td>&gt;&gt;</td>
<td>二进制右移操作符，左操作数值按右操作数指定的位数向右移动。</td>
<td><code>a &gt;&gt; 2</code> 将会得到 <code>15</code> 也就是 <code>0000 1111</code></td>
</tr>
</tbody></table>
<h2 id="SQLite表达式"><a href="#SQLite表达式" class="headerlink" title="SQLite表达式"></a>SQLite表达式</h2><p>SQLite表达式是一个或多个值，运算符和SQL函数的组合。表达式用于评估示值。</p>
<p>SQLite表达式用查询语言(SQL)编写，并与<code>SELECT</code>语句一起使用。</p>
<p><strong>语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> columnN   
<span class="token keyword">FROM</span> table_name   
<span class="token keyword">WHERE</span> <span class="token punctuation">[</span>CONDITION <span class="token operator">|</span> EXPRESSION<span class="token punctuation">]</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>SQLite中主要有三种类型的表达式：</p>
<h3 id="1-SQLite布尔表达式"><a href="#1-SQLite布尔表达式" class="headerlink" title="1. SQLite布尔表达式"></a>1. SQLite布尔表达式</h3><p>SQLite布尔表达式用于在匹配单个值的基础上获取数据。</p>
<p><strong>语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> columnN   
<span class="token keyword">FROM</span> table_name   
<span class="token keyword">WHERE</span> SINGLE <span class="token keyword">VALUE</span> MATCHTING EXPRESSION<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例：</strong></p>
<p>假设有一个名称为“<code>STUDENT</code>”的表，具有以下数据：</p>
<pre class="line-numbers language-shell"><code class="language-shell">sqlite> select * from student;
1|Max|27|Delhi|20000.0
2|Min|25|Patna|15000.0
3|Mark|23|USA|2000.0
4|Avg Lee|25|China|65000.0
5|Curry|26|China|25000.0
sqlite>
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>使用SQLite布尔表达式的简单示例，如下所示 -</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> STUDENT <span class="token keyword">WHERE</span> FEES <span class="token operator">=</span> <span class="token number">20000</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行上面查询，结果如下 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/815170539_20082.png" alt=""></p>
<h3 id="2-SQLite数字表达式"><a href="#2-SQLite数字表达式" class="headerlink" title="2. SQLite数字表达式"></a>2. SQLite数字表达式</h3><p>SQLite数字表达式用于在查询中用来执行数学运算。</p>
<p><strong>语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> numerical_expression <span class="token keyword">as</span>  OPERATION_NAME  
<span class="token punctuation">[</span><span class="token keyword">FROM</span> table_name <span class="token keyword">WHERE</span> CONDITION<span class="token punctuation">]</span> <span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><strong>示例</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token punctuation">(</span><span class="token number">25</span> <span class="token operator">+</span> <span class="token number">15</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> ADDITION<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token punctuation">(</span><span class="token number">250</span> <span class="token operator">+</span> <span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> ADDITION<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>执行上面查询，结果如下 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/490170542_14019.png" alt=""></p>
<p>数字表达式包含一些内置函数，如<code>avg()</code>，<code>sum()</code>，<code>count()</code>等。这些函数称为聚合数据计算函数。</p>
<p><strong>例如</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"number of students"</span> <span class="token keyword">FROM</span> STUDENT<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>FEES<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Sum FEES of students"</span> <span class="token keyword">FROM</span> STUDENT<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>执行上面查询，结果如下 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/162170545_24081.png" alt=""></p>
<h3 id="3-SQlite日期表达式"><a href="#3-SQlite日期表达式" class="headerlink" title="3. SQlite日期表达式"></a>3. SQlite日期表达式</h3><p>SQlite日期表达式用于获取当前系统日期和时间值。</p>
<p><strong>语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行上面查询，结果如下 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/855170547_77179.png" alt=""></p>
<h1 id="数据库和表"><a href="#数据库和表" class="headerlink" title="数据库和表"></a>数据库和表</h1><h2 id="SQLite创建数据库"><a href="#SQLite创建数据库" class="headerlink" title="SQLite创建数据库"></a>SQLite创建数据库</h2><p>在SQLite中，<code>sqlite3</code>命令用于创建新的数据库。</p>
<p><strong>语法</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite3 DatabaseName<span class="token number">.db</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>数据库名称(<code>DatabaseName.db</code>)在RDBMS中应该是唯一的。</p>
<blockquote>
<p>注意：<code>sqlite3</code>命令用于创建数据库。 但是，如果数据库不存在，则将自动创建具有给定名称的新数据库文件。</p>
</blockquote>
<p><strong>如何创建数据库：</strong></p>
<p>首先打开命令提示符并进入创建数据库的目录。之后，可以使用“<code>dir</code>”命令查看<code>sqlite</code>目录。</p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828111500138.png" alt=""></p>
<p><strong>示例：</strong></p>
<p>创建一个名称为“<code>ybai.db</code>”的数据库：</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite3 ybai<span class="token number">.db</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828111523947.png" alt=""></p>
<p>执行上面命令后，应该就创建了数据库。 可以使用“<code>.databases</code>”命令检查创建的数据库。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token punctuation">.</span><span class="token keyword">databases</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828111549951.png" alt=""></p>
<p>也可以在SQLite根文件夹中看到创建的数据库。</p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828111608717.png" alt=""></p>
<p><strong>.quit命令</strong></p>
<p>SQLite <code>.quit</code>命令用于从sqlite提示符中退出来。</p>
<p><strong>.dump命令</strong></p>
<p><code>.dump</code>命令用于在命令提示符下使用SQlite命令导出完整数据库在文本文件中。</p>
<p>例如：</p>
<pre class="line-numbers language-shell"><code class="language-shell">sqlite3 ybai.db .dump > ybai.sql
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行结果如下 </p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828111638625.png" alt=""></p>
<h2 id="SQLite附加-选择数据库"><a href="#SQLite附加-选择数据库" class="headerlink" title="SQLite附加/选择数据库"></a>SQLite附加/选择数据库</h2><p><strong>什么是附加数据库？</strong></p>
<p>假设有多个数据库，但是一次只能使用其中的一个。 这就要使用<code>ATTACH DATABASE</code>语句了。 它有助于您选择特定的数据库，并且在使用此命令后，所有SQLite语句将在附加/选择的数据库下执行。</p>
<p><strong>语法</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql">ATTACH <span class="token keyword">DATABASE</span> <span class="token string">'DatabaseName'</span> <span class="token keyword">As</span> <span class="token string">'Alias-Name'</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<blockquote>
<p>注意：如果数据库不存在，上述语法也将创建一个数据库，否则它只会将数据库文件名与逻辑数据库<code>Alias-Name</code>相连接。</p>
</blockquote>
<p>下面来举个例子，假设已以有一个存在的数据库：<code>ybai.db</code> 。</p>
<p>使用以下语句：</p>
<pre class="line-numbers language-sql"><code class="language-sql">ATTACH <span class="token keyword">DATABASE</span> <span class="token string">'ybai.db'</span> <span class="token keyword">as</span> <span class="token string">'yiibai'</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>现在可以通过使用<code>.databases</code>命令看到数据库：</p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828111741867.png" alt=""></p>
<h2 id="SQLite分离数据库"><a href="#SQLite分离数据库" class="headerlink" title="SQLite分离数据库"></a>SQLite分离数据库</h2><p>SQLite <code>DETACH DATABASE</code>语句用于将别名命名的数据库与先前使用<code>ATTACH</code>语句附加的数据库连接进行分离。</p>
<p>如果同一数据库文件已附加多个别名，则<code>DETACH</code>命令将仅断开给定的名称，其余的附件仍将继续。 主数据库和临时数据库无法分离。</p>
<blockquote>
<p><strong>注意</strong>：内存或临时数据库中的数据库将被完全销毁，内容将丢失。</p>
</blockquote>
<p><strong>语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql">DETACH <span class="token keyword">DATABASE</span> <span class="token string">'Alias-Name'</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>下面举个例子来演示如何分离附加的别名数据库。 在这里，假设有一个附加的数据库：“<code>yiibai</code>”。</p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828111923582.png" alt=""></p>
<p>从<code>ybai.db</code>分离“<code>yiibai</code>”：</p>
<pre class="line-numbers language-sql"><code class="language-sql">DETACH <span class="token keyword">DATABASE</span> <span class="token string">'yiibai'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828111939477.png" alt=""></p>
<p>执行上面命令后，数据库就分离了。可以使用“<code>.databases</code>”命令查看数据库的情况。</p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828111957918.png" alt=""></p>
<h2 id="SQLite创建表"><a href="#SQLite创建表" class="headerlink" title="SQLite创建表"></a>SQLite创建表</h2><p>在SQLite中，<code>CREATE TABLE</code>语句用于创建新表。 在创建表时，需要为表指定一个名称并定义表的每列和数据类型。</p>
<p><strong>语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> database_name<span class="token punctuation">.</span>table_name<span class="token punctuation">(</span>  
   column1 datatype  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>one <span class="token operator">or</span> more <span class="token keyword">columns</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  
   column2 datatype<span class="token punctuation">,</span>  
   column3 datatype<span class="token punctuation">,</span>  
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  
   columnN datatype<span class="token punctuation">,</span>  
<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>下面举个例子来创建SQLite数据库中的表：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> student<span class="token punctuation">(</span>  
   ID <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span>     <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  
   NAME           <span class="token keyword">TEXT</span>    <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  
   AGE            <span class="token keyword">INT</span>     <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  
   ADDRESS        CHAR<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  
   FEES         <span class="token keyword">REAL</span>  
<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>使用SQLite的<code>.tables</code>命令查看表是否已成功创建。</p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828112028409.png" alt=""></p>
<p>下面再创建另一个表：<code>department</code>。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> department<span class="token punctuation">(</span>  
 ID <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span>      <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  
  DEPT           CHAR<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  
  EMP_ID         <span class="token keyword">INT</span>      <span class="token operator">NOT</span> <span class="token boolean">NULL</span>  
<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行结果如下所示</p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828112047574.png" alt=""></p>
<p>现在数据库中有两个表：“<code>department</code>”和“<code>student</code>”。现在查看所创建的表：</p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828112104031.png" alt=""></p>
<p>创建另外一个表：<code>class</code>，存储学生的班级信息 -</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> class<span class="token punctuation">(</span>  
  id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span>      <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  
  class_name           CHAR<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  
  student_id         <span class="token keyword">INT</span>      <span class="token operator">NOT</span> <span class="token boolean">NULL</span>  
<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="SQLite删除表"><a href="#SQLite删除表" class="headerlink" title="SQLite删除表"></a>SQLite删除表</h2><p>在SQLite中，<code>DROP TABLE</code>语句用于删除表定义以及与该表关联的所有关联数据，索引，触发器，约束和权限规范。</p>
<p><strong>语法</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> database_name<span class="token punctuation">.</span>table_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>注意：使用<code>DROP TABLE</code>命令时必须非常小心，因为一旦删除了表，那么表中的所有可用信息都将被破坏，再无法恢复了。</p>
<p>下面举个例子来演示如何在SQLite中删除一个表。在上一篇创建表的教程文章中，我们成功地创建了有两个表：<code>department</code>和<code>student</code>。下面使用<code>.tables</code>命令来查看数据库现有表信息。</p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828112213043.png" alt=""></p>
<p>如上图中，可以看到所述的两个表：<code>department</code>和<code>student</code>。</p>
<p>现在，使用以下语句来删除<code>student</code>表 -</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> STUDENT<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>在执行上面命令后，使用<code>.tables</code>命令查看<code>student</code>表是否真的被删除了。如下所示</p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828112233303.png" alt="="></p>
<p>如上图中，所列出的表中并没有<code>student</code> ， 说明 <code>student</code> 确实被删除了。</p>
<h1 id="CURD操作"><a href="#CURD操作" class="headerlink" title="CURD操作"></a>CURD操作</h1><h2 id="SQLite插入查询"><a href="#SQLite插入查询" class="headerlink" title="SQLite插入查询"></a>SQLite插入查询</h2><p>在SQLite中，<code>INSERT INTO</code>语句用于将新的数据行添加/插入到表中。 创建表后，该命令用于将数据插入到表中。</p>
<p><code>INSERT INTO</code>语句有两种类型的基本语法：</p>
<p><strong>语法</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> TABLE_NAME <span class="token punctuation">[</span><span class="token punctuation">(</span>column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> column3<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN<span class="token punctuation">)</span><span class="token punctuation">]</span>    
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span>value1<span class="token punctuation">,</span> value2<span class="token punctuation">,</span> value3<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>valueN<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>这里，<code>column1</code>，<code>column2</code>，<code>column3</code>，<code>... columnN</code>是指定要插入数据的表中的列的名称。</p>
<p>如果要向表中的所有列添加值，则不需要在SQlite查询中指定列名称。 但是，应该确保值的顺序与表中列的顺序相同。</p>
<p>那么，语法如下所示：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> TABLE_NAME <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>value1<span class="token punctuation">,</span>value2<span class="token punctuation">,</span>value3<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>valueN<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>看下面一个例子，用来演示如何向SQLite数据库中执行<code>INSERT</code>查询语句。前面的文章中，已经创建了一个名为“<code>student</code>”的表。 现在向<code>student</code>表中插入一些数据记录。</p>
<p><strong>使用第一种方法插入值：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> student <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>FEES<span class="token punctuation">)</span>  
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'Maxsu'</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token string">'Shengzhen'</span><span class="token punctuation">,</span> <span class="token number">20000.00</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> student <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>FEES<span class="token punctuation">)</span>  
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'Minsu'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">'Beijing'</span><span class="token punctuation">,</span> <span class="token number">15000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> student <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>FEES<span class="token punctuation">)</span>  
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'Avgsu'</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">'Shanghai'</span><span class="token punctuation">,</span> <span class="token number">2000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> student <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>FEES<span class="token punctuation">)</span>  
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'Linsu'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">'Guangzhou'</span><span class="token punctuation">,</span> <span class="token number">65000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> student <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>FEES<span class="token punctuation">)</span>  
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'Sqlsu'</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token string">'Haikou'</span><span class="token punctuation">,</span> <span class="token number">25000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面代码，结果如下</p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828112338337.png" alt=""></p>
<p><strong>使用第二种方法：</strong></p>
<p>也可以通过第二种方法将数据插入到表中。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> student <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">'Javasu'</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token string">'Shengzhen'</span><span class="token punctuation">,</span> <span class="token number">18000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828112438246.png" alt=""></p>
<p>可以使用<code>SELECT</code>语句查看<code>student</code>表中的数据：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828112505491.png" alt=""></p>
<p>为了方便后面学习使用，这里也准备了一些 <code>department</code>表的数据 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> department <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>DEPT<span class="token punctuation">,</span>EMP_ID<span class="token punctuation">)</span>  <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'财务部'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> department <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>DEPT<span class="token punctuation">,</span>EMP_ID<span class="token punctuation">)</span>  <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'技术部'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> department <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>DEPT<span class="token punctuation">,</span>EMP_ID<span class="token punctuation">)</span>  <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'技术部'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> department <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>DEPT<span class="token punctuation">,</span>EMP_ID<span class="token punctuation">)</span>  <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">'市场部'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> department <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>DEPT<span class="token punctuation">,</span>EMP_ID<span class="token punctuation">)</span>  <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">'市场部'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>为了方便后面学习使用，这里也准备了一些 <code>class</code>表的数据 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> class <span class="token punctuation">(</span>id<span class="token punctuation">,</span>class_name<span class="token punctuation">,</span>student_id<span class="token punctuation">)</span>  <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'网络工程-001班'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> class <span class="token punctuation">(</span>id<span class="token punctuation">,</span>class_name<span class="token punctuation">,</span>student_id<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'网络工程-002班'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> class <span class="token punctuation">(</span>id<span class="token punctuation">,</span>class_name<span class="token punctuation">,</span>student_id<span class="token punctuation">)</span>  <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'网络工程-003班'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> class <span class="token punctuation">(</span>id<span class="token punctuation">,</span>class_name<span class="token punctuation">,</span>student_id<span class="token punctuation">)</span>  <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">'网络工程-004班'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="SQLite选择查询"><a href="#SQLite选择查询" class="headerlink" title="SQLite选择查询"></a>SQLite选择查询</h2><p>在SQLite数据库中，SELECT语句用于从表中获取数据。 当创建一个表并插入一些数据之后，我们在需要时查询提取数据。这就是为什么需要使用选择查询。</p>
<p><strong>语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> columnN <span class="token keyword">FROM</span> table_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>这里，<code>column1</code>，<code>column2</code> …是表的字段，指定想要获取哪些值。 如果要获取字段中可用的所有字段，则可以使用以下语法(使用 <code>*</code> 号表所有列)：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> table_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>选择所有列例子：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><img src="/images/loading.gif" data-original="../images/basic/871080545_91402.png" alt=""></p>
<p><strong>选择部分列例子：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> name<span class="token punctuation">,</span>fees <span class="token keyword">FROM</span> student<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><img src="/images/loading.gif" data-original="../images/basic/593080547_32046.png" alt=""></p>
<h2 id="SQLite更新查询"><a href="#SQLite更新查询" class="headerlink" title="SQLite更新查询"></a>SQLite更新查询</h2><p>在SQLite中，UPDATE查询用于修改表中的现有记录。 它与WHERE子句一起作为条件使用以选择特定行，否则所有行将被更新。</p>
<p><strong>语法</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">UPDATE</span> table_name  
<span class="token keyword">SET</span> column1 <span class="token operator">=</span> value1<span class="token punctuation">,</span> column2 <span class="token operator">=</span> value2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> columnN <span class="token operator">=</span> valueN  
<span class="token keyword">WHERE</span> <span class="token punctuation">[</span>condition<span class="token punctuation">]</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例：</strong></p>
<p>假设有一个名为“<code>student</code>”的表，具有以下数据：</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student<span class="token punctuation">;</span>
<span class="token number">1</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Shengzheng<span class="token operator">|</span><span class="token number">20000.0</span>
<span class="token number">2</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Beijing<span class="token operator">|</span><span class="token number">15000.0</span>
<span class="token number">3</span><span class="token operator">|</span>Avgsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shanghai<span class="token operator">|</span><span class="token number">2000.0</span>
<span class="token number">4</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">65000.0</span>
<span class="token number">5</span><span class="token operator">|</span>Sqlsu<span class="token operator">|</span><span class="token number">26</span><span class="token operator">|</span>Hainan<span class="token operator">|</span><span class="token number">25000.0</span>
<span class="token number">6</span><span class="token operator">|</span>Javasu<span class="token operator">|</span><span class="token number">21</span><span class="token operator">|</span>Shengzheng<span class="token operator">|</span><span class="token number">18000.0</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例1：</strong></p>
<p>更新<code>ID</code>值等于<code>1</code>的学生的地址 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">UPDATE</span> STUDENT <span class="token keyword">SET</span> ADDRESS <span class="token operator">=</span> <span class="token string">'Haikou'</span> <span class="token keyword">WHERE</span> ID <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>现在<code>ID</code>值等于<code>1</code>的学生的地址已经更新，可以使用<code>SELECT</code>语句检查更新结果：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> STUDENT<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>输出结果如下 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/254080559_85889.png" alt=""></p>
<p><strong>示例2：</strong></p>
<p>更新<code>ID</code>值等于<code>2</code>的学生的地址和费用 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">UPDATE</span> STUDENT <span class="token keyword">SET</span> ADDRESS <span class="token operator">=</span> <span class="token string">'Zhongshan Road No. 1233, Guangzhou'</span><span class="token punctuation">,</span> fees<span class="token operator">=</span><span class="token number">28800</span> <span class="token keyword">WHERE</span> ID <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>现在<code>ID</code>值等于<code>2</code>的学生的地址和费用已经更新，可以使用<code>SELECT</code>语句检查更新结果：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> STUDENT <span class="token keyword">where</span> id<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>输出结果如下 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/408090506_26825.png" alt=""></p>
<p><strong>示例3：</strong></p>
<p>如果不使用WHERE子句，它将修改<code>student</code>表中的所有地址：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">UPDATE</span> STUDENT <span class="token keyword">SET</span> ADDRESS <span class="token operator">=</span> <span class="token string">'Renmin Road No.123456, Haikou '</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="SQLite删除查询"><a href="#SQLite删除查询" class="headerlink" title="SQLite删除查询"></a>SQLite删除查询</h2><p>在SQLite中，<code>DELETE</code>查询语句用于从表中删除已经存在的记录。 可以将其与WHERE子句或不与WHERE子句一起使用。 WHERE子句用于指定删除特定记录(选定的行)，否则所有记录将被删除。</p>
<p><strong>语法</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> table_name  
<span class="token keyword">WHERE</span> <span class="token punctuation">[</span>conditions<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>注意：可以使用多个“<code>AND</code>”或“<code>OR</code>”运算符在“WHERE”子句中。</p>
</blockquote>
<p><strong>示例：</strong></p>
<p>有一个名为“<code>STUDENT</code>”的表，具有以下数据：</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student<span class="token punctuation">;</span>
<span class="token number">1</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Haikou<span class="token operator">|</span><span class="token number">20000.0</span>
<span class="token number">2</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Zhongshan Road <span class="token keyword">No</span><span class="token punctuation">.</span> <span class="token number">1233</span><span class="token punctuation">,</span> Guangzhou<span class="token operator">|</span><span class="token number">28800.0</span>
<span class="token number">3</span><span class="token operator">|</span>Avgsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shanghai<span class="token operator">|</span><span class="token number">2000.0</span>
<span class="token number">4</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">65000.0</span>
<span class="token number">5</span><span class="token operator">|</span>Sqlsu<span class="token operator">|</span><span class="token number">26</span><span class="token operator">|</span>Hainan<span class="token operator">|</span><span class="token number">25000.0</span>
<span class="token number">6</span><span class="token operator">|</span>Javasu<span class="token operator">|</span><span class="token number">21</span><span class="token operator">|</span>Shengzheng<span class="token operator">|</span><span class="token number">18000.0</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例1：</strong></p>
<p>从<code>STUDENT</code>表中，删除<code>ID</code>为<code>4</code>的学生信息记录。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> STUDENT <span class="token keyword">WHERE</span> ID <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>在执行上面语句后，学生<code>ID</code>为<code>4</code>的记录将被删除; 可以使用<code>SELECT</code>语句检查它：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> STUDENT<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行结果如下所示 -</p>
<p><img src="/images/loading.gif" data-original="../images/basic/424110539_24603.png" alt=""></p>
<p><strong>示例2：</strong></p>
<p>删除表中那些年龄小于 <code>25</code> 的所有记录，那么可在<code>WHERE</code>子句后指定条件。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> STUDENT <span class="token keyword">WHERE</span> age <span class="token operator">&lt;</span> <span class="token number">25</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行结果如下所示 -</p>
<p><img src="/images/loading.gif" data-original="../images/basic/163110543_85633.png" alt=""></p>
<p><strong>示例3：</strong></p>
<p>如果要删除<code>student</code>表中的所有记录，则不需要指定WHERE子句。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> STUDENT<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行结果如下所示 -</p>
<p><img src="/images/loading.gif" data-original="../images/basic/387110545_36365.png" alt=""></p>
<p>如上图所示，“<code>STUDENT</code>”表中没有任何数据了</p>
<h1 id="子句和条件"><a href="#子句和条件" class="headerlink" title="子句和条件"></a>子句和条件</h1><h2 id="SQLite-WHERE子句"><a href="#SQLite-WHERE子句" class="headerlink" title="SQLite WHERE子句"></a>SQLite WHERE子句</h2><p>SQLite WHERE子句通常与<code>SELECT</code>，<code>UPDATE</code>和<code>DELETE</code>语句一起使用，以便作为指定条件从一个表或多个表中获取数据。</p>
<p>如果条件满足或正确，则返回表中的特定值。 可使用WHERE子句来过滤记录并仅获取满足指定条件的记录。</p>
<p>WHERE子句还用于过滤记录并仅获取特定数据。</p>
<p><strong>语法</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> columnN   
<span class="token keyword">FROM</span> table_name  
<span class="token keyword">WHERE</span> <span class="token punctuation">[</span>condition<span class="token punctuation">]</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h3><p>在这个例子中，将使用WHERE子句与几个比较和逻辑运算符。如：<code>&gt;</code>，<code>&lt;</code>，<code>=</code>，<code>like</code>，<code>NOT</code>等等</p>
<p>假设有一个表<code>student</code>，并具有以下数据：</p>
<p><strong>示例1：</strong></p>
<p>选择年龄(<code>age</code>)大于或等于<code>25</code>，并且费用(<code>fees</code>)大于或等于<code>10000.00</code>的学生信息记录，如下 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> STUDENT <span class="token keyword">WHERE</span> AGE <span class="token operator">>=</span> <span class="token number">25</span> <span class="token operator">AND</span> FEES <span class="token operator">>=</span> <span class="token number">10000.00</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行上面查询，得到以下结果 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/562140514_57622.png" alt=""></p>
<p><strong>示例2：</strong></p>
<p>从<code>STUDENT</code>表中选择查询名字以’<code>M</code>‘字母开头的学生信息记录。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> STUDENT <span class="token keyword">WHERE</span> NAME <span class="token operator">LIKE</span> <span class="token string">'M%'</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行上面查询，得到以下结果 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/640140515_24477.png" alt=""></p>
<p><strong>示例3：</strong></p>
<p>从<code>STUDENT</code>表中选择所有年龄为<code>25</code>或<code>27</code>岁的学生信息。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> STUDENT <span class="token keyword">WHERE</span> AGE <span class="token operator">IN</span> <span class="token punctuation">(</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">27</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行上面查询，得到以下结果 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/977140515_12674.png" alt=""></p>
<p><strong>示例4：</strong></p>
<p>从<code>STUDENT</code>表中选择所有年龄不是<code>25</code>，也不是<code>27</code>岁的学生信息。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> STUDENT <span class="token keyword">WHERE</span> AGE <span class="token operator">NOT</span> <span class="token operator">IN</span> <span class="token punctuation">(</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">27</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行上面查询，得到以下结果 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/875140516_56563.png" alt=""></p>
<h2 id="SQLite-OR子句"><a href="#SQLite-OR子句" class="headerlink" title="SQLite OR子句"></a>SQLite OR子句</h2><p>SQLite <code>AND</code>运算符通常与<code>SELECT</code>，<code>UPDATE</code>和<code>DELETE</code>语句一起使用以组合多个条件。 它是一个联合运算符，<code>OR</code>运算符始终与WHERE子句一起使用，如果两个条件之一为真，则完整条件为真。</p>
<p><strong>语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> columnN   
<span class="token keyword">FROM</span> table_name  
<span class="token keyword">WHERE</span> <span class="token punctuation">[</span>condition1<span class="token punctuation">]</span> <span class="token operator">OR</span> <span class="token punctuation">[</span>condition2<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">OR</span> <span class="token punctuation">[</span>conditionN<span class="token punctuation">]</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>可以使用OR运算符组合多个条件。</p>
<p><strong>示例：</strong></p>
<p>假设有一个名为<code>STUDENT</code>的表，并具有以下数据：</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> STUDENT <span class="token punctuation">;</span>
<span class="token number">1</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Shengzheng<span class="token operator">|</span><span class="token number">20000.0</span>
<span class="token number">2</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Beijing<span class="token operator">|</span><span class="token number">15000.0</span>
<span class="token number">3</span><span class="token operator">|</span>Avgsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shanghai<span class="token operator">|</span><span class="token number">2000.0</span>
<span class="token number">4</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">65000.0</span>
<span class="token number">5</span><span class="token operator">|</span>Sqlsu<span class="token operator">|</span><span class="token number">26</span><span class="token operator">|</span>Hainan<span class="token operator">|</span><span class="token number">25000.0</span>
<span class="token number">6</span><span class="token operator">|</span>Javasu<span class="token operator">|</span><span class="token number">21</span><span class="token operator">|</span>Shengzheng<span class="token operator">|</span><span class="token number">18000.0</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>从<code>STUDENT</code>表中选择所有<code>AGE</code>大于等于<code>25</code>，或者费用大于等于<code>15000</code>的学生的信息。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> STUDENT <span class="token keyword">WHERE</span> AGE <span class="token operator">>=</span> <span class="token number">25</span> <span class="token operator">OR</span> FEES <span class="token operator">>=</span> <span class="token number">15000</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>输出结果如下 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/225140532_26592.png" alt=""></p>
<h2 id="SQLite-LIKE子句"><a href="#SQLite-LIKE子句" class="headerlink" title="SQLite LIKE子句"></a>SQLite LIKE子句</h2><p>SQLite <code>LIKE</code>运算符用于使用通配符将文本值与模式进行匹配。 在搜索表达式与模式表达式匹配的情况下，<code>LIKE</code>运算符将返回真，即：<code>1</code>。</p>
<p>与<code>LIKE</code>操作符一起使用的两个通配符：</p>
<ul>
<li>百分号(<code>％</code>)</li>
<li>下划线(<code>_</code>)</li>
</ul>
<p>百分号(<code>％</code>)表示零个，一个或多个数字或字符。 下划线(<code>_</code>)表示一个数字或字符。</p>
<p><strong>语法</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">FROM</span> table_name  
<span class="token keyword">WHERE</span> <span class="token keyword">column</span> <span class="token operator">LIKE</span> <span class="token string">'XXXX%'</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>或者</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">FROM</span> table_name  
<span class="token keyword">WHERE</span> <span class="token keyword">column</span> <span class="token operator">LIKE</span> <span class="token string">'%XXXX%'</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>或者</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">FROM</span> table_name  
<span class="token keyword">WHERE</span> <span class="token keyword">column</span> <span class="token operator">LIKE</span> <span class="token string">'XXXX_'</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>或者</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">FROM</span> table_name  
<span class="token keyword">WHERE</span> <span class="token keyword">column</span> <span class="token operator">LIKE</span> <span class="token string">'_XXXX'</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>或者</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">FROM</span> table_name  
<span class="token keyword">WHERE</span> <span class="token keyword">column</span> <span class="token operator">LIKE</span> <span class="token string">'_XXXX_'</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>这里，<code>XXXX</code>可以是任何数字或字符串值。</p>
<p><strong>示例：</strong></p>
<p>假设有一个名为<code>STUDENT</code>的表，并具有以下数据：</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> STUDENT <span class="token punctuation">;</span>
<span class="token number">1</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Shengzheng<span class="token operator">|</span><span class="token number">20000.0</span>
<span class="token number">2</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Beijing<span class="token operator">|</span><span class="token number">15000.0</span>
<span class="token number">3</span><span class="token operator">|</span>Avgsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shanghai<span class="token operator">|</span><span class="token number">2000.0</span>
<span class="token number">4</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">65000.0</span>
<span class="token number">5</span><span class="token operator">|</span>Sqlsu<span class="token operator">|</span><span class="token number">26</span><span class="token operator">|</span>Hainan<span class="token operator">|</span><span class="token number">25000.0</span>
<span class="token number">6</span><span class="token operator">|</span>Javasu<span class="token operator">|</span><span class="token number">21</span><span class="token operator">|</span>Shengzheng<span class="token operator">|</span><span class="token number">18000.0</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在这些示例中，在WHERE语句的LIKE子句中，在’<code>FEES</code>‘字段上使用’<code>％</code>‘和’<code>_</code>‘运算符，对应结果如下：</p>
<table>
<thead>
<tr>
<th>语句</th>
<th>结果说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>Where FEES like '200%'</code></td>
<td>查找以<code>200</code>开头的任何值</td>
</tr>
<tr>
<td><code>Where FEES like '%200%'</code></td>
<td>查找包含<code>200</code>开头的任何值</td>
</tr>
<tr>
<td><code>Where FEES like '_00%'</code></td>
<td>查找第二个位置和第三个位置是<code>0</code>的任何值</td>
</tr>
<tr>
<td><code>Where FEES like '2_%_%'</code></td>
<td>查找以<code>2</code>开头并且长度至少为<code>3</code>个字符的值</td>
</tr>
<tr>
<td><code>Where FEES like '%2'</code></td>
<td>查找以<code>2</code>结尾的任何值</td>
</tr>
<tr>
<td><code>Where FEES like '_2%3'</code></td>
<td>查找任何在第二个位置值为<code>2</code>，并以<code>3</code>结尾的值</td>
</tr>
<tr>
<td><code>Where FEES like '2___3'</code></td>
<td>查找以<code>2</code>开头，以<code>3</code>结尾的一个五位数字值</td>
</tr>
</tbody></table>
<p><strong>示例1：</strong></p>
<p>从<code>STUDENT</code>表中查询<code>age</code>以<code>5</code>结尾的所有记录。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> STUDENT <span class="token keyword">WHERE</span> AGE  <span class="token operator">LIKE</span> <span class="token string">'%5'</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行上面语句，得到以下结果 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/746140554_70433.png" alt=""></p>
<p><strong>示例2：</strong></p>
<p>从<code>STUDENT</code>表中查询地址值具有“<code>an</code>”字符的所有记录：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> STUDENT <span class="token keyword">WHERE</span> ADDRESS <span class="token operator">LIKE</span> <span class="token string">'%an%'</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行上面语句，得到以下结果 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/537140557_41539.png" alt=""></p>
<h2 id="SQLite-GLOB子句"><a href="#SQLite-GLOB子句" class="headerlink" title="SQLite GLOB子句"></a>SQLite GLOB子句</h2><p>SQLite <code>GLOB</code>操作符通过使用通配符将模式表达式与文本值匹配， 当搜索表达式与模式表达式匹配时，<code>GLOB</code>运算符将返回真，该值为：<code>1</code>。</p>
<p><code>GLOB</code>运算符遵循UNIX的语法，使用指定以下通配符。</p>
<ul>
<li>星号(<code>*</code>)： 符号表示零个或多个数字或字符。</li>
<li>问号(<code>?</code>)： 符号表示单个数字或字符。</li>
</ul>
<p><strong>语法：</strong></p>
<p>星号(<code>*</code>)符号的语法：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">FROM</span> table_name  
<span class="token keyword">WHERE</span> <span class="token keyword">column</span> GLOB <span class="token string">'XXXX*'</span>  
<span class="token comment" spellcheck="true">-- 或者</span>
<span class="token keyword">SELECT</span> <span class="token keyword">FROM</span> table_name  
<span class="token keyword">WHERE</span> <span class="token keyword">column</span> GLOB <span class="token string">'*XXXX*'</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>问号(<code>?</code>)符号的语法：</li>
</ul>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">FROM</span> table_name  
<span class="token keyword">WHERE</span> <span class="token keyword">column</span> GLOB <span class="token string">'XXXX?'</span>  
<span class="token comment" spellcheck="true">-- 或者</span>
<span class="token keyword">SELECT</span> <span class="token keyword">FROM</span> table_name  
<span class="token keyword">WHERE</span> <span class="token keyword">column</span> GLOB <span class="token string">'?XXXX'</span>  
<span class="token comment" spellcheck="true">-- 或者</span>
<span class="token keyword">SELECT</span> <span class="token keyword">FROM</span> table_name  
<span class="token keyword">WHERE</span> <span class="token keyword">column</span> GLOB <span class="token string">'?XXXX?'</span>  
<span class="token comment" spellcheck="true">-- 或者</span>
<span class="token keyword">SELECT</span> <span class="token keyword">FROM</span> table_name  
<span class="token keyword">WHERE</span> <span class="token keyword">column</span> GLOB <span class="token string">'????'</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="示例：-1"><a href="#示例：-1" class="headerlink" title="示例："></a>示例：</h3><p>假设有一个名为“<code>STUDENT</code>”的表，并具有以下数据：</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> STUDENT<span class="token punctuation">;</span>
<span class="token number">1</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Shengzheng<span class="token operator">|</span><span class="token number">20000.0</span>
<span class="token number">2</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Beijing<span class="token operator">|</span><span class="token number">15000.0</span>
<span class="token number">3</span><span class="token operator">|</span>Avgsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shanghai<span class="token operator">|</span><span class="token number">2000.0</span>
<span class="token number">4</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">65000.0</span>
<span class="token number">5</span><span class="token operator">|</span>Sqlsu<span class="token operator">|</span><span class="token number">26</span><span class="token operator">|</span>Hainan<span class="token operator">|</span><span class="token number">25000.0</span>
<span class="token number">6</span><span class="token operator">|</span>Javasu<span class="token operator">|</span><span class="token number">21</span><span class="token operator">|</span>Shengzheng<span class="token operator">|</span><span class="token number">18000.0</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在下面这些示例中，WHERE语句具有不同的BLOB子句，带有’<code>*</code>‘和’<code>?</code>‘运算符：</p>
<table>
<thead>
<tr>
<th>语句</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>WHERE FEES GLOB '200*'</code></td>
<td>查找以<code>200</code>开头的任何值</td>
</tr>
<tr>
<td><code>WHERE FEES GLOB '*200*'</code></td>
<td>查找包含<code>200</code>的任何值</td>
</tr>
<tr>
<td><code>WHERE FEES GLOB '?00*'</code></td>
<td>查找在第二和第三个位置是<code>00</code>的任何值</td>
</tr>
<tr>
<td><code>WHERE FEES GLOB '2??'</code></td>
<td>查找以<code>2</code>开头并且长度至少为<code>3</code>个字符的值</td>
</tr>
<tr>
<td><code>WHERE FEES GLOB'*2'</code></td>
<td>查找以2结尾的任何值</td>
</tr>
<tr>
<td><code>WHERE FEES GLOB '?2*3'</code></td>
<td>查找具有第二个位置是<code>2</code>并以<code>3</code>结尾的任何值</td>
</tr>
<tr>
<td><code>WHERE FEES GLOB '2???3'</code></td>
<td>查找以<code>2</code>开头并以<code>3</code>结尾的五位数字的任何值</td>
</tr>
</tbody></table>
<p><strong>例1：</strong></p>
<p>从<code>student</code>表中选择<code>fees</code>以<code>2</code>开头所有记录：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student <span class="token keyword">WHERE</span> fees  GLOB <span class="token string">'2*'</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行上面代码，输出结果如下 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/119080556_38272.png" alt=""></p>
<p><strong>例2：</strong></p>
<p>从<code>student</code>表中选择<code>address</code>包含<code>an</code>字符所有记录：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student <span class="token keyword">WHERE</span> address  GLOB <span class="token string">'*an*'</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行上面代码，输出结果如下 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/637080558_49424.png" alt=""></p>
<h2 id="SQLite-LIMIT子句"><a href="#SQLite-LIMIT子句" class="headerlink" title="SQLite LIMIT子句"></a>SQLite LIMIT子句</h2><p>SQLite <code>LIMIT</code>子句用于限制通过SELECT命令从表中获取的记录的数量。</p>
<p><strong>语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> columnN   
<span class="token keyword">FROM</span> table_name  
<span class="token keyword">LIMIT</span> <span class="token punctuation">[</span><span class="token keyword">no</span> <span class="token keyword">of</span> <span class="token keyword">rows</span><span class="token punctuation">]</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>LIMIT</code>子句也可以与<code>OFFSET</code>子句一起使用。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> columnN   
<span class="token keyword">FROM</span> table_name  
<span class="token keyword">LIMIT</span> <span class="token punctuation">[</span><span class="token keyword">no</span> <span class="token keyword">of</span> <span class="token keyword">rows</span><span class="token punctuation">]</span> <span class="token keyword">OFFSET</span> <span class="token punctuation">[</span><span class="token keyword">row</span> num<span class="token punctuation">]</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例：</strong></p>
<p>下面举个例子来演示SQLite LIMIT子句的用法。 假设有一个名为“<code>student</code>”的表，并具有以下数据：</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student<span class="token punctuation">;</span>
<span class="token number">1</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Shengzheng<span class="token operator">|</span><span class="token number">20000.0</span>
<span class="token number">2</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Beijing<span class="token operator">|</span><span class="token number">15000.0</span>
<span class="token number">3</span><span class="token operator">|</span>Avgsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shanghai<span class="token operator">|</span><span class="token number">2000.0</span>
<span class="token number">4</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">65000.0</span>
<span class="token number">5</span><span class="token operator">|</span>Sqlsu<span class="token operator">|</span><span class="token number">26</span><span class="token operator">|</span>Hainan<span class="token operator">|</span><span class="token number">25000.0</span>
<span class="token number">6</span><span class="token operator">|</span>Javasu<span class="token operator">|</span><span class="token number">21</span><span class="token operator">|</span>Shengzheng<span class="token operator">|</span><span class="token number">18000.0</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例1：</strong></p>
<p>通过使用<code>LIMIT</code>子名，根据需要的行数从<code>student</code>表中返回指定记录数量。例如，以下语句只返回<code>3</code>条记录 -</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> STUDENT <span class="token keyword">LIMIT</span> <span class="token number">3</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行上面语句，得到以下结果 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/929090504_27860.png" alt=""></p>
<p><strong>示例2：</strong></p>
<p><code>OFFSET</code>用于不从表中检索偏移记录。 在某些情况下，必须从某一点开始检索记录：</p>
<p>从<code>student</code>表中的第<code>2</code>位开始选择<code>2</code>条记录。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> STUDENT <span class="token keyword">LIMIT</span> <span class="token number">2</span> <span class="token keyword">OFFSET</span> <span class="token number">1</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行上面语句，得到以下结果 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/662090507_52045.png" alt=""></p>
<h2 id="SQLite-ORDER-BY子句"><a href="#SQLite-ORDER-BY子句" class="headerlink" title="SQLite ORDER BY子句"></a>SQLite ORDER BY子句</h2><p>SQLite <code>ORDER BY</code>子句用于根据一个或多个列对所获取的数据按升序或降序进行排序(排序)。</p>
<p><strong>语法</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">column</span><span class="token operator">-</span>list   
<span class="token keyword">FROM</span> table_name   
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> condition<span class="token punctuation">]</span>   
<span class="token punctuation">[</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> columnN<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">ASC</span> <span class="token operator">|</span> <span class="token keyword">DESC</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>可以在<code>ORDER BY</code>子句中使用一个或多个列。所使用的列必须在列的列表中显示。</p>
<p>下面举个例子来演示如何使用<code>ORDER BY</code>子句。有一个名为<code>student</code>的表，具有以下数据：</p>
<p><strong>示例1：</strong></p>
<p>从<code>student</code>表中选择所有记录，按<code>fees</code>字段升序排序：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> fees <span class="token keyword">ASC</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行上面语句，得到以下结果 -</p>
<p><img src="/images/loading.gif" data-original="../images/basic/211090513_77158.png" alt=""></p>
<p><strong>示例2：</strong></p>
<p>从<code>student</code>表获取所有数据，并按<code>ADDRESS</code>和<code>FEES</code>对结果进行降序排序：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> address<span class="token punctuation">,</span> fees <span class="token keyword">DESC</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行上面语句，得到以下结果</p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828113229075.png" alt=""></p>
<p>注意：<code>address</code>值为<code>Shenzheng</code>的记录的<code>fees</code>字段的排序顺序。</p>
<h2 id="SQLite-GROUP-BY子句"><a href="#SQLite-GROUP-BY子句" class="headerlink" title="SQLite GROUP BY子句"></a>SQLite GROUP BY子句</h2><p>SQLite <code>GROUP BY</code>子句与<code>SELECT</code>语句一起使用，将相同的相同元素合并成一个组。</p>
<p><code>GROUP BY</code>子句与<code>SELECT</code>语句中的<code>WHERE</code>子句一起使用，并且<code>WHERE</code>子句在<code>ORDER BY</code>子句之前。</p>
<p><strong>语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">column</span><span class="token operator">-</span>list  
<span class="token keyword">FROM</span> table_name  
<span class="token keyword">WHERE</span> <span class="token punctuation">[</span> conditions <span class="token punctuation">]</span>  
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN  
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>下面举个例子来说明如何使用<code>GROUP BY</code>子句。 假设有一个名为<code>student</code>的表，具有以下数据：</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token number">1</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Shengzhen<span class="token operator">|</span><span class="token number">20000.0</span>
<span class="token number">2</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Beijing<span class="token operator">|</span><span class="token number">15000.0</span>
<span class="token number">3</span><span class="token operator">|</span>Avgsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shanghai<span class="token operator">|</span><span class="token number">2000.0</span>
<span class="token number">4</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">65000.0</span>
<span class="token number">5</span><span class="token operator">|</span>Sqlsu<span class="token operator">|</span><span class="token number">26</span><span class="token operator">|</span>Haikou<span class="token operator">|</span><span class="token number">25000.0</span>
<span class="token number">6</span><span class="token operator">|</span>Javasu<span class="token operator">|</span><span class="token number">21</span><span class="token operator">|</span>Shengzhen<span class="token operator">|</span><span class="token number">18000.0</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>使用<code>GROUP BY</code>查询每位学生的费用总额：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> NAME<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>FEES<span class="token punctuation">)</span> <span class="token keyword">FROM</span> STUDENT <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> NAME<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行上面代码，得到以下结果 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/745090526_27091.png" alt=""></p>
<p>现在，使用以下<code>INSERT</code>语句向<code>student</code>表中创建一些记录，为了更好演示，插入的部分列的数据值是相同的：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> STUDENT <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token string">'Linsu'</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token string">'Haikou'</span><span class="token punctuation">,</span> <span class="token number">10000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> STUDENT <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token string">'Minsu'</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">'Guangzhou'</span><span class="token punctuation">,</span> <span class="token number">5000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> STUDENT <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token string">'Maxsu'</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">'Shenzhen'</span><span class="token punctuation">,</span> <span class="token number">9000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面语句插入数据后，现在表中存在的数据如下 -</p>
<pre class="line-numbers language-shell"><code class="language-shell">sqlite> select * from student;
1|Maxsu|27|Shengzhen|20000.0
2|Minsu|25|Beijing|15000.0
3|Avgsu|23|Shanghai|2000.0
4|Linsu|25|Guangzhou|65000.0
5|Sqlsu|26|Haikou|25000.0
6|Javasu|21|Shengzhen|18000.0
7|Linsu|27|Haikou|10000.0
8|Minsu|23|Guangzhou|5000.0
9|Maxsu|23|Shenzhen|9000.0
sqlite>
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如上所示，现在有几个字段：<code>name</code>,<code>age</code>和<code>city</code>中的值是相同的。</p>
<p>现在，使用<code>GROUP BY</code>语句按<code>NAME</code>列来分组并对同分组内的所有的记录的<code>fees</code>列求和：</p>
<pre class="line-numbers language-sql"><code class="language-sql"> <span class="token keyword">select</span> name<span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>fees<span class="token punctuation">)</span> <span class="token keyword">from</span> student <span class="token keyword">group</span> <span class="token keyword">by</span> name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行上面代码，得到以下结果 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/403090534_89571.png" alt=""></p>
<p>可以使用<code>ORDER BY</code>子句和<code>GROUP BY</code>按升序或降序排列数据。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> NAME<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>FEES<span class="token punctuation">)</span> <span class="token keyword">AS</span> total_fees <span class="token keyword">FROM</span> STUDENT <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> NAME <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> NAME <span class="token keyword">DESC</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">-- 或者</span>
<span class="token keyword">SELECT</span> NAME<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>FEES<span class="token punctuation">)</span> <span class="token keyword">AS</span> total_fees <span class="token keyword">FROM</span> STUDENT <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> NAME <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> total_fees <span class="token keyword">DESC</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面代码，得到以下结果 - </p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> NAME<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>FEES<span class="token punctuation">)</span> <span class="token keyword">AS</span> total_fees <span class="token keyword">FROM</span> STUDENT <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> NAME <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> NAME <span class="token keyword">DESC</span><span class="token punctuation">;</span>
Sqlsu<span class="token operator">|</span><span class="token number">25000.0</span>
Minsu<span class="token operator">|</span><span class="token number">20000.0</span>
Maxsu<span class="token operator">|</span><span class="token number">29000.0</span>
Linsu<span class="token operator">|</span><span class="token number">75000.0</span>
Javasu<span class="token operator">|</span><span class="token number">18000.0</span>
Avgsu<span class="token operator">|</span><span class="token number">2000.0</span>
sqlite<span class="token operator">></span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> NAME<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>FEES<span class="token punctuation">)</span> <span class="token keyword">AS</span> total_fees <span class="token keyword">FROM</span> STUDENT <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> NAME <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> total_fees <span class="token keyword">DESC</span><span class="token punctuation">;</span>
Linsu<span class="token operator">|</span><span class="token number">75000.0</span>
Maxsu<span class="token operator">|</span><span class="token number">29000.0</span>
Sqlsu<span class="token operator">|</span><span class="token number">25000.0</span>
Minsu<span class="token operator">|</span><span class="token number">20000.0</span>
Javasu<span class="token operator">|</span><span class="token number">18000.0</span>
Avgsu<span class="token operator">|</span><span class="token number">2000.0</span>
sqlite<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="SQLite-HAVING子句"><a href="#SQLite-HAVING子句" class="headerlink" title="SQLite HAVING子句"></a>SQLite HAVING子句</h2><p>SQLite <code>HAVING</code>子句用于指定过滤分组的结果，并作为最终查询结果的条件。 <code>WHERE</code>子句将条件放在选定的列上，而<code>HAVING</code>子句指定的条件是由<code>GROUP BY</code>子句创建的列分组上(使用<code>HAVING</code>子句条件一定要作用在由<code>GROUP BY</code>子句指定列上)。</p>
<p>SELECT查询中<code>HAVING</code>子句的位置：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>  
<span class="token keyword">FROM</span>  
<span class="token keyword">WHERE</span>  
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>  
<span class="token keyword">HAVING</span>  
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>语法</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2  
<span class="token keyword">FROM</span> table1<span class="token punctuation">,</span> table2  
<span class="token keyword">WHERE</span> <span class="token punctuation">[</span> conditions <span class="token punctuation">]</span>  
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> column1<span class="token punctuation">,</span> column2  
<span class="token keyword">HAVING</span> <span class="token punctuation">[</span> conditions <span class="token punctuation">]</span>  
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> column1<span class="token punctuation">,</span> column2
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>下面举个例子来演示如何使用<code>HAVING</code>子句。假设有一个名为<code>student</code>的表，并具有以下数据：</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token number">1</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Shengzhen<span class="token operator">|</span><span class="token number">20000.0</span>
<span class="token number">2</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Beijing<span class="token operator">|</span><span class="token number">15000.0</span>
<span class="token number">3</span><span class="token operator">|</span>Avgsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shanghai<span class="token operator">|</span><span class="token number">2000.0</span>
<span class="token number">4</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">65000.0</span>
<span class="token number">5</span><span class="token operator">|</span>Sqlsu<span class="token operator">|</span><span class="token number">26</span><span class="token operator">|</span>Haikou<span class="token operator">|</span><span class="token number">25000.0</span>
<span class="token number">6</span><span class="token operator">|</span>Javasu<span class="token operator">|</span><span class="token number">21</span><span class="token operator">|</span>Shengzhen<span class="token operator">|</span><span class="token number">18000.0</span>
<span class="token number">7</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Haikou<span class="token operator">|</span><span class="token number">10000.0</span>
<span class="token number">8</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">5000.0</span>
<span class="token number">9</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shenzhen<span class="token operator">|</span><span class="token number">9000.0</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例1：</strong></p>
<p>下面查询<code>name</code>的数量小于<code>2</code>的所有记录，在查询之前，先来查询看看每个名字的数量 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 名字的数量</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">as</span> total_number <span class="token keyword">FROM</span> student <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> name<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">-- `name`的数量小于`2`的所有记录</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">as</span> total_number <span class="token keyword">FROM</span> student <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> NAME <span class="token keyword">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>NAME<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面语句，得到结果如下 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 所有记录</span>
sqlite<span class="token operator">></span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token number">1</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Shengzhen<span class="token operator">|</span><span class="token number">20000.0</span>
<span class="token number">2</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Beijing<span class="token operator">|</span><span class="token number">15000.0</span>
<span class="token number">3</span><span class="token operator">|</span>Avgsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shanghai<span class="token operator">|</span><span class="token number">2000.0</span>
<span class="token number">4</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">65000.0</span>
<span class="token number">5</span><span class="token operator">|</span>Sqlsu<span class="token operator">|</span><span class="token number">26</span><span class="token operator">|</span>Haikou<span class="token operator">|</span><span class="token number">25000.0</span>
<span class="token number">6</span><span class="token operator">|</span>Javasu<span class="token operator">|</span><span class="token number">21</span><span class="token operator">|</span>Shengzhen<span class="token operator">|</span><span class="token number">18000.0</span>
<span class="token number">7</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Haikou<span class="token operator">|</span><span class="token number">10000.0</span>
<span class="token number">8</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">5000.0</span>
<span class="token number">9</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shenzhen<span class="token operator">|</span><span class="token number">9000.0</span>
sqlite<span class="token operator">></span>
sqlite<span class="token operator">></span> 
<span class="token comment" spellcheck="true">-- 每个名字的数量</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">as</span> total_number <span class="token keyword">FROM</span> student <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> name<span class="token punctuation">;</span>
Avgsu<span class="token operator">|</span><span class="token number">1</span>
Javasu<span class="token operator">|</span><span class="token number">1</span>
Linsu<span class="token operator">|</span><span class="token number">2</span>
Maxsu<span class="token operator">|</span><span class="token number">2</span>
Minsu<span class="token operator">|</span><span class="token number">2</span>
Sqlsu<span class="token operator">|</span><span class="token number">1</span>
<span class="token comment" spellcheck="true">-- 查询数量小于2的名字</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">as</span> total_number <span class="token keyword">FROM</span> student <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> NAME <span class="token keyword">HAVING</span> total_number <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span>
Avgsu<span class="token operator">|</span><span class="token number">1</span>
Javasu<span class="token operator">|</span><span class="token number">1</span>
Sqlsu<span class="token operator">|</span><span class="token number">1</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例2：</strong></p>
<p>下面查询<code>address</code>的数量大于等于<code>2</code>的所有记录，在查询之前，先来查询看看每个地址的数量 - </p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> address<span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span>address<span class="token punctuation">)</span> <span class="token keyword">as</span> total_number <span class="token keyword">FROM</span> student <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> address <span class="token punctuation">;</span>
Beijing<span class="token operator">|</span><span class="token number">1</span>
Guangzhou<span class="token operator">|</span><span class="token number">2</span>
Haikou<span class="token operator">|</span><span class="token number">2</span>
Shanghai<span class="token operator">|</span><span class="token number">1</span>
Shengzhen<span class="token operator">|</span><span class="token number">2</span>
Shenzhen<span class="token operator">|</span><span class="token number">1</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> address<span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span>address<span class="token punctuation">)</span> <span class="token keyword">as</span> total_number <span class="token keyword">FROM</span> student <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> address <span class="token keyword">HAVING</span> total_number <span class="token operator">>=</span> <span class="token number">2</span><span class="token punctuation">;</span>
Guangzhou<span class="token operator">|</span><span class="token number">2</span>
Haikou<span class="token operator">|</span><span class="token number">2</span>
Shengzhen<span class="token operator">|</span><span class="token number">2</span>
sqlite<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="SQLite-DISTINCT子句"><a href="#SQLite-DISTINCT子句" class="headerlink" title="SQLite DISTINCT子句"></a>SQLite DISTINCT子句</h2><p>SQLite <code>DISTINCT</code>子句与<code>SELECT</code>语句一起使用，用来消除所有重复记录，并仅获取唯一记录。</p>
<p>当在表中有多个重复记录时可使用它来过滤重复的记录。</p>
<p><strong>语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN   
<span class="token keyword">FROM</span> table_name  
<span class="token keyword">WHERE</span> <span class="token punctuation">[</span>condition<span class="token punctuation">]</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例：</strong></p>
<p>假设有一个名为<code>student</code>的表，具有以下数据：</p>
<pre class="line-numbers language-shell"><code class="language-shell">sqlite> select * from student;
1|Maxsu|27|Shengzhen|20000.0
2|Minsu|25|Beijing|15000.0
3|Avgsu|23|Shanghai|2000.0
4|Linsu|25|Guangzhou|65000.0
5|Sqlsu|26|Haikou|25000.0
6|Javasu|21|Shengzhen|18000.0
7|Linsu|27|Haikou|10000.0
8|Minsu|23|Guangzhou|5000.0
9|Maxsu|23|Shenzhen|9000.0
sqlite>
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>首先，从<code>student</code>表中选择<code>NAME</code>，但是先不使用<code>DISTINCT</code>关键字。 它将显示重复的记录：</p>
<pre class="line-numbers language-shell"><code class="language-shell">sqlite> select id, name from student;
1|Maxsu
2|Minsu
3|Avgsu
4|Linsu
5|Sqlsu
6|Javasu
7|Linsu
8|Minsu
9|Maxsu
sqlite>
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如上面结果中，有几个名字是重复的，比如：<code>Linsu</code>, <code>Minsu</code> 和 <code>Maxsu</code> 都是有一个以上的名字。</p>
<p>现在，使用<code>DISTINCT</code>关键字从<code>STUDENT</code>表中选择<code>NAME</code>字段，并过滤掉重复的名字。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> NAME <span class="token keyword">FROM</span> STUDENT<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行上面语句，得到以下结果</p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828113419014.png" alt=""></p>
<p>作为一个练习：可以自行在<code>adress</code>上使用<code>DISTINCT</code>关键字过滤重复数据。</p>
<h2 id="SQLite-Union操作符"><a href="#SQLite-Union操作符" class="headerlink" title="SQLite Union操作符"></a>SQLite Union操作符</h2><p>SQLite <code>UNION</code>运算符用于使用<code>SELECT</code>语句组合两个或多个表的结果集。 <code>UNION</code>操作符仅显示唯一的行(删除重复的行)。</p>
<p>在使用<code>UNION</code>运算符时，每个<code>SELECT</code>语句必须在结果集中具有相同数量的字段。</p>
<p><strong>语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> expression1<span class="token punctuation">,</span> expression2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> expression_n  
<span class="token keyword">FROM</span> <span class="token keyword">tables</span>  
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> conditions<span class="token punctuation">]</span>  
<span class="token keyword">UNION</span>  
<span class="token keyword">SELECT</span> expression1<span class="token punctuation">,</span> expression2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> expression_n  
<span class="token keyword">FROM</span> <span class="token keyword">tables</span>  
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> conditions<span class="token punctuation">]</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>假设有两个表：<code>student</code>和<code>department</code>。</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token punctuation">.</span><span class="token keyword">tables</span>
department  student
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>student</code>表中具有以下数据：</p>
<pre class="line-numbers language-shell"><code class="language-shell">sqlite> select * from student;
1|Maxsu|27|Shengzhen|20000.0
2|Minsu|25|Beijing|15000.0
3|Avgsu|23|Shanghai|2000.0
4|Linsu|25|Guangzhou|65000.0
5|Sqlsu|26|Haikou|25000.0
6|Javasu|21|Shengzhen|18000.0
7|Linsu|27|Haikou|10000.0
8|Minsu|23|Guangzhou|5000.0
9|Maxsu|23|Shenzhen|9000.0
sqlite>
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>department</code>表中具有以下数据：</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> department<span class="token punctuation">;</span>
<span class="token number">1</span><span class="token operator">|</span>财务部<span class="token operator">|</span><span class="token number">1</span>
<span class="token number">2</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">2</span>
<span class="token number">3</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">3</span>
<span class="token number">4</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">4</span>
<span class="token number">5</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">5</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例1：</strong></p>
<p>使用<code>union</code>操作符返回单个字段 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> ID <span class="token keyword">FROM</span> STUDENT  
<span class="token keyword">UNION</span>  
<span class="token keyword">SELECT</span> ID <span class="token keyword">FROM</span> DEPARTMENT<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面代码，得到以下结果</p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828113453364.png" alt=""></p>
<p><strong>示例2：</strong> </p>
<p>联合内部和外部连接，按照以下条件和UNION子句，将上述两个表：<code>student</code>和<code>department</code>作为内部联接和外部联接。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> EMP_ID<span class="token punctuation">,</span> NAME<span class="token punctuation">,</span> DEPT <span class="token keyword">FROM</span> STUDENT <span class="token keyword">JOIN</span> DEPARTMENT  
<span class="token keyword">ON</span> STUDENT<span class="token punctuation">.</span>ID <span class="token operator">=</span> DEPARTMENT<span class="token punctuation">.</span>EMP_ID  
<span class="token keyword">UNION</span>  
<span class="token keyword">SELECT</span> EMP_ID<span class="token punctuation">,</span> NAME<span class="token punctuation">,</span> DEPT <span class="token keyword">FROM</span> STUDENT <span class="token keyword">LEFT</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> DEPARTMENT  
<span class="token keyword">ON</span> STUDENT<span class="token punctuation">.</span>ID <span class="token operator">=</span> DEPARTMENT<span class="token punctuation">.</span>EMP_ID<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面代码，得到以下结果</p>
<p><img src="/images/loading.gif" data-original="../images/basic/889110551_99784.png" alt=""></p>
<h2 id="SQLite-Union-All操作符"><a href="#SQLite-Union-All操作符" class="headerlink" title="SQLite Union All操作符"></a>SQLite Union All操作符</h2><p>SQLite <code>UNION ALL</code>运算符用于组合两个或多个<code>SELECT</code>语句的结果，但是不忽略重复的行(含有重复的行记录)。</p>
<p>在SQLite <code>UNION ALL</code>中，查询结果表还包括重复值。 其它规则适用于<code>Union</code>操作符。</p>
<p><strong>语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> expression1<span class="token punctuation">,</span> expression2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> expression_n  
<span class="token keyword">FROM</span> <span class="token keyword">tables</span>  
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> conditions<span class="token punctuation">]</span>  
<span class="token keyword">UNION</span> <span class="token keyword">ALL</span>  
<span class="token keyword">SELECT</span> expression1<span class="token punctuation">,</span> expression2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> expression_n  
<span class="token keyword">FROM</span> <span class="token keyword">tables</span>  
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> conditions<span class="token punctuation">]</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>假设有两个表：<code>student</code>和<code>department</code>。</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token punctuation">.</span><span class="token keyword">tables</span>
department  student
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>student</code>表中具有以下数据：</p>
<pre class="line-numbers language-shell"><code class="language-shell">sqlite> select * from student;
1|Maxsu|27|Shengzhen|20000.0
2|Minsu|25|Beijing|15000.0
3|Avgsu|23|Shanghai|2000.0
4|Linsu|25|Guangzhou|65000.0
5|Sqlsu|26|Haikou|25000.0
6|Javasu|21|Shengzhen|18000.0
7|Linsu|27|Haikou|10000.0
8|Minsu|23|Guangzhou|5000.0
9|Maxsu|23|Shenzhen|9000.0
sqlite>
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>department</code>表中具有以下数据：</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> department<span class="token punctuation">;</span>
<span class="token number">1</span><span class="token operator">|</span>财务部<span class="token operator">|</span><span class="token number">1</span>
<span class="token number">2</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">2</span>
<span class="token number">3</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">3</span>
<span class="token number">4</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">4</span>
<span class="token number">5</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">5</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例1：</strong></p>
<p>使用<code>union all</code>操作符返回单个字段，这个简单示例只返回来自两个字段具有相同数据类型的多个SELECT语句中的一个字段。<br>下面来看看上面的两个表：<code>student</code>和<code>department</code>，并在<code>UNION ALL</code>操作符从两个表中选择一个<code>id</code>。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> ID <span class="token keyword">FROM</span> STUDENT  
<span class="token keyword">UNION</span> <span class="token keyword">ALL</span>   
<span class="token keyword">SELECT</span> ID <span class="token keyword">FROM</span> DEPARTMENT<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面代码，得到以下结果 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/983120527_39513.png" alt=""></p>
<p><strong>示例2：</strong> </p>
<p><code>UNION ALL</code>内部和外部连接，按照以下条件和<code>UNION ALL</code>子句，将上述两个表：<code>student</code>和<code>department</code>作为内部联接和外部联接。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> EMP_ID<span class="token punctuation">,</span> NAME<span class="token punctuation">,</span> DEPT <span class="token keyword">FROM</span> STUDENT <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> DEPARTMENT  
<span class="token keyword">ON</span> STUDENT<span class="token punctuation">.</span>ID <span class="token operator">=</span> DEPARTMENT<span class="token punctuation">.</span>EMP_ID  
<span class="token keyword">UNION</span> <span class="token keyword">ALL</span>  
<span class="token keyword">SELECT</span> EMP_ID<span class="token punctuation">,</span> NAME<span class="token punctuation">,</span> DEPT <span class="token keyword">FROM</span> STUDENT <span class="token keyword">LEFT</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> DEPARTMENT  
<span class="token keyword">ON</span> STUDENT<span class="token punctuation">.</span>ID <span class="token operator">=</span> DEPARTMENT<span class="token punctuation">.</span>EMP_ID<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面代码，得到以下结果 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/942120528_58658.png" alt=""></p>
<h2 id="SQLite-IN运算符"><a href="#SQLite-IN运算符" class="headerlink" title="SQLite IN运算符"></a>SQLite IN运算符</h2><p>SQLite <code>IN</code>运算符用于确定值是否匹配列表或子查询中的任何值。 <code>IN</code>运算符的语法如下：</p>
<pre class="line-numbers language-sql"><code class="language-sql">expression <span class="token punctuation">[</span><span class="token operator">NOT</span><span class="token punctuation">]</span> <span class="token operator">IN</span> <span class="token punctuation">(</span>value_list<span class="token operator">|</span>subquery<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><code>expression</code>可以是任何有效的表达式。 它可以是表中的某一列。</p>
<p>值的列表(<code>value_list</code>)是固定值列表或子查询返回的一列的结果集。表的返回类型和列表中的值必须相同。</p>
<p><code>IN</code>运算符根据表达式是否匹配值列表中的任何值，返回<code>true</code>或<code>false</code>。要查询非列表中的值匹配，请使用<code>NOT IN</code>运算符。</p>
<h2 id="SQLite-IN运算符示例"><a href="#SQLite-IN运算符示例" class="headerlink" title="SQLite IN运算符示例"></a>SQLite IN运算符示例</h2><p>假设有一个名为<code>STUDENT</code>的表，并具有以下数据：</p>
<pre class="line-numbers language-shell"><code class="language-shell">sqlite> SELECT * FROM STUDENT ;
1|Maxsu|27|Shengzheng|20000.0
2|Minsu|25|Beijing|15000.0
3|Avgsu|23|Shanghai|2000.0
4|Linsu|25|Guangzhou|65000.0
5|Sqlsu|26|Hainan|25000.0
6|Javasu|21|Shengzheng|18000.0
sqlite>
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>若要查询ID为<code>1</code>，<code>3</code>，<code>5</code>的学生信息，可参考以下语句 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> ID<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>ADDRESS <span class="token keyword">FROM</span> student <span class="token keyword">WHERE</span> ID <span class="token operator">IN</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行上面查询语句，得到以下结果 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/260090628_11061.png" alt=""></p>
<p>上面的查询语句，与下面的OR条件语句效果一样 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> ID<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>ADDRESS <span class="token keyword">FROM</span> student <span class="token keyword">WHERE</span> ID <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">OR</span> ID<span class="token operator">=</span><span class="token number">3</span> <span class="token operator">OR</span> ID<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>IN语句和子查询</strong></p>
<p>假设有一个名称为：<code>department</code>的表，记录每个学生的所在的部门。</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">select</span> id <span class="token punctuation">,</span>dept<span class="token punctuation">,</span>emp_id <span class="token keyword">from</span> department<span class="token punctuation">;</span>
<span class="token number">1</span><span class="token operator">|</span>财务部<span class="token operator">|</span><span class="token number">1</span>
<span class="token number">2</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">2</span>
<span class="token number">3</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">3</span>
<span class="token number">4</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">4</span>
<span class="token number">5</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">5</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>其中，<code>emp_id</code>字段引用<code>student</code>表的<code>ID</code>字段，现在查询每个分配了部门的学生的信息，参考以下语句 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> ID<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>ADDRESS <span class="token keyword">FROM</span> student <span class="token keyword">WHERE</span> ID <span class="token operator">IN</span> <span class="token punctuation">(</span>
    <span class="token keyword">SELECT</span> emp_id <span class="token keyword">FROM</span>  department <span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>执行上面语句，得到如下结果 - </p>
<pre><code>sqlite&gt; select id ,dept,emp_id from department;
1|财务部|1
2|技术部|2
3|技术部|3
4|市场部|4
5|市场部|5
sqlite&gt;
sqlite&gt; SELECT ID,AGE,NAME,ADDRESS FROM student WHERE ID IN (
   ...&gt;     SELECT emp_id FROM  department );
1|27|Maxsu|Shengzhen
2|25|Minsu|Beijing
3|23|Avgsu|Shanghai
4|25|Linsu|Guangzhou
5|26|Sqlsu|Haikou
sqlite&gt;</code></pre><p><strong>SQLite NOT IN示例</strong></p>
<p>查询那些<code>ID</code>不是<code>1</code>，<code>3</code>，<code>5</code>学生的信息，参考以下语句 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> ID<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>ADDRESS <span class="token keyword">FROM</span> student <span class="token keyword">WHERE</span> ID <span class="token operator">NOT</span> <span class="token operator">IN</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>查询那些未分配部门的学生的信息，参考以下语句 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> ID<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>ADDRESS <span class="token keyword">FROM</span> student <span class="token keyword">WHERE</span> ID <span class="token operator">NOT</span> <span class="token operator">IN</span> <span class="token punctuation">(</span>
    <span class="token keyword">SELECT</span> emp_id <span class="token keyword">FROM</span>  department <span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>执行上面查询语句，得到以下结果 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/341090640_94910.png" alt=""></p>
<h1 id="连接操作"><a href="#连接操作" class="headerlink" title="连接操作"></a>连接操作</h1><h2 id="SQLite连接（JOIN子句）"><a href="#SQLite连接（JOIN子句）" class="headerlink" title="SQLite连接（JOIN子句）"></a>SQLite连接（JOIN子句）</h2><p>在SQLite中，<code>JOIN</code>子句用于组合数据库中两个或多个表的记录。 它通过使用两个表的公共值来组合来自两个表的字段。</p>
<p>SQLite中主要有三种类型的连接：</p>
<ul>
<li>SQLite内连接</li>
<li>SQLite外连接</li>
<li>SQLite交叉连接</li>
</ul>
<p><strong>示例</strong></p>
<p>假设有两个表：<code>department</code>和<code>student</code>。</p>
<p><code>student</code>表具有以下数据：</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token number">1</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Shengzhen<span class="token operator">|</span><span class="token number">20000.0</span>
<span class="token number">2</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Beijing<span class="token operator">|</span><span class="token number">15000.0</span>
<span class="token number">3</span><span class="token operator">|</span>Avgsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shanghai<span class="token operator">|</span><span class="token number">2000.0</span>
<span class="token number">4</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">65000.0</span>
<span class="token number">5</span><span class="token operator">|</span>Sqlsu<span class="token operator">|</span><span class="token number">26</span><span class="token operator">|</span>Haikou<span class="token operator">|</span><span class="token number">25000.0</span>
<span class="token number">6</span><span class="token operator">|</span>Javasu<span class="token operator">|</span><span class="token number">21</span><span class="token operator">|</span>Shengzhen<span class="token operator">|</span><span class="token number">18000.0</span>
<span class="token number">7</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Haikou<span class="token operator">|</span><span class="token number">10000.0</span>
<span class="token number">8</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">5000.0</span>
<span class="token number">9</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shenzhen<span class="token operator">|</span><span class="token number">9000.0</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>department</code>表具有以下数据：</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> department<span class="token punctuation">;</span>
<span class="token number">1</span><span class="token operator">|</span>财务部<span class="token operator">|</span><span class="token number">1</span>
<span class="token number">2</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">2</span>
<span class="token number">3</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">3</span>
<span class="token number">4</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">4</span>
<span class="token number">5</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">5</span>
sqlite<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="SQLite内连接（Inner-Join）"><a href="#SQLite内连接（Inner-Join）" class="headerlink" title="SQLite内连接（Inner Join）"></a>SQLite内连接（Inner Join）</h2><p>SQLite内连接(inner join)是最常见的连接类型。 它用于组合满足连接条件的多个表中的所有行记录。</p>
<p>SQlite内连接是默认的连接类型。</p>
<p><strong>语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">FROM</span> table1 <span class="token punctuation">[</span><span class="token keyword">INNER</span><span class="token punctuation">]</span> <span class="token keyword">JOIN</span> table2 <span class="token keyword">ON</span> conditional_expression <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>或者：</p>
<pre><code>SELECT ... FROM table1 JOIN table2 USING ( column1 ,... ) ...</code></pre><p>或者：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">FROM</span> table1 <span class="token keyword">NATURAL</span> <span class="token keyword">JOIN</span> table2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>内连接如下图所表示，蓝色阴影部分为内连接的交集 -</p>
<p><img src="/images/loading.gif" data-original="../images/basic/368140526_39492.png" alt=""></p>
<p><strong>示例</strong></p>
<p>假设有两个表：<code>department</code>和<code>student</code>。</p>
<p><code>student</code>表具有以下数据：</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token number">1</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Shengzhen<span class="token operator">|</span><span class="token number">20000.0</span>
<span class="token number">2</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Beijing<span class="token operator">|</span><span class="token number">15000.0</span>
<span class="token number">3</span><span class="token operator">|</span>Avgsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shanghai<span class="token operator">|</span><span class="token number">2000.0</span>
<span class="token number">4</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">65000.0</span>
<span class="token number">5</span><span class="token operator">|</span>Sqlsu<span class="token operator">|</span><span class="token number">26</span><span class="token operator">|</span>Haikou<span class="token operator">|</span><span class="token number">25000.0</span>
<span class="token number">6</span><span class="token operator">|</span>Javasu<span class="token operator">|</span><span class="token number">21</span><span class="token operator">|</span>Shengzhen<span class="token operator">|</span><span class="token number">18000.0</span>
<span class="token number">7</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Haikou<span class="token operator">|</span><span class="token number">10000.0</span>
<span class="token number">8</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">5000.0</span>
<span class="token number">9</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shenzhen<span class="token operator">|</span><span class="token number">9000.0</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>department</code>表具有以下数据：</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> department<span class="token punctuation">;</span>
<span class="token number">1</span><span class="token operator">|</span>财务部<span class="token operator">|</span><span class="token number">1</span>
<span class="token number">2</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">2</span>
<span class="token number">3</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">3</span>
<span class="token number">4</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">4</span>
<span class="token number">5</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">5</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例：</strong></p>
<p>查询每个学生所在的部门，如下查询语句 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> EMP_ID<span class="token punctuation">,</span> NAME<span class="token punctuation">,</span> DEPT <span class="token keyword">FROM</span> STUDENT <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> DEPARTMENT  
 <span class="token keyword">ON</span> STUDENT<span class="token punctuation">.</span>ID <span class="token operator">=</span> DEPARTMENT<span class="token punctuation">.</span>EMP_ID<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>执行上面查询，得到以下结果 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/902140529_50464.png" alt=""></p>
<p>注：没有指定部门的学生并不会查询出来。因为这里是基于条件 <code>STUDENT.ID = DEPARTMENT.EMP_ID</code> 来查询的。</p>
<h2 id="SQLite外连接（Outer-Join）"><a href="#SQLite外连接（Outer-Join）" class="headerlink" title="SQLite外连接（Outer Join）"></a>SQLite外连接（Outer Join）</h2><p>在SQL标准中，有三种类型的外连接：</p>
<ul>
<li>左外连接</li>
<li>右外连接</li>
<li>全外连接</li>
</ul>
<p>但是，SQLite仅支持<strong>左外连接</strong>。</p>
<h3 id="SQlite的左外连接"><a href="#SQlite的左外连接" class="headerlink" title="SQlite的左外连接"></a>SQlite的左外连接</h3><p>SQLite左外连接用于从<code>ON</code>条件中指定的左侧表中获取所有行，并且仅右表中满足连接条件的那些行记录。</p>
<p><strong>语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">FROM</span> table1 <span class="token keyword">LEFT</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> table2 <span class="token keyword">ON</span> conditional_expression
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>或者：</p>
<pre><code>SELECT ... FROM table1 LEFT OUTER JOIN table2 USING ( column1 ,......</code></pre><p>左外连接如下图所表示，蓝色阴影部分为左外连接的交集 -</p>
<p><img src="/images/loading.gif" data-original="../images/basic/231140534_74891.png" alt=""></p>
<p><strong>示例</strong></p>
<p>假设有两个表：<code>department</code>和<code>student</code>。</p>
<p><code>student</code>表具有以下数据：</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token number">1</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Shengzhen<span class="token operator">|</span><span class="token number">20000.0</span>
<span class="token number">2</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Beijing<span class="token operator">|</span><span class="token number">15000.0</span>
<span class="token number">3</span><span class="token operator">|</span>Avgsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shanghai<span class="token operator">|</span><span class="token number">2000.0</span>
<span class="token number">4</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">65000.0</span>
<span class="token number">5</span><span class="token operator">|</span>Sqlsu<span class="token operator">|</span><span class="token number">26</span><span class="token operator">|</span>Haikou<span class="token operator">|</span><span class="token number">25000.0</span>
<span class="token number">6</span><span class="token operator">|</span>Javasu<span class="token operator">|</span><span class="token number">21</span><span class="token operator">|</span>Shengzhen<span class="token operator">|</span><span class="token number">18000.0</span>
<span class="token number">7</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Haikou<span class="token operator">|</span><span class="token number">10000.0</span>
<span class="token number">8</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">5000.0</span>
<span class="token number">9</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shenzhen<span class="token operator">|</span><span class="token number">9000.0</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>department</code>表具有以下数据：</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> department<span class="token punctuation">;</span>
<span class="token number">1</span><span class="token operator">|</span>财务部<span class="token operator">|</span><span class="token number">1</span>
<span class="token number">2</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">2</span>
<span class="token number">3</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">3</span>
<span class="token number">4</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">4</span>
<span class="token number">5</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">5</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例：</strong></p>
<p>查询每个学生所在的部门，并按照以下条件进行左外连接，如下查询语句 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> EMP_ID<span class="token punctuation">,</span> NAME<span class="token punctuation">,</span> DEPT <span class="token keyword">FROM</span> STUDENT <span class="token keyword">LEFT</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> DEPARTMENT  
<span class="token keyword">ON</span> STUDENT<span class="token punctuation">.</span>ID <span class="token operator">=</span> DEPARTMENT<span class="token punctuation">.</span>EMP_ID<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>执行上面查询，得到以下结果 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/737140538_84141.png" alt=""></p>
<blockquote>
<p>注：没有指定部门的学生也会查询出来。因为左连接是基于左表，不管右表条件是否满足。</p>
</blockquote>
<h2 id="SQLite交叉连接（Cross-Join）"><a href="#SQLite交叉连接（Cross-Join）" class="headerlink" title="SQLite交叉连接（Cross Join）"></a>SQLite交叉连接（Cross Join）</h2><p>SQLite 交叉连接用于将第一个表的每一行与第二个表的每一行进行匹配。 如果第一个表包含<code>x</code>列，而第二个表包含<code>y</code>列，则所得到的交叉连接表的结果将包含<code>x * y</code>列。</p>
<p><strong>语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">FROM</span> table1 <span class="token keyword">CROSS</span> <span class="token keyword">JOIN</span> table2
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>交叉连接如下图所表示 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/410140541_80428.png" alt="img"></p>
<p><strong>示例</strong></p>
<p>假设有两个表：<code>department</code>和<code>student</code>。</p>
<p><code>student</code>表具有以下数据：</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token number">1</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Shengzhen<span class="token operator">|</span><span class="token number">20000.0</span>
<span class="token number">2</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Beijing<span class="token operator">|</span><span class="token number">15000.0</span>
<span class="token number">3</span><span class="token operator">|</span>Avgsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shanghai<span class="token operator">|</span><span class="token number">2000.0</span>
<span class="token number">4</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">65000.0</span>
<span class="token number">5</span><span class="token operator">|</span>Sqlsu<span class="token operator">|</span><span class="token number">26</span><span class="token operator">|</span>Haikou<span class="token operator">|</span><span class="token number">25000.0</span>
<span class="token number">6</span><span class="token operator">|</span>Javasu<span class="token operator">|</span><span class="token number">21</span><span class="token operator">|</span>Shengzhen<span class="token operator">|</span><span class="token number">18000.0</span>
<span class="token number">7</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Haikou<span class="token operator">|</span><span class="token number">10000.0</span>
<span class="token number">8</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">5000.0</span>
<span class="token number">9</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shenzhen<span class="token operator">|</span><span class="token number">9000.0</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>department</code>表具有以下数据：</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> department<span class="token punctuation">;</span>
<span class="token number">1</span><span class="token operator">|</span>财务部<span class="token operator">|</span><span class="token number">1</span>
<span class="token number">2</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">2</span>
<span class="token number">3</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">3</span>
<span class="token number">4</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">4</span>
<span class="token number">5</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">5</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例：</strong></p>
<p>在交叉连接后从表<code>department</code>和<code>student</code>中选择所有记录，如下查询语句 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student <span class="token keyword">CROSS</span> <span class="token keyword">JOIN</span> DEPARTMENT<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行上面查询，得到以下结果 - </p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student <span class="token keyword">CROSS</span> <span class="token keyword">JOIN</span> DEPARTMENT<span class="token punctuation">;</span>
<span class="token number">1</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Shengzhen<span class="token operator">|</span><span class="token number">20000.0</span><span class="token operator">|</span><span class="token number">1</span><span class="token operator">|</span>财务部<span class="token operator">|</span><span class="token number">1</span>
<span class="token number">1</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Shengzhen<span class="token operator">|</span><span class="token number">20000.0</span><span class="token operator">|</span><span class="token number">2</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">2</span>
<span class="token number">1</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Shengzhen<span class="token operator">|</span><span class="token number">20000.0</span><span class="token operator">|</span><span class="token number">3</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">3</span>
<span class="token number">1</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Shengzhen<span class="token operator">|</span><span class="token number">20000.0</span><span class="token operator">|</span><span class="token number">4</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">4</span>
<span class="token number">1</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Shengzhen<span class="token operator">|</span><span class="token number">20000.0</span><span class="token operator">|</span><span class="token number">5</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">5</span>
<span class="token number">2</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Beijing<span class="token operator">|</span><span class="token number">15000.0</span><span class="token operator">|</span><span class="token number">1</span><span class="token operator">|</span>财务部<span class="token operator">|</span><span class="token number">1</span>
<span class="token number">2</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Beijing<span class="token operator">|</span><span class="token number">15000.0</span><span class="token operator">|</span><span class="token number">2</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">2</span>
<span class="token number">2</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Beijing<span class="token operator">|</span><span class="token number">15000.0</span><span class="token operator">|</span><span class="token number">3</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">3</span>
<span class="token number">2</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Beijing<span class="token operator">|</span><span class="token number">15000.0</span><span class="token operator">|</span><span class="token number">4</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">4</span>
<span class="token number">2</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Beijing<span class="token operator">|</span><span class="token number">15000.0</span><span class="token operator">|</span><span class="token number">5</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">5</span>
<span class="token number">3</span><span class="token operator">|</span>Avgsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shanghai<span class="token operator">|</span><span class="token number">2000.0</span><span class="token operator">|</span><span class="token number">1</span><span class="token operator">|</span>财务部<span class="token operator">|</span><span class="token number">1</span>
<span class="token number">3</span><span class="token operator">|</span>Avgsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shanghai<span class="token operator">|</span><span class="token number">2000.0</span><span class="token operator">|</span><span class="token number">2</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">2</span>
<span class="token number">3</span><span class="token operator">|</span>Avgsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shanghai<span class="token operator">|</span><span class="token number">2000.0</span><span class="token operator">|</span><span class="token number">3</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">3</span>
<span class="token number">3</span><span class="token operator">|</span>Avgsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shanghai<span class="token operator">|</span><span class="token number">2000.0</span><span class="token operator">|</span><span class="token number">4</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">4</span>
<span class="token number">3</span><span class="token operator">|</span>Avgsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shanghai<span class="token operator">|</span><span class="token number">2000.0</span><span class="token operator">|</span><span class="token number">5</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">5</span>
<span class="token number">4</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">65000.0</span><span class="token operator">|</span><span class="token number">1</span><span class="token operator">|</span>财务部<span class="token operator">|</span><span class="token number">1</span>
<span class="token number">4</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">65000.0</span><span class="token operator">|</span><span class="token number">2</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">2</span>
<span class="token number">4</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">65000.0</span><span class="token operator">|</span><span class="token number">3</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">3</span>
<span class="token number">4</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">65000.0</span><span class="token operator">|</span><span class="token number">4</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">4</span>
<span class="token number">4</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">65000.0</span><span class="token operator">|</span><span class="token number">5</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">5</span>
<span class="token number">5</span><span class="token operator">|</span>Sqlsu<span class="token operator">|</span><span class="token number">26</span><span class="token operator">|</span>Haikou<span class="token operator">|</span><span class="token number">25000.0</span><span class="token operator">|</span><span class="token number">1</span><span class="token operator">|</span>财务部<span class="token operator">|</span><span class="token number">1</span>
<span class="token number">5</span><span class="token operator">|</span>Sqlsu<span class="token operator">|</span><span class="token number">26</span><span class="token operator">|</span>Haikou<span class="token operator">|</span><span class="token number">25000.0</span><span class="token operator">|</span><span class="token number">2</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">2</span>
<span class="token number">5</span><span class="token operator">|</span>Sqlsu<span class="token operator">|</span><span class="token number">26</span><span class="token operator">|</span>Haikou<span class="token operator">|</span><span class="token number">25000.0</span><span class="token operator">|</span><span class="token number">3</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">3</span>
<span class="token number">5</span><span class="token operator">|</span>Sqlsu<span class="token operator">|</span><span class="token number">26</span><span class="token operator">|</span>Haikou<span class="token operator">|</span><span class="token number">25000.0</span><span class="token operator">|</span><span class="token number">4</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">4</span>
<span class="token number">5</span><span class="token operator">|</span>Sqlsu<span class="token operator">|</span><span class="token number">26</span><span class="token operator">|</span>Haikou<span class="token operator">|</span><span class="token number">25000.0</span><span class="token operator">|</span><span class="token number">5</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">5</span>
<span class="token number">6</span><span class="token operator">|</span>Javasu<span class="token operator">|</span><span class="token number">21</span><span class="token operator">|</span>Shengzhen<span class="token operator">|</span><span class="token number">18000.0</span><span class="token operator">|</span><span class="token number">1</span><span class="token operator">|</span>财务部<span class="token operator">|</span><span class="token number">1</span>
<span class="token number">6</span><span class="token operator">|</span>Javasu<span class="token operator">|</span><span class="token number">21</span><span class="token operator">|</span>Shengzhen<span class="token operator">|</span><span class="token number">18000.0</span><span class="token operator">|</span><span class="token number">2</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">2</span>
<span class="token number">6</span><span class="token operator">|</span>Javasu<span class="token operator">|</span><span class="token number">21</span><span class="token operator">|</span>Shengzhen<span class="token operator">|</span><span class="token number">18000.0</span><span class="token operator">|</span><span class="token number">3</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">3</span>
<span class="token number">6</span><span class="token operator">|</span>Javasu<span class="token operator">|</span><span class="token number">21</span><span class="token operator">|</span>Shengzhen<span class="token operator">|</span><span class="token number">18000.0</span><span class="token operator">|</span><span class="token number">4</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">4</span>
<span class="token number">6</span><span class="token operator">|</span>Javasu<span class="token operator">|</span><span class="token number">21</span><span class="token operator">|</span>Shengzhen<span class="token operator">|</span><span class="token number">18000.0</span><span class="token operator">|</span><span class="token number">5</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">5</span>
<span class="token number">7</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Haikou<span class="token operator">|</span><span class="token number">10000.0</span><span class="token operator">|</span><span class="token number">1</span><span class="token operator">|</span>财务部<span class="token operator">|</span><span class="token number">1</span>
<span class="token number">7</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Haikou<span class="token operator">|</span><span class="token number">10000.0</span><span class="token operator">|</span><span class="token number">2</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">2</span>
<span class="token number">7</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Haikou<span class="token operator">|</span><span class="token number">10000.0</span><span class="token operator">|</span><span class="token number">3</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">3</span>
<span class="token number">7</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Haikou<span class="token operator">|</span><span class="token number">10000.0</span><span class="token operator">|</span><span class="token number">4</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">4</span>
<span class="token number">7</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Haikou<span class="token operator">|</span><span class="token number">10000.0</span><span class="token operator">|</span><span class="token number">5</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">5</span>
<span class="token number">8</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">5000.0</span><span class="token operator">|</span><span class="token number">1</span><span class="token operator">|</span>财务部<span class="token operator">|</span><span class="token number">1</span>
<span class="token number">8</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">5000.0</span><span class="token operator">|</span><span class="token number">2</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">2</span>
<span class="token number">8</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">5000.0</span><span class="token operator">|</span><span class="token number">3</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">3</span>
<span class="token number">8</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">5000.0</span><span class="token operator">|</span><span class="token number">4</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">4</span>
<span class="token number">8</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">5000.0</span><span class="token operator">|</span><span class="token number">5</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">5</span>
<span class="token number">9</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shenzhen<span class="token operator">|</span><span class="token number">9000.0</span><span class="token operator">|</span><span class="token number">1</span><span class="token operator">|</span>财务部<span class="token operator">|</span><span class="token number">1</span>
<span class="token number">9</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shenzhen<span class="token operator">|</span><span class="token number">9000.0</span><span class="token operator">|</span><span class="token number">2</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">2</span>
<span class="token number">9</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shenzhen<span class="token operator">|</span><span class="token number">9000.0</span><span class="token operator">|</span><span class="token number">3</span><span class="token operator">|</span>技术部<span class="token operator">|</span><span class="token number">3</span>
<span class="token number">9</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shenzhen<span class="token operator">|</span><span class="token number">9000.0</span><span class="token operator">|</span><span class="token number">4</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">4</span>
<span class="token number">9</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shenzhen<span class="token operator">|</span><span class="token number">9000.0</span><span class="token operator">|</span><span class="token number">5</span><span class="token operator">|</span>市场部<span class="token operator">|</span><span class="token number">5</span>
sqlite<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="SQLite左连接"><a href="#SQLite左连接" class="headerlink" title="SQLite左连接"></a>SQLite左连接</h2><p>类似于<code>INNER JOIN</code>子句，<code>LEFT JOIN</code>子句是SELECT语句的可选子句。可以使用<code>LEFT JOIN</code>子句来查询来自多个相关表的数据。</p>
<p>假设有两个表：<code>A</code>和<code>B</code></p>
<ul>
<li><code>A</code>表有<code>m</code>和<code>f</code>字段。</li>
<li><code>B</code>表有<code>n</code>和<code>f</code>字段。</li>
</ul>
<p>要使用<code>LEFT JOIN</code>子句执行<code>A</code>和<code>B</code>之间的连接，请使用以下语句：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>
 m<span class="token punctuation">,</span> n
<span class="token keyword">FROM</span> A
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> B <span class="token keyword">ON</span> A<span class="token number">.f</span> <span class="token operator">=</span> B<span class="token number">.f</span>
<span class="token keyword">WHERE</span> search_condition<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>表达式<code>A.f = B.f</code>是条件表达式。 除了等于(<code>=</code>)运算符之外，还可以使用大于(<code>&gt;</code>)，小于(<code>&lt;</code>)等的其他比较运算符。</p>
<p>该语句返回一个结果集，其中包含：</p>
<ul>
<li><code>A</code>表中的行(左表)在<code>B</code>表中具有相应的行。</li>
<li><code>A</code>表中的行存在，但在<code>B</code>表中不存的行使用<code>NULL</code>值填充。</li>
</ul>
<p>换句话说，<code>A</code>表中的所有行都包含在结果集中，无论<code>B</code>表中是否有匹配的行，如果<code>B</code>表中不匹配则使用<code>NULL</code>值填充。</p>
<p>如果语句中有<code>WHERE</code>子句，那么在<code>LEFT JOIN</code>子句的匹配完成之后，<code>WHERE</code>子句中的<code>search_condition</code>将被应用。</p>
<p>请参考<code>A</code>表和<code>B</code>表之间的<code>LEFT JOIN</code>子句，如下图所示 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/902100618_18282.png" alt=""></p>
<p><code>A</code>表中的所有行都包含在结果集中。</p>
<p>因为第二行(a2,2)在<code>B</code>表中没有相应的行，所以<code>LEFT JOIN</code>子句创建一个填充有<code>NULL</code>值的假行。</p>
<p>以下图说明了<code>LEFT JOIN</code>子句，黄色部分为最终查询结果集 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/311100619_40978.png" alt=""></p>
<p>假设有两个表：<code>class</code> 和 <code>student</code>，分别表示班级和学生。其数据如下 - </p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">select</span> id<span class="token punctuation">,</span>class_name<span class="token punctuation">,</span>student_id <span class="token keyword">from</span> class<span class="token punctuation">;</span>
<span class="token number">1</span><span class="token operator">|</span>网络工程<span class="token operator">-</span><span class="token number">001</span>班<span class="token operator">|</span><span class="token number">1</span>
<span class="token number">2</span><span class="token operator">|</span>网络工程<span class="token operator">-</span><span class="token number">002</span>班<span class="token operator">|</span><span class="token number">2</span>
<span class="token number">3</span><span class="token operator">|</span>网络工程<span class="token operator">-</span><span class="token number">003</span>班<span class="token operator">|</span><span class="token number">3</span>
<span class="token number">4</span><span class="token operator">|</span>网络工程<span class="token operator">-</span><span class="token number">004</span>班<span class="token operator">|</span><span class="token number">4</span>
sqlite<span class="token operator">></span>
sqlite<span class="token operator">></span> <span class="token keyword">select</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>address<span class="token punctuation">,</span>fees <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token number">1</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Shengzhen<span class="token operator">|</span><span class="token number">20000.0</span>
<span class="token number">2</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Beijing<span class="token operator">|</span><span class="token number">15000.0</span>
<span class="token number">3</span><span class="token operator">|</span>Avgsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shanghai<span class="token operator">|</span><span class="token number">2000.0</span>
<span class="token number">4</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">25</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">65000.0</span>
<span class="token number">5</span><span class="token operator">|</span>Sqlsu<span class="token operator">|</span><span class="token number">26</span><span class="token operator">|</span>Haikou<span class="token operator">|</span><span class="token number">25000.0</span>
<span class="token number">6</span><span class="token operator">|</span>Javasu<span class="token operator">|</span><span class="token number">21</span><span class="token operator">|</span>Shengzhen<span class="token operator">|</span><span class="token number">18000.0</span>
<span class="token number">7</span><span class="token operator">|</span>Linsu<span class="token operator">|</span><span class="token number">27</span><span class="token operator">|</span>Haikou<span class="token operator">|</span><span class="token number">10000.0</span>
<span class="token number">8</span><span class="token operator">|</span>Minsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">5000.0</span>
<span class="token number">9</span><span class="token operator">|</span>Maxsu<span class="token operator">|</span><span class="token number">23</span><span class="token operator">|</span>Shenzhen<span class="token operator">|</span><span class="token number">9000.0</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>现在使用 <code>left join</code>查询每个学生所在的班级信息 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>address<span class="token punctuation">,</span>fees<span class="token punctuation">,</span>class_name <span class="token keyword">from</span> student <span class="token keyword">left</span> <span class="token keyword">join</span> class <span class="token keyword">on</span> student<span class="token punctuation">.</span>id<span class="token operator">=</span>class<span class="token punctuation">.</span>student_id <span class="token keyword">where</span> student<span class="token punctuation">.</span>id <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行上面语句，得到以下结果 - </p>
<pre class="line-numbers language-shell"><code class="language-shell">sqlite>  select student.id,name,age,address,fees,class_name from student left join class on student.id=class.student_id where student.id > 0;
1|Maxsu|27|Shengzhen|20000.0|网络工程-001班
2|Minsu|25|Beijing|15000.0|网络工程-002班
3|Avgsu|23|Shanghai|2000.0|网络工程-003班
4|Linsu|25|Guangzhou|65000.0|网络工程-004班
5|Sqlsu|26|Haikou|25000.0|
6|Javasu|21|Shengzhen|18000.0|
7|Linsu|27|Haikou|10000.0|
8|Minsu|23|Guangzhou|5000.0|
9|Maxsu|23|Shenzhen|9000.0|
sqlite><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="SQLite时间日期"><a href="#SQLite时间日期" class="headerlink" title="SQLite时间日期"></a>SQLite时间日期</h1><h2 id="SQLite日期和时间"><a href="#SQLite日期和时间" class="headerlink" title="SQLite日期和时间"></a>SQLite日期和时间</h2><p>在SQLite中，<code>date()</code>和<code>time()</code>函数用于检索当前日期和时间。日期和时间函数使用<code>IS0-8601</code>日期和时间格式的子集。</p>
<p>在SQLite中有<code>6</code>种不同的日期和时间函数返回，并以不同格式进行日期和时间的计算：</p>
<ul>
<li>SQLite date()函数</li>
<li>SQLite datetime()函数</li>
<li>SQLite julianday()函数</li>
<li>SQLite now()函数</li>
<li>SQLite strftime()函数</li>
<li>SQLite time()函数</li>
</ul>
<table>
<thead>
<tr>
<th>编号</th>
<th>函数</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>date()函数</td>
<td>SQLite <code>date()</code>函数用于获取日期并以“<code>YYYY-MM-DD</code>”格式返回。</td>
</tr>
<tr>
<td>2</td>
<td>datetime()函数</td>
<td>SQLite <code>datetime()</code>函数用于计算日期/时间值，并以“<code>YYYY-MM-DD HH:MM:SS</code>”格式返回。</td>
</tr>
<tr>
<td>3</td>
<td>julianday()函数</td>
<td>SQLite <code>julianday()</code>函数根据儒略日返回日期。是公元前4714年11月24日以后的天数(在格林尼治时间)。它将日期作为浮点数返回。</td>
</tr>
<tr>
<td>4</td>
<td>now()函数</td>
<td>严格来说它不是一个函数。只是一个作为时间字符串参数用于在各种SQLite函数来检索当前的日期和时间。一些典型用法：<code>date('now')</code>,<code>time('now')</code></td>
</tr>
<tr>
<td>5</td>
<td>strftime()函数</td>
<td>SQLite <code>strftime()</code>函数用于以格式化的方式返回日期，并且还有助于您在日期上进行计算。</td>
</tr>
<tr>
<td>6</td>
<td>time()函数</td>
<td>SQLite <code>time()</code>函数用于获取时间并以“<code>HH-MM-SS</code>”格式返回。</td>
</tr>
</tbody></table>
<h2 id="SQLite-date-函数"><a href="#SQLite-date-函数" class="headerlink" title="SQLite date()函数"></a>SQLite date()函数</h2><p>SQLite <code>date()</code>函数用于检索日期并以“<code>YYYY-MM-DD</code>”格式返回。</p>
<p><strong>语法</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">date</span><span class="token punctuation">(</span>timestring<span class="token punctuation">,</span> <span class="token punctuation">[</span> modifier1<span class="token punctuation">,</span> modifier2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> modifier_n <span class="token punctuation">]</span> <span class="token punctuation">)</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>这里，<code>timestring</code>是一个日期值，可以是以下任何一个：</p>
<table>
<thead>
<tr>
<th>编号</th>
<th><code>timestring</code>的值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><code>now</code></td>
<td>用来返回当前日期的字面值</td>
</tr>
<tr>
<td>2</td>
<td><code>YYYY-MM-DD</code></td>
<td>指定格式为<code>YYYY-MM-DD</code>的日期值</td>
</tr>
<tr>
<td>3</td>
<td><code>YYYY-MM-DD HH:MM</code></td>
<td>指定格式为<code>YYYY-MM-DD HH:MM</code>的日期值</td>
</tr>
<tr>
<td>4</td>
<td><code>YYYY-MM-DD HH:MM:SS</code></td>
<td>指定格式为<code>YYYY-MM-DD HH:MM:SS</code>的日期值</td>
</tr>
<tr>
<td>5</td>
<td><code>YYYY-MM-DD HH:MM:SS.SSS</code></td>
<td>指定格式为<code>YYYY-MM-DD HH:MM:SS.SSS</code>的日期值</td>
</tr>
<tr>
<td>6</td>
<td><code>HH:MM</code></td>
<td>指定格式为<code>HH:MM</code>的日期值</td>
</tr>
<tr>
<td>7</td>
<td><code>HH:MM:SS</code></td>
<td>指定格式为<code>HH:MM:SS</code>的日期值</td>
</tr>
<tr>
<td>8</td>
<td><code>HH:MM:SS.SSS</code></td>
<td>指定格式为<code>HH:MM:SS.SSS</code>的日期值</td>
</tr>
<tr>
<td>9</td>
<td><code>YYYY-MM-DDTHH:MM</code></td>
<td>指定格式化为<code>YYYY-MM-DDTHH：MM</code>的日期值，其中<code>T</code>是一个文本字符分隔符，用于分隔日期和时间。</td>
</tr>
<tr>
<td>10</td>
<td><code>YYYY-MM-DDTHH:MM:SS</code></td>
<td>指定格式化为<code>YYYY-MM-DDTHH:MM:SS</code>的日期值，其中<code>T</code>是一个文本字符分隔符，用于分隔日期和时间。</td>
</tr>
<tr>
<td>11</td>
<td><code>YYYY-MM-DDTHH:MM:SS.SSS</code></td>
<td>指定格式化为<code>YYYY-MM-DDTHH:MM:SS.SSS</code>的日期值，其中<code>T</code>是一个文本字符分隔符，用于分隔日期和时间。</td>
</tr>
<tr>
<td>12</td>
<td><code>DDDDDDDDDD</code></td>
<td>指定儒略日的日期数</td>
</tr>
</tbody></table>
<ul>
<li><em>modifier1</em>, <em>modifier2</em>, <em>… modifier_n</em>: 这些修饰符是可选的。这些字符与时间字符串一起使用来添加或减少时间，日期或年份。</li>
</ul>
<table>
<thead>
<tr>
<th>编号</th>
<th>修辞符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><code>[+-]NNN years</code></td>
<td>用于指定添加/减去日期的年数</td>
</tr>
<tr>
<td>2</td>
<td><code>[+-]NNN months</code></td>
<td>用于指定添加/减去日期的月数</td>
</tr>
<tr>
<td>3</td>
<td><code>[+-]NNN days</code></td>
<td>用于指定添加/减去日期的天数</td>
</tr>
<tr>
<td>4</td>
<td><code>[+-]NNN hours</code></td>
<td>用于指定添加/减去日期的小时数</td>
</tr>
<tr>
<td>5</td>
<td><code>[+-]NNN minutes</code></td>
<td>用于指定添加/减去日期的分钟数</td>
</tr>
<tr>
<td>6</td>
<td><code>[+-]NNN seconds</code></td>
<td>用于指定添加/减去日期的秒数</td>
</tr>
<tr>
<td>7</td>
<td><code>[+-]NNN.NNNN seconds</code></td>
<td>用于指定添加/减去日期的秒数(和小数秒)</td>
</tr>
<tr>
<td>8</td>
<td><code>start of year</code></td>
<td>用于将日期重新转移到年初</td>
</tr>
<tr>
<td>9</td>
<td><code>start of month</code></td>
<td>用于将日期重新转移到月初</td>
</tr>
<tr>
<td>10</td>
<td><code>start of day</code></td>
<td>用于将日期重新移动到一天的开始</td>
</tr>
<tr>
<td>11</td>
<td><code>weekday N</code></td>
<td>用于将日期向前移动到工作日数为<code>N</code>的下一个日期(0=Sunday, 1=Monday, 2=Tuesday, 3=Wednesday, 4=Thursday, 5=Friday, 6=Saturday)</td>
</tr>
<tr>
<td>12</td>
<td><code>unixepoch</code></td>
<td>它与<code>DDDDDDDDDD</code>时间字符串一起用于将日期解释为UNIX时间(即：自<code>1970-01-01</code>以来的秒数)</td>
</tr>
<tr>
<td>13</td>
<td><code>localtime</code></td>
<td>用于将日期调整为本地时间，假设时间戳以<code>UTC</code>表示</td>
</tr>
<tr>
<td>14</td>
<td><code>utc</code></td>
<td>它用于将日期调整为<code>utc</code>，假设时间戳以本地时间表达</td>
</tr>
</tbody></table>
<p><strong>示例1：</strong></p>
<p>获取当前日期：</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token keyword">date</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2017</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">23</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例2：</strong></p>
<p>检索本月的第一天，有四种方法可以查询一个月的第一天：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">date</span><span class="token punctuation">(</span><span class="token string">'2017-12-17'</span><span class="token punctuation">,</span> <span class="token string">'start of month'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> <span class="token keyword">date</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span> <span class="token string">'start of month'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> <span class="token keyword">date</span><span class="token punctuation">(</span><span class="token string">'2019-10-16'</span><span class="token punctuation">,</span> <span class="token string">'-15 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
<span class="token keyword">SELECT</span> <span class="token keyword">date</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span> <span class="token string">'-23 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面查询，得到以下结果</p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828114229909.png" alt=""></p>
<p><strong>示例3：</strong></p>
<p>检索本月的最后一天，<code>date()</code>函数可用于检索月份的最后一天。有四种方法可以获取一个月的最后一天：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">date</span><span class="token punctuation">(</span><span class="token string">'2019-04-13'</span><span class="token punctuation">,</span> <span class="token string">'start of month'</span><span class="token punctuation">,</span><span class="token string">'+1 month'</span><span class="token punctuation">,</span> <span class="token string">'-1 day'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  

<span class="token keyword">SELECT</span> <span class="token keyword">date</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span> <span class="token string">'start of month'</span><span class="token punctuation">,</span><span class="token string">'+1 month'</span><span class="token punctuation">,</span> <span class="token string">'-1 day'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  

<span class="token keyword">SELECT</span> <span class="token keyword">date</span><span class="token punctuation">(</span><span class="token string">'2018-04-13'</span><span class="token punctuation">,</span> <span class="token string">'+17 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  

<span class="token keyword">SELECT</span> <span class="token keyword">date</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span> <span class="token string">'+8 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面查询，得到以下结果 - </p>
<pre class="line-numbers language-shell"><code class="language-shell">sqlite> SELECT date('2019-04-13', 'start of month','+1 month', '-1 day');
2019-04-30
sqlite>
sqlite> SELECT date('now', 'start of month','+1 month', '-1 day');
2017-05-31
sqlite>
sqlite> SELECT date('2018-04-13', '+17 days');
2018-04-30
sqlite>
sqlite> SELECT date('now', '+8 days');
2017-05-31
sqlite>
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例4：</strong></p>
<p>在当前日期上添加/减去年份，在当前日期加上/减去<code>5</code>个年数：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">date</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span><span class="token string">'+5 years'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  

<span class="token keyword">SELECT</span> <span class="token keyword">date</span><span class="token punctuation">(</span><span class="token string">'2018-06-13'</span><span class="token punctuation">,</span><span class="token string">'+5 years'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  

<span class="token keyword">SELECT</span> <span class="token keyword">date</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span><span class="token string">'-5 years'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  

<span class="token keyword">SELECT</span> <span class="token keyword">date</span><span class="token punctuation">(</span><span class="token string">'2018-06-13'</span><span class="token punctuation">,</span><span class="token string">'-5 years'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面查询，得到以下结果</p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828114258573.png" alt=""></p>
<p><strong>示例5：</strong></p>
<p>将天数添加到当前日期，通过上述方式，可以在当前日期上添加和减去天数，有以下几种方法可以实现：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">date</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span><span class="token string">'+5 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  

<span class="token keyword">SELECT</span> <span class="token keyword">date</span><span class="token punctuation">(</span><span class="token string">'2018-05-13'</span><span class="token punctuation">,</span><span class="token string">'+5 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  

<span class="token keyword">SELECT</span> <span class="token keyword">date</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span><span class="token string">'-5 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  

<span class="token keyword">SELECT</span> <span class="token keyword">date</span><span class="token punctuation">(</span><span class="token string">'2018-06-13'</span><span class="token punctuation">,</span><span class="token string">'-5 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面查询，得到以下结果</p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828114319047.png" alt=""></p>
<h2 id="SQLite-datetime-函数"><a href="#SQLite-datetime-函数" class="headerlink" title="SQLite datetime()函数"></a>SQLite datetime()函数</h2><p>SQLite <code>datetime()</code>函数用于以不同的格式检索/查询日期和时间。 日期时间函数的结果格式为“<code>YYYY-MM-DD HH:MM:SS</code>” 。</p>
<p><strong>语法</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">datetime</span><span class="token punctuation">(</span>timestring<span class="token punctuation">,</span> <span class="token punctuation">[</span> modifier1<span class="token punctuation">,</span> modifier2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> modifier_n <span class="token punctuation">]</span> <span class="token punctuation">)</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>示例1：</strong></p>
<p>检索当前日期和时间：</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2017</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">24</span> <span class="token number">12</span>:<span class="token number">54</span>:<span class="token number">53</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例2：</strong></p>
<p>添加/减去当前日期和时间的年数：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token string">'2017-08-13'</span><span class="token punctuation">,</span><span class="token string">'+5 years'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span><span class="token string">'+5 years'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>执行上面语句，得到以下结果 - </p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token string">'2017-08-13'</span><span class="token punctuation">,</span><span class="token string">'+5 years'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2022</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">13</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span><span class="token string">'+5 years'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2022</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">24</span> <span class="token number">12</span>:<span class="token number">56</span>:<span class="token number">29</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例3：</strong></p>
<p>在当前日期和时间上添加/减去天数：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token string">'2017-09-13'</span><span class="token punctuation">,</span><span class="token string">'+6 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span><span class="token string">'+3 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span><span class="token string">'-5 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面语句，得到以下结果 - </p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token string">'2017-08-13'</span><span class="token punctuation">,</span><span class="token string">'+5 years'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2022</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">13</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span><span class="token string">'+5 years'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2022</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">24</span> <span class="token number">12</span>:<span class="token number">56</span>:<span class="token number">29</span>
sqlite<span class="token operator">></span>
sqlite<span class="token operator">></span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token string">'2017-09-13'</span><span class="token punctuation">,</span><span class="token string">'+6 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2017</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">19</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span><span class="token string">'+3 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2017</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">27</span> <span class="token number">14</span>:<span class="token number">10</span>:<span class="token number">14</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span><span class="token string">'-5 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2017</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">19</span> <span class="token number">14</span>:<span class="token number">10</span>:<span class="token number">14</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例4：</strong></p>
<p>在当前日期和时间上添加/减去小时数：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token string">'2017-09-13'</span><span class="token punctuation">,</span><span class="token string">'+5 hours'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span><span class="token string">'+3 hours'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span><span class="token string">'-5 hours'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面语句，得到以下结果 - </p>
<pre class="line-numbers language-shell"><code class="language-shell">sqlite> SELECT datetime('2017-09-13','+5 hours');
2017-09-13 05:00:00
sqlite> SELECT datetime('now','+3 hours');
2017-05-24 17:12:36
sqlite> SELECT datetime('now','-5 hours');
2017-05-24 09:12:36
sqlite>
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例5：</strong></p>
<p>在当前日期和时间上添加/减去分钟数：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span><span class="token string">'+30 minutes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span><span class="token string">'-30 minutes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面语句，得到以下结果 -</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 当前时间</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2017</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">24</span> <span class="token number">14</span>:<span class="token number">15</span>:<span class="token number">45</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span><span class="token string">'+30 minutes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2017</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">24</span> <span class="token number">14</span>:<span class="token number">45</span>:<span class="token number">45</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span><span class="token string">'-30 minutes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2017</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">24</span> <span class="token number">13</span>:<span class="token number">45</span>:<span class="token number">46</span>
sqlite<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="SQLite-juliandday-函数"><a href="#SQLite-juliandday-函数" class="headerlink" title="SQLite juliandday()函数"></a>SQLite juliandday()函数</h2><p>SQLite <code>julianday()</code>函数应用修饰符，然后将日期作为输入日期后的儒略日(Julian day,JD)返回。</p>
<p>儒略日(Julian day，JD)是指由公元前4713年1月1日，协调世界时中午12时开始所经过的天数，多为天文学家采用，用以作为天文学的单一历法，把不同历法的年表统一起来。如果计算相隔若干年的两个日期之间间隔的天数，利用儒略日就比较方便。</p>
<p><strong>语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql">julianday<span class="token punctuation">(</span>timestring <span class="token punctuation">[</span><span class="token punctuation">,</span> modifier1<span class="token punctuation">,</span> modifier2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> modifier_n <span class="token punctuation">]</span> <span class="token punctuation">)</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>示例1：</strong></p>
<p>检索当前日期：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> julianday<span class="token punctuation">(</span><span class="token string">'2017-09-13'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> julianday<span class="token punctuation">(</span><span class="token string">'2017-09-13 16:45'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> julianday<span class="token punctuation">(</span><span class="token string">'2017-09-13 16:45:30'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> julianday<span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面代码，得到以下结果 - </p>
<pre class="line-numbers language-shell"><code class="language-shell">sqlite> SELECT julianday('2017-09-13');
2458009.5
sqlite> SELECT julianday('2017-09-13 16:45');
2458010.19791667
sqlite> SELECT julianday('2017-09-13 16:45:30');
2458010.19826389
sqlite> SELECT julianday('now');
2457898.09934488
sqlite>
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例2：</strong></p>
<p>检索本月的第一天：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> julianday<span class="token punctuation">(</span><span class="token string">'2017-07-13'</span><span class="token punctuation">,</span> <span class="token string">'start of month'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> julianday<span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span> <span class="token string">'start of month'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> julianday<span class="token punctuation">(</span><span class="token string">'2017-08-15'</span><span class="token punctuation">,</span> <span class="token string">'-6 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> julianday<span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span> <span class="token string">'-6 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面查询语句，得到以下结果 -</p>
<pre class="line-numbers language-shell"><code class="language-shell">sqlite> SELECT julianday('2017-07-13', 'start of month');
2457935.5
sqlite> SELECT julianday('now', 'start of month');
2457874.5
sqlite> SELECT julianday('2017-08-15', '-6 days');
2457974.5
sqlite> SELECT julianday('now', '-6 days');
2457892.10142766
sqlite>
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例3：</strong></p>
<p>检索本月的最后一天：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> julianday<span class="token punctuation">(</span><span class="token string">'2017-09-07'</span><span class="token punctuation">,</span> <span class="token string">'start of month'</span><span class="token punctuation">,</span> <span class="token string">'+1 month'</span><span class="token punctuation">,</span> <span class="token string">'-1 day'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> julianday<span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span> <span class="token string">'start of month'</span><span class="token punctuation">,</span> <span class="token string">'+1 month'</span><span class="token punctuation">,</span> <span class="token string">'-1 day'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> julianday<span class="token punctuation">(</span><span class="token string">'2017-09-07'</span><span class="token punctuation">,</span> <span class="token string">'+24 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> julianday<span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span> <span class="token string">'+24 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面代码，得到以下结果 -</p>
<pre class="line-numbers language-shell"><code class="language-shell">sqlite> SELECT julianday('2017-09-07', 'start of month', '+1 month', '-1 day'); 
2458026.5
sqlite> SELECT julianday('now', 'start of month', '+1 month', '-1 day');
2457904.5
sqlite> SELECT julianday('2017-09-07', '+24 days');
2458027.5
sqlite> SELECT julianday('now', '+24 days');
2457922.10232523
sqlite>
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例4：</strong></p>
<p>在当前日期上添加/减去年数和天数：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> julianday<span class="token punctuation">(</span><span class="token string">'2017-09-14'</span><span class="token punctuation">,</span> <span class="token string">'+2 years'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> julianday<span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span> <span class="token string">'+5 years'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> julianday<span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span> <span class="token string">'-7 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面代码，得到以下结果 -</p>
<pre class="line-numbers language-shell"><code class="language-shell">sqlite> SELECT julianday('2017-09-14', '+2 years');
2458740.5
sqlite> SELECT julianday('now', '+5 years');
2459724.10358212
sqlite> SELECT julianday('now', '-7 days');
2457891.10358736
sqlite><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="SQLite-now函数和时间格式化"><a href="#SQLite-now函数和时间格式化" class="headerlink" title="SQLite now函数和时间格式化"></a>SQLite now函数和时间格式化</h2><p>SQLite “<code>now</code>”实际上并不是一个函数，但是“<code>now</code>”是一个时间字符串参数，用于各种SQLite函数来获取当前的日期和时间。</p>
<p><strong>语法：</strong></p>
<p>SQLite中<code>now</code>函数有三种类型的语法：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">date</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">)</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>或者 - </p>
<pre class="line-numbers language-sql"><code class="language-sql">time<span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">)</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>或者 - </p>
<pre class="line-numbers language-sql"><code class="language-sql">strftime<span class="token punctuation">(</span>format<span class="token punctuation">,</span> <span class="token string">'now'</span><span class="token punctuation">)</span>  
<span class="token comment" spellcheck="true">-- 其它用法</span>
strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">,</span><span class="token string">'now'</span><span class="token punctuation">)</span>  
strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d %H-%M'</span><span class="token punctuation">,</span><span class="token string">'now'</span><span class="token punctuation">)</span>  
strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d %H-%M-%S'</span><span class="token punctuation">,</span><span class="token string">'now'</span><span class="token punctuation">)</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>使用<code>strftime()</code>函数表达当前日期/时间时，是使用第三种语法。 这里的“<code>format</code>”可以是以下任何一个：</p>
<table>
<thead>
<tr>
<th>编号</th>
<th>索引</th>
<th>解释/描述</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><code>%Y</code></td>
<td><code>4</code>位数表示年份(0000至9999)</td>
</tr>
<tr>
<td>2</td>
<td><code>%W</code></td>
<td>表示一年之中的第几周(00至53)</td>
</tr>
<tr>
<td>3</td>
<td><code>%w</code></td>
<td>星期几(<code>0</code>到<code>6</code>，其中<code>0</code>表示星期日)</td>
</tr>
<tr>
<td>4</td>
<td><code>%m</code></td>
<td>表示一年之中的第几月(01至12)</td>
</tr>
<tr>
<td>5</td>
<td><code>%d</code></td>
<td>表示一个月之中的第几天(00至31)</td>
</tr>
<tr>
<td>6</td>
<td><code>%H</code></td>
<td>小时 (00 至 24)</td>
</tr>
<tr>
<td>7</td>
<td><code>%M</code></td>
<td>分钟 (00 至 60)</td>
</tr>
<tr>
<td>8</td>
<td><code>%S</code></td>
<td>秒(00至59)</td>
</tr>
<tr>
<td>9</td>
<td><code>%s</code></td>
<td>自<code>1970-01-01</code>以来的秒数</td>
</tr>
<tr>
<td>10</td>
<td><code>%f</code></td>
<td>小数秒(<code>SS.SSS</code>)</td>
</tr>
<tr>
<td>11</td>
<td><code>%j</code></td>
<td>一年之中的第几天(001 至 366)</td>
</tr>
<tr>
<td>12</td>
<td><code>%J</code></td>
<td>儒略日的数字值</td>
</tr>
</tbody></table>
<p><strong>示例-1：</strong></p>
<p>检索当前日期：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">date</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">,</span><span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>执行上面语句，得到以下结果 - </p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token keyword">date</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2017</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">24</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">,</span><span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2017</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">24</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例-2：</strong></p>
<p>检索当前时间：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d %H:%M:%S'</span><span class="token punctuation">,</span><span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> time<span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- (HH-MM-SS Format)  </span>
<span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%H-%M-%S'</span><span class="token punctuation">,</span><span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">--  (HH-MM-SS Format)   </span>
<span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%H-%M-%f'</span><span class="token punctuation">,</span><span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- (HH-MM-SS.SSS Format)   </span>
<span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%H-%M'</span><span class="token punctuation">,</span><span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">--(HH-MM Format)</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面语句，得到以下结果 - </p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d %H:%M:%S'</span><span class="token punctuation">,</span><span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2017</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">24</span> <span class="token number">14</span>:<span class="token number">53</span>:<span class="token number">55</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> time<span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- (HH-MM-SS Format)</span>
<span class="token number">14</span>:<span class="token number">53</span>:<span class="token number">55</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%H-%M-%S'</span><span class="token punctuation">,</span><span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">--  (HH-MM-SS Format)</span>
<span class="token number">14</span><span class="token operator">-</span><span class="token number">53</span><span class="token operator">-</span><span class="token number">55</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%H-%M-%f'</span><span class="token punctuation">,</span><span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- (HH-MM-SS.SSS Format)</span>
<span class="token number">14</span><span class="token operator">-</span><span class="token number">53</span><span class="token operator">-</span><span class="token number">55.214</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%H-%M'</span><span class="token punctuation">,</span><span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">--(HH-MM Format)</span>
<span class="token number">14</span><span class="token operator">-</span><span class="token number">53</span>
sqlite<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="SQLite-strftime-函数日期日间格式化"><a href="#SQLite-strftime-函数日期日间格式化" class="headerlink" title="SQLite strftime()函数日期日间格式化"></a>SQLite strftime()函数日期日间格式化</h2><p>SQLite <code>strftime()</code>是一个功能非常强大的函数，可以用来获取日期和时间，并且还可以执行日期计算。</p>
<p><strong>语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql">strftime<span class="token punctuation">(</span>format<span class="token punctuation">,</span> timestring <span class="token punctuation">[</span><span class="token punctuation">,</span> modifier1<span class="token punctuation">,</span> modifier2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> modifier_n <span class="token punctuation">]</span> <span class="token punctuation">)</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>这里，<code>format</code>可以是以下任何一种：</p>
<table>
<thead>
<tr>
<th>编号</th>
<th>格式</th>
<th>解释/描述</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><code>%Y</code></td>
<td><code>4</code>位数表示年份(0000至9999)</td>
</tr>
<tr>
<td>2</td>
<td><code>%W</code></td>
<td>表示一年之中的第几周(00至53)</td>
</tr>
<tr>
<td>3</td>
<td><code>%w</code></td>
<td>星期几(<code>0</code>到<code>6</code>，其中<code>0</code>表示星期日)</td>
</tr>
<tr>
<td>4</td>
<td><code>%m</code></td>
<td>表示一年之中的第几月(01至12)</td>
</tr>
<tr>
<td>5</td>
<td><code>%d</code></td>
<td>表示一个月之中的第几天(00至31)</td>
</tr>
<tr>
<td>6</td>
<td><code>%H</code></td>
<td>小时 (00 至 24)</td>
</tr>
<tr>
<td>7</td>
<td><code>%M</code></td>
<td>分钟 (00 至 60)</td>
</tr>
<tr>
<td>8</td>
<td><code>%S</code></td>
<td>秒(00至59)</td>
</tr>
<tr>
<td>9</td>
<td><code>%s</code></td>
<td>自<code>1970-01-01</code>以来的秒数</td>
</tr>
<tr>
<td>10</td>
<td><code>%f</code></td>
<td>小数秒(<code>SS.SSS</code>)</td>
</tr>
<tr>
<td>11</td>
<td><code>%j</code></td>
<td>一年之中的第几天(001 至 366)</td>
</tr>
<tr>
<td>12</td>
<td><code>%J</code></td>
<td>儒略日的数字值</td>
</tr>
</tbody></table>
<p>这里，<code>timestring</code>是一个日期值，可以是以下任何一个：</p>
<table>
<thead>
<tr>
<th>编号</th>
<th><code>timestring</code>的值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><code>now</code></td>
<td>用来返回当前日期的字面值</td>
</tr>
<tr>
<td>2</td>
<td><code>YYYY-MM-DD</code></td>
<td>指定格式为<code>YYYY-MM-DD</code>的日期值</td>
</tr>
<tr>
<td>3</td>
<td><code>YYYY-MM-DD HH:MM</code></td>
<td>指定格式为<code>YYYY-MM-DD HH:MM</code>的日期值</td>
</tr>
<tr>
<td>4</td>
<td><code>YYYY-MM-DD HH:MM:SS</code></td>
<td>指定格式为<code>YYYY-MM-DD HH:MM:SS</code>的日期值</td>
</tr>
<tr>
<td>5</td>
<td><code>YYYY-MM-DD HH:MM:SS.SSS</code></td>
<td>指定格式为<code>YYYY-MM-DD HH:MM:SS.SSS</code>的日期值</td>
</tr>
<tr>
<td>6</td>
<td><code>HH:MM</code></td>
<td>指定格式为<code>HH:MM</code>的日期值</td>
</tr>
<tr>
<td>7</td>
<td><code>HH:MM:SS</code></td>
<td>指定格式为<code>HH:MM:SS</code>的日期值</td>
</tr>
<tr>
<td>8</td>
<td><code>HH:MM:SS.SSS</code></td>
<td>指定格式为<code>HH:MM:SS.SSS</code>的日期值</td>
</tr>
<tr>
<td>9</td>
<td><code>YYYY-MM-DDTHH:MM</code></td>
<td>指定格式化为<code>YYYY-MM-DDTHH：MM</code>的日期值，其中<code>T</code>是一个文本字符分隔符，用于分隔日期和时间。</td>
</tr>
<tr>
<td>10</td>
<td><code>YYYY-MM-DDTHH:MM:SS</code></td>
<td>指定格式化为<code>YYYY-MM-DDTHH:MM:SS</code>的日期值，其中<code>T</code>是一个文本字符分隔符，用于分隔日期和时间。</td>
</tr>
<tr>
<td>11</td>
<td><code>YYYY-MM-DDTHH:MM:SS.SSS</code></td>
<td>指定格式化为<code>YYYY-MM-DDTHH:MM:SS.SSS</code>的日期值，其中<code>T</code>是一个文本字符分隔符，用于分隔日期和时间。</td>
</tr>
<tr>
<td>12</td>
<td><code>DDDDDDDDDD</code></td>
<td>指定儒略日的日期数</td>
</tr>
</tbody></table>
<ul>
<li><em>modifier1</em>, <em>modifier2</em>, <em>… modifier_n</em>: 这些修饰符是可选的。这些字符与时间字符串一起使用来添加或减少时间，日期或年份。</li>
</ul>
<table>
<thead>
<tr>
<th>编号</th>
<th>修辞符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><code>[+-]NNN years</code></td>
<td>用于指定添加/减去日期的年数</td>
</tr>
<tr>
<td>2</td>
<td><code>[+-]NNN months</code></td>
<td>用于指定添加/减去日期的月数</td>
</tr>
<tr>
<td>3</td>
<td><code>[+-]NNN days</code></td>
<td>用于指定添加/减去日期的天数</td>
</tr>
<tr>
<td>4</td>
<td><code>[+-]NNN hours</code></td>
<td>用于指定添加/减去日期的小时数</td>
</tr>
<tr>
<td>5</td>
<td><code>[+-]NNN minutes</code></td>
<td>用于指定添加/减去日期的分钟数</td>
</tr>
<tr>
<td>6</td>
<td><code>[+-]NNN seconds</code></td>
<td>用于指定添加/减去日期的秒数</td>
</tr>
<tr>
<td>7</td>
<td><code>[+-]NNN.NNNN seconds</code></td>
<td>用于指定添加/减去日期的秒数(和小数秒)</td>
</tr>
<tr>
<td>8</td>
<td><code>start of year</code></td>
<td>用于将日期重新转移到年初</td>
</tr>
<tr>
<td>9</td>
<td><code>start of month</code></td>
<td>用于将日期重新转移到月初</td>
</tr>
<tr>
<td>10</td>
<td><code>start of day</code></td>
<td>用于将日期重新移动到一天的开始</td>
</tr>
<tr>
<td>11</td>
<td><code>weekday N</code></td>
<td>用于将日期向前移动到工作日数为<code>N</code>的下一个日期(0=Sunday, 1=Monday, 2=Tuesday, 3=Wednesday, 4=Thursday, 5=Friday, 6=Saturday)</td>
</tr>
<tr>
<td>12</td>
<td><code>unixepoch</code></td>
<td>它与<code>DDDDDDDDDD</code>时间字符串一起用于将日期解释为UNIX时间(即：自<code>1970-01-01</code>以来的秒数)</td>
</tr>
<tr>
<td>13</td>
<td><code>localtime</code></td>
<td>用于将日期调整为本地时间，假设时间戳以<code>UTC</code>表示</td>
</tr>
<tr>
<td>14</td>
<td><code>utc</code></td>
<td>它用于将日期调整为<code>utc</code>，假设时间戳以本地时间表达</td>
</tr>
</tbody></table>
<p><strong>示例1：</strong></p>
<p>检索当前日期：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y %m %d'</span><span class="token punctuation">,</span> <span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d %H:%M'</span><span class="token punctuation">,</span> <span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>执行上面语句，得到以下结果 -</p>
<pre class="line-numbers language-shell"><code class="language-shell">sqlite> SELECT strftime('%Y %m %d', 'now');
2017 05 24
sqlite> SELECT strftime('%Y-%m-%d %H:%M', 'now');
2017-05-24 19:04
sqlite>
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例2：</strong></p>
<p>检索本月的第一天：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">,</span> <span class="token string">'2017-09-14'</span><span class="token punctuation">,</span> <span class="token string">'start of month'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">,</span> <span class="token string">'now'</span><span class="token punctuation">,</span> <span class="token string">'start of month'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">,</span> <span class="token string">'2017-03-07'</span><span class="token punctuation">,</span> <span class="token string">'-6 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">,</span> <span class="token string">'now'</span><span class="token punctuation">,</span> <span class="token string">'-13 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面代码，得到以下结果 - </p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">,</span> <span class="token string">'2017-09-14'</span><span class="token punctuation">,</span> <span class="token string">'start of month'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2017</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">01</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">,</span> <span class="token string">'now'</span><span class="token punctuation">,</span> <span class="token string">'start of month'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2017</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">01</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">,</span> <span class="token string">'2017-03-07'</span><span class="token punctuation">,</span> <span class="token string">'-6 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2017</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">01</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">,</span> <span class="token string">'now'</span><span class="token punctuation">,</span> <span class="token string">'-13 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2017</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">11</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例3：</strong></p>
<p>检索本月的最后一天：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">,</span> <span class="token string">'2017-12-07'</span><span class="token punctuation">,</span> <span class="token string">'start of month'</span><span class="token punctuation">,</span> <span class="token string">'+1 month'</span><span class="token punctuation">,</span> <span class="token string">'-1 day'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
<span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">,</span> <span class="token string">'now'</span><span class="token punctuation">,</span> <span class="token string">'start of month'</span><span class="token punctuation">,</span> <span class="token string">'+1 month'</span><span class="token punctuation">,</span> <span class="token string">'-1 day'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">,</span> <span class="token string">'2017-08-07'</span><span class="token punctuation">,</span> <span class="token string">'+24 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">,</span> <span class="token string">'now'</span><span class="token punctuation">,</span> <span class="token string">'+24 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面代码，得到以下结果 - </p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">,</span> <span class="token string">'2017-12-07'</span><span class="token punctuation">,</span> <span class="token string">'start of month'</span><span class="token punctuation">,</span> <span class="token string">'+1 month'</span><span class="token punctuation">,</span> <span class="token string">'-1 day'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2017</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">31</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">,</span> <span class="token string">'now'</span><span class="token punctuation">,</span> <span class="token string">'start of month'</span><span class="token punctuation">,</span> <span class="token string">'+1 month'</span><span class="token punctuation">,</span> <span class="token string">'-1 day'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2017</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">31</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">,</span> <span class="token string">'2017-08-07'</span><span class="token punctuation">,</span> <span class="token string">'+24 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2017</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">31</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">,</span> <span class="token string">'now'</span><span class="token punctuation">,</span> <span class="token string">'+24 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2017</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例4：</strong></p>
<p>在当前日期时间上添加/减去年数和天数：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">,</span> <span class="token string">'2017-11-14'</span><span class="token punctuation">,</span> <span class="token string">'+2 years'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">,</span> <span class="token string">'now'</span><span class="token punctuation">,</span> <span class="token string">'-2 years'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">,</span> <span class="token string">'2017-10-14'</span><span class="token punctuation">,</span> <span class="token string">'+7 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">,</span> <span class="token string">'now'</span><span class="token punctuation">,</span> <span class="token string">'-10 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面代码，得到以下结果 - </p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">,</span> <span class="token string">'2017-11-14'</span><span class="token punctuation">,</span> <span class="token string">'+2 years'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">14</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">,</span> <span class="token string">'now'</span><span class="token punctuation">,</span> <span class="token string">'-2 years'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2015</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">24</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">,</span> <span class="token string">'2017-10-14'</span><span class="token punctuation">,</span> <span class="token string">'+7 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2017</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">21</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">,</span> <span class="token string">'now'</span><span class="token punctuation">,</span> <span class="token string">'-10 days'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2017</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">14</span>
sqlite<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="SQLite-time-函数"><a href="#SQLite-time-函数" class="headerlink" title="SQLite time()函数"></a>SQLite time()函数</h2><p>SQLite <code>time()</code>函数用于计算“<code>HH-MM-SS</code>”格式的时间并返回时间。</p>
<p><strong>语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql">time<span class="token punctuation">(</span>timestring<span class="token punctuation">,</span> <span class="token punctuation">[</span> modifier1<span class="token punctuation">,</span> modifier2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> modifier_n <span class="token punctuation">]</span> <span class="token punctuation">)</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>这里，<code>timestring</code>是一个日期值，可以是以下任何一个：</p>
<table>
<thead>
<tr>
<th>编号</th>
<th><code>timestring</code>的值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><code>now</code></td>
<td>用来返回当前日期的字面值</td>
</tr>
<tr>
<td>2</td>
<td><code>YYYY-MM-DD</code></td>
<td>指定格式为<code>YYYY-MM-DD</code>的日期值</td>
</tr>
<tr>
<td>3</td>
<td><code>YYYY-MM-DD HH:MM</code></td>
<td>指定格式为<code>YYYY-MM-DD HH:MM</code>的日期值</td>
</tr>
<tr>
<td>4</td>
<td><code>YYYY-MM-DD HH:MM:SS</code></td>
<td>指定格式为<code>YYYY-MM-DD HH:MM:SS</code>的日期值</td>
</tr>
<tr>
<td>5</td>
<td><code>YYYY-MM-DD HH:MM:SS.SSS</code></td>
<td>指定格式为<code>YYYY-MM-DD HH:MM:SS.SSS</code>的日期值</td>
</tr>
<tr>
<td>6</td>
<td><code>HH:MM</code></td>
<td>指定格式为<code>HH:MM</code>的日期值</td>
</tr>
<tr>
<td>7</td>
<td><code>HH:MM:SS</code></td>
<td>指定格式为<code>HH:MM:SS</code>的日期值</td>
</tr>
<tr>
<td>8</td>
<td><code>HH:MM:SS.SSS</code></td>
<td>指定格式为<code>HH:MM:SS.SSS</code>的日期值</td>
</tr>
<tr>
<td>9</td>
<td><code>YYYY-MM-DDTHH:MM</code></td>
<td>指定格式化为<code>YYYY-MM-DDTHH：MM</code>的日期值，其中<code>T</code>是一个文本字符分隔符，用于分隔日期和时间。</td>
</tr>
<tr>
<td>10</td>
<td><code>YYYY-MM-DDTHH:MM:SS</code></td>
<td>指定格式化为<code>YYYY-MM-DDTHH:MM:SS</code>的日期值，其中<code>T</code>是一个文本字符分隔符，用于分隔日期和时间。</td>
</tr>
<tr>
<td>11</td>
<td><code>YYYY-MM-DDTHH:MM:SS.SSS</code></td>
<td>指定格式化为<code>YYYY-MM-DDTHH:MM:SS.SSS</code>的日期值，其中<code>T</code>是一个文本字符分隔符，用于分隔日期和时间。</td>
</tr>
<tr>
<td>12</td>
<td><code>DDDDDDDDDD</code></td>
<td>指定儒略日的日期数</td>
</tr>
</tbody></table>
<ul>
<li><em>modifier1</em>, <em>modifier2</em>, <em>… modifier_n</em>: 这些修饰符是可选的。这些字符与时间字符串一起使用来添加或减少时间，日期或年份。</li>
</ul>
<table>
<thead>
<tr>
<th>编号</th>
<th>修辞符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><code>[+-]NNN years</code></td>
<td>用于指定添加/减去日期的年数</td>
</tr>
<tr>
<td>2</td>
<td><code>[+-]NNN months</code></td>
<td>用于指定添加/减去日期的月数</td>
</tr>
<tr>
<td>3</td>
<td><code>[+-]NNN days</code></td>
<td>用于指定添加/减去日期的天数</td>
</tr>
<tr>
<td>4</td>
<td><code>[+-]NNN hours</code></td>
<td>用于指定添加/减去日期的小时数</td>
</tr>
<tr>
<td>5</td>
<td><code>[+-]NNN minutes</code></td>
<td>用于指定添加/减去日期的分钟数</td>
</tr>
<tr>
<td>6</td>
<td><code>[+-]NNN seconds</code></td>
<td>用于指定添加/减去日期的秒数</td>
</tr>
<tr>
<td>7</td>
<td><code>[+-]NNN.NNNN seconds</code></td>
<td>用于指定添加/减去日期的秒数(和小数秒)</td>
</tr>
<tr>
<td>8</td>
<td><code>start of year</code></td>
<td>用于将日期重新转移到年初</td>
</tr>
<tr>
<td>9</td>
<td><code>start of month</code></td>
<td>用于将日期重新转移到月初</td>
</tr>
<tr>
<td>10</td>
<td><code>start of day</code></td>
<td>用于将日期重新移动到一天的开始</td>
</tr>
<tr>
<td>11</td>
<td><code>weekday N</code></td>
<td>用于将日期向前移动到工作日数为<code>N</code>的下一个日期(0=Sunday, 1=Monday, 2=Tuesday, 3=Wednesday, 4=Thursday, 5=Friday, 6=Saturday)</td>
</tr>
<tr>
<td>12</td>
<td><code>unixepoch</code></td>
<td>它与<code>DDDDDDDDDD</code>时间字符串一起用于将日期解释为UNIX时间(即：自<code>1970-01-01</code>以来的秒数)</td>
</tr>
<tr>
<td>13</td>
<td><code>localtime</code></td>
<td>用于将日期调整为本地时间，假设时间戳以<code>UTC</code>表示</td>
</tr>
<tr>
<td>14</td>
<td><code>utc</code></td>
<td>它用于将日期调整为<code>utc</code>，假设时间戳以本地时间表达</td>
</tr>
</tbody></table>
<p><strong>示例1：</strong></p>
<p>检索当前时间值：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> time<span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行上面语句，得到以下结果 -</p>
<pre class="line-numbers language-shell"><code class="language-shell">sqlite> SELECT time('now');
19:14:05
sqlite>
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例2：</strong></p>
<p>在当前时间上添加/减去小时数和分钟数：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> time<span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> time<span class="token punctuation">(</span><span class="token string">'11:23:02'</span><span class="token punctuation">,</span><span class="token string">'-2 hours'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> time<span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span><span class="token string">'+5 hours'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> time<span class="token punctuation">(</span><span class="token string">'11:15:02'</span><span class="token punctuation">,</span><span class="token string">'+15 minutes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">SELECT</span> time<span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span><span class="token string">'-30 minutes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面代码，得到以下结果 - </p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> time<span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">15</span>:<span class="token number">15</span>:<span class="token number">33</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> time<span class="token punctuation">(</span><span class="token string">'11:23:02'</span><span class="token punctuation">,</span><span class="token string">'-2 hours'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">09</span>:<span class="token number">23</span>:<span class="token number">02</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> time<span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span><span class="token string">'+5 hours'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">20</span>:<span class="token number">15</span>:<span class="token number">33</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> time<span class="token punctuation">(</span><span class="token string">'11:15:02'</span><span class="token punctuation">,</span><span class="token string">'+15 minutes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">11</span>:<span class="token number">30</span>:<span class="token number">02</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> time<span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">,</span><span class="token string">'-30 minutes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">14</span>:<span class="token number">45</span>:<span class="token number">34</span>
sqlite<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h1><p>SQLite聚合函数是将多行的值组合在一起作为某些条件的输入并形成单个值作为输出结果的函数。 以下是SQLite中的一些聚合函数的列表：</p>
<ul>
<li>SQLite <code>MIN()</code>函数</li>
<li>SQLite <code>MAX()</code>函数</li>
<li>SQLite <code>AVG()</code>函数</li>
<li>SQLite <code>COUNT()</code>函数</li>
<li>SQLite <code>SUM()</code>函数</li>
<li>SQLite <code>RANDOM()</code>函数</li>
<li>SQLite <code>ABS()</code>函数</li>
<li>SQLite <code>UPPER()</code>函数</li>
<li>SQLite <code>LOWER()</code>函数</li>
<li>SQLite <code>LENGTH()</code>函数</li>
<li>SQLite <code>sqlite_version()</code>函数</li>
</ul>
<table>
<thead>
<tr>
<th>序号</th>
<th>函数</th>
<th>描述说明</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><code>MIN()</code>函数</td>
<td>SQLite MIN()函数用于查询某列的最低(最小)值。</td>
</tr>
<tr>
<td>2</td>
<td><code>MAX()</code>函数</td>
<td>SQLite MAX()函数用于查询某列的最高(最大)值。</td>
</tr>
<tr>
<td>3</td>
<td><code>AVG()</code>函数</td>
<td>SQLite MAX()函数用于查询某列的平均值。</td>
</tr>
<tr>
<td>4</td>
<td><code>COUNT()</code>函数</td>
<td>SQLite COUNT()函数用于计算数据库表中的行数。</td>
</tr>
<tr>
<td>5</td>
<td><code>SUM()</code>函数</td>
<td>SQLite SUM()函数用于查询指定数字列的总数(相加的总和)。</td>
</tr>
<tr>
<td>6</td>
<td><code>RANDOM()</code>函数</td>
<td>SQLite RANDOM()函数返回<code>-9223372036854775808</code>与<code>+9223372036854775807</code>之间的伪随机整数。</td>
</tr>
<tr>
<td>7</td>
<td><code>ABS()</code>函数</td>
<td>SQLite ABS()函数用于获取给定参数的绝对值。</td>
</tr>
<tr>
<td>8</td>
<td><code>UPPER()</code>函数</td>
<td>SQLite UPPER()函数用于将给定字符串参数转换为大写字母。</td>
</tr>
<tr>
<td>9</td>
<td><code>LOWER()</code>函数</td>
<td>SQLite LOWER()函数用于将给定字符串参数转换为小写字母。</td>
</tr>
<tr>
<td>10</td>
<td><code>LENGTH()</code>函数</td>
<td>SQLite LENGTH()函数用于获取给定字符串的长度。</td>
</tr>
<tr>
<td>11</td>
<td><code>sqlite_version()</code>函数</td>
<td>SQLite sqlite_version()函数用于获取SQLite库的版本。</td>
</tr>
</tbody></table>
<h2 id="SQLite-MIN-函数"><a href="#SQLite-MIN-函数" class="headerlink" title="SQLite MIN()函数"></a>SQLite MIN()函数</h2><p>SQLite <code>MIN()</code>函数用于获取表达式或给定列的最小值。</p>
<p><strong>语法</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>aggregate_expression<span class="token punctuation">)</span>  
<span class="token keyword">FROM</span> <span class="token keyword">tables</span>  
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> conditions<span class="token punctuation">]</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>在<code>GROUP BY</code>子句中使用<code>Min()</code>函数时的语法：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> expression1<span class="token punctuation">,</span> expression2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> expression_n  
<span class="token function">MIN</span><span class="token punctuation">(</span>aggregate_expression<span class="token punctuation">)</span>  
<span class="token keyword">FROM</span> <span class="token keyword">tables</span>  
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> conditions<span class="token punctuation">]</span>  
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> expression1<span class="token punctuation">,</span> expression2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> expression_n<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例1：</strong></p>
<p>假设有一个名为<code>student</code>的表，具有以下数据：</p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828114631550.png" alt=""></p>
<p>从<code>student</code>表中检索学生的最低费用(<code>fees</code>)：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>FEES<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Lowest Fees"</span>  <span class="token keyword">FROM</span> STUDENT<span class="token punctuation">;</span> 

<span class="token comment" spellcheck="true">-- 最小年龄</span>
<span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Lowest age"</span>  <span class="token keyword">FROM</span> STUDENT<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面查询代码，得到以下结果 - </p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>FEES<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Lowest Fees"</span>  <span class="token keyword">FROM</span> STUDENT<span class="token punctuation">;</span>
<span class="token number">2000.0</span>
sqlite<span class="token operator">></span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>FEES<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Lowest Fees"</span>  <span class="token keyword">FROM</span> STUDENT<span class="token punctuation">;</span>
<span class="token number">2000.0</span>
sqlite<span class="token operator">></span>
sqlite<span class="token operator">></span> <span class="token comment" spellcheck="true">-- 最小年龄</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Lowest age"</span>  <span class="token keyword">FROM</span> STUDENT<span class="token punctuation">;</span>
<span class="token number">21</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例2：</strong></p>
<p>使用具有的GROUP BY子句的<code>MIN()</code>函数：</p>
<p>从<code>student</code>表中检索<code>NAME</code>和<code>MIN FEES</code>，并按<code>NAME</code>的数据排序：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> NAME<span class="token punctuation">,</span> <span class="token function">MIN</span><span class="token punctuation">(</span>FEES<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Lowest Fees"</span>  
<span class="token keyword">FROM</span> STUDENT  
<span class="token keyword">WHERE</span> ID <span class="token operator">&lt;=</span> <span class="token number">8</span>  
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> NAME<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面代码，得到以下结果 -</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> NAME<span class="token punctuation">,</span> <span class="token function">MIN</span><span class="token punctuation">(</span>FEES<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Lowest Fees"</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span> <span class="token keyword">FROM</span> STUDENT
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span> <span class="token keyword">WHERE</span> ID <span class="token operator">&lt;=</span> <span class="token number">8</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> NAME<span class="token punctuation">;</span>
Avgsu<span class="token operator">|</span><span class="token number">2000.0</span>
Javasu<span class="token operator">|</span><span class="token number">18000.0</span>
Linsu<span class="token operator">|</span><span class="token number">10000.0</span>
Maxsu<span class="token operator">|</span><span class="token number">20000.0</span>
Minsu<span class="token operator">|</span><span class="token number">5000.0</span>
Sqlsu<span class="token operator">|</span><span class="token number">25000.0</span>
sqlite<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="SQLite-MAX-函数"><a href="#SQLite-MAX-函数" class="headerlink" title="SQLite MAX()函数"></a>SQLite MAX()函数</h2><p>SQLite <code>MAX()</code>函数用于获取表达式或给定列的最大值。</p>
<p><strong>语法</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>aggregate_expression<span class="token punctuation">)</span>  
<span class="token keyword">FROM</span> <span class="token keyword">tables</span>  
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> conditions<span class="token punctuation">]</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>在<code>GROUP BY</code>子句中使用<code>Max()</code>函数时的语法：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> expression1<span class="token punctuation">,</span> expression2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> expression_n  
<span class="token function">MAX</span><span class="token punctuation">(</span>aggregate_expression<span class="token punctuation">)</span>  
<span class="token keyword">FROM</span> <span class="token keyword">tables</span>  
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> conditions<span class="token punctuation">]</span>  
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> expression1<span class="token punctuation">,</span> expression2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> expression_n<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例1：</strong></p>
<p>假设有一个名为<code>student</code>的表，具有以下数据：</p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828114717964.png" alt=""></p>
<p>从<code>student</code>表中检索学生的最高费用(<code>fees</code>)：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>FEES<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Highest Fees"</span>  <span class="token keyword">FROM</span> STUDENT<span class="token punctuation">;</span> 

<span class="token comment" spellcheck="true">-- 最大年龄</span>
<span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Highest age"</span>  <span class="token keyword">FROM</span> STUDENT<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面查询代码，得到以下结果 - </p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>FEES<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Highest Fees"</span>  <span class="token keyword">FROM</span> STUDENT<span class="token punctuation">;</span>
<span class="token number">65000.0</span>
sqlite<span class="token operator">></span>
sqlite<span class="token operator">></span> <span class="token comment" spellcheck="true">-- 最大年龄</span>
sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Highest age"</span>  <span class="token keyword">FROM</span> STUDENT<span class="token punctuation">;</span>
<span class="token number">27</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例2：</strong></p>
<p>使用具有的<code>GROUP BY</code>子句的<code>MAX()</code>函数：</p>
<p>从<code>student</code>表中检索<code>NAME</code>,<code>ADDRESS</code>和<code>MAX(FEES)</code>，并按<code>ADDRESS</code>的数据排序：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> NAME<span class="token punctuation">,</span> ADDRESS<span class="token punctuation">,</span> <span class="token function">MAX</span><span class="token punctuation">(</span>FEES<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Highest FEES"</span>  
<span class="token keyword">FROM</span> STUDENT  
<span class="token keyword">WHERE</span> ID <span class="token operator">&lt;=</span> <span class="token number">8</span>  
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> ADDRESS<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面代码，得到以下结果 -</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> NAME<span class="token punctuation">,</span> ADDRESS<span class="token punctuation">,</span> <span class="token function">MAX</span><span class="token punctuation">(</span>FEES<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Highest FEES"</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span> <span class="token keyword">FROM</span> STUDENT
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span> <span class="token keyword">WHERE</span> ID <span class="token operator">&lt;=</span> <span class="token number">8</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> ADDRESS<span class="token punctuation">;</span>
Minsu<span class="token operator">|</span>Beijing<span class="token operator">|</span><span class="token number">15000.0</span>
Linsu<span class="token operator">|</span>Guangzhou<span class="token operator">|</span><span class="token number">65000.0</span>
Sqlsu<span class="token operator">|</span>Haikou<span class="token operator">|</span><span class="token number">25000.0</span>
Avgsu<span class="token operator">|</span>Shanghai<span class="token operator">|</span><span class="token number">2000.0</span>
Maxsu<span class="token operator">|</span>Shengzhen<span class="token operator">|</span><span class="token number">20000.0</span>
sqlite<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="SQLite-AVG-函数"><a href="#SQLite-AVG-函数" class="headerlink" title="SQLite AVG()函数"></a>SQLite AVG()函数</h2><p>SQLite <code>AVG()</code>函数用于检索表达式或给定列的平均值。</p>
<p><strong>语法</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>aggregate_expression<span class="token punctuation">)</span>  
<span class="token keyword">FROM</span> <span class="token keyword">tables</span>  
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> conditions<span class="token punctuation">]</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>在<code>GROUP BY</code>子句中使用<code>AVG()</code>函数时的语法：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> expression1<span class="token punctuation">,</span> expression2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> expression_n  
<span class="token function">AVG</span><span class="token punctuation">(</span>aggregate_expression<span class="token punctuation">)</span>  
<span class="token keyword">FROM</span> <span class="token keyword">tables</span>  
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> conditions<span class="token punctuation">]</span>  
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> expression1<span class="token punctuation">,</span> expression2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> expression_n<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例1：</strong></p>
<p>假设有一个名为<code>student</code>的表，具有以下数据：</p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828114807908.png" alt=""></p>
<p>从<code>student</code>表中检索学生的平均费用(<code>fees</code>)：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>FEES<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Avg Fees"</span>  
<span class="token keyword">FROM</span> STUDENT  
<span class="token keyword">WHERE</span> ID <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面查询代码，得到以下结果 - </p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>FEES<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Avg Fees"</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span> <span class="token keyword">FROM</span> STUDENT
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span> <span class="token keyword">WHERE</span> ID <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token number">18777.7777777778</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例2：</strong></p>
<p>使用带有<code>DISTINCT</code>子句的<code>AVG()</code>函数，从<code>student</code>表中获取<code>FEES</code>大于<code>10000</code>并且平均不同费用。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span>  FEES<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Avg Fees"</span>  
<span class="token keyword">FROM</span> STUDENT  
<span class="token keyword">WHERE</span> FEES <span class="token operator">></span> <span class="token number">10000</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面查询代码，得到以下结果 - </p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span>  FEES<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Avg Fees"</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span> <span class="token keyword">FROM</span> STUDENT
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span> <span class="token keyword">WHERE</span> FEES <span class="token operator">></span> <span class="token number">10000</span><span class="token punctuation">;</span>
<span class="token number">28600.0</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例3：</strong></p>
<p>使用数学公式在<code>AVG()</code>函数中计算求平均值。</p>
<p>可以使用数学公式根据您的要求检索平均值，如下求每个月的平均值 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>FEES <span class="token operator">/</span> <span class="token number">12</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Average Monthly Fees"</span>  
<span class="token keyword">FROM</span> STUDENT<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>执行上面查询代码，得到以下结果 - </p>
<pre class="line-numbers language-shell"><code class="language-shell">sqlite> SELECT AVG(FEES / 12) AS "Average Monthly Fees"
   ...> FROM STUDENT;
1564.81481481481
sqlite>
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例4：</strong></p>
<p>使用具有的<code>GROUP BY</code>子句的<code>AVG()</code>函数：</p>
<p>从<code>student</code>表中检索<code>NAME</code>和<code>FEES</code>，并按<code>AGE</code>分组数据：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> NAME<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>FEES<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Avg Fees by Name"</span>  
<span class="token keyword">FROM</span> STUDENT  
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> AGE<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面代码，得到以下结果 -</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> NAME<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>FEES<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Avg Fees by Name"</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span> <span class="token keyword">FROM</span> STUDENT
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> AGE<span class="token punctuation">;</span>
Javasu<span class="token operator">|</span><span class="token number">18000.0</span>
Maxsu<span class="token operator">|</span><span class="token number">16000.0</span>
Linsu<span class="token operator">|</span><span class="token number">80000.0</span>
Sqlsu<span class="token operator">|</span><span class="token number">25000.0</span>
Linsu<span class="token operator">|</span><span class="token number">30000.0</span>
sqlite<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="SQLite-COUNT-函数"><a href="#SQLite-COUNT-函数" class="headerlink" title="SQLite COUNT()函数"></a>SQLite COUNT()函数</h2><p>SQLite <code>COUNT()</code>函数用于检索表达式或给定列的行数。</p>
<p><strong>语法</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>aggregate_expression<span class="token punctuation">)</span>  
<span class="token keyword">FROM</span> <span class="token keyword">tables</span>  
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> conditions<span class="token punctuation">]</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>在<code>GROUP BY</code>子句中使用<code>COUNT()</code>函数时的语法：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> expression1<span class="token punctuation">,</span> expression2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> expression_n  
<span class="token function">COUNT</span><span class="token punctuation">(</span>aggregate_expression<span class="token punctuation">)</span>  
<span class="token keyword">FROM</span> <span class="token keyword">tables</span>  
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> conditions<span class="token punctuation">]</span>  
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> expression1<span class="token punctuation">,</span> expression2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> expression_n<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例1：</strong></p>
<p>假设有一个名为<code>student</code>的表，具有以下数据：</p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828114849594.png" alt=""></p>
<p>从<code>student</code>表中检索<code>AGE</code>大于<code>22</code>的学生人数：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Number of students"</span>  
<span class="token keyword">FROM</span> STUDENT  
<span class="token keyword">WHERE</span> AGE <span class="token operator">></span> <span class="token number">22</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面查询代码，得到以下结果 - </p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Number of students"</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span> <span class="token keyword">FROM</span> STUDENT
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span> <span class="token keyword">WHERE</span> AGE <span class="token operator">></span> <span class="token number">22</span><span class="token punctuation">;</span>
<span class="token number">8</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例2：</strong></p>
<p>计算<code>AGE</code>大于<code>22</code>岁的学生人数，并按学生名字分组。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> NAME<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Number Of Students"</span>  
<span class="token keyword">FROM</span> STUDENT  
<span class="token keyword">WHERE</span> AGE <span class="token operator">></span> <span class="token number">22</span>  
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> NAME<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面代码，得到以下结果 -</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> NAME<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Number Of Students"</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span> <span class="token keyword">FROM</span> STUDENT
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span> <span class="token keyword">WHERE</span> AGE <span class="token operator">></span> <span class="token number">22</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> NAME<span class="token punctuation">;</span>
Avgsu<span class="token operator">|</span><span class="token number">1</span>
Linsu<span class="token operator">|</span><span class="token number">2</span>
Maxsu<span class="token operator">|</span><span class="token number">2</span>
Minsu<span class="token operator">|</span><span class="token number">2</span>
Sqlsu<span class="token operator">|</span><span class="token number">1</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例3：</strong></p>
<p>计算每个地址的学生总人数，按学生地址(<code>Address</code>)分组。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> ADDRESS<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Number Of Students"</span>  
<span class="token keyword">FROM</span> STUDENT  
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> ADDRESS<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面代码，得到以下结果 -</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> ADDRESS<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Number Of Students"</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span> <span class="token keyword">FROM</span> STUDENT
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> ADDRESS<span class="token punctuation">;</span>
Beijing<span class="token operator">|</span><span class="token number">1</span>
Guangzhou<span class="token operator">|</span><span class="token number">2</span>
Haikou<span class="token operator">|</span><span class="token number">2</span>
Shanghai<span class="token operator">|</span><span class="token number">1</span>
Shengzhen<span class="token operator">|</span><span class="token number">2</span>
Shenzhen<span class="token operator">|</span><span class="token number">1</span>
sqlite<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="SQLite-SUM-函数"><a href="#SQLite-SUM-函数" class="headerlink" title="SQLite SUM()函数"></a>SQLite SUM()函数</h2><p>SQLite <code>SUM()</code>函数用于返回表达式或给定数字列的总和。</p>
<p><strong>语法</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>aggregate_expression<span class="token punctuation">)</span>  
<span class="token keyword">FROM</span> <span class="token keyword">tables</span>  
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> conditions<span class="token punctuation">]</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>在<code>SUM()</code>函数中使用<code>GROUP BY</code>子句时的语法：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> expression1<span class="token punctuation">,</span> expression2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> expression_n  
<span class="token function">SUM</span><span class="token punctuation">(</span>aggregate_expression<span class="token punctuation">)</span>  
<span class="token keyword">FROM</span> <span class="token keyword">tables</span>  
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> conditions<span class="token punctuation">]</span>  
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> expression1<span class="token punctuation">,</span> expression2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> expression_n<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例1：</strong></p>
<p>假设有一个名为<code>student</code>的表，具有以下数据：</p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828115005486.png" alt=""></p>
<p>从<code>student</code>表中检索<code>AGE</code>小于<code>24</code>的学生总费用：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>FEES<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Total Fees"</span>  
<span class="token keyword">FROM</span> STUDENT  
<span class="token keyword">WHERE</span> AGE <span class="token operator">&lt;</span> <span class="token number">24</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面查询代码，得到以下结果 - </p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>FEES<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Total Fees"</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span> <span class="token keyword">FROM</span> STUDENT
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span> <span class="token keyword">WHERE</span> AGE <span class="token operator">&lt;</span> <span class="token number">24</span><span class="token punctuation">;</span>
<span class="token number">34000.0</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例2：</strong></p>
<p>使用具有数学公式的<code>SUM()</code>函数，求每个月的学生总费用 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>FEES <span class="token operator">/</span> <span class="token number">12</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Total Monthly Fees"</span>  
<span class="token keyword">FROM</span> STUDENT<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>执行上面代码，得到以下结果 -</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>FEES <span class="token operator">/</span> <span class="token number">12</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Total Monthly Fees"</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span> <span class="token keyword">FROM</span> STUDENT<span class="token punctuation">;</span>
<span class="token number">14083.3333333333</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例3：</strong></p>
<p>计算每个地址的学生总人数，按学生地址(<code>Address</code>)分组。</p>
<p>从<code>student</code>表中检索地址，并按地址分组并查找相应费用的总和。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> ADDRESS<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>FEES<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Total Salary"</span>  
<span class="token keyword">FROM</span> STUDENT  
<span class="token keyword">WHERE</span> ID <span class="token operator">></span> <span class="token number">0</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> ADDRESS<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面代码，得到以下结果 -</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> ADDRESS<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>FEES<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"Total Salary"</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span> <span class="token keyword">FROM</span> STUDENT
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span> <span class="token keyword">WHERE</span> ID <span class="token operator">></span> <span class="token number">0</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> ADDRESS<span class="token punctuation">;</span>
Beijing<span class="token operator">|</span><span class="token number">15000.0</span>
Guangzhou<span class="token operator">|</span><span class="token number">70000.0</span>
Haikou<span class="token operator">|</span><span class="token number">35000.0</span>
Shanghai<span class="token operator">|</span><span class="token number">2000.0</span>
Shengzhen<span class="token operator">|</span><span class="token number">38000.0</span>
Shenzhen<span class="token operator">|</span><span class="token number">9000.0</span>
sqlite<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="SQLite触发器"><a href="#SQLite触发器" class="headerlink" title="SQLite触发器"></a>SQLite触发器</h1><p>SQLite触发器是一种事件驱动的动作或数据库回调函数，它在对指定的表执行<code>INSERT</code>，<code>UPDATE</code>和<code>DELETE</code>语句时自动调用。</p>
<p>触发器的主要任务就是执行业务规则，验证输入数据和保持审计跟踪。</p>
<p><strong>触发器的使用：</strong></p>
<ul>
<li>触发器用于实施业务规则。</li>
<li>验证输入数据。</li>
<li>为不同文件中/表的新插入行生成唯一值。</li>
<li>写入其他文件/表以进行审计跟踪。</li>
<li>从其他文件/表中查询用于交叉引用目的。</li>
<li>用于访问系统功能。</li>
<li>将数据复制到不同的文件以实现数据一致性。</li>
</ul>
<p><strong>使用触发器的优点：</strong></p>
<ul>
<li>触发器使应用程序开发更快。 因为数据库存储触发器，所以不必将触发器操作编码到每个数据库应用程序中。</li>
<li>定义触发器一次，可以将其重用于许多使用数据库的应用程序。</li>
<li>维护方便。 如果业务策略发生变化，则只需更改相应的触发程序，而不是每个应用程序。</li>
</ul>
<p><strong>如何创建触发器？</strong></p>
<p><code>CREATE TRIGGER</code>语句用于在SQLite中创建一个新的触发器。 此语句也用于向数据库模式添加触发器。</p>
<p><strong>语法</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span>  <span class="token keyword">TRIGGER</span> trigger_name <span class="token punctuation">[</span>BEFORE<span class="token operator">|</span><span class="token keyword">AFTER</span><span class="token punctuation">]</span> event_name   
<span class="token keyword">ON</span> table_name  
<span class="token keyword">BEGIN</span>  
 <span class="token comment" spellcheck="true">-- Trigger logic goes here....  </span>
<span class="token keyword">END</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这里，<code>trigger_name</code>是要创建的触发器的名称。</p>
<p><code>event_name</code>可以是<code>INSERT</code>，<code>DELETE</code>和<code>UPDATE</code>数据库操作。</p>
<p><code>table_name</code>是要进行操作的表。</p>
<h2 id="SQLite触发器-插入之前-之后）"><a href="#SQLite触发器-插入之前-之后）" class="headerlink" title="SQLite触发器(插入之前/之后）"></a>SQLite触发器(插入之前/之后）</h2><p>SQLite插入之前或之后触发器指定了如何在插入数据后创建触发器。 假设有两个表：<code>COMPANY</code>和<code>AUDIT</code>，在这里要对向<code>COMPANY</code>表中插入的每条记录进行审计。如果您已经有创建过一个<code>COMPANY</code>表，请将其删除并重新创建。</p>
<p><code>COMPANY</code>的创建语句 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> company<span class="token punctuation">(</span>  
   ID <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span>     <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  
   NAME           <span class="token keyword">TEXT</span>    <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  
   AGE            <span class="token keyword">INT</span>     <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  
   ADDRESS        CHAR<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  
   SALARY         <span class="token keyword">REAL</span>  
<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>创建一个名为<code>AUDIT</code>的新表，只要在向<code>COMPANY</code>表中插入新记录，就会插入日志消息：</p>
<p><code>AUDIT</code>的创建语句 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> audit<span class="token punctuation">(</span>  
    EMP_ID <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    ACTION_TYPE <span class="token keyword">TEXT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    ENTRY_DATE <span class="token keyword">TEXT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>  
<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>创建以上两个表，如下图所示</p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828115044912.png" alt=""></p>
<h3 id="SQLite触发器：AFTER-INSERT"><a href="#SQLite触发器：AFTER-INSERT" class="headerlink" title="SQLite触发器：AFTER INSERT"></a>SQLite触发器：AFTER INSERT</h3><p>在插入操作后，使用以下语法是在<code>COMPANY</code>表上创建名为“<code>audit_log</code>”的触发器。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TRIGGER</span> audit_log <span class="token keyword">AFTER</span> <span class="token keyword">INSERT</span>   
<span class="token keyword">ON</span> COMPANY  
<span class="token keyword">BEGIN</span>  
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> AUDIT<span class="token punctuation">(</span>EMP_ID<span class="token punctuation">,</span> ACTION_TYPE <span class="token punctuation">,</span>ENTRY_DATE<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>new<span class="token punctuation">.</span>ID<span class="token punctuation">,</span> <span class="token string">'AFTER INSERT'</span><span class="token punctuation">,</span><span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">END</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这里，<code>ID</code>是<code>AUDIT</code>表行记录的<code>ID</code>，<code>EMP_ID</code>是来自<code>COMPANY</code>表的<code>ID</code>，<code>DATE</code>字段是用于在<code>COMPANY</code>表中创建记录时保留时间戳。</p>
<p>现在向<code>COMPANY</code>表中插入一些记录，触发器将自动在<code>AUDIT</code>表中创建审核日志记录。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> COMPANY <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>SALARY<span class="token punctuation">)</span>  
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'Maxsu'</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token string">'Haikou'</span><span class="token punctuation">,</span> <span class="token number">40000.00</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>执行上面语句后，同时会在<code>AUDIT</code>表中创建一条记录。 这只是因为在<code>COMPANY</code>表上的<code>INSERT</code>操作上创建的触发器。现在查询<code>AUDIT</code>表中的记录数据。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> AUDIT<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行上面语句，结果如下所示</p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828115117316.png" alt=""></p>
<p><strong>如何列出/查看触发器？</strong></p>
<p>可以使用查询语句从<code>sqlite_master</code>表中来查询列出/查看触发器。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> name <span class="token keyword">FROM</span> sqlite_master  
<span class="token keyword">WHERE</span> <span class="token keyword">type</span> <span class="token operator">=</span> <span class="token string">'trigger'</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>执行上面语句，得到以下结果 - </p>
<p>从上面结果中，可以看到触发器的名称。还可以使用<code>AND</code>子句列出特定表上的触发器。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> name <span class="token keyword">FROM</span> sqlite_master  
<span class="token keyword">WHERE</span> <span class="token keyword">type</span> <span class="token operator">=</span> <span class="token string">'trigger'</span> <span class="token operator">AND</span> tbl_name <span class="token operator">=</span> <span class="token string">'COMPANY'</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>执行上面查询，得到以下结果</p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828115145785.png" alt=""></p>
<h3 id="SQLite触发器：BEFORE-INSERT"><a href="#SQLite触发器：BEFORE-INSERT" class="headerlink" title="SQLite触发器：BEFORE INSERT"></a>SQLite触发器：BEFORE INSERT</h3><p>如果要在插入数据之前创建触发器，可以使用以下语句 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TRIGGER</span> befor_ins BEFORE <span class="token keyword">INSERT</span>   
<span class="token keyword">ON</span> COMPANY  
<span class="token keyword">BEGIN</span>  
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> AUDIT<span class="token punctuation">(</span>EMP_ID<span class="token punctuation">,</span> ACTION_TYPE <span class="token punctuation">,</span>ENTRY_DATE<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>new<span class="token punctuation">.</span>ID<span class="token punctuation">,</span> <span class="token string">'BEFORE INSERT'</span><span class="token punctuation">,</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">END</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>创建完成上面的触发器后，现在向<code>COMPANY</code>表中插入一条数据记录。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> COMPANY <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>SALARY<span class="token punctuation">)</span>  
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'Minsu'</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token string">'Guangzhou'</span><span class="token punctuation">,</span> <span class="token number">35000.00</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">`</span><span class="token punctuation">`</span>

现在，已经创建了两个触发器，一个是<span class="token operator">*</span><span class="token operator">*</span>BEFORE <span class="token keyword">INSERT</span><span class="token operator">*</span><span class="token operator">*</span>，另一个是：<span class="token operator">*</span><span class="token operator">*</span><span class="token keyword">AFTER</span> <span class="token keyword">INSERT</span><span class="token operator">*</span><span class="token operator">*</span>，因此在向<span class="token punctuation">`</span>COMPANY<span class="token punctuation">`</span>表插入第二条记录时，<span class="token punctuation">`</span>AUDIT<span class="token punctuation">`</span>表中有生成两个记录。

<span class="token punctuation">`</span><span class="token punctuation">`</span><span class="token punctuation">`</span>sql
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> AUDIT<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828115210549.png" alt=""></p>
<p>检查创建的触发器：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> name <span class="token keyword">FROM</span> sqlite_master  
<span class="token keyword">WHERE</span> <span class="token keyword">type</span> <span class="token operator">=</span> <span class="token string">'trigger'</span> <span class="token operator">AND</span> tbl_name <span class="token operator">=</span> <span class="token string">'COMPANY'</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>执行上面语句，得到以下结果 - </p>
<pre class="line-numbers language-shell"><code class="language-shell">sqlite> SELECT name FROM sqlite_master
   ...> WHERE type = 'trigger' AND tbl_name = 'COMPANY';
audit_log
befor_ins
sqlite>
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>以上面查询的结果中，可以看到已创建的两个触发器。</p>
<h2 id="SQLite触发器-更新之前-之后）"><a href="#SQLite触发器-更新之前-之后）" class="headerlink" title="SQLite触发器(更新之前/之后）"></a>SQLite触发器(更新之前/之后）</h2><p>SQLite触发器(更新之前/之后)指定了如何在更新数据后执行触发器操作。 假设有两个表<code>company</code>和<code>audit</code>，在这里要对在<code>company</code>表中的每个记录更新时进行审核。</p>
<p>创建<code>company</code>表的语句 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> company<span class="token punctuation">(</span>  
   ID <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span>     <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  
   NAME           <span class="token keyword">TEXT</span>    <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  
   AGE            <span class="token keyword">INT</span>     <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  
   ADDRESS        CHAR<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  
   SALARY         <span class="token keyword">REAL</span>  
<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>创建一个名为<code>audit</code>的新表，用于在<code>company</code>表中有更新时插入日志消息。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> audit<span class="token punctuation">(</span>  
    EMP_ID <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    ACTION_TYPE <span class="token keyword">TEXT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    ENTRY_DATE <span class="token keyword">TEXT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>  
<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>创建更新后的触发器：</strong></p>
<p>使用以下语法创建名为“<code>after_up</code>”的触发器，在<code>COMPANY</code>表上更新操作后触发此触发器。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TRIGGER</span> after_up <span class="token keyword">AFTER</span> <span class="token keyword">UPDATE</span>   
<span class="token keyword">ON</span> COMPANY  
<span class="token keyword">BEGIN</span>  
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> AUDIT<span class="token punctuation">(</span>EMP_ID<span class="token punctuation">,</span> ACTION_TYPE<span class="token punctuation">,</span> ENTRY_DATE<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>new<span class="token punctuation">.</span>ID<span class="token punctuation">,</span> <span class="token string">'AFTER UPDATE'</span><span class="token punctuation">,</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">END</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>现在更新一条记录数据，如下：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">UPDATE</span> COMPANY <span class="token keyword">SET</span> ADDRESS <span class="token operator">=</span> <span class="token string">'Shenzhen'</span> <span class="token keyword">WHERE</span> ID <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>查看已创建的触发器 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> name <span class="token keyword">FROM</span> sqlite_master  <span class="token keyword">WHERE</span> <span class="token keyword">type</span> <span class="token operator">=</span> <span class="token string">'trigger'</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行上面语句，看到以下结果</p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828115253300.png" alt=""></p>
<h2 id="SQLite触发器：在UPDATE之前"><a href="#SQLite触发器：在UPDATE之前" class="headerlink" title="SQLite触发器：在UPDATE之前"></a>SQLite触发器：在UPDATE之前</h2><p>如果要创建在更新数据之前的触发器，请参考以下语句 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TRIGGER</span> befor_up BEFORE <span class="token keyword">UPDATE</span>   
<span class="token keyword">ON</span> COMPANY  
<span class="token keyword">BEGIN</span>  
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> AUDIT<span class="token punctuation">(</span>EMP_ID<span class="token punctuation">,</span> ACTION_TYPE<span class="token punctuation">,</span> ENTRY_DATE<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>new<span class="token punctuation">.</span>ID<span class="token punctuation">,</span> old<span class="token punctuation">.</span>ADDRESS <span class="token punctuation">,</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">END</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>注意：上面的两个关键字：<code>new</code>和<code>old</code>，它们分别表示新插入的行记录和表中已存在行记录。</p>
</blockquote>
<p>现在更新一条记录数据，如下：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">UPDATE</span> COMPANY <span class="token keyword">SET</span> ADDRESS <span class="token operator">=</span> <span class="token string">'Beijing'</span> <span class="token keyword">WHERE</span> ID <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>查询审计表：<code>audit</code>中的记录信息，如下所示 - </p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> audit<span class="token punctuation">;</span>
<span class="token number">1</span><span class="token operator">|</span><span class="token keyword">AFTER</span> <span class="token keyword">INSERT</span><span class="token operator">|</span><span class="token number">2017</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">13</span>:<span class="token number">39</span>:<span class="token number">32</span>
<span class="token number">2</span><span class="token operator">|</span>BEFORE <span class="token keyword">INSERT</span><span class="token operator">|</span><span class="token number">2017</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">13</span>:<span class="token number">41</span>:<span class="token number">50</span>
<span class="token number">2</span><span class="token operator">|</span><span class="token keyword">AFTER</span> <span class="token keyword">INSERT</span><span class="token operator">|</span><span class="token number">2017</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">13</span>:<span class="token number">41</span>:<span class="token number">50</span>
<span class="token number">1</span><span class="token operator">|</span><span class="token keyword">AFTER</span> <span class="token keyword">UPDATE</span><span class="token operator">|</span><span class="token number">2017</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">14</span>:<span class="token number">14</span>:<span class="token number">00</span>
<span class="token number">1</span><span class="token operator">|</span>Shenzhen<span class="token operator">|</span><span class="token number">2017</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">14</span>:<span class="token number">18</span>:<span class="token number">19</span> <span class="token comment" spellcheck="true">-- 使用旧行的Address值写入</span>
<span class="token number">1</span><span class="token operator">|</span><span class="token keyword">AFTER</span> <span class="token keyword">UPDATE</span><span class="token operator">|</span><span class="token number">2017</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">14</span>:<span class="token number">18</span>:<span class="token number">19</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面语句创建触发器，查看上面创建的触发器 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> name <span class="token keyword">FROM</span> sqlite_master  <span class="token keyword">WHERE</span> <span class="token keyword">type</span> <span class="token operator">=</span> <span class="token string">'trigger'</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行上面语句，得到以下结果</p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828115313463.png" alt=""></p>
<h2 id="SQLite触发器-删除之前-之后）"><a href="#SQLite触发器-删除之前-之后）" class="headerlink" title="SQLite触发器(删除之前/之后）"></a>SQLite触发器(删除之前/之后）</h2><p>SQLite触发器(删除之前/之后)指定如何在删除数据后执行触发器。假设有两个表：<code>company</code>和<code>audit</code>。</p>
<p>创建<code>company</code>表的语句如下 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> company<span class="token punctuation">(</span>  
   ID <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span>     <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  
   NAME           <span class="token keyword">TEXT</span>    <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  
   AGE            <span class="token keyword">INT</span>     <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  
   ADDRESS        CHAR<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  
   SALARY         <span class="token keyword">REAL</span>  
<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>创建<code>audit</code>表的语句如下 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> audit<span class="token punctuation">(</span>  
    EMP_ID <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  
    BEFORE_VAL <span class="token keyword">TEXT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    ACTION_TYPE <span class="token keyword">TEXT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    ENTRY_DATE <span class="token keyword">TEXT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>  
<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>创建删除后触发器：</strong></p>
<p>在删除操作后，使用以下语法在<code>company</code>表上创建名为“<code>after_del</code>”的触发器，当删除<code>company</code>表中的一条记录成功之后，就会将这条删除的名称记录到<code>audit</code>表中。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TRIGGER</span> after_del  <span class="token keyword">AFTER</span> <span class="token keyword">DELETE</span>    
<span class="token keyword">ON</span> COMPANY  
<span class="token keyword">BEGIN</span>  
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> AUDIT<span class="token punctuation">(</span>EMP_ID<span class="token punctuation">,</span> BEFORE_VAL<span class="token punctuation">,</span> ACTION_TYPE<span class="token punctuation">,</span> ENTRY_DATE<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>old<span class="token punctuation">.</span>ID<span class="token punctuation">,</span> old<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">'AFTER DELETE'</span><span class="token punctuation">,</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">END</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>先插入一条数据，以供后面删除使用 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> COMPANY <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>SALARY<span class="token punctuation">)</span>  <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'Maxsu'</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token string">'Haikou'</span><span class="token punctuation">,</span> <span class="token number">40000.00</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  

<span class="token comment" spellcheck="true">-- 删除记录，触发上面定义的触发器 </span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> company <span class="token keyword">where</span> id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">-- 查询删除记录的执行结果</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> company<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">-- 查询删除记录之后的审计记录情况</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> audit<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>完整的执行过程如下图中所示 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/592100541_63265.png" alt=""></p>
<h2 id="SQLite删除触发器"><a href="#SQLite删除触发器" class="headerlink" title="SQLite删除触发器"></a>SQLite删除触发器</h2><p>在SQLite中，<code>DROP TRIGGER</code>命令用于从表中删除一个指定触发器。</p>
<p><strong>语法</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">TRIGGER</span> trigger_name<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>示例</strong></p>
<p>可以使用以下语句，创建一个触发器 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TRIGGER</span> audit_log <span class="token keyword">AFTER</span> <span class="token keyword">INSERT</span>   
<span class="token keyword">ON</span> COMPANY  
<span class="token keyword">BEGIN</span>  
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> AUDIT<span class="token punctuation">(</span>EMP_ID<span class="token punctuation">,</span> ENTRY_DATE<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>new<span class="token punctuation">.</span>ID<span class="token punctuation">,</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">END</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>现在查询表中存在的触发器，如下所示 -</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> name <span class="token keyword">FROM</span> sqlite_master  <span class="token keyword">WHERE</span> <span class="token keyword">type</span> <span class="token operator">=</span> <span class="token string">'trigger'</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行上面是查询，它有<code>2</code>个触发器：</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">SELECT</span> name <span class="token keyword">FROM</span> sqlite_master  <span class="token keyword">WHERE</span> <span class="token keyword">type</span> <span class="token operator">=</span> <span class="token string">'trigger'</span><span class="token punctuation">;</span>
after_del
audit_log
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>现在，演示如何删除一个名为“<code>audit_log</code>”的触发器。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">TRIGGER</span> audit_log<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>再次查询数据库中的触发器，现在可以看到“audit_log”被删除了 -</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> name <span class="token keyword">FROM</span> sqlite_master  <span class="token keyword">WHERE</span> <span class="token keyword">type</span> <span class="token operator">=</span> <span class="token string">'trigger'</span> <span class="token operator">AND</span> tbl_name <span class="token operator">=</span> <span class="token string">'COMPANY'</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>完整的执行过程如下 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/520100551_61927.png" alt=""></p>
<h1 id="SQLite主键"><a href="#SQLite主键" class="headerlink" title="SQLite主键"></a>SQLite主键</h1><p>SQLite主键是用于唯一定义行记录的一个简单字段或多个字段的组合。一个表只能有一个主键。</p>
<p>主键的值不可以是一个<code>NULL</code>值。</p>
<h2 id="创建主键"><a href="#创建主键" class="headerlink" title="创建主键"></a>创建主键</h2><p>主键通常在创建表时一同创建。在执行<code>CREATE TABLE</code>语句时可以直接定义主键。</p>
<p><strong>语法：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> table_name  
<span class="token punctuation">(</span>  
    column1 datatype <span class="token punctuation">[</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>  
    column2 datatype <span class="token punctuation">[</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>  
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  
    <span class="token keyword">CONSTRAINT</span> constraint_name <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>pk_col1<span class="token punctuation">,</span> pk_col2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> pk_col_n<span class="token punctuation">)</span>  
<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>参数说明：</strong></p>
<ul>
<li><em>table_name</em>：指定要创建的表的名称。</li>
<li><em>column1</em>，<em>column2</em>：指定要在表中创建的列。</li>
<li><em>constraint_name</em>：指定主键的名称。</li>
<li><em>pk_col1</em>，<em>pk_col2</em>，<em>… pk_col_n</em>：它指定构成主键的列。</li>
</ul>
<p><strong>示例：</strong></p>
<p>创建一个“<code>workers</code>”表，其中<code>worker_id</code>列是表的主键。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> workers  
<span class="token punctuation">(</span>
    worker_id <span class="token keyword">INTEGER</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>  
    last_name <span class="token keyword">VARCHAR</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  
    first_name <span class="token keyword">VARCHAR</span><span class="token punctuation">,</span>  
    join_date <span class="token keyword">DATE</span>  
<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="添加主键"><a href="#添加主键" class="headerlink" title="添加主键"></a>添加主键</h2><p>当没有在<code>CREATE TABLE</code>语句中定义主键时，也可以在创建表后再添加主键。</p>
<p>需要注意的是，不能使用<code>ALTER TABLE</code>语句来创建主键。在SQLite中需要先创建一个与原表一样的新表，并在这个新表上创建主键，然后复制旧表中的所有数据到新表中就可以了。</p>
<p><strong>语法</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql">PRAGMA foreign_keys<span class="token operator">=</span><span class="token keyword">off</span><span class="token punctuation">;</span>  
<span class="token keyword">BEGIN</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>  
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">RENAME</span> <span class="token keyword">TO</span> old_table<span class="token punctuation">;</span>  
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> table_name  
<span class="token punctuation">(</span>  
    column1 datatype <span class="token punctuation">[</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>  
    column2 datatype <span class="token punctuation">[</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>  
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  
    <span class="token keyword">CONSTRAINT</span> constraint_name <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>pk_col1<span class="token punctuation">,</span> pk_col2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> pk_col_n<span class="token punctuation">)</span>  
<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> table_name <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> old_table<span class="token punctuation">;</span>  
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>  
PRAGMA foreign_keys<span class="token operator">=</span><span class="token keyword">on</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>参数说明：</strong></p>
<ul>
<li><em>table_name</em>：指定要创建含有主键的表的名称。</li>
<li><em>old_table</em>：指定要被修表的名称。</li>
<li><em>column1</em>，<em>column2</em>：指定要在表中创建的列。</li>
<li><em>constraint_name</em>：指定主键的名称。</li>
<li><em>pk_col1</em>，<em>pk_col2</em>，<em>… pk_col_n</em>：它指定构成主键的列。</li>
</ul>
<p><strong>示例：</strong></p>
<p>首先创建一个没有主键的表：<code>employees</code>，如下语句 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> employees  
<span class="token punctuation">(</span>
    employee_id <span class="token keyword">INTEGER</span><span class="token punctuation">,</span>  
    last_name <span class="token keyword">VARCHAR</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  
    first_name <span class="token keyword">VARCHAR</span><span class="token punctuation">,</span>  
    hire_date <span class="token keyword">DATE</span>  
<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>现在，运行以下命令将“<code>employee_id</code>”列设置成为主键。</p>
<pre class="line-numbers language-sql"><code class="language-sql">PRAGMA foreign_keys<span class="token operator">=</span><span class="token keyword">off</span><span class="token punctuation">;</span>  
<span class="token keyword">BEGIN</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>  
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> employees <span class="token keyword">RENAME</span> <span class="token keyword">TO</span> old_employees<span class="token punctuation">;</span>  
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> employees  
<span class="token punctuation">(</span>  
    employee_id <span class="token keyword">INTEGER</span><span class="token punctuation">,</span>  
    last_name <span class="token keyword">VARCHAR</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  
    first_name <span class="token keyword">VARCHAR</span><span class="token punctuation">,</span>  
    hire_date <span class="token keyword">DATE</span><span class="token punctuation">,</span>  
    <span class="token keyword">CONSTRAINT</span> employees_pk <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>employee_id<span class="token punctuation">)</span>  
<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> employees <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> old_employees<span class="token punctuation">;</span>  
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>  
PRAGMA foreign_keys<span class="token operator">=</span><span class="token keyword">on</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>现在，它会将<code>employees</code>表重命名为<code>old_employees</code>，然后创建一个新表<code>employees</code>并创建主键，然后从<code>old_employees</code>表中将所有数据传输到新表 <code>employees</code>中。</p>
<p>最后删除旧表：<code>old_employees</code>。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> old_employees<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h2 id="删除主键"><a href="#删除主键" class="headerlink" title="删除主键"></a>删除主键</h2><p>与添加主键一样，不能使用<code>ALTER TABLE</code>语句来删除主键。需要创建一个没有(删除)主键的新表，并将数据复制到此新表中。</p>
<p><strong>语法</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql">PRAGMA foreign_keys<span class="token operator">=</span><span class="token keyword">off</span><span class="token punctuation">;</span>  
<span class="token keyword">BEGIN</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>  
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">RENAME</span> <span class="token keyword">TO</span> old_table<span class="token punctuation">;</span>  
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> table_name  
<span class="token punctuation">(</span>  
    column1 datatype <span class="token punctuation">[</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>  
    column2 datatype <span class="token punctuation">[</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>  
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  
<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> table_name <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> old_table<span class="token punctuation">;</span>  
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>  
PRAGMA foreign_keys<span class="token operator">=</span><span class="token keyword">on</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>参数说明</strong></p>
<ul>
<li><em>table_name</em> - 指定要从中删除主键的表的名称。</li>
<li><em>old_table</em> - 指定在删除主键后再创建新表时，将要删除拥有主键的表名称。</li>
</ul>
<p><strong>示例：</strong></p>
<p>假设有一个表<code>engineers</code>，并有一个主键：<code>engineer_id</code>，现在要删除这个<code>engineer_id</code>主键。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> engineers  
<span class="token punctuation">(</span>
    engineer_id <span class="token keyword">INTEGER</span><span class="token punctuation">,</span>  
    engineerr_name <span class="token keyword">VARCHAR</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  
    address <span class="token keyword">VARCHAR</span><span class="token punctuation">,</span>  
    city <span class="token keyword">VARCHAR</span><span class="token punctuation">,</span>  
    <span class="token keyword">CONSTRAINT</span> engineers_pk <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>engineer_id<span class="token punctuation">)</span>  
<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>现在，运行以下命令删除主键。</p>
<pre class="line-numbers language-sql"><code class="language-sql">PRAGMA foreign_keys<span class="token operator">=</span><span class="token keyword">off</span><span class="token punctuation">;</span>  
<span class="token keyword">BEGIN</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>  
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> engineers <span class="token keyword">RENAME</span> <span class="token keyword">TO</span> old_engineers<span class="token punctuation">;</span>  
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> engineers  
<span class="token punctuation">(</span>  
    engineer_id <span class="token keyword">INTEGER</span><span class="token punctuation">,</span>  
    engineer_name <span class="token keyword">VARCHAR</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  
    address <span class="token keyword">VARCHAR</span><span class="token punctuation">,</span>  
    city <span class="token keyword">VARCHAR</span>  
<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> engineers <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> old_engineers<span class="token punctuation">;</span>  
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>  
PRAGMA foreign_keys<span class="token operator">=</span><span class="token keyword">on</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面语句后，主键现在从<code>engineers</code>表中删除。 但是原来的表现在被重命名为<code>old_engineers</code>。</p>
<p>现在删除<code>old_engineers</code>表，如下语句 - </p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> old_engineers<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="SQLite外键"><a href="#SQLite外键" class="headerlink" title="SQLite外键"></a>SQLite外键</h2><p>SQLite <code>Foreign Key</code>语句用于指定一个表中的值也出现在另一个表中。 它在SQLite数据库中执行强制引用完整性。 被引用的表称为父表，而具有外键(或引用父表)的表称为子表。 子表中的外键通常会引用父表中的主键。</p>
<p>在SQLite中，只能在<code>CREATE TABLE</code>语句中定义外键。</p>
<h3 id="创建外键"><a href="#创建外键" class="headerlink" title="创建外键"></a>创建外键</h3><p><strong>语法</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> table_name  
<span class="token punctuation">(</span>  
    column1 datatype <span class="token punctuation">[</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>  
    column2 datatype <span class="token punctuation">[</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>  
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  
    <span class="token keyword">CONSTRAINT</span> fk_column  
    <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> column_n<span class="token punctuation">)</span>  
    <span class="token keyword">REFERENCES</span> parent_table <span class="token punctuation">(</span>column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> column_n<span class="token punctuation">)</span>  
<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>示例：</strong></p>
<p>创建一个以<code>department</code>表作为引用表(父表)拥有外键的 <code>employees</code> 表， <code>employees</code> 表的<code>department_id</code>列引用父表<code>department</code>的<code>department_id</code>列作为外键。</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 父表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> departments  
<span class="token punctuation">(</span>
    department_id <span class="token keyword">INTEGER</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> AUTOINCREMENT<span class="token punctuation">,</span>  
    department_name <span class="token keyword">VARCHAR</span>  
<span class="token punctuation">)</span><span class="token punctuation">;</span>  

<span class="token comment" spellcheck="true">-- 拥有外键的表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> employees  
<span class="token punctuation">(</span>
    employee_id <span class="token keyword">INTEGER</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> AUTOINCREMENT<span class="token punctuation">,</span>  
    last_name <span class="token keyword">VARCHAR</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  
    first_name <span class="token keyword">VARCHAR</span><span class="token punctuation">,</span>  
    department_id <span class="token keyword">INTEGER</span><span class="token punctuation">,</span>  
    <span class="token keyword">CONSTRAINT</span> fk_departments  
    <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>department_id<span class="token punctuation">)</span>  
    <span class="token keyword">REFERENCES</span> departments<span class="token punctuation">(</span>department_id<span class="token punctuation">)</span>  
<span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这里在<code>department</code>表中创建一个主键<code>department_id</code>。 然后，在<code>employees</code>表上创建一个名为<code>fk_departments</code>的外键，该<code>department_id</code>字段引用<code>department</code>表的<code>department_id</code>字段。</p>
<h1 id="SQLite导出导入"><a href="#SQLite导出导入" class="headerlink" title="SQLite导出导入"></a>SQLite导出导入</h1><h2 id="SQLite导入数据"><a href="#SQLite导入数据" class="headerlink" title="SQLite导入数据"></a>SQLite导入数据</h2><p>可以使用sqlite3工具和<code>.import</code>命令将CSV文件导入SQLite表。此命令接受文件名和表名。</p>
<p>这里，文件名是用于指定从哪里获取数据，表名是要导入数据的表。在没有指定表名的情况下，它将根据CSV文件中的数据自动创建表。</p>
<h3 id="从CSV文件导入到SQLite表"><a href="#从CSV文件导入到SQLite表" class="headerlink" title="从CSV文件导入到SQLite表"></a>从CSV文件导入到SQLite表</h3><p>看下面一个例子，将一个CSV文件：<code>data.csv</code>的内容导入到不存在的表中，在导入时指定新表名称为“<code>employee</code>”。 它将根据CSV文件的数据创建一个表。</p>
<p>文件：<code>data.csv</code>的内容如下 -</p>
<pre class="line-numbers language-shell"><code class="language-shell">ID,NAME,AGE,ADDRESS,FEES
1,Maxsu,26,Haikou,36000
2,Minwang,25,Guangzhou,29900
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行以下导入命令 - </p>
<pre class="line-numbers language-shell"><code class="language-shell">.mode csv  
.import D:/software/sqlite/data.csv employee
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p><strong>注意：</strong> <code>.mode csv</code>在<code>.import</code>语句之前使用，以防止命令行实用程序尝试将输入文件文本解释为其他格式。</p>
</blockquote>
<p>现在检查表是否创建：</p>
<p>可以看到创建了<code>employee</code>表，现在查看<code>employee</code>表中的数据：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token punctuation">.</span>mode <span class="token keyword">column</span>  
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> EMPLOYEE<span class="token punctuation">;</span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>完整执行结果如下 - </p>
<pre class="line-numbers language-shell"><code class="language-shell">sqlite> .mode csv
sqlite> .import D:/software/sqlite/data.csv employee
sqlite>
sqlite> .tables
audit       company     department  employee    student
sqlite>
sqlite> select * from employee;
1,Maxsu,26,Haikou,36000
2,Minwang,25,Guangzhou,29900
sqlite><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="SQLite导出数据"><a href="#SQLite导出数据" class="headerlink" title="SQLite导出数据"></a>SQLite导出数据</h2><p>SQLite可以将数据从SQLite数据库导出到CSV文件。也可以根据查询导出整个表或表中符合条件的数据。</p>
<p><code>.once</code>命令用于将数据导出到CSV文件，后跟要编写文件的文件路径/名称。</p>
<h3 id="SQLite将表导到CSV文件"><a href="#SQLite将表导到CSV文件" class="headerlink" title="SQLite将表导到CSV文件"></a>SQLite将表导到CSV文件</h3><p>下面来看看一个例子，将<code>STUDENT</code>表的所有内容导出为CSV文件：</p>
<p><code>STUDENT</code>表具有以下数据：</p>
<pre class="line-numbers language-sql"><code class="language-sql">sqlite<span class="token operator">></span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token number">1</span><span class="token punctuation">,</span>Maxsu<span class="token punctuation">,</span><span class="token number">27</span><span class="token punctuation">,</span>Shengzhen<span class="token punctuation">,</span><span class="token number">20000.0</span>
<span class="token number">2</span><span class="token punctuation">,</span>Minsu<span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span>Beijing<span class="token punctuation">,</span><span class="token number">15000.0</span>
<span class="token number">3</span><span class="token punctuation">,</span>Avgsu<span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span>Shanghai<span class="token punctuation">,</span><span class="token number">2000.0</span>
<span class="token number">4</span><span class="token punctuation">,</span>Linsu<span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span>Guangzhou<span class="token punctuation">,</span><span class="token number">65000.0</span>
<span class="token number">5</span><span class="token punctuation">,</span>Sqlsu<span class="token punctuation">,</span><span class="token number">26</span><span class="token punctuation">,</span>Haikou<span class="token punctuation">,</span><span class="token number">25000.0</span>
<span class="token number">6</span><span class="token punctuation">,</span>Javasu<span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">,</span>Shengzhen<span class="token punctuation">,</span><span class="token number">18000.0</span>
<span class="token number">7</span><span class="token punctuation">,</span>Linsu<span class="token punctuation">,</span><span class="token number">27</span><span class="token punctuation">,</span>Haikou<span class="token punctuation">,</span><span class="token number">10000.0</span>
<span class="token number">8</span><span class="token punctuation">,</span>Minsu<span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span>Guangzhou<span class="token punctuation">,</span><span class="token number">5000.0</span>
<span class="token number">9</span><span class="token punctuation">,</span>Maxsu<span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span>Shenzhen<span class="token punctuation">,</span><span class="token number">9000.0</span>
sqlite<span class="token operator">></span>
SQL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行导出操作，如下所示 - </p>
<pre class="line-numbers language-shell"><code class="language-shell">.header on  
.mode csv  
.once D:/software/sqlite/student.csv  
SELECT * FROM student;
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>代码说明：</strong></p>
<ul>
<li><strong>.header on:</strong>  - 它指定头(标题)已启用。 这是可选的。 如果禁用标题，CSV文件将不会包含任何数据。</li>
<li><strong>.mode csv:</strong>  - 它指定启用CSV模式。</li>
<li><strong>.once:</strong>  - 它指定要输出写入到CSV文件的确切位置。</li>
</ul>
<p>在执行上面语句后，找开文件：<code>D:/software/sqlite/student.csv</code>，应该可以看到导出的表的内容如下所示 -</p>
<p><img src="/images/loading.gif" data-original="../images/basic/864140539_69744.png" alt=""></p>
<h3 id="如何自动打开CSV文件："><a href="#如何自动打开CSV文件：" class="headerlink" title="如何自动打开CSV文件："></a>如何自动打开CSV文件：</h3><p><strong>.system</strong> 命令用于自动打开CSV文件。</p>
<p><strong>例如：</strong></p>
<p>以下命令在Windows中自动打开CSV文件：</p>
<pre class="line-numbers language-shell"><code class="language-shell">sqlite> .system D:/software/sqlite/student.csv
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>上面代码可能要根据操作系统的不同而进行更改：</p>
<ul>
<li>在Windows上，使用<code>.system</code>命令后跟文件名。</li>
<li>在Mac上，使用<code>.system open</code>后跟文件名。</li>
<li>在Linux和Unix系统上，使用<code>.system</code>后跟程序的名称打开文件，后跟文件名。 例如，<code>.system libreoffice /home/yiibai/file.csv</code></li>
</ul>
<h1 id="SQLite连接程序"><a href="#SQLite连接程序" class="headerlink" title="SQLite连接程序"></a>SQLite连接程序</h1><h2 id="Java连接SQLite数据库"><a href="#Java连接SQLite数据库" class="headerlink" title="Java连接SQLite数据库"></a>Java连接SQLite数据库</h2><p>要使用java程序连接SQLite，并与SQLite进行数据存取操作，必须在系统上设置SQLite JDBC驱动程序和安装Java JDK。按照以下步骤进行：</p>
<ul>
<li>从sqlite-jdbc存储库下载最新版本的<code>sqlite-jdbc-(VERSION).jar</code>。</li>
<li>将下载的jar文件添加到类路径。</li>
<li>使用java连接到SQLite数据库。</li>
</ul>
<h3 id="连接到SQLite数据库"><a href="#连接到SQLite数据库" class="headerlink" title="连接到SQLite数据库"></a>连接到SQLite数据库</h3><p>打开Eclipse IDE，创建一个JAVA工程：<strong>JavaWithSQLite</strong>，下载所需的<code>sqlite-jdbc-(VERSION).jar</code>(下载地址：<a href="http://bitbucket.org/xerial/sqlite-jdbc/downloads/" target="_blank" rel="noopener">http://bitbucket.org/xerial/sqlite-jdbc/downloads/</a> 或者 <a href="http://mvnrepository.com/artifact/org.xerial/sqlite-jdbc/3.18.0" target="_blank" rel="noopener">http://mvnrepository.com/artifact/org.xerial/sqlite-jdbc/3.18.0</a> )，并将它放入到项目的类库中。</p>
<p>使用以下代码使用Java编程语言连接到SQLite数据库，首先创建一个类：<code>ConnectSQLite.java</code>，其代码如下所示 -</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>yiibai<span class="token punctuation">;</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>Connection<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>DriverManager<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>SQLException<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConnectSQLite</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">/**
     * Connect to a sample database
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Connection conn <span class="token operator">=</span> null<span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">// db parameters</span>
            String url <span class="token operator">=</span> <span class="token string">"jdbc:sqlite:D:/software/sqlite/java-sqlite.db"</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">// create a connection to the database</span>
            conn <span class="token operator">=</span> DriverManager<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>

            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Connection to SQLite has been established."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>conn <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">/**
     * @param args
     *            the command line arguments
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
Java<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面代码后，应该会创建一个文件：<code>D:/software/sqlite/java-sqlite.db</code>，并与数据库<code>java-sqlite.db</code>连接。</p>
<h3 id="使用java创建数据库"><a href="#使用java创建数据库" class="headerlink" title="使用java创建数据库"></a>使用java创建数据库</h3><p>还可以使用java编程语言在SQLite中创建一个新的数据库。假设要使用Java来创建一个名为<strong>java_sqlite.db</strong>的数据库。创建一个公共类：<code>CreateDB.java</code>并使用以下代码：</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>yiibai<span class="token punctuation">;</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>Connection<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>DatabaseMetaData<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>DriverManager<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>SQLException<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateDB</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">createNewDatabase</span><span class="token punctuation">(</span>String fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        String url <span class="token operator">=</span> <span class="token string">"jdbc:sqlite:"</span> <span class="token operator">+</span> fileName<span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            Connection conn <span class="token operator">=</span> DriverManager<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>conn <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                DatabaseMetaData meta <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">getMetaData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"The driver name is "</span> <span class="token operator">+</span> meta<span class="token punctuation">.</span><span class="token function">getDriverName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"A new database has been created."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">createNewDatabase</span><span class="token punctuation">(</span><span class="token string">"D:/software/sqlite/create-db.db"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
Java<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面代码，得到以下结果 - </p>
<pre class="line-numbers language-shell"><code class="language-shell">The driver name is SQLiteJDBC
A new database has been created.
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>现在创建一个名为“<code>create-db.db</code>”的新数据库。可以看到对应创建目录有一个文件：<code>create-db.db</code>存在。</p>
<p><img src="/images/loading.gif" data-original="../images/basic/210150529_15504.png" alt=""></p>
<h3 id="使用java创建一个表"><a href="#使用java创建一个表" class="headerlink" title="使用java创建一个表"></a>使用java创建一个表</h3><p>假设要通过Java程序在SQLite中创建一个名为<code>tb_emp</code>的表，<code>tb_emp</code>表具有<code>id</code>,<code>name</code>和<code>capacity</code>这三列。首先创建一个Java类：<code>CreateTable.java</code>，并使用以下代码：</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>yiibai<span class="token punctuation">;</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>Connection<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>DriverManager<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>SQLException<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>Statement<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateTable</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">createNewTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// SQLite connection string</span>
        String url <span class="token operator">=</span> <span class="token string">"jdbc:sqlite:D:/software/sqlite/java-sqlite.db"</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// SQL statement for creating a new table</span>
        String sql <span class="token operator">=</span> <span class="token string">"CREATE TABLE IF NOT EXISTS employees (\n"</span> <span class="token operator">+</span> <span class="token string">" id integer PRIMARY KEY,\n"</span>
                <span class="token operator">+</span> <span class="token string">" name text NOT NULL,\n"</span> <span class="token operator">+</span> <span class="token string">" capacity real\n"</span> <span class="token operator">+</span> <span class="token string">");"</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            Connection conn <span class="token operator">=</span> DriverManager<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
            Statement stmt <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            stmt<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Create table finished."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">/**
     * @param args
     *            the command line arguments
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">createNewTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
Java<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面代码，得到以下结果 - </p>
<pre class="line-numbers language-shell"><code class="language-shell">Create table finished.
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>执行上面代码后，将在<code>java-sqlite.db</code>数据库中创建一个名称为：<code>employees</code> 的表。</p>
<h3 id="向表中插入记录"><a href="#向表中插入记录" class="headerlink" title="向表中插入记录"></a>向表中插入记录</h3><p>创建表后，使用以下代码在表中插入一些记录。 创建一个新的Java类：<code>InsertRecords</code>，具有以下代码：</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>yiibai<span class="token punctuation">;</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>Connection<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>DriverManager<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>PreparedStatement<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>SQLException<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InsertRecords</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> Connection <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// SQLite connection string</span>
        String url <span class="token operator">=</span> <span class="token string">"jdbc:sqlite:D:/software/sqlite/java-sqlite.db"</span><span class="token punctuation">;</span>
        Connection conn <span class="token operator">=</span> null<span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            conn <span class="token operator">=</span> DriverManager<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> conn<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span>String name<span class="token punctuation">,</span> <span class="token keyword">double</span> capacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        String sql <span class="token operator">=</span> <span class="token string">"INSERT INTO employees(name, capacity) VALUES(?,?)"</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            Connection conn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            PreparedStatement pstmt <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
            pstmt<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
            pstmt<span class="token punctuation">.</span><span class="token function">setDouble</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> capacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
            pstmt<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        InsertRecords app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InsertRecords</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">// insert three new rows</span>
        app<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"Maxsu"</span><span class="token punctuation">,</span> <span class="token number">30000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        app<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"Minsu"</span><span class="token punctuation">,</span> <span class="token number">40000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        app<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"Miswong"</span><span class="token punctuation">,</span> <span class="token number">50000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Insert data finished."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
Java<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>现在记录被插入到表中。 可以使用<code>SELECT</code>命令查看它：</p>
<pre class="line-numbers language-shell"><code class="language-shell">sqlite> .open java-sqlite.db
sqlite> .tables
employees
sqlite> select * from employees;
id,name,capacity
1,Maxsu,30000.0
2,Minsu,40000.0
3,Miswong,50000.0
sqlite>
sqlite>
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="查询-选择记录"><a href="#查询-选择记录" class="headerlink" title="查询/选择记录"></a>查询/选择记录</h3><p>要使用Java程序从表中选择/查询记录，请使用以下代码。 创建一个新的Java类 - <code>SelectRecords.java</code>，使用以下代码 - </p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>yiibai<span class="token punctuation">;</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>DriverManager<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>Connection<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>ResultSet<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>SQLException<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>Statement<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SelectRecords</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> Connection <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// SQLite connection string</span>
        String url <span class="token operator">=</span> <span class="token string">"jdbc:sqlite:D:/software/sqlite/java-sqlite.db"</span><span class="token punctuation">;</span>
        Connection conn <span class="token operator">=</span> null<span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            conn <span class="token operator">=</span> DriverManager<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> conn<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        String sql <span class="token operator">=</span> <span class="token string">"SELECT * FROM employees"</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            Connection conn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Statement stmt <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ResultSet rs <span class="token operator">=</span> stmt<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">// loop through the result set</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\t"</span> <span class="token operator">+</span> rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\t"</span> <span class="token operator">+</span> rs<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span><span class="token string">"capacity"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">/**
     * @param args
     *            the command line arguments
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        SelectRecords app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SelectRecords</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        app<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
Java<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面代码，得到以下结果 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/242160508_40225.png" alt=""></p>
<blockquote>
<p><strong>注意</strong>： 因为都是通过使用相同的编程过程，所以您可自己编写其它数据库操作，比如：更新和删除表中的数据等等。</p>
</blockquote>
<h2 id="PHP连接SQLite数据库"><a href="#PHP连接SQLite数据库" class="headerlink" title="PHP连接SQLite数据库"></a>PHP连接SQLite数据库</h2><p>SQLite3扩展名在<code>PHP 5.3.0+</code>以上都会默认启用。可以在编译时使用<code>--without-sqlite3</code>来禁用它。</p>
<p>Windows用户可通过启用<code>php_sqlite3.dll</code>才能使用此扩展。 <code>php_sqlite3.dll</code>默认包含在<code>PHP 5.3.0</code>之后的PHP发行版中。</p>
<h3 id="连接到SQLite数据库-1"><a href="#连接到SQLite数据库-1" class="headerlink" title="连接到SQLite数据库"></a>连接到SQLite数据库</h3><p>以下PHP代码显示如何连接到SQLite数据库。 如果数据库不存在，那么它将创建一个新的数据库，最后将返回一个数据库对象。</p>
<pre class="line-numbers language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span>
   <span class="token keyword">class</span> <span class="token class-name">SQLiteDB</span> <span class="token keyword">extends</span> <span class="token class-name">SQLite3</span>
   <span class="token punctuation">{</span>
      <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
         <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'phpdb.db'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
   <span class="token variable">$db</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SQLiteDB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$db</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">echo</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">lastErrorMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">echo</span> <span class="token string">"Yes, Opened database successfully\n"</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token delimiter">?></span>
<span class="token constant">PHP</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>现在，运行上面的程序在当前目录中创建指定数据库：<code>phpdb.db</code>。可以根据需要更改路径。 如果数据库成功创建，则会提供以下消息：</p>
<p><img src="/images/loading.gif" data-original="../images/basic/image-20210828120007033.png" alt=""></p>
<p>在执行上面语句后，应该也会在相同的目录下自动创建一个名称为：<code>phpdb.db</code>的数据库文件。如下所示 - </p>
<p><img src="/images/loading.gif" data-original="../images/basic/235100532_26778.png" alt=""></p>
<h3 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h3><p>以下PHP程序将用于在上面创建的数据库(<code>phpdb.db</code>)中创建一个表：</p>
<pre class="line-numbers language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name">SQLiteDB</span> <span class="token keyword">extends</span> <span class="token class-name">SQLite3</span>
<span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
     <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'phpdb.db'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token variable">$db</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SQLiteDB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$db</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">lastErrorMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token string">"Yes, Opened database successfully&lt;br/>\n"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token variable">$sql</span> <span class="token operator">=</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token constant">EOF</span>
      <span class="token constant">CREATE</span> <span class="token constant">TABLE</span> <span class="token function">company</span>
      <span class="token punctuation">(</span><span class="token constant">ID</span> <span class="token constant">INT</span> <span class="token constant">PRIMARY</span> <span class="token constant">KEY</span>     <span class="token constant">NOT</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span>
      <span class="token constant">NAME</span>           <span class="token constant">TEXT</span>    <span class="token constant">NOT</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span>
      <span class="token constant">AGE</span>            <span class="token constant">INT</span>     <span class="token constant">NOT</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span>
      <span class="token constant">ADDRESS</span>        <span class="token function">CHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token constant">SALARY</span>         <span class="token constant">REAL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">EOF</span><span class="token punctuation">;</span>

<span class="token variable">$ret</span> <span class="token operator">=</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$ret</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">lastErrorMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token string">"Yes, Table created successfully&lt;br/>\n"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">PHP</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>当执行上述程序时，它将在数据库(<code>phpdb.db</code>)中创建一个名称为：<code>company</code>的表，并显示以下消息：</p>
<p><img src="/images/loading.gif" data-original="../images/basic/117100536_84319.png" alt=""></p>
<h3 id="插入数据操作"><a href="#插入数据操作" class="headerlink" title="插入数据操作"></a>插入数据操作</h3><p>以下PHP程序显示了如何在上述示例中创建的<code>company</code>表中插入数据记录：</p>
<pre class="line-numbers language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name">SQLiteDB</span> <span class="token keyword">extends</span> <span class="token class-name">SQLite3</span>
<span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
     <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'phpdb.db'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token variable">$db</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SQLiteDB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$db</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">lastErrorMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token string">"Yes, Opened database successfully&lt;br/>\n"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// 先删除后创建表</span>
<span class="token variable">$sql</span> <span class="token operator">=</span> <span class="token string">"DROP table company"</span><span class="token punctuation">;</span>
<span class="token variable">$ret</span> <span class="token operator">=</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 创建表语句</span>

<span class="token variable">$sql</span> <span class="token operator">=</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token constant">EOF</span>
      <span class="token constant">CREATE</span> <span class="token constant">TABLE</span> <span class="token keyword">if</span> not exists <span class="token function">company</span>
      <span class="token punctuation">(</span><span class="token constant">ID</span> <span class="token constant">INT</span> <span class="token constant">PRIMARY</span> <span class="token constant">KEY</span>     <span class="token constant">NOT</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span>
      <span class="token constant">NAME</span>           <span class="token constant">TEXT</span>    <span class="token constant">NOT</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span>
      <span class="token constant">AGE</span>            <span class="token constant">INT</span>     <span class="token constant">NOT</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span>
      <span class="token constant">ADDRESS</span>        <span class="token function">CHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token constant">SALARY</span>         <span class="token constant">REAL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">EOF</span><span class="token punctuation">;</span>

<span class="token variable">$ret</span> <span class="token operator">=</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$ret</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">lastErrorMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token string">"Yes, Table created successfully&lt;br/>\n"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// $db->close();</span>

<span class="token variable">$sql</span> <span class="token operator">=</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token constant">EOF</span>
      <span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token function">company</span> <span class="token punctuation">(</span><span class="token constant">ID</span><span class="token punctuation">,</span><span class="token constant">NAME</span><span class="token punctuation">,</span><span class="token constant">AGE</span><span class="token punctuation">,</span><span class="token constant">ADDRESS</span><span class="token punctuation">,</span><span class="token constant">SALARY</span><span class="token punctuation">)</span>
      <span class="token function">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'Maxsu'</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token string">'Haikou'</span><span class="token punctuation">,</span> <span class="token number">20000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token function">company</span> <span class="token punctuation">(</span><span class="token constant">ID</span><span class="token punctuation">,</span><span class="token constant">NAME</span><span class="token punctuation">,</span><span class="token constant">AGE</span><span class="token punctuation">,</span><span class="token constant">ADDRESS</span><span class="token punctuation">,</span><span class="token constant">SALARY</span><span class="token punctuation">)</span>
      <span class="token function">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'Allen'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">'Guangzhou'</span><span class="token punctuation">,</span> <span class="token number">15000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token function">company</span> <span class="token punctuation">(</span><span class="token constant">ID</span><span class="token punctuation">,</span><span class="token constant">NAME</span><span class="token punctuation">,</span><span class="token constant">AGE</span><span class="token punctuation">,</span><span class="token constant">ADDRESS</span><span class="token punctuation">,</span><span class="token constant">SALARY</span><span class="token punctuation">)</span>
      <span class="token function">VALUES</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'Tenny'</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">'Shanghai'</span><span class="token punctuation">,</span> <span class="token number">20000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token function">company</span> <span class="token punctuation">(</span><span class="token constant">ID</span><span class="token punctuation">,</span><span class="token constant">NAME</span><span class="token punctuation">,</span><span class="token constant">AGE</span><span class="token punctuation">,</span><span class="token constant">ADDRESS</span><span class="token punctuation">,</span><span class="token constant">SALARY</span><span class="token punctuation">)</span>
      <span class="token function">VALUES</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'Weiwang'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">'Beijing '</span><span class="token punctuation">,</span> <span class="token number">65000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">EOF</span><span class="token punctuation">;</span>

   <span class="token variable">$ret</span> <span class="token operator">=</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$ret</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">echo</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">lastErrorMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">echo</span> <span class="token string">"Yes, Some Records has Inserted successfully&lt;br/>\n"</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">PHP</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>当执行上述程序时，将向<code>company</code>表中插入给定的记录，并显示如下：</p>
<p><img src="/images/loading.gif" data-original="../images/basic/335100542_45875.png" alt=""></p>
<h3 id="SELECT操作"><a href="#SELECT操作" class="headerlink" title="SELECT操作"></a>SELECT操作</h3><p>以下PHP程序显示了如何从上述示例中创建的<code>company</code>表中获取并显示数据记录：</p>
<pre class="line-numbers language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name">SQLiteDB</span> <span class="token keyword">extends</span> <span class="token class-name">SQLite3</span>
<span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
     <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'phpdb.db'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token variable">$db</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SQLiteDB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$db</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">lastErrorMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token string">"Yes, Opened database successfully&lt;br/>\n"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// 先删除后创建表</span>
<span class="token variable">$sql</span> <span class="token operator">=</span> <span class="token string">"DROP table company"</span><span class="token punctuation">;</span>
<span class="token variable">$ret</span> <span class="token operator">=</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 创建表</span>

<span class="token variable">$sql</span> <span class="token operator">=</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token constant">EOF</span>
      <span class="token constant">CREATE</span> <span class="token constant">TABLE</span> <span class="token keyword">if</span> not exists <span class="token function">company</span>
      <span class="token punctuation">(</span><span class="token constant">ID</span> <span class="token constant">INT</span> <span class="token constant">PRIMARY</span> <span class="token constant">KEY</span>     <span class="token constant">NOT</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span>
      <span class="token constant">NAME</span>           <span class="token constant">TEXT</span>    <span class="token constant">NOT</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span>
      <span class="token constant">AGE</span>            <span class="token constant">INT</span>     <span class="token constant">NOT</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span>
      <span class="token constant">ADDRESS</span>        <span class="token function">CHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token constant">SALARY</span>         <span class="token constant">REAL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">EOF</span><span class="token punctuation">;</span>

<span class="token variable">$ret</span> <span class="token operator">=</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$ret</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">lastErrorMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token string">"Yes, Table created successfully&lt;br/>\n"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// $db->close();</span>

<span class="token variable">$sql</span> <span class="token operator">=</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token constant">EOF</span>
      <span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token function">company</span> <span class="token punctuation">(</span><span class="token constant">ID</span><span class="token punctuation">,</span><span class="token constant">NAME</span><span class="token punctuation">,</span><span class="token constant">AGE</span><span class="token punctuation">,</span><span class="token constant">ADDRESS</span><span class="token punctuation">,</span><span class="token constant">SALARY</span><span class="token punctuation">)</span>
      <span class="token function">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'Maxsu'</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token string">'Haikou'</span><span class="token punctuation">,</span> <span class="token number">20000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token function">company</span> <span class="token punctuation">(</span><span class="token constant">ID</span><span class="token punctuation">,</span><span class="token constant">NAME</span><span class="token punctuation">,</span><span class="token constant">AGE</span><span class="token punctuation">,</span><span class="token constant">ADDRESS</span><span class="token punctuation">,</span><span class="token constant">SALARY</span><span class="token punctuation">)</span>
      <span class="token function">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'Allen'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">'Guangzhou'</span><span class="token punctuation">,</span> <span class="token number">15000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token function">company</span> <span class="token punctuation">(</span><span class="token constant">ID</span><span class="token punctuation">,</span><span class="token constant">NAME</span><span class="token punctuation">,</span><span class="token constant">AGE</span><span class="token punctuation">,</span><span class="token constant">ADDRESS</span><span class="token punctuation">,</span><span class="token constant">SALARY</span><span class="token punctuation">)</span>
      <span class="token function">VALUES</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'Tenny'</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">'Shanghai'</span><span class="token punctuation">,</span> <span class="token number">20000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token function">company</span> <span class="token punctuation">(</span><span class="token constant">ID</span><span class="token punctuation">,</span><span class="token constant">NAME</span><span class="token punctuation">,</span><span class="token constant">AGE</span><span class="token punctuation">,</span><span class="token constant">ADDRESS</span><span class="token punctuation">,</span><span class="token constant">SALARY</span><span class="token punctuation">)</span>
      <span class="token function">VALUES</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'Weiwang'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">'Beijing '</span><span class="token punctuation">,</span> <span class="token number">65000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">EOF</span><span class="token punctuation">;</span>

<span class="token variable">$ret</span> <span class="token operator">=</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$ret</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">lastErrorMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token string">"Yes, Some Records has Inserted successfully&lt;br/>\n"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// 查询表中的数据</span>

<span class="token keyword">echo</span> <span class="token string">"&lt;b> Select Data from company table :&lt;/b>&lt;hr/>"</span><span class="token punctuation">;</span>

<span class="token variable">$sql</span> <span class="token operator">=</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token constant">EOF</span>
  <span class="token constant">SELECT</span> <span class="token operator">*</span> from <span class="token constant">COMPANY</span><span class="token punctuation">;</span>
<span class="token constant">EOF</span><span class="token punctuation">;</span>

<span class="token variable">$ret</span> <span class="token operator">=</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">query</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token variable">$row</span> <span class="token operator">=</span> <span class="token variable">$ret</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">fetchArray</span><span class="token punctuation">(</span><span class="token constant">SQLITE3_ASSOC</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token string">"ID = "</span><span class="token punctuation">.</span> <span class="token variable">$row</span><span class="token punctuation">[</span><span class="token string">'ID'</span><span class="token punctuation">]</span> <span class="token punctuation">.</span> <span class="token string">"&lt;br/>\n"</span><span class="token punctuation">;</span>
  <span class="token keyword">echo</span> <span class="token string">"NAME = "</span><span class="token punctuation">.</span> <span class="token variable">$row</span><span class="token punctuation">[</span><span class="token string">'NAME'</span><span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token string">"&lt;br/>\n"</span><span class="token punctuation">;</span>
  <span class="token keyword">echo</span> <span class="token string">"ADDRESS = "</span><span class="token punctuation">.</span> <span class="token variable">$row</span><span class="token punctuation">[</span><span class="token string">'ADDRESS'</span><span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token string">"&lt;br/>\n"</span><span class="token punctuation">;</span>
  <span class="token keyword">echo</span> <span class="token string">"SALARY =  "</span><span class="token punctuation">.</span><span class="token variable">$row</span><span class="token punctuation">[</span><span class="token string">'SALARY'</span><span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token string">"&lt;br/>\n\n"</span><span class="token punctuation">;</span>
  <span class="token keyword">echo</span> <span class="token string">'----------------------------------&lt;br/>'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">echo</span> <span class="token string">"Operation done successfully\n"</span><span class="token punctuation">;</span>

<span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">PHP</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上述程序时，会产生以下结果：</p>
<p><img src="/images/loading.gif" data-original="../images/basic/748100547_18696.png" alt=""></p>
<h3 id="更新操作"><a href="#更新操作" class="headerlink" title="更新操作"></a>更新操作</h3><p>以下PHP代码显示了如何使用<code>UPDATE</code>语句来更新记录，然后从<code>company</code>表中获取并显示更新的记录：</p>
<pre class="line-numbers language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name">SQLiteDB</span> <span class="token keyword">extends</span> <span class="token class-name">SQLite3</span>
<span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
     <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'phpdb.db'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token variable">$db</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SQLiteDB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$db</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">lastErrorMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token string">"Yes, Opened database successfully&lt;br/>\n"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// 先删除后创建表</span>
<span class="token variable">$sql</span> <span class="token operator">=</span> <span class="token string">"DROP table company"</span><span class="token punctuation">;</span>
<span class="token variable">$ret</span> <span class="token operator">=</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 创建表</span>

<span class="token variable">$sql</span> <span class="token operator">=</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token constant">EOF</span>
      <span class="token constant">CREATE</span> <span class="token constant">TABLE</span> <span class="token keyword">if</span> not exists <span class="token function">company</span>
      <span class="token punctuation">(</span><span class="token constant">ID</span> <span class="token constant">INT</span> <span class="token constant">PRIMARY</span> <span class="token constant">KEY</span>     <span class="token constant">NOT</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span>
      <span class="token constant">NAME</span>           <span class="token constant">TEXT</span>    <span class="token constant">NOT</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span>
      <span class="token constant">AGE</span>            <span class="token constant">INT</span>     <span class="token constant">NOT</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span>
      <span class="token constant">ADDRESS</span>        <span class="token function">CHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token constant">SALARY</span>         <span class="token constant">REAL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">EOF</span><span class="token punctuation">;</span>

<span class="token variable">$ret</span> <span class="token operator">=</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$ret</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">lastErrorMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token string">"Yes, Table created successfully&lt;br/>\n"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// $db->close();</span>

<span class="token variable">$sql</span> <span class="token operator">=</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token constant">EOF</span>
      <span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token function">company</span> <span class="token punctuation">(</span><span class="token constant">ID</span><span class="token punctuation">,</span><span class="token constant">NAME</span><span class="token punctuation">,</span><span class="token constant">AGE</span><span class="token punctuation">,</span><span class="token constant">ADDRESS</span><span class="token punctuation">,</span><span class="token constant">SALARY</span><span class="token punctuation">)</span>
      <span class="token function">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'Maxsu'</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token string">'Haikou'</span><span class="token punctuation">,</span> <span class="token number">20000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token function">company</span> <span class="token punctuation">(</span><span class="token constant">ID</span><span class="token punctuation">,</span><span class="token constant">NAME</span><span class="token punctuation">,</span><span class="token constant">AGE</span><span class="token punctuation">,</span><span class="token constant">ADDRESS</span><span class="token punctuation">,</span><span class="token constant">SALARY</span><span class="token punctuation">)</span>
      <span class="token function">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'Allen'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">'Guangzhou'</span><span class="token punctuation">,</span> <span class="token number">15000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token function">company</span> <span class="token punctuation">(</span><span class="token constant">ID</span><span class="token punctuation">,</span><span class="token constant">NAME</span><span class="token punctuation">,</span><span class="token constant">AGE</span><span class="token punctuation">,</span><span class="token constant">ADDRESS</span><span class="token punctuation">,</span><span class="token constant">SALARY</span><span class="token punctuation">)</span>
      <span class="token function">VALUES</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'Tenny'</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">'Shanghai'</span><span class="token punctuation">,</span> <span class="token number">20000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token function">company</span> <span class="token punctuation">(</span><span class="token constant">ID</span><span class="token punctuation">,</span><span class="token constant">NAME</span><span class="token punctuation">,</span><span class="token constant">AGE</span><span class="token punctuation">,</span><span class="token constant">ADDRESS</span><span class="token punctuation">,</span><span class="token constant">SALARY</span><span class="token punctuation">)</span>
      <span class="token function">VALUES</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'Weiwang'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">'Beijing '</span><span class="token punctuation">,</span> <span class="token number">65000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">EOF</span><span class="token punctuation">;</span>

<span class="token variable">$ret</span> <span class="token operator">=</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$ret</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">lastErrorMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token string">"Yes, Some Records has Inserted successfully&lt;br/>\n"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// 更新ID=1的薪水为：29999</span>

<span class="token variable">$sql</span> <span class="token operator">=</span> <span class="token string">'UPDATE COMPANY set SALARY = 29999.00 where ID=1'</span><span class="token punctuation">;</span>
<span class="token variable">$ret</span> <span class="token operator">=</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$ret</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">lastErrorMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">changes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">" Record(ID=1) updated successfully&lt;br/>\n"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment" spellcheck="true">// 查询表中的数据</span>

<span class="token keyword">echo</span> <span class="token string">"&lt;b> Select Data from company table :&lt;/b>&lt;hr/>"</span><span class="token punctuation">;</span>

<span class="token variable">$sql</span> <span class="token operator">=</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token constant">EOF</span>
  <span class="token constant">SELECT</span> <span class="token operator">*</span> from <span class="token constant">COMPANY</span><span class="token punctuation">;</span>
<span class="token constant">EOF</span><span class="token punctuation">;</span>

<span class="token variable">$ret</span> <span class="token operator">=</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">query</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token variable">$row</span> <span class="token operator">=</span> <span class="token variable">$ret</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">fetchArray</span><span class="token punctuation">(</span><span class="token constant">SQLITE3_ASSOC</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token string">"ID = "</span><span class="token punctuation">.</span> <span class="token variable">$row</span><span class="token punctuation">[</span><span class="token string">'ID'</span><span class="token punctuation">]</span> <span class="token punctuation">.</span> <span class="token string">"&lt;br/>\n"</span><span class="token punctuation">;</span>
  <span class="token keyword">echo</span> <span class="token string">"NAME = "</span><span class="token punctuation">.</span> <span class="token variable">$row</span><span class="token punctuation">[</span><span class="token string">'NAME'</span><span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token string">"&lt;br/>\n"</span><span class="token punctuation">;</span>
  <span class="token keyword">echo</span> <span class="token string">"ADDRESS = "</span><span class="token punctuation">.</span> <span class="token variable">$row</span><span class="token punctuation">[</span><span class="token string">'ADDRESS'</span><span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token string">"&lt;br/>\n"</span><span class="token punctuation">;</span>
  <span class="token keyword">echo</span> <span class="token string">"SALARY =  "</span><span class="token punctuation">.</span><span class="token variable">$row</span><span class="token punctuation">[</span><span class="token string">'SALARY'</span><span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token string">"&lt;br/>\n\n"</span><span class="token punctuation">;</span>
  <span class="token keyword">echo</span> <span class="token string">'----------------------------------&lt;br/>'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">echo</span> <span class="token string">"Operation done successfully\n"</span><span class="token punctuation">;</span>

<span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">PHP</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上述程序时，会产生以下结果：</p>
<p><img src="/images/loading.gif" data-original="../images/basic/942120534_53074.png" alt=""></p>
<h3 id="删除操作"><a href="#删除操作" class="headerlink" title="删除操作"></a>删除操作</h3><p>以下PHP代码显示了如何使用<code>DELETE</code>语句删除任何记录，然后从<code>company</code>表中获取并显示剩余的记录：</p>
<pre class="line-numbers language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name">SQLiteDB</span> <span class="token keyword">extends</span> <span class="token class-name">SQLite3</span>
<span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
     <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'phpdb.db'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token variable">$db</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SQLiteDB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$db</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">lastErrorMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token string">"Yes, Opened database successfully&lt;br/>\n"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// 先删除后创建表</span>
<span class="token variable">$sql</span> <span class="token operator">=</span> <span class="token string">"DROP table company"</span><span class="token punctuation">;</span>
<span class="token variable">$ret</span> <span class="token operator">=</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 创建表</span>

<span class="token variable">$sql</span> <span class="token operator">=</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token constant">EOF</span>
      <span class="token constant">CREATE</span> <span class="token constant">TABLE</span> <span class="token keyword">if</span> not exists <span class="token function">company</span>
      <span class="token punctuation">(</span><span class="token constant">ID</span> <span class="token constant">INT</span> <span class="token constant">PRIMARY</span> <span class="token constant">KEY</span>     <span class="token constant">NOT</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span>
      <span class="token constant">NAME</span>           <span class="token constant">TEXT</span>    <span class="token constant">NOT</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span>
      <span class="token constant">AGE</span>            <span class="token constant">INT</span>     <span class="token constant">NOT</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span>
      <span class="token constant">ADDRESS</span>        <span class="token function">CHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token constant">SALARY</span>         <span class="token constant">REAL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">EOF</span><span class="token punctuation">;</span>

<span class="token variable">$ret</span> <span class="token operator">=</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$ret</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">lastErrorMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token string">"Yes, Table created successfully&lt;br/>\n"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// $db->close();</span>

<span class="token variable">$sql</span> <span class="token operator">=</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token constant">EOF</span>
      <span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token function">company</span> <span class="token punctuation">(</span><span class="token constant">ID</span><span class="token punctuation">,</span><span class="token constant">NAME</span><span class="token punctuation">,</span><span class="token constant">AGE</span><span class="token punctuation">,</span><span class="token constant">ADDRESS</span><span class="token punctuation">,</span><span class="token constant">SALARY</span><span class="token punctuation">)</span>
      <span class="token function">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'Maxsu'</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token string">'Haikou'</span><span class="token punctuation">,</span> <span class="token number">20000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token function">company</span> <span class="token punctuation">(</span><span class="token constant">ID</span><span class="token punctuation">,</span><span class="token constant">NAME</span><span class="token punctuation">,</span><span class="token constant">AGE</span><span class="token punctuation">,</span><span class="token constant">ADDRESS</span><span class="token punctuation">,</span><span class="token constant">SALARY</span><span class="token punctuation">)</span>
      <span class="token function">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'Allen'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">'Guangzhou'</span><span class="token punctuation">,</span> <span class="token number">15000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token function">company</span> <span class="token punctuation">(</span><span class="token constant">ID</span><span class="token punctuation">,</span><span class="token constant">NAME</span><span class="token punctuation">,</span><span class="token constant">AGE</span><span class="token punctuation">,</span><span class="token constant">ADDRESS</span><span class="token punctuation">,</span><span class="token constant">SALARY</span><span class="token punctuation">)</span>
      <span class="token function">VALUES</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'Tenny'</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">'Shanghai'</span><span class="token punctuation">,</span> <span class="token number">20000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token function">company</span> <span class="token punctuation">(</span><span class="token constant">ID</span><span class="token punctuation">,</span><span class="token constant">NAME</span><span class="token punctuation">,</span><span class="token constant">AGE</span><span class="token punctuation">,</span><span class="token constant">ADDRESS</span><span class="token punctuation">,</span><span class="token constant">SALARY</span><span class="token punctuation">)</span>
      <span class="token function">VALUES</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'Weiwang'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">'Beijing '</span><span class="token punctuation">,</span> <span class="token number">65000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">EOF</span><span class="token punctuation">;</span>

<span class="token variable">$ret</span> <span class="token operator">=</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$ret</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">lastErrorMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token string">"Yes, Some Records has Inserted successfully&lt;br/>\n"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// 更新ID小于等于2的数据记录</span>

<span class="token variable">$sql</span> <span class="token operator">=</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token constant">EOF</span>
  <span class="token constant">DELETE</span> from <span class="token constant">COMPANY</span> where <span class="token constant">ID</span><span class="token operator">&lt;=</span><span class="token number">2</span><span class="token punctuation">;</span>
<span class="token constant">EOF</span><span class="token punctuation">;</span>
<span class="token variable">$ret</span> <span class="token operator">=</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$ret</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">echo</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">lastErrorMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">changes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">" Record(ID&lt;=2) deleted successfully&lt;br/>\n"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// 查询表中的数据</span>

<span class="token keyword">echo</span> <span class="token string">"&lt;b> Select Data from company table :&lt;/b>&lt;hr/>"</span><span class="token punctuation">;</span>

<span class="token variable">$sql</span> <span class="token operator">=</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token constant">EOF</span>
  <span class="token constant">SELECT</span> <span class="token operator">*</span> from <span class="token constant">COMPANY</span><span class="token punctuation">;</span>
<span class="token constant">EOF</span><span class="token punctuation">;</span>

<span class="token variable">$ret</span> <span class="token operator">=</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">query</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token variable">$row</span> <span class="token operator">=</span> <span class="token variable">$ret</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">fetchArray</span><span class="token punctuation">(</span><span class="token constant">SQLITE3_ASSOC</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token string">"ID = "</span><span class="token punctuation">.</span> <span class="token variable">$row</span><span class="token punctuation">[</span><span class="token string">'ID'</span><span class="token punctuation">]</span> <span class="token punctuation">.</span> <span class="token string">"&lt;br/>\n"</span><span class="token punctuation">;</span>
  <span class="token keyword">echo</span> <span class="token string">"NAME = "</span><span class="token punctuation">.</span> <span class="token variable">$row</span><span class="token punctuation">[</span><span class="token string">'NAME'</span><span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token string">"&lt;br/>\n"</span><span class="token punctuation">;</span>
  <span class="token keyword">echo</span> <span class="token string">"ADDRESS = "</span><span class="token punctuation">.</span> <span class="token variable">$row</span><span class="token punctuation">[</span><span class="token string">'ADDRESS'</span><span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token string">"&lt;br/>\n"</span><span class="token punctuation">;</span>
  <span class="token keyword">echo</span> <span class="token string">"SALARY =  "</span><span class="token punctuation">.</span><span class="token variable">$row</span><span class="token punctuation">[</span><span class="token string">'SALARY'</span><span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token string">"&lt;br/>\n\n"</span><span class="token punctuation">;</span>
  <span class="token keyword">echo</span> <span class="token string">'----------------------------------&lt;br/>'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">echo</span> <span class="token string">"Operation done successfully\n"</span><span class="token punctuation">;</span>

<span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">PHP</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上述程序时，会产生以下结果：</p>
<p><img src="/images/loading.gif" data-original="../images/basic/960120537_20458.png" alt=""></p>
<h2 id="Python连接SQLite数据库"><a href="#Python连接SQLite数据库" class="headerlink" title="Python连接SQLite数据库"></a>Python连接SQLite数据库</h2><p>由Gerhard Haring编写的sqlite3模块与Python进行集成。 它提供了符合由PEP 249描述的DB-API 2.0规范的SQL接口。所以不需要单独安装此模块，因为默认情况下随着<code>Python 2.5.x</code>以上版本一起发布运行。</p>
<p>要使用sqlite3模块，必须首先创建一个表示数据库的连接对象，然后可以选择创建的游标对象来执行SQL语句。</p>
<h3 id="连接到数据库"><a href="#连接到数据库" class="headerlink" title="连接到数据库"></a>连接到数据库</h3><p>以下Python代码显示了如何连接到一个指定的数据库。 如果数据库不存在，那么它将被创建，最后将返回一个数据库对象。</p>
<blockquote>
<p>注意：在本示例中，使用的是 python 3.5.1 </p>
</blockquote>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#!/usr/bin/python</span>

<span class="token keyword">import</span> sqlite3

conn <span class="token operator">=</span> sqlite3<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">'pydb.db'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Opened database successfully"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Python<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在这里，还可以提供数据库名称作为特殊名称<strong>:memory:</strong>, 在RAM中创建数据库。 现在，运行上面的程序在当前目录中创建数据库：<em>pydb.db</em>。</p>
<p>可以根据需要更改路径。 在<code>F:\worksp\sqlite\py-sqlite.py</code>文件中保留以上代码，并按如下所示执行。 如果数据库成功创建，则会提供以下消息：</p>
<p><img src="/images/loading.gif" data-original="../images/basic/154140523_88578.png" alt=""></p>
<h3 id="创建表-1"><a href="#创建表-1" class="headerlink" title="创建表"></a>创建表</h3><p>以下Python程序将用于在先前创建的数据库(<code>py-sqlite.py</code>)中创建一个表：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#!/usr/bin/python</span>

<span class="token keyword">import</span> sqlite3

<span class="token comment" spellcheck="true">## 打开数据库连接</span>
conn <span class="token operator">=</span> sqlite3<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">'py-sqlite.db'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Opened database successfully"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">## 创建一个表 - company</span>
conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''CREATE TABLE company
       (ID INT PRIMARY KEY     NOT NULL,
       NAME           TEXT    NOT NULL,
       AGE            INT     NOT NULL,
       ADDRESS        CHAR(50),
       SALARY         REAL);'''</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Table created successfully"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
Python<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>当执行上述程序后，将在<code>py-sqlite.db</code>中创建<code>company</code>表，并显示以下消息：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#!/usr/bin/python</span>

<span class="token keyword">import</span> sqlite3

<span class="token comment" spellcheck="true">## 打开数据库连接</span>
conn <span class="token operator">=</span> sqlite3<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">'py-sqlite.db'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Opened database successfully"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">## 创建一个表 - company</span>
conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''CREATE TABLE company
       (ID INT PRIMARY KEY     NOT NULL,
       NAME           TEXT    NOT NULL,
       AGE            INT     NOT NULL,
       ADDRESS        CHAR(50),
       SALARY         REAL);'''</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Table created successfully"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
Python<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>当执行上述程序时，它将在<code>py-sqlite.db</code>数据库中创建<code>company</code>表，并显示以下消息：</p>
<pre class="line-numbers language-shell"><code class="language-shell">Opened database successfully
Table created successfully
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3 id="插入操作"><a href="#插入操作" class="headerlink" title="插入操作"></a>插入操作</h3><p>以下Python程序显示如何在上述示例中创建的<code>COMPANY</code>表中插入数据记录：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#!/usr/bin/python</span>

<span class="token keyword">import</span> sqlite3

<span class="token comment" spellcheck="true">## 打开数据库连接</span>
conn <span class="token operator">=</span> sqlite3<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">'py-sqlite.db'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Opened database successfully"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">## 清除已存在的表 - company</span>
conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''DROP TABLE company'''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">## 创建一个表 - company</span>
conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''CREATE TABLE company
       (ID INT PRIMARY KEY     NOT NULL,
       NAME           TEXT    NOT NULL,
       AGE            INT     NOT NULL,
       ADDRESS        CHAR(50),
       SALARY         REAL);'''</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Table created successfully"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">## 插入数据</span>
conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>"INSERT INTO COMPANY <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>SALARY<span class="token punctuation">)</span> \
      VALUES <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'Maxsu'</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token string">'Haikou'</span><span class="token punctuation">,</span> <span class="token number">20000.00</span> <span class="token punctuation">)</span>"<span class="token punctuation">)</span><span class="token punctuation">;</span>

conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>"INSERT INTO COMPANY <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>SALARY<span class="token punctuation">)</span> \
      VALUES <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'Allen'</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token string">'Shenzhen'</span><span class="token punctuation">,</span> <span class="token number">35000.00</span> <span class="token punctuation">)</span>"<span class="token punctuation">)</span><span class="token punctuation">;</span>

conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>"INSERT INTO COMPANY <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>SALARY<span class="token punctuation">)</span> \
      VALUES <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'Weiwang'</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">'Guangzhou'</span><span class="token punctuation">,</span> <span class="token number">22000.00</span> <span class="token punctuation">)</span>"<span class="token punctuation">)</span><span class="token punctuation">;</span>

conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>"INSERT INTO COMPANY <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>SALARY<span class="token punctuation">)</span> \
      VALUES <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'Marklee'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">'Beijing'</span><span class="token punctuation">,</span> <span class="token number">45000.00</span> <span class="token punctuation">)</span>"<span class="token punctuation">)</span><span class="token punctuation">;</span>

conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Records Insert successfully"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
Python<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>当执行上述程序时，它将在<code>COMPANY</code>表中插入给定的数据记录，并显示以下结果：</p>
<pre class="line-numbers language-shell"><code class="language-shell">Opened database successfully
Table created successfully
Records Insert successfully
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="SELECT-查询操作"><a href="#SELECT-查询操作" class="headerlink" title="SELECT/查询操作"></a>SELECT/查询操作</h3><p>以下Python程序显示如何从上述示例中创建的<code>COMPANY</code>表中获取并显示数据记录：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#!/usr/bin/python</span>

<span class="token keyword">import</span> sqlite3

<span class="token comment" spellcheck="true">## 打开数据库连接</span>
conn <span class="token operator">=</span> sqlite3<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">'py-sqlite.db'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Opened database successfully"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">## 清除已存在的表 - company</span>
conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''DROP TABLE company'''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">## 创建一个表 - company</span>
conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''CREATE TABLE company
       (ID INT PRIMARY KEY     NOT NULL,
       NAME           TEXT    NOT NULL,
       AGE            INT     NOT NULL,
       ADDRESS        CHAR(50),
       SALARY         REAL);'''</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Table created successfully"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">## 插入数据</span>
conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>"INSERT INTO COMPANY <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>SALARY<span class="token punctuation">)</span> \
      VALUES <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'Maxsu'</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token string">'Haikou'</span><span class="token punctuation">,</span> <span class="token number">20000.00</span> <span class="token punctuation">)</span>"<span class="token punctuation">)</span><span class="token punctuation">;</span>

conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>"INSERT INTO COMPANY <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>SALARY<span class="token punctuation">)</span> \
      VALUES <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'Allen'</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token string">'Shenzhen'</span><span class="token punctuation">,</span> <span class="token number">35000.00</span> <span class="token punctuation">)</span>"<span class="token punctuation">)</span><span class="token punctuation">;</span>

conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>"INSERT INTO COMPANY <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>SALARY<span class="token punctuation">)</span> \
      VALUES <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'Weiwang'</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">'Guangzhou'</span><span class="token punctuation">,</span> <span class="token number">22000.00</span> <span class="token punctuation">)</span>"<span class="token punctuation">)</span><span class="token punctuation">;</span>

conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>"INSERT INTO COMPANY <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>SALARY<span class="token punctuation">)</span> \
      VALUES <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'Marklee'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">'Beijing'</span><span class="token punctuation">,</span> <span class="token number">45000.00</span> <span class="token punctuation">)</span>"<span class="token punctuation">)</span><span class="token punctuation">;</span>

conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Records Insert successfully"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'--------------------------- start fetch data from company --------------------------'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

cursor <span class="token operator">=</span> conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"SELECT id, name, address, salary  from COMPANY"</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> row <span class="token keyword">in</span> cursor<span class="token punctuation">:</span>
   <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"ID = "</span><span class="token punctuation">,</span> row<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
   <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"NAME = "</span><span class="token punctuation">,</span> row<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
   <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"ADDRESS = "</span><span class="token punctuation">,</span> row<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
   <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"SALARY = "</span><span class="token punctuation">,</span> row<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"\n"</span><span class="token punctuation">)</span>

<span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Select Operation done successfully."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
Python<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上述程序时，会产生以下结果：</p>
<pre class="line-numbers language-shell"><code class="language-shell">Opened database successfully
Table created successfully
Records Insert successfully
--------------------------- start fetch data from company --------------------------
ID =  1
NAME =  Maxsu
ADDRESS =  Haikou
SALARY =  20000.0 

ID =  2
NAME =  Allen
ADDRESS =  Shenzhen
SALARY =  35000.0 

ID =  3
NAME =  Weiwang
ADDRESS =  Guangzhou
SALARY =  22000.0 

ID =  4
NAME =  Marklee
ADDRESS =  Beijing
SALARY =  45000.0 

Select Operation done successfully.
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="更新操作-1"><a href="#更新操作-1" class="headerlink" title="更新操作"></a>更新操作</h3><p>以下Python代码演示如何使用<code>UPDATE</code>语句来更新指定记录，然后再从<code>COMPANY</code>表中获取并显示更新的记录：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#!/usr/bin/python</span>

<span class="token keyword">import</span> sqlite3

<span class="token comment" spellcheck="true">## 打开数据库连接</span>
conn <span class="token operator">=</span> sqlite3<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">'py-sqlite.db'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Opened database successfully"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">## 清除已存在的表 - company</span>
conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''DROP TABLE company'''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">## 创建一个表 - company</span>
conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''CREATE TABLE company
       (ID INT PRIMARY KEY     NOT NULL,
       NAME           TEXT    NOT NULL,
       AGE            INT     NOT NULL,
       ADDRESS        CHAR(50),
       SALARY         REAL);'''</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Table created successfully"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">## 插入数据</span>
conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>"INSERT INTO COMPANY <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>SALARY<span class="token punctuation">)</span> \
      VALUES <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'Maxsu'</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token string">'Haikou'</span><span class="token punctuation">,</span> <span class="token number">20000.00</span> <span class="token punctuation">)</span>"<span class="token punctuation">)</span><span class="token punctuation">;</span>

conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>"INSERT INTO COMPANY <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>SALARY<span class="token punctuation">)</span> \
      VALUES <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'Allen'</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token string">'Shenzhen'</span><span class="token punctuation">,</span> <span class="token number">35000.00</span> <span class="token punctuation">)</span>"<span class="token punctuation">)</span><span class="token punctuation">;</span>

conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>"INSERT INTO COMPANY <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>SALARY<span class="token punctuation">)</span> \
      VALUES <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'Weiwang'</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">'Guangzhou'</span><span class="token punctuation">,</span> <span class="token number">22000.00</span> <span class="token punctuation">)</span>"<span class="token punctuation">)</span><span class="token punctuation">;</span>

conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>"INSERT INTO COMPANY <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>SALARY<span class="token punctuation">)</span> \
      VALUES <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'Marklee'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">'Beijing'</span><span class="token punctuation">,</span> <span class="token number">45000.00</span> <span class="token punctuation">)</span>"<span class="token punctuation">)</span><span class="token punctuation">;</span>

conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">## 更新数据</span>
conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"UPDATE COMPANY set SALARY = 29999.00 where ID=1"</span><span class="token punctuation">)</span>
conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Total number of rows updated :"</span><span class="token punctuation">,</span> conn<span class="token punctuation">.</span>total_changes<span class="token punctuation">)</span>


<span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Records Insert successfully"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'--------------------------- start fetch data from company --------------------------'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

cursor <span class="token operator">=</span> conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"SELECT id, name, address, salary  from COMPANY"</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> row <span class="token keyword">in</span> cursor<span class="token punctuation">:</span>
   <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"ID = "</span><span class="token punctuation">,</span> row<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
   <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"NAME = "</span><span class="token punctuation">,</span> row<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
   <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"ADDRESS = "</span><span class="token punctuation">,</span> row<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
   <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"SALARY = "</span><span class="token punctuation">,</span> row<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"\n"</span><span class="token punctuation">)</span>

<span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Select Operation done successfully."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
Python<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上述程序时，会产生以下结果：</p>
<pre class="line-numbers language-shell"><code class="language-shell">Opened database successfully
Table created successfully
Total number of rows updated : 5
Records Insert successfully
--------------------------- start fetch data from company --------------------------
ID =  1
NAME =  Maxsu
ADDRESS =  Haikou
SALARY =  29999.0 

ID =  2
NAME =  Allen
ADDRESS =  Shenzhen
SALARY =  35000.0 

ID =  3
NAME =  Weiwang
ADDRESS =  Guangzhou
SALARY =  22000.0 

ID =  4
NAME =  Marklee
ADDRESS =  Beijing
SALARY =  45000.0 

Select Operation done successfully.
Shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="删除操作-1"><a href="#删除操作-1" class="headerlink" title="删除操作"></a>删除操作</h3><p>以下Python代码演示如何使用<code>DELETE</code>语句来删除记录，然后从<code>COMPANY</code>表中获取并显示剩余的记录：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#!/usr/bin/python</span>

<span class="token keyword">import</span> sqlite3

<span class="token comment" spellcheck="true">## 打开数据库连接</span>
conn <span class="token operator">=</span> sqlite3<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">'py-sqlite.db'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Opened database successfully"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">## 清除已存在的表 - company</span>
conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''DROP TABLE company'''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">## 创建一个表 - company</span>
conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''CREATE TABLE company
       (ID INT PRIMARY KEY     NOT NULL,
       NAME           TEXT    NOT NULL,
       AGE            INT     NOT NULL,
       ADDRESS        CHAR(50),
       SALARY         REAL);'''</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Table created successfully"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">## 插入数据</span>
conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>"INSERT INTO COMPANY <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>SALARY<span class="token punctuation">)</span> \
      VALUES <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'Maxsu'</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token string">'Haikou'</span><span class="token punctuation">,</span> <span class="token number">20000.00</span> <span class="token punctuation">)</span>"<span class="token punctuation">)</span><span class="token punctuation">;</span>

conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>"INSERT INTO COMPANY <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>SALARY<span class="token punctuation">)</span> \
      VALUES <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'Allen'</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token string">'Shenzhen'</span><span class="token punctuation">,</span> <span class="token number">35000.00</span> <span class="token punctuation">)</span>"<span class="token punctuation">)</span><span class="token punctuation">;</span>

conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>"INSERT INTO COMPANY <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>SALARY<span class="token punctuation">)</span> \
      VALUES <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'Weiwang'</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">'Guangzhou'</span><span class="token punctuation">,</span> <span class="token number">22000.00</span> <span class="token punctuation">)</span>"<span class="token punctuation">)</span><span class="token punctuation">;</span>

conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>"INSERT INTO COMPANY <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>SALARY<span class="token punctuation">)</span> \
      VALUES <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'Marklee'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">'Beijing'</span><span class="token punctuation">,</span> <span class="token number">45000.00</span> <span class="token punctuation">)</span>"<span class="token punctuation">)</span><span class="token punctuation">;</span>

conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">## 删除ID值小于等于2的数据</span>
conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"DELETE from COMPANY where ID&lt;=2;"</span><span class="token punctuation">)</span>
conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Total number of rows updated :"</span><span class="token punctuation">,</span> conn<span class="token punctuation">.</span>total_changes<span class="token punctuation">)</span>


<span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Records Insert successfully"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'--------------------------- start fetch data from company --------------------------'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

cursor <span class="token operator">=</span> conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"SELECT id, name, address, salary  from COMPANY"</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> row <span class="token keyword">in</span> cursor<span class="token punctuation">:</span>
   <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"ID = "</span><span class="token punctuation">,</span> row<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
   <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"NAME = "</span><span class="token punctuation">,</span> row<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
   <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"ADDRESS = "</span><span class="token punctuation">,</span> row<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
   <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"SALARY = "</span><span class="token punctuation">,</span> row<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"\n"</span><span class="token punctuation">)</span>

<span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Select Operation done successfully."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
Python<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上面语句后，得到以下结果 - </p>
<pre class="line-numbers language-shell"><code class="language-shell">Opened database successfully
Table created successfully
Total number of rows updated : 6
Records Insert successfully
--------------------------- start fetch data from company --------------------------
ID =  3
NAME =  Weiwang
ADDRESS =  Guangzhou
SALARY =  22000.0 

ID =  4
NAME =  Marklee
ADDRESS =  Beijing
SALARY =  45000.0 

Select Operation done successfully.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://www.yiibai.com/sqlite" target="_blank" rel="noopener">易百教程</a></p>
<p><a href="https://www.runoob.com/sqlite/sqlite-tutorial.html" target="_blank" rel="noopener">菜鸟教程</a></p>
<p><a href="https://sqlite.org/docs.html" target="_blank" rel="noopener">SQLite API</a></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://jackhcc.github.io" rel="external nofollow noreferrer">杰克成</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://jackhcc.github.io/posts/Database-Sqlite.html">https://jackhcc.github.io/posts/Database-Sqlite.html</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="https://jackhcc.github.io" target="_blank">杰克成</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/SQLite/">
                                    <span class="chip bg-color">SQLite</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/share/css/share.min.css">

<div id="article-share">
    
    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/reward/aliqr.png" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/reward/wxqr.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>
            
        </div>
    </div>

    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/gitalk/gitalk.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/css/my-gitalk.css">

<div class="card gitalk-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="gitalk-container" class="card-content"></div>
</div>

<script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/gitalk/gitalk.min.js"></script>
<script>
    let gitalk = new Gitalk({
        clientID: '3821a0bbb773038a51fc',
        clientSecret: '4b30b507d67ec5497ec0e77f43f80cb3e0d7dd3a',
        repo: 'JackHCC.github.io',
        owner: 'JackHCC',
        admin: "JackHCC",
        id: '2021-08-25T10-08-17',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });

    gitalk.render('gitalk-container');
</script>
    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/posts/blog-python15.html">
                    <div class="card-image">
                        
                        
                        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/featureimages/11.jpg" class="responsive-img" alt="Python-OpenPyXL详解">
                        
                        <span class="card-title">Python-OpenPyXL详解</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            Python OpenPyXL基本使用
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-08-26
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Python/" class="post-category">
                                    Python
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/OpenPyXL/">
                        <span class="chip bg-color">OpenPyXL</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/posts/gnn.html">
                    <div class="card-image">
                        
                        
                        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/featureimages/16.jpg" class="responsive-img" alt="GNN图神经网络详解">
                        
                        <span class="card-title">GNN图神经网络详解</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            GNN图神经网络学习实践记录
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-08-24
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Deep-Learning/" class="post-category">
                                    Deep Learning
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/GNN/">
                        <span class="chip bg-color">GNN</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('4'),
            headingSelector: 'h1, h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>



    <footer class="page-footer bg-color">
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2020</span>
            <a href="https://jackhcc.github.io" target="_blank">杰克成</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">3591.2k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2020";
                    var startMonth = "2";
                    var startDate = "27";
                    var startHour = "6";
                    var startMinute = "30";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/JackHCC" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:jackcc0701@163.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>



    <a href="https://www.facebook.com/profile.php?id=100046343443643" class="tooltipped" target="_blank" data-tooltip="关注我的Facebook: https://www.facebook.com/profile.php?id=100046343443643" data-position="top" data-delay="50">
        <i class="fab fa-facebook-f"></i>
    </a>



    <a href="https://twitter.com/JackChe66021834" class="tooltipped" target="_blank" data-tooltip="关注我的Twitter: https://twitter.com/JackChe66021834" data-position="top" data-delay="50">
        <i class="fab fa-twitter"></i>
    </a>



    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=2508074836" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 2508074836" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>



    <a href="https://weibo.com/u/6885584679" class="tooltipped" target="_blank" data-tooltip="关注我的微博: https://weibo.com/u/6885584679" data-position="top" data-delay="50">
        <i class="fab fa-weibo"></i>
    </a>



    <a href="https://www.zhihu.com/people/8f8482f01f0d6a04e844efe32e0f0710" class="tooltipped" target="_blank" data-tooltip="关注我的知乎: https://www.zhihu.com/people/8f8482f01f0d6a04e844efe32e0f0710" data-position="top" data-delay="50">
        <i class="fab fa-zhihu1">知</i>
    </a>



</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/materialize/materialize.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/aos/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/js/matery.js"></script>

    <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas>
    <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script>
    <script type="text/javascript" src="/js/fireworks.js"></script>

    <script type="text/javascript">
        //只在桌面版网页启用特效
        var windowWidth = $(window).width();
        if (windowWidth > 768) {
            document.write('<script type="text/javascript" src="/js/sakura.js"><\/script>'); }
    </script>

    <!-- weather -->
	<script type="text/javascript">
	WIDGET = {FID: 'TToslpmkVO'}
	</script>
	<script type="text/javascript" src="https://apip.weatherdt.com/float/static/js/r.js?v=1111"></script>


    <!-- Global site tag (gtag.js) - Google Analytics -->


    <!-- Baidu Analytics -->

<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

    <!-- Baidu Push -->

    
    
    <script async src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/others/busuanzi.pure.mini.js"></script>
    

    
        <script src="//code.tidio.co/kqhlkxviiccyoa0czpfpu4ijuey9hfre.js"></script>
        <script> 
            $(document).ready(function () {
                setInterval(change_Tidio, 50);  
                function change_Tidio() { 
                    var tidio=$("#tidio-chat iframe");
                    if(tidio.css("display")=="block"&& $(window).width()>977 ){
                        document.getElementById("tidio-chat-iframe").style.bottom= ($("div#backTop.top-scroll").css("display")=="none" &&$(window).width()>977)>0? "-40px" : ($("div.toc-title").length&&$(window).width()>977)>0?"85px":"20px";   
                        document.getElementById("tidio-chat-iframe").style.right="-15px";   
                        document.getElementById("tidio-chat-iframe").style.height=parseInt(tidio.css("height"))>=520?"520px":tidio.css("height");
                        document.getElementById("tidio-chat-iframe").style.zIndex="997";
                    } 
                    else if(tidio.css("display")=="block"&&$(window).width()>601 &&$(window).width()<992 ){
                        document.getElementById("tidio-chat-iframe").style.bottom= ($("div#backTop.top-scroll").css("display")=="none" && 601< $(window).width()<992)>0? "-40px":"20px" ;   
                        document.getElementById("tidio-chat-iframe").style.right="-15px"; 
                        document.getElementById("tidio-chat-iframe").style.zIndex="997";
                    }
                    else if(tidio.css("display")=="block"&&$(window).width()<601 && parseInt(tidio.css("height"))<230){
                        document.getElementById("tidio-chat-iframe").style.bottom= ($("div#backTop.top-scroll").css("display")=="none" && $(window).width()<601)>0? "-10px":"45px" ;   
                        document.getElementById("tidio-chat-iframe").style.zIndex="997";
                    }
                    if( tidio.css("display")=="block"&&$(window).width()<601 && parseInt(tidio.css("height"))>=230){
                        document.getElementById("tidio-chat-iframe").style.zIndex="998";
                    }
                } 
            }); 
        </script>
    

    

    
    <script type="text/javascript" color="0,0,255"
        pointColor="0,0,255" opacity='0.7'
        zIndex="-1" count="99"
        src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/background/canvas-nest.js"></script>
    

    

    
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/background/ribbon-dynamic.js" async="async"></script>
    
    
    
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/instantpage/instantpage.js" type="module"></script>
    

        <script src="//cdn.jsdelivr.net/npm/js-base64/base64.min.js"></script>
        <script>
        $('a').each(function() {
          const $this = $(this);
          const href = $this.attr('href');
          if (href && href.match('^((http|https|thunder|qqdl|ed2k|Flashget|qbrowser|ftp|rtsp|mms)://)')) {
            const strs = href.split('/');
            if (strs.length >= 3) {
                const host = strs[2];
                if (host !== 'your_domain' || window.location.host) {
                    $this.attr('href', '/go.html?u='+Base64.encode(href)+'').attr('rel', 'external nofollow noopener noreferrer');
                    if (true) {
                        $this.attr('target', '_blank');
                    }
                }
            }
          }
        });
        </script><script>!function(e){var c=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function i(){for(var r=0;r<c.length;r++)t=c[r],0<=(n=t.getBoundingClientRect()).bottom&&0<=n.left&&n.top<=(e.innerHeight||document.documentElement.clientHeight)&&function(){var t,n,e,i,o=c[r];t=o,n=function(){c=c.filter(function(t){return o!==t})},e=new Image,i=t.getAttribute("data-original"),e.onload=function(){t.src=i,n&&n()},e.src=i}();var t,n}i(),e.addEventListener("scroll",function(){var t,n;t=i,n=e,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(n)},500)})}(this);</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script></body>

</html>

