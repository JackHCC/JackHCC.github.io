<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Python-Selenium &amp; BeautifulSoup详解, JackHCC">
    <meta name="description" content="Selenium与BeautifulSoup 网页自动化&amp;爬虫">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Python-Selenium &amp; BeautifulSoup详解 | JackHCC</title>
    <link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/favicon.png">

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/css/matery.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/css/my.css">
    
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/jquery/jquery.min.js"></script>
    
<meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="JackHCC" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-hopscotch.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper head-container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/me.jpg" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">JackHCC</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="" class="waves-effect waves-light">

      
      <i class="fas fa-list" style="zoom: 0.6;"></i>
      
      <span>Tools</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="https://creativecc.cn/" target="_blank" rel="noopener">
          
          <i class="fas fa-book" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>Creative工具导航</span>
        </a>
      </li>
      
      <li>
        <a href="https://blog.creativecc.cn/Arxiv-NLP-Reporter/" target="_blank" rel="noopener">
          
          <i class="fas fa-film" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>NLP每日论文</span>
        </a>
      </li>
      
      <li>
        <a href="http://chat.creativecc.cn/" target="_blank" rel="noopener">
          
          <i class="fas fa-music" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>RocketChat聊天室</span>
        </a>
      </li>
      
      <li>
        <a href="/contact">
          
          <i class="fas fa-comments" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>Contact留言板</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/me.jpg" class="logo-img circle responsive-img">
        
        <div class="logo-name">JackHCC</div>
        <div class="logo-desc">
            
            Make the world betterrrr!!!
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-list"></i>
			
			Tools
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>   
				
                  <a href="https://creativecc.cn/ " target="_blank" rel="noopener" style="margin-left:75px";>
				  
				   <i class="fa fas fa-book" style="position: absolute;left:50px" ></i>
			      
		          <span>Creative工具导航</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="https://blog.creativecc.cn/Arxiv-NLP-Reporter/ " target="_blank" rel="noopener" style="margin-left:75px";>
				  
				   <i class="fa fas fa-film" style="position: absolute;left:50px" ></i>
			      
		          <span>NLP每日论文</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="http://chat.creativecc.cn/ " target="_blank" rel="noopener" style="margin-left:75px";>
				  
				   <i class="fa fas fa-music" style="position: absolute;left:50px" ></i>
			      
		          <span>RocketChat聊天室</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/contact " style="margin-left:75px";>
				  
				   <i class="fa fas fa-comments" style="position: absolute;left:50px" ></i>
			      
		          <span>Contact留言板</span>
                  </a>
                </li>
               
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/JackHCC/JackHCC.github.io" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>

        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/JackHCC/JackHCC.github.io" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    
<script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/featureimages/22.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Python-Selenium &amp; BeautifulSoup详解</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 30px;
        bottom: 146px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Selenium-BeautifulSoup/">
                                <span class="chip bg-color">Selenium | BeautifulSoup</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Python/" class="post-category">
                                Python
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-08-29
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2021-11-04
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    40.1k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    199 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>

        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="Python-Selenium-API"><a href="#Python-Selenium-API" class="headerlink" title="Python-Selenium API"></a>Python-Selenium API</h1><p><a href="https://selenium-python.readthedocs.io/" target="_blank" rel="noopener"><strong>Selenium with Python</strong></a></p>
<p><a href="https://selenium-python-zh.readthedocs.io/en/latest/" target="_blank" rel="noopener"><strong>Selenium with Python中文</strong></a></p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>Selenium Python 绑定提供了一个简单的 API 来使用 Selenium WebDriver 编写功能/验收测试。通过 Selenium Python API，您可以直观地访问 Selenium WebDriver 的所有功能。</p>
<p>Selenium Python 绑定提供了一个方便的 API 来访问 Selenium WebDrivers，如 Firefox、Ie、Chrome、Remote 等。当前支持的 Python 版本是 3.5 及更高版本。</p>
<h2 id="为-Selenium-安装-Python-绑定"><a href="#为-Selenium-安装-Python-绑定" class="headerlink" title="为 Selenium 安装 Python 绑定"></a>为 Selenium 安装 Python 绑定</h2><p>使用<a href="https://pip.pypa.io/en/latest/installation/" target="_blank" rel="noopener">pip</a>安装 selenium 包。Python 3 在<a href="https://docs.python.org/3/installing/index.html" target="_blank" rel="noopener">标准库中</a>有 pip 可用。使用pip，您可以像这样安装：</p>
<pre><code>pip install selenium</code></pre><p>您可以考虑使用<a href="https://virtualenv.pypa.io/en/latest/" target="_blank" rel="noopener">virtualenv</a>创建隔离的 Python 环境。Python 3 的<a href="https://docs.python.org/3/library/venv.html" target="_blank" rel="noopener">venv</a>几乎与 virtualenv 相同。</p>
<p>您还可以从<a href="https://pypi.python.org/pypi/selenium" target="_blank" rel="noopener">selenium 包</a>的<a href="https://pypi.python.org/pypi/selenium" target="_blank" rel="noopener">PyPI 页面</a>下载 Selenium 的 Python 绑定。并手动安装。</p>
<h2 id="Windows用户的详细说明"><a href="#Windows用户的详细说明" class="headerlink" title="Windows用户的详细说明"></a>Windows用户的详细说明</h2><p>请在有网的情况下执行该安装命令。</p>
<ol>
<li><p>安装Python3.5：<a href="http://www.python.org/download" target="_blank" rel="noopener">官方下载页</a>.</p>
</li>
<li><p>从开始菜单点击运行（或者<code>Windows+R</code>）输入<code>cmd</code>,然后执行下列命令安装:</p>
</li>
</ol>
<pre><code>C:\Python35\Scripts\pip.exe install selenium</code></pre><p>现在你可以使用Python运行测试脚本了。 例如：如果你创建了一个selenium的基本示例并且保存在了<code>C:my_selenium_script.py</code>，你可以如下执行:</p>
<pre><code>C:\Python35\python.exe C:\my_selenium_script.py</code></pre><h2 id="下载-Selenium-服务器"><a href="#下载-Selenium-服务器" class="headerlink" title="下载 Selenium 服务器"></a>下载 Selenium 服务器</h2><p>如果你想使用一个远程的WebDriver，Selenium服务是唯一的依赖， 参见 使用远程 Selenium WebDriver 获得更多细节。 </p>
<p>Selenium server是一个JAVA工程，Java Runtime Environment (JRE) 1.6或者更高的版本是推荐的运行环境。</p>
<p>你可以在 <a href="http://seleniumhq.org/download/" target="_blank" rel="noopener">该下载页</a> 下载2.x的Selenium server，这个文件大概长成这个样子：<code>selenium-server-standalone-2.x.x.jar</code>， 你可以去下载最新版本的2.x server。</p>
<p>如果你还没有安装Java Runtime Environment (JRE)的话呢，<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="noopener">在这下载</a>， 如果你是有的是GNU/Linux系统，并且巧了，你还有root权限，你还可以使用操作系统指令去安装JRE。</p>
<p>如果你把<code>java</code>命令放在了PATH(环境变量)中的话，使用下面命令安装:</p>
<pre><code>java -jar selenium-server-standalone-2.x.x.jar</code></pre><p>当然了，把<code>2.x.x</code>换成你下载的实际版本就可以了。</p>
<p>如果是不是root用户你或者没有把JAVA放到PATH中， 你可以使用绝对路径或者相对路径的方式来使用命令， 这个命令大概长这样子:</p>
<pre><code>/path/to/java -jar /path/to/selenium-server-standalone-2.x.x.jar</code></pre><h1 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a>快速入门</h1><h2 id="简单用例"><a href="#简单用例" class="headerlink" title="简单用例"></a>简单用例</h2><p>如果你已经安装好了selenium，你可以把下面的python代码拷贝到你的编辑器中</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>keys <span class="token keyword">import</span> Keys

driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Firefox<span class="token punctuation">(</span><span class="token punctuation">)</span>
driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://www.python.org"</span><span class="token punctuation">)</span>
<span class="token keyword">assert</span> <span class="token string">"Python"</span> <span class="token keyword">in</span> driver<span class="token punctuation">.</span>title
elem <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">"q"</span><span class="token punctuation">)</span>
elem<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>
elem<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"pycon"</span><span class="token punctuation">)</span>
elem<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span>Keys<span class="token punctuation">.</span>RETURN<span class="token punctuation">)</span>
<span class="token keyword">assert</span> <span class="token string">"No results found."</span> <span class="token operator">not</span> <span class="token keyword">in</span> driver<span class="token punctuation">.</span>page_source
driver<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>上面的脚本可以保存到一个文件（如：- python_org_search.py），那么可以这样使用</p>
<pre><code>python python_org_search.py</code></pre><p>你运行的 python 环境中应该已经安装了 selenium 模块。</p>
<h2 id="示例详解"><a href="#示例详解" class="headerlink" title="示例详解"></a>示例详解</h2><p>selenium.webdriver 模块提供了所有WebDriver的实现， 当前支持的WebDriver有： Firefox, Chrome, IE and Remote。 Keys类提供键盘按键的支持，比如：RETURN, F1, ALT等</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>keys <span class="token keyword">import</span> Keys<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>接下来，创建一个Firefox WebDriver的实例</p>
<pre class="line-numbers language-python"><code class="language-python">driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Firefox<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>driver.get 方法将打开URL中填写的地址，WebDriver 将等待， 直到页面完全加载完毕（其实是等到”onload” 方法执行完毕），然后返回继续执行你的脚本。 值得注意的是，如果你的页面使用了大量的Ajax加载， WebDriver可能不知道什么时候页面已经完全加载:</p>
<pre class="line-numbers language-python"><code class="language-python">driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://www.python.org"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>下一行是用assert的方式确认标题是否包含“Python”一词。 (译注：assert 语句将会在之后的语句返回false后抛出异常，详细内容可以自行百度)</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">assert</span> <span class="token string">"Python"</span> <span class="token keyword">in</span> driver<span class="token punctuation">.</span>title<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>WebDriver 提供了大量的方法让你去查询页面中的元素，这些方法形如： find_element_by_*。 例如：包含 name 属性的input输入框可以通过 find_element_by_name 方法查找到， 详细的查找方法可以在第四节元素查找中查看:</p>
<pre class="line-numbers language-python"><code class="language-python">elem <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">"q"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>接下来，我们发送了一个关键字，这个方法的作用类似于你用键盘输入关键字。 特殊的按键可以使用Keys类来输入，该类继承自 selenium.webdriver.common.keys， 为了安全起见，我们先清除input输入框中的任何预填充的文本（例如：”Search”）,从而避免我们的搜索结果受影响：</p>
<pre class="line-numbers language-python"><code class="language-python">elem<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>
elem<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"pycon"</span><span class="token punctuation">)</span>
elem<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span>Keys<span class="token punctuation">.</span>RETURN<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>提交页面后,你会得到所有的结果。为了确保某些特定的结果被找到，使用<code>assert</code>如下:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">assert</span> <span class="token string">"No results found."</span> <span class="token operator">not</span> <span class="token keyword">in</span> driver<span class="token punctuation">.</span>page_source<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>最后，关闭浏览器窗口，你还可以使用quit方法代替close方法， quit将关闭整个浏览器，而_close——只会关闭一个标签页， 如果你只打开了一个标签页，大多数浏览器的默认行为是关闭浏览器:</p>
<pre class="line-numbers language-python"><code class="language-python">driver<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="用Selenium写测试用例"><a href="#用Selenium写测试用例" class="headerlink" title="用Selenium写测试用例"></a>用Selenium写测试用例</h2><p>Selenium 通常被用来写一些测试用例. selenium 包本身不提供测试工具或者框架. 你可以使用Python自带的模块unittest写测试用例。 The other options for a tool/framework are py.test and nose.</p>
<p>在本章中，我们使用 unittest 来编写测试代码，下面是一个已经写好的用例。 这是一个在 python.org 站点上搜索的案例:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> unittest
<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>keys <span class="token keyword">import</span> Keys

<span class="token keyword">class</span> <span class="token class-name">PythonOrgSearch</span><span class="token punctuation">(</span>unittest<span class="token punctuation">.</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">setUp</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Firefox<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_search_in_python_org</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        driver <span class="token operator">=</span> self<span class="token punctuation">.</span>driver
        driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://www.python.org"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertIn<span class="token punctuation">(</span><span class="token string">"Python"</span><span class="token punctuation">,</span> driver<span class="token punctuation">.</span>title<span class="token punctuation">)</span>
        elem <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">"q"</span><span class="token punctuation">)</span>
        elem<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"pycon"</span><span class="token punctuation">)</span>
        elem<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span>Keys<span class="token punctuation">.</span>RETURN<span class="token punctuation">)</span>
        <span class="token keyword">assert</span> <span class="token string">"No results found."</span> <span class="token operator">not</span> <span class="token keyword">in</span> driver<span class="token punctuation">.</span>page_source


    <span class="token keyword">def</span> <span class="token function">tearDown</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    unittest<span class="token punctuation">.</span>main<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>你可以在shell中运行下列代码:</p>
<pre><code>python test_python_org_search.py
.
----------------------------------------------------------------------
Ran 1 test in 15.566s

OK</code></pre><p>结果表明这个测试用例已经成功运行。</p>
<h2 id="逐步解释测试代码"><a href="#逐步解释测试代码" class="headerlink" title="逐步解释测试代码"></a>逐步解释测试代码</h2><p>一开始，我们引入了需要的模块， <a href="http://docs.python.org/library/unittest.html" target="_blank" rel="noopener">unittest</a> 模块是基于JAVA JUnit的Python内置的模块。 该模块提供了一个框架去组织测试用例。 selenium.webdriver 模块提供了所有WebDriver的实现。 现在支持的WebDriver有：Firefox, Chrome, IE and Remote. Keys 类提供所有的键盘按键操作，比如像这样的：</p>
<blockquote>
<p>RETURN, F1, ALT等。</p>
</blockquote>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> unittest
<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>keys <span class="token keyword">import</span> Keys<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>该测试类继承自 unittest.TestCase. 继承 TestCase 类是告诉 unittest 模块该类是一个测试用例:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">PythonOrgSearch</span><span class="token punctuation">(</span>unittest<span class="token punctuation">.</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>setUp 方法是初始化的一部分, 该方法会在该测试类中的每一个测试方法被执行前都执行一遍。 下面创建了一个Firefox WebDriver的一个实例。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">setUp</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
    self<span class="token punctuation">.</span>driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Firefox<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>这是一个测试用例实际的测试方法. 测试方法始终以<code>test</code>开头。 在该方法中的第一行创建了一个在 <code>setUp</code>方法中创建的驱动程序对象的本地引用。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">test_search_in_python_org</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
    driver <span class="token operator">=</span> self<span class="token punctuation">.</span>driver<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>driver.get 方法将会根据方法中给出的URL地址打开该网站。 WebDriver 会等待整个页面加载完成（其实是等待”onload”事件执行完毕）之后把控制权交给测试程序。 如果你的页面使用大量的AJAX技术来加载页面，WebDriver可能不知道什么时候页面已经加载完成:</p>
<pre class="line-numbers language-python"><code class="language-python">driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://www.python.org"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>下面一行使用assert断言的方法判断在页面标题中是否包含 “Python”</p>
<pre class="line-numbers language-python"><code class="language-python">self<span class="token punctuation">.</span>assertIn<span class="token punctuation">(</span><span class="token string">"Python"</span><span class="token punctuation">,</span> driver<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>WebDriver 提供很多方法去查找页面值的元素，这些方法都以 find_element_by_* 开头。 例如：包含 name 属性的input元素可以使用</p>
<blockquote>
<p><code>find_element_by_name</code>方法查找到。详细的细节可以参照 :ref:<code>locating-elements</code> 章节:</p>
<pre class="line-numbers language-python"><code class="language-python">elem <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">"q"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</blockquote>
<p>接下来我们发送keys，这个和使用键盘输入keys类似。 特殊的按键可以通过引入<code>selenium.webdriver.common.keys</code>的 Keys 类来输入</p>
<pre class="line-numbers language-python"><code class="language-python">elem<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"pycon"</span><span class="token punctuation">)</span>
elem<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span>Keys<span class="token punctuation">.</span>RETURN<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>提交页面之后，无论如何你都会得到搜索结果，为了确保某些结果类检索到，可以使用下列断言 After submission of the page, you should get result as per search if</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">assert</span> <span class="token string">"No results found."</span> <span class="token operator">not</span> <span class="token keyword">in</span> driver<span class="token punctuation">.</span>page_source<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>tearDown 方法会在每一个测试方法执行之后被执行。 该方法可以用来做一些清扫工作，比如关闭浏览器。 当然你也可以调用 quit 方法代替<code>close</code>方法，</p>
<blockquote>
<p>quit 将关闭整个浏览器，而<code>close</code>只会关闭一个标签页， 如果你只打开了一个标签页，大多数浏览器的默认行为是关闭浏览器。</p>
</blockquote>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">tearDown</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
    self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>下面是入口函数:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    unittest<span class="token punctuation">.</span>main<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h2 id="使用远程-Selenium-WebDriver"><a href="#使用远程-Selenium-WebDriver" class="headerlink" title="使用远程 Selenium WebDriver"></a>使用远程 Selenium WebDriver</h2><p>为了使用远程 WebDriver, 你应该拥有一个正在运行的 Selenium 服务器。 通过下列命令运行服务器:</p>
<pre><code>java -jar selenium-server-standalone-2.x.x.jar</code></pre><p>Selenium 服务运行后, 你会看到这样的提示信息:</p>
<pre><code>15:43:07.541 INFO - RemoteWebDriver instances should connect to: http://127.0.0.1:4444/wd/hub</code></pre><p>上面一行告诉你，你可以通过这个URL连接到远程WebDriver， 下面是一些例子:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>desired_capabilities <span class="token keyword">import</span> DesiredCapabilities

driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Remote<span class="token punctuation">(</span>
   command_executor<span class="token operator">=</span><span class="token string">'http://127.0.0.1:4444/wd/hub'</span><span class="token punctuation">,</span>
   desired_capabilities<span class="token operator">=</span>DesiredCapabilities<span class="token punctuation">.</span>CHROME<span class="token punctuation">)</span>

driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Remote<span class="token punctuation">(</span>
   command_executor<span class="token operator">=</span><span class="token string">'http://127.0.0.1:4444/wd/hub'</span><span class="token punctuation">,</span>
   desired_capabilities<span class="token operator">=</span>DesiredCapabilities<span class="token punctuation">.</span>OPERA<span class="token punctuation">)</span>

driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Remote<span class="token punctuation">(</span>
   command_executor<span class="token operator">=</span><span class="token string">'http://127.0.0.1:4444/wd/hub'</span><span class="token punctuation">,</span>
   desired_capabilities<span class="token operator">=</span>DesiredCapabilities<span class="token punctuation">.</span>HTMLUNITWITHJS<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>desired_capabilities</code>是一个字典，如果你不想使用默认的字典，你可以明确指定的值</p>
<pre class="line-numbers language-python"><code class="language-python">driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Remote<span class="token punctuation">(</span>
   command_executor<span class="token operator">=</span><span class="token string">'http://127.0.0.1:4444/wd/hub'</span><span class="token punctuation">,</span>
   desired_capabilities<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'browserName'</span><span class="token punctuation">:</span> <span class="token string">'htmlunit'</span><span class="token punctuation">,</span>
                         <span class="token string">'version'</span><span class="token punctuation">:</span> <span class="token string">'2'</span><span class="token punctuation">,</span>
                        <span class="token string">'javascriptEnabled'</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="导航"><a href="#导航" class="headerlink" title="导航"></a>导航</h1><p>你想做的第一件事也许是使用WebDriver打开一个链接。 常规的方法是调用 <code>get</code> 方法:</p>
<pre class="line-numbers language-python"><code class="language-python">driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://www.google.com"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>WebDriver 将等待，直到页面完全加载完毕（其实是等到 <code>onload</code> 方法执行完毕）， 然后返回继续执行你的脚本。 值得注意的是，如果你的页面使用了大量的Ajax加载， WebDriver可能不知道什么时候页面已经完全加载。 如果你想确保也main完全加载完毕，可以使用:ref:waits <waits></waits></p>
<h2 id="与页面交互"><a href="#与页面交互" class="headerlink" title="与页面交互"></a>与页面交互</h2><p>只是打开页面其实并没有什么卵用。我们真正想要的是与页面做交互。 更具体地说，对于一个页面中的HTML元素，首先我们要找到他。WebDriver 提供了大量的方法帮助你去查找元素，例如：已知一个元素定义如下:</p>
<pre><code>&lt;input type="text" name="passwd" id="passwd-id" /&gt;</code></pre><p>你可以通过下面的方法查找他:</p>
<pre class="line-numbers language-python"><code class="language-python">element <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"passwd-id"</span><span class="token punctuation">)</span>
element <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">"passwd"</span><span class="token punctuation">)</span>
element <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">"//input[@id='passwd-id']"</span><span class="token punctuation">)</span>
element <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_css_selector<span class="token punctuation">(</span><span class="token string">"input#passwd-id"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>你还可以通过链接的文本查找他，需要注意的是，这个文本必须完全匹地配。 当你使用<code>XPATH</code>时，你必须注意，如果匹配超过一个元素，只返回第一个元素。 如果上面也没找到，将会抛出 <code>NoSuchElementException</code>异常。</p>
<p>WebDriver有一个”基于对象”的API; 我们使用相同的接口表示所有类型的元素。 这就意味着，当你打开你的IDE的自动补全的时候，你会有很多可以调用的方法。 但是并不是所有的方法都是有意义或是有效的。不过不要担心！ 当你调用一些毫无意义的方法时，WebDriver会尝试去做一些正确的事情（例如你对一个”meta” 元素调用”setSelected()”方法的时候）。</p>
<p>所以，当你拿到元素时，你能做什么呢？首先，你可能会想在文本框中输入一些内容:</p>
<pre class="line-numbers language-python"><code class="language-python">element<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"some text"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>你还可以通过”Keys”类来模式输入方向键:</p>
<pre class="line-numbers language-python"><code class="language-python">element<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">" and some"</span><span class="token punctuation">,</span> Keys<span class="token punctuation">.</span>ARROW_DOWN<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>对于任何元素，他可能都叫 send_keys ，这就使得它可以测试键盘快捷键， 比如当你使用Gmail的时候。但是有一个副作用是当你输入一些文本时，这些 输入框中原有的文本不会被自动清除掉，相反，你的输入会继续添加到已存在文本之后。 你可以很方便的使用 clear 方法去清除input或者textarea元素中的内容:</p>
<pre class="line-numbers language-python"><code class="language-python">element<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="填写表格"><a href="#填写表格" class="headerlink" title="填写表格"></a>填写表格</h2><p>我们已经知道如何在input或textarea元素中输入内容，但是其他元素怎么办？ 你可以“切换”下拉框的状态，你可以使用<code>setSelected</code>方法去做一些事情，比如 选择下拉列表，处理<code>SELECT</code>元素其实没有那么麻烦:</p>
<pre class="line-numbers language-python"><code class="language-python">element <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">"//select[@name='name']"</span><span class="token punctuation">)</span>
all_options <span class="token operator">=</span> element<span class="token punctuation">.</span>find_elements_by_tag_name<span class="token punctuation">(</span><span class="token string">"option"</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> option <span class="token keyword">in</span> all_options<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Value is: %s"</span> <span class="token operator">%</span> option<span class="token punctuation">.</span>get_attribute<span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    option<span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>上面这段代码将会寻找页面第一个 “SELECT” 元素, 并且循环他的每一个OPTION元素， 打印从它们的值，然后按顺序都选中一遍。</p>
<p>正如你说看到的那样，这不是处理 SELECT 元素最好的方法。WebDriver的支持类包括一个叫做 <code>Select</code>的类，他提供有用的方法处理这些内容:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>support<span class="token punctuation">.</span>ui <span class="token keyword">import</span> Select
select <span class="token operator">=</span> Select<span class="token punctuation">(</span>driver<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
select<span class="token punctuation">.</span>select_by_index<span class="token punctuation">(</span>index<span class="token punctuation">)</span>
select<span class="token punctuation">.</span>select_by_visible_text<span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">)</span>
select<span class="token punctuation">.</span>select_by_value<span class="token punctuation">(</span>value<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>WebDriver 也提供一些有用的方法来取消选择已经选择的元素:</p>
<pre class="line-numbers language-python"><code class="language-python">select <span class="token operator">=</span> Select<span class="token punctuation">(</span>driver<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
select<span class="token punctuation">.</span>deselect_all<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>这将取消选择所以的OPTION。</p>
<p>假设在一个案例中，我们需要列出所有已经选择的选项，Select类提供了方便的方法来实现这一点:</p>
<pre class="line-numbers language-python"><code class="language-python">select <span class="token operator">=</span> Select<span class="token punctuation">(</span>driver<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">"xpath"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
all_selected_options <span class="token operator">=</span> select<span class="token punctuation">.</span>all_selected_options<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>获得所以选项:</p>
<pre class="line-numbers language-python"><code class="language-python">options <span class="token operator">=</span> select<span class="token punctuation">.</span>options<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>一旦你填写完整个表单，你应该想去提交它，有一个方法就是去找到一个“submit” 按钮然后点击它:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Assume the button has the ID "submit" :)</span>
driver<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"submit"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>或者，WebDriver对每一个元素都有一个叫做 “submit” 的方法，如果你在一个表单内的 元素上使用该方法，WebDriver会在DOM树上就近找到最近的表单，返回提交它。 如果调用的元素不再表单内，将会抛出<code>NoSuchElementException</code>异常:</p>
<pre class="line-numbers language-python"><code class="language-python">element<span class="token punctuation">.</span>submit<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="拖放"><a href="#拖放" class="headerlink" title="拖放"></a>拖放</h2><p>您可以使用拖放，无论是移动一个元素，或放到另一个元素内:</p>
<pre class="line-numbers language-python"><code class="language-python">element <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">"source"</span><span class="token punctuation">)</span>
target <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">"target"</span><span class="token punctuation">)</span>

<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver <span class="token keyword">import</span> ActionChains
action_chains <span class="token operator">=</span> ActionChains<span class="token punctuation">(</span>driver<span class="token punctuation">)</span>
action_chains<span class="token punctuation">.</span>drag_and_drop<span class="token punctuation">(</span>element<span class="token punctuation">,</span> target<span class="token punctuation">)</span><span class="token punctuation">.</span>perform<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="在不同的窗口和框架之间移动"><a href="#在不同的窗口和框架之间移动" class="headerlink" title="在不同的窗口和框架之间移动"></a>在不同的窗口和框架之间移动</h2><p>对于现在的web应用来说，没有任何frames或者只包含一个window窗口是比较罕见的。 WebDriver 支持在不同的窗口之间移动，只需要调用<code>switch_to_window</code>方法即可:</p>
<pre class="line-numbers language-python"><code class="language-python">driver<span class="token punctuation">.</span>switch_to_window<span class="token punctuation">(</span><span class="token string">"windowName"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>所有的 <code>driver</code> 将会指向当前窗口，但是你怎么知道当前窗口的名字呢，查看打开他的javascript或者连接代码:</p>
<pre><code>&lt;a href="somewhere.html" target="windowName"&gt;Click here to open a new window&lt;/a&gt;</code></pre><p>或者，你可以在”switch_to_window()”中使用”窗口句柄”来打开它， 知道了这些，你就可以迭代所有已经打开的窗口了:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">for</span> handle <span class="token keyword">in</span> driver<span class="token punctuation">.</span>window_handles<span class="token punctuation">:</span>
    driver<span class="token punctuation">.</span>switch_to_window<span class="token punctuation">(</span>handle<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>你还可以在不同的frame中切换 (or into iframes):</p>
<pre class="line-numbers language-python"><code class="language-python">driver<span class="token punctuation">.</span>switch_to_frame<span class="token punctuation">(</span><span class="token string">"frameName"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>通过“.”操作符你还可以获得子frame，并通过下标指定任意frame，就像这样:</p>
<pre class="line-numbers language-python"><code class="language-python">driver<span class="token punctuation">.</span>switch_to_frame<span class="token punctuation">(</span><span class="token string">"frameName.0.child"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>如何获取名叫“frameName”的frame中名叫 “child”的子frame呢？ <strong>来自*top*frame的所有的frame都会被评估</strong> （<strong>All frames are evaluated as if from *top*.</strong>）</p>
<p>一旦我们完成了frame中的工作，我们可以这样返回父frame:</p>
<pre class="line-numbers language-python"><code class="language-python">driver<span class="token punctuation">.</span>switch_to_default_content<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="弹出对话框"><a href="#弹出对话框" class="headerlink" title="弹出对话框"></a>弹出对话框</h2><p>Selenium WebDriver 内置了对处理弹出对话框的支持。 在你的某些动作之后可能会触发弹出对话框，你可以像下面这样访问对话框:</p>
<pre class="line-numbers language-python"><code class="language-python">alert <span class="token operator">=</span> driver<span class="token punctuation">.</span>switch_to_alert<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>它将返回当前打开的对话框对象。使用此对象，您现在可以接受、排除、读取其内容， 甚至可以在prompt对话框中输入(译注：prompt()是对话框的一种，不同于alert()对话框，不同点可以自行百度)。 这个接口对alert, confirm， prompt 对话框效果相同。 参考相关的API文档获取更多信息。</p>
<h2 id="访问浏览器历史记录"><a href="#访问浏览器历史记录" class="headerlink" title="访问浏览器历史记录"></a>访问浏览器历史记录</h2><p>在之前的文章中，我们使用<code>get</code>命令打开一个页面, ( <code>driver.get("http://www.example.com")</code>)，WebDriver有很多更小的，以任务为导向的接口， navigation就是一个有用的任务，打开一个页面你可以使用<code>get</code>:</p>
<pre class="line-numbers language-python"><code class="language-python">driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://www.example.com"</span><span class="token punctuation">)</span> <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>在浏览历史中前进和后退你可以使用:</p>
<pre class="line-numbers language-python"><code class="language-python">driver<span class="token punctuation">.</span>forward<span class="token punctuation">(</span><span class="token punctuation">)</span>
driver<span class="token punctuation">.</span>back<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>请注意，这个功能完全取决于底层驱动程序。当你调用这些方法的时候，很有可能会发生意想不到的事情， 如果你习惯了浏览器的这些行为于其他的不同。</p>
<h2 id="操作Cookies"><a href="#操作Cookies" class="headerlink" title="操作Cookies"></a>操作Cookies</h2><p>在我们结束这一节之前，或许你对如何操作Cookies可能会很感兴趣。 首先，你需要打开一个页面，因为Cookie是在某个域名下才生效的:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Go to the correct domain</span>
driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://www.example.com"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Now set the cookie. This one's valid for the entire domain 现在设置Cookies，这个cookie在域名根目录下（”/”）生效</span>
cookie <span class="token operator">=</span> <span class="token punctuation">{</span>‘name’ <span class="token punctuation">:</span> ‘foo’<span class="token punctuation">,</span> ‘value’ <span class="token punctuation">:</span> ‘bar’<span class="token punctuation">}</span>
driver<span class="token punctuation">.</span>add_cookie<span class="token punctuation">(</span>cookie<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># And now output all the available cookies for the current URL 现在获取所有当前URL下可获得的Cookies</span>
driver<span class="token punctuation">.</span>get_cookies<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="查找元素"><a href="#查找元素" class="headerlink" title="查找元素"></a>查找元素</h1><p>在一个页面中有很多不同的策略可以定位一个元素。在你的项目中， 你可以选择最合适的方法去查找元素。Selenium提供了下列的方法给你:</p>
<ul>
<li>find_element_by_id</li>
<li>find_element_by_name</li>
<li>find_element_by_xpath</li>
<li>find_element_by_link_text</li>
<li>find_element_by_partial_link_text</li>
<li>find_element_by_tag_name</li>
<li>find_element_by_class_name</li>
<li>find_element_by_css_selector</li>
</ul>
<p><strong>一次查找多个元素 (这些方法会返回一个list列表):</strong></p>
<ul>
<li>find_elements_by_name</li>
<li>find_elements_by_xpath</li>
<li>find_elements_by_link_text</li>
<li>find_elements_by_partial_link_text</li>
<li>find_elements_by_tag_name</li>
<li>find_elements_by_class_name</li>
<li>find_elements_by_css_selector</li>
</ul>
<p>除了上述的公共方法，下面还有两个私有方法，在你查找也页面元素的时候也许有用。 他们是 find_element 和 find_elements 。</p>
<p>用法示例:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>by <span class="token keyword">import</span> By

driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>XPATH<span class="token punctuation">,</span> <span class="token string">'//button[text()="Some text"]'</span><span class="token punctuation">)</span>
driver<span class="token punctuation">.</span>find_elements<span class="token punctuation">(</span>By<span class="token punctuation">.</span>XPATH<span class="token punctuation">,</span> <span class="token string">'//button'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>下面是 By 类的一些可用属性:</p>
<pre><code>ID = "id"
XPATH = "xpath"
LINK_TEXT = "link text"
PARTIAL_LINK_TEXT = "partial link text"
NAME = "name"
TAG_NAME = "tag name"
CLASS_NAME = "class name"
CSS_SELECTOR = "css selector"</code></pre><h2 id="通过ID查找元素"><a href="#通过ID查找元素" class="headerlink" title="通过ID查找元素"></a>通过ID查找元素</h2><p>当你知道一个元素的 id 时，你可以使用本方法。在该策略下，页面中第一个该 id 元素 会被匹配并返回。如果找不到任何元素，会抛出 <code>NoSuchElementException</code> 异常。</p>
<p>作为示例，页面元素如下所示:</p>
<pre><code>&lt;html&gt;
 &lt;body&gt;
  &lt;form id="loginForm"&gt;
   &lt;input name="username" type="text" /&gt;
   &lt;input name="password" type="password" /&gt;
   &lt;input name="continue" type="submit" value="Login" /&gt;
  &lt;/form&gt;
 &lt;/body&gt;
&lt;html&gt;</code></pre><p>可以这样查找表单(form)元素:</p>
<pre class="line-numbers language-python"><code class="language-python">login_form <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">'loginForm'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="通过Name查找元素"><a href="#通过Name查找元素" class="headerlink" title="通过Name查找元素"></a>通过Name查找元素</h2><p>当你知道一个元素的 name 时，你可以使用本方法。在该策略下，页面中第一个该 name 元素 会被匹配并返回。如果找不到任何元素，会抛出 <code>NoSuchElementException</code> 异常。</p>
<p>作为示例，页面元素如下所示:</p>
<pre><code>&lt;html&gt;
 &lt;body&gt;
  &lt;form id="loginForm"&gt;
   &lt;input name="username" type="text" /&gt;
   &lt;input name="password" type="password" /&gt;
   &lt;input name="continue" type="submit" value="Login" /&gt;
   &lt;input name="continue" type="button" value="Clear" /&gt;
  &lt;/form&gt;
&lt;/body&gt;
&lt;html&gt;</code></pre><p>name属性为 username &amp; password 的元素可以像下面这样查找:</p>
<pre class="line-numbers language-python"><code class="language-python">username <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">'username'</span><span class="token punctuation">)</span>
password <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">'password'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>这会得到 “Login” 按钮，因为他在 “Clear” 按钮之前:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">continue</span> <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">'continue'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="通过XPath查找元素"><a href="#通过XPath查找元素" class="headerlink" title="通过XPath查找元素"></a>通过XPath查找元素</h2><p>XPath是XML文档中查找结点的语法。因为HTML文档也可以被转换成XML(XHTML)文档， Selenium的用户可以利用这种强大的语言在web应用中查找元素。 XPath扩展了（当然也支持）这种通过id或name属性获取元素的简单方式，同时也开辟了各种新的可能性， 例如获取页面上的第三个复选框。</p>
<p>使用XPath的主要原因之一就是当你想获取一个既没有id属性也没有name属性的元素时， 你可以通过XPath使用元素的绝对位置来获取他（这是不推荐的），或相对于有一个id或name属性的元素 （理论上的父元素）的来获取你想要的元素。XPath定位器也可以通过非id和name属性查找元素。</p>
<p>绝对的XPath是所有元素都从根元素的位置（HTML）开始定位，只要应用中有轻微的调整，会就导致你的定位失败。 但是通过就近的包含id或者name属性的元素出发定位你的元素，这样相对关系就很靠谱， 因为这种位置关系很少改变，所以可以使你的测试更加强大。</p>
<p>作为示例，页面元素如下所示:</p>
<pre><code>&lt;html&gt;
 &lt;body&gt;
  &lt;form id="loginForm"&gt;
   &lt;input name="username" type="text" /&gt;
   &lt;input name="password" type="password" /&gt;
   &lt;input name="continue" type="submit" value="Login" /&gt;
   &lt;input name="continue" type="button" value="Clear" /&gt;
  &lt;/form&gt;
&lt;/body&gt;
&lt;html&gt;</code></pre><p>可以这样查找表单(form)元素:</p>
<pre class="line-numbers language-python"><code class="language-python">login_form <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">"/html/body/form[1]"</span><span class="token punctuation">)</span>
login_form <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">"//form[1]"</span><span class="token punctuation">)</span>
login_form <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">"//form[@id='loginForm']"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<ol>
<li>绝对定位 (页面结构轻微调整就会被破坏)</li>
<li>HTML页面中的第一个form元素</li>
<li>包含 id 属性并且其值为 loginForm 的form元素</li>
</ol>
<p>username元素可以如下获取:</p>
<pre class="line-numbers language-python"><code class="language-python">username <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">"//form[input/@name='username']"</span><span class="token punctuation">)</span>
username <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">"//form[@id='loginForm']/input[1]"</span><span class="token punctuation">)</span>
username <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">"//input[@name='username']"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<ol>
<li>第一个form元素中包含name属性并且其值为 username 的input元素</li>
<li>id为 loginForm 的form元素的第一个input子元素</li>
<li>第一个name属性为 username 的input元素</li>
</ol>
<p>“Clear” 按钮可以如下获取:</p>
<pre class="line-numbers language-python"><code class="language-python">clear_button <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">"//input[@name='continue'][@type='button']"</span><span class="token punctuation">)</span>
clear_button <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">"//form[@id='loginForm']/input[4]"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<ol>
<li>Input with attribute named name and the value continue and attribute named type and the value button</li>
<li>Fourth input child element of the form element with attribute named id and value loginForm</li>
</ol>
<p>这些实例都是一些举出用法, 下面这些参考资料:</p>
<ul>
<li><a href="http://www.w3schools.com/xsl/xpath_intro.asp" target="_blank" rel="noopener">W3Schools XPath Tutorial</a></li>
<li><a href="http://www.w3.org/TR/xpath" target="_blank" rel="noopener">W3C XPath Recommendation</a></li>
<li><a href="http://www.zvon.org/comp/r/tut-XPath_1.html" target="_blank" rel="noopener">XPath Tutorial</a> - with interactive examples.</li>
</ul>
<p>还有一些非常有用的插件，可以协助发现元素的XPath:</p>
<ul>
<li><a href="https://addons.mozilla.org/en-US/firefox/addon/1095?id=1095" target="_blank" rel="noopener">XPath Checker</a> - suggests XPath and can be used to test XPath results.</li>
<li><a href="https://addons.mozilla.org/en-US/firefox/addon/1843" target="_blank" rel="noopener">Firebug</a> - XPath suggestions are just one of the many powerful features of this very useful add-on.</li>
<li><a href="https://chrome.google.com/webstore/detail/hgimnogjllphhhkhlmebbmlgjoejdpjl" target="_blank" rel="noopener">XPath Helper</a> - for Google Chrome</li>
</ul>
<h2 id="通过链接文本获取超链接"><a href="#通过链接文本获取超链接" class="headerlink" title="通过链接文本获取超链接"></a>通过链接文本获取超链接</h2><p>当你知道在一个锚标签中使用的链接文本时使用这个。 在该策略下，页面中第一个匹配链接内容锚标签 会被匹配并返回。如果找不到任何元素，会抛出 <code>NoSuchElementException</code> 异常。</p>
<p>作为示例，页面元素如下所示:</p>
<pre><code>&lt;html&gt;
 &lt;body&gt;
  &lt;p&gt;Are you sure you want to do this?&lt;/p&gt;
  &lt;a href="continue.html"&gt;Continue&lt;/a&gt;
  &lt;a href="cancel.html"&gt;Cancel&lt;/a&gt;
&lt;/body&gt;
&lt;html&gt;</code></pre><p>continue.html 超链接可以被这样查找到:</p>
<pre class="line-numbers language-python"><code class="language-python">continue_link <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_link_text<span class="token punctuation">(</span><span class="token string">'Continue'</span><span class="token punctuation">)</span>
continue_link <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_partial_link_text<span class="token punctuation">(</span><span class="token string">'Conti'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h2 id="通过标签名查找元素"><a href="#通过标签名查找元素" class="headerlink" title="通过标签名查找元素"></a>通过标签名查找元素</h2><p>当你向通过标签名查找元素时使用这个。 在该策略下，页面中第一个匹配该标签名的元素 会被匹配并返回。如果找不到任何元素，会抛出 <code>NoSuchElementException</code> 异常。</p>
<p>作为示例，页面元素如下所示:</p>
<pre><code>&lt;html&gt;
 &lt;body&gt;
  &lt;h1&gt;Welcome&lt;/h1&gt;
  &lt;p&gt;Site content goes here.&lt;/p&gt;
&lt;/body&gt;
&lt;html&gt;</code></pre><p>h1 元素可以如下查找:</p>
<pre class="line-numbers language-python"><code class="language-python">heading1 <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_tag_name<span class="token punctuation">(</span><span class="token string">'h1'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="通过Class-name-定位元素"><a href="#通过Class-name-定位元素" class="headerlink" title="通过Class name 定位元素"></a>通过Class name 定位元素</h2><p>当你向通过class name查找元素时使用这个。 在该策略下，页面中第一个匹配该class属性的元素 会被匹配并返回。如果找不到任何元素，会抛出 <code>NoSuchElementException</code> 异常。</p>
<p>作为示例，页面元素如下所示:</p>
<pre><code>&lt;html&gt;
 &lt;body&gt;
  &lt;p class="content"&gt;Site content goes here.&lt;/p&gt;
&lt;/body&gt;
&lt;html&gt;</code></pre><p>p 元素可以如下查找:</p>
<pre class="line-numbers language-python"><code class="language-python">content <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_class_name<span class="token punctuation">(</span><span class="token string">'content'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="通过CSS选择器查找元素"><a href="#通过CSS选择器查找元素" class="headerlink" title="通过CSS选择器查找元素"></a>通过CSS选择器查找元素</h2><p>当你向通过CSS选择器查找元素时使用这个。 在该策略下，页面中第一个匹配该CSS 选择器的元素 会被匹配并返回。如果找不到任何元素，会抛出 <code>NoSuchElementException</code> 异常。</p>
<p>作为示例，页面元素如下所示:</p>
<pre><code>&lt;html&gt;
 &lt;body&gt;
  &lt;p class="content"&gt;Site content goes here.&lt;/p&gt;
&lt;/body&gt;
&lt;html&gt;</code></pre><p>p 元素可以如下查找:</p>
<pre class="line-numbers language-python"><code class="language-python">content <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_css_selector<span class="token punctuation">(</span><span class="token string">'p.content'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h1 id="等待页面加载完成-Waits"><a href="#等待页面加载完成-Waits" class="headerlink" title="等待页面加载完成(Waits)"></a>等待页面加载完成(Waits)</h1><p>现在的大多数的Web应用程序是使用Ajax技术。当一个页面被加载到浏览器时， 该页面内的元素可以在不同的时间点被加载。这使得定位元素变得困难， 如果元素不再页面之中，会抛出 ElementNotVisibleException 异常。 使用 waits, 我们可以解决这个问题。waits提供了一些操作之间的时间间隔- 主要是定位元素或针对该元素的任何其他操作。</p>
<p>Selenium Webdriver 提供两种类型的waits - 隐式和显式。 显式等待会让WebDriver等待满足一定的条件以后再进一步的执行。 而隐式等待让Webdriver等待一定的时间后再才是查找某元素。</p>
<h2 id="显式等待"><a href="#显式等待" class="headerlink" title="显式等待"></a>显式等待</h2><p>显式等待是你在代码中定义等待一定条件发生后再进一步执行你的代码。 最糟糕的案例是使用time.sleep()，它将条件设置为等待一个确切的时间段。 这里有一些方便的方法让你只等待需要的时间。WebDriverWait结合ExpectedCondition 是实现的一种方式。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>by <span class="token keyword">import</span> By
<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>support<span class="token punctuation">.</span>ui <span class="token keyword">import</span> WebDriverWait
<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>support <span class="token keyword">import</span> expected_conditions <span class="token keyword">as</span> EC

driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Firefox<span class="token punctuation">(</span><span class="token punctuation">)</span>
driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://somedomain/url_that_delays_loading"</span><span class="token punctuation">)</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    element <span class="token operator">=</span> WebDriverWait<span class="token punctuation">(</span>driver<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span>until<span class="token punctuation">(</span>
        EC<span class="token punctuation">.</span>presence_of_element_located<span class="token punctuation">(</span><span class="token punctuation">(</span>By<span class="token punctuation">.</span>ID<span class="token punctuation">,</span> <span class="token string">"myDynamicElement"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
<span class="token keyword">finally</span><span class="token punctuation">:</span>
    driver<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在抛出TimeoutException异常之前将等待10秒或者在10秒内发现了查找的元素。 WebDriverWait 默认情况下会每500毫秒调用一次ExpectedCondition直到结果成功返回。 ExpectedCondition成功的返回结果是一个布尔类型的true或是不为null的返回值。</p>
<p><strong>预期的条件</strong></p>
<p>自动化的Web浏览器中一些常用的预期条件，下面列出的是每一个实现， Selenium Python binding都提供了一些方便的方法，这样你就不用去编写 expected_condition类或是创建至今的工具包去实现他们。 </p>
<ul>
<li>title_is</li>
<li>title_contains</li>
<li>presence_of_element_located</li>
<li>visibility_of_element_located</li>
<li>visibility_of</li>
<li>presence_of_all_elements_located</li>
<li>text_to_be_present_in_element</li>
<li>text_to_be_present_in_element_value</li>
<li>frame_to_be_available_and_switch_to_it</li>
<li>invisibility_of_element_located</li>
<li>element_to_be_clickable</li>
<li>staleness_of</li>
<li>element_to_be_selected</li>
<li>element_located_to_be_selected</li>
<li>element_selection_state_to_be</li>
<li>element_located_selection_state_to_be</li>
<li>alert_is_present</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>support <span class="token keyword">import</span> expected_conditions <span class="token keyword">as</span> EC

wait <span class="token operator">=</span> WebDriverWait<span class="token punctuation">(</span>driver<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
element <span class="token operator">=</span> wait<span class="token punctuation">.</span>until<span class="token punctuation">(</span>EC<span class="token punctuation">.</span>element_to_be_clickable<span class="token punctuation">(</span><span class="token punctuation">(</span>By<span class="token punctuation">.</span>ID<span class="token punctuation">,</span><span class="token string">'someid'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>expected_conditions 模块提供了一组预定义的条件供WebDriverWait使用。</p>
<p><strong>Custom Wait Conditions</strong></p>
<p>You can also create custom wait conditions when none of the previous convenience methods fit your requirements. A custom wait condition can be created using a class with _<em>call_</em> method which returns False when the condition doesn’t match.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">element_has_css_class</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token triple-quoted-string string">"""An expectation for checking that an element has a particular css class.

  locator - used to find the element
  returns the WebElement once it has the particular css class
  """</span>
  <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> locator<span class="token punctuation">,</span> css_class<span class="token punctuation">)</span><span class="token punctuation">:</span>
    self<span class="token punctuation">.</span>locator <span class="token operator">=</span> locator
    self<span class="token punctuation">.</span>css_class <span class="token operator">=</span> css_class

  <span class="token keyword">def</span> <span class="token function">__call__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> driver<span class="token punctuation">)</span><span class="token punctuation">:</span>
    element <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span><span class="token operator">*</span>self<span class="token punctuation">.</span>locator<span class="token punctuation">)</span>   <span class="token comment" spellcheck="true"># Finding the referenced element</span>
    <span class="token keyword">if</span> self<span class="token punctuation">.</span>css_class <span class="token keyword">in</span> element<span class="token punctuation">.</span>get_attribute<span class="token punctuation">(</span><span class="token string">"class"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> element
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>

<span class="token comment" spellcheck="true"># Wait until an element with id='myNewInput' has class 'myCSSClass'</span>
wait <span class="token operator">=</span> WebDriverWait<span class="token punctuation">(</span>driver<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
element <span class="token operator">=</span> wait<span class="token punctuation">.</span>until<span class="token punctuation">(</span>element_has_css_class<span class="token punctuation">(</span><span class="token punctuation">(</span>By<span class="token punctuation">.</span>ID<span class="token punctuation">,</span> <span class="token string">'myNewInput'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"myCSSClass"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="隐式等待"><a href="#隐式等待" class="headerlink" title="隐式等待"></a>隐式等待</h2><p>如果某些元素不是立即可用的，隐式等待是告诉WebDriver去等待一定的时间后去查找元素。 默认等待时间是0秒，一旦设置该值，隐式等待是设置该WebDriver的实例的生命周期。</p>
<pre><code>from selenium import webdriver

driver = webdriver.Firefox()
driver.implicitly_wait(10) # seconds
driver.get("http://somedomain/url_that_delays_loading")
myDynamicElement = driver.find_element_by_id("myDynamicElement")</code></pre><h1 id="页面对象"><a href="#页面对象" class="headerlink" title="页面对象"></a>页面对象</h1><p>本章是一个针对页面对象设计模式的教程引导。 一个页面对象表示在你测试的WEB应用程序的用户界面上的区域。</p>
<p>使用页面对象模式的好处:</p>
<ul>
<li>创建可复用的代码以便于在多个测试用例间共享</li>
<li>减少重复的代码量</li>
<li>如果用户界面变化，只需要修改一处</li>
</ul>
<h2 id="测试用例"><a href="#测试用例" class="headerlink" title="测试用例"></a>测试用例</h2><p>下面是一个在python.org网站搜索一个词并保证一些结果可以找到的测试用例。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> unittest
<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
<span class="token keyword">import</span> page

<span class="token keyword">class</span> <span class="token class-name">PythonOrgSearch</span><span class="token punctuation">(</span>unittest<span class="token punctuation">.</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""A sample test class to show how page object works"""</span>

    <span class="token keyword">def</span> <span class="token function">setUp</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Firefox<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://www.python.org"</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_search_in_python_org</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""
        Tests python.org search feature. Searches for the word "pycon" then verified that some results show up.
        Note that it does not look for any particular text in search results page. This test verifies that
        the results were not empty.
        """</span>

        <span class="token comment" spellcheck="true">#Load the main page. In this case the home page of Python.org.</span>
        main_page <span class="token operator">=</span> page<span class="token punctuation">.</span>MainPage<span class="token punctuation">(</span>self<span class="token punctuation">.</span>driver<span class="token punctuation">)</span>
        <span class="token comment" spellcheck="true">#Checks if the word "Python" is in title</span>
        <span class="token keyword">assert</span> main_page<span class="token punctuation">.</span>is_title_matches<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"python.org title doesn't match."</span>
        <span class="token comment" spellcheck="true">#Sets the text of search textbox to "pycon"</span>
        main_page<span class="token punctuation">.</span>search_text_element <span class="token operator">=</span> <span class="token string">"pycon"</span>
        main_page<span class="token punctuation">.</span>click_go_button<span class="token punctuation">(</span><span class="token punctuation">)</span>
        search_results_page <span class="token operator">=</span> page<span class="token punctuation">.</span>SearchResultsPage<span class="token punctuation">(</span>self<span class="token punctuation">.</span>driver<span class="token punctuation">)</span>
        <span class="token comment" spellcheck="true">#Verifies that the results page is not empty</span>
            <span class="token keyword">assert</span> search_results_page<span class="token punctuation">.</span>is_results_found<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"No results found."</span>

    <span class="token keyword">def</span> <span class="token function">tearDown</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    unittest<span class="token punctuation">.</span>main<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="页面对象类"><a href="#页面对象类" class="headerlink" title="页面对象类"></a>页面对象类</h2><p>页面对象为每个网页模拟创建出一个对象。 按照此技术，在测试代码和技术实施之间的一个分离层被创建。</p>
<p>这个 <code>page.py</code> 看起来像这样:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> element <span class="token keyword">import</span> BasePageElement
<span class="token keyword">from</span> locators <span class="token keyword">import</span> MainPageLocators

<span class="token keyword">class</span> <span class="token class-name">SearchTextElement</span><span class="token punctuation">(</span>BasePageElement<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""This class gets the search text from the specified locator"""</span>

    <span class="token comment" spellcheck="true">#The locator for search box where search string is entered</span>
    locator <span class="token operator">=</span> <span class="token string">'q'</span>


<span class="token keyword">class</span> <span class="token class-name">BasePage</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Base class to initialize the base page that will be called from all pages"""</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> driver<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>driver <span class="token operator">=</span> driver


<span class="token keyword">class</span> <span class="token class-name">MainPage</span><span class="token punctuation">(</span>BasePage<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Home page action methods come here. I.e. Python.org"""</span>

    <span class="token comment" spellcheck="true">#Declares a variable that will contain the retrieved text</span>
    search_text_element <span class="token operator">=</span> SearchTextElement<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">is_title_matches</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""Verifies that the hardcoded text "Python" appears in page title"""</span>
        <span class="token keyword">return</span> <span class="token string">"Python"</span> <span class="token keyword">in</span> self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>title

    <span class="token keyword">def</span> <span class="token function">click_go_button</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""Triggers the search"""</span>
        element <span class="token operator">=</span> self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span><span class="token operator">*</span>MainPageLocators<span class="token punctuation">.</span>GO_BUTTON<span class="token punctuation">)</span>
        element<span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">SearchResultsPage</span><span class="token punctuation">(</span>BasePage<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Search results page action methods come here"""</span>

    <span class="token keyword">def</span> <span class="token function">is_results_found</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment" spellcheck="true"># Probably should search for this text in the specific page</span>
        <span class="token comment" spellcheck="true"># element, but as for now it works fine</span>
        <span class="token keyword">return</span> <span class="token string">"No results found."</span> <span class="token operator">not</span> <span class="token keyword">in</span> self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>page_source<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="页面元素"><a href="#页面元素" class="headerlink" title="页面元素"></a>页面元素</h2><p>这个 <code>element.py</code> 看起来像这样:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>support<span class="token punctuation">.</span>ui <span class="token keyword">import</span> WebDriverWait


<span class="token keyword">class</span> <span class="token class-name">BasePageElement</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Base page class that is initialized on every page object class."""</span>

    <span class="token keyword">def</span> <span class="token function">__set__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> obj<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""Sets the text to the value supplied"""</span>
        driver <span class="token operator">=</span> obj<span class="token punctuation">.</span>driver
        WebDriverWait<span class="token punctuation">(</span>driver<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span>until<span class="token punctuation">(</span>
            <span class="token keyword">lambda</span> driver<span class="token punctuation">:</span> driver<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span>self<span class="token punctuation">.</span>locator<span class="token punctuation">)</span><span class="token punctuation">)</span>
        driver<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span>self<span class="token punctuation">.</span>locator<span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span>value<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__get__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> obj<span class="token punctuation">,</span> owner<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""Gets the text of the specified object"""</span>
        driver <span class="token operator">=</span> obj<span class="token punctuation">.</span>driver
        WebDriverWait<span class="token punctuation">(</span>driver<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span>until<span class="token punctuation">(</span>
            <span class="token keyword">lambda</span> driver<span class="token punctuation">:</span> driver<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span>self<span class="token punctuation">.</span>locator<span class="token punctuation">)</span><span class="token punctuation">)</span>
        element <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span>self<span class="token punctuation">.</span>locator<span class="token punctuation">)</span>
        <span class="token keyword">return</span> element<span class="token punctuation">.</span>get_attribute<span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="定位器"><a href="#定位器" class="headerlink" title="定位器"></a>定位器</h2><p>其中一个做法是，从它们正在使用的地方分离定位字符。在这个例子中，同一页面的定位器属于同一个类。</p>
<p>这个 <code>locators.py</code> 看起来像这样:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>by <span class="token keyword">import</span> By

<span class="token keyword">class</span> <span class="token class-name">MainPageLocators</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""A class for main page locators. All main page locators should come here"""</span>
    GO_BUTTON <span class="token operator">=</span> <span class="token punctuation">(</span>By<span class="token punctuation">.</span>ID<span class="token punctuation">,</span> <span class="token string">'submit'</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">SearchResultsPageLocators</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""A class for search results locators. All search results locators should come here"""</span>
    <span class="token keyword">pass</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="WebDriver-API"><a href="#WebDriver-API" class="headerlink" title="WebDriver API"></a>WebDriver API</h1><p><strong>Recommended Import Style</strong></p>
<p>The API definitions in this chapter shows the absolute location of classes. However the recommended import style is as given below:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>Then, you can access the classes like this:</p>
<pre class="line-numbers language-python"><code class="language-python">webdriver<span class="token punctuation">.</span>Firefox
webdriver<span class="token punctuation">.</span>FirefoxProfile
webdriver<span class="token punctuation">.</span>Chrome
webdriver<span class="token punctuation">.</span>ChromeOptions
webdriver<span class="token punctuation">.</span>Ie
webdriver<span class="token punctuation">.</span>Opera
webdriver<span class="token punctuation">.</span>PhantomJS
webdriver<span class="token punctuation">.</span>Remote
webdriver<span class="token punctuation">.</span>DesiredCapabilities
webdriver<span class="token punctuation">.</span>ActionChains
webdriver<span class="token punctuation">.</span>TouchActions
webdriver<span class="token punctuation">.</span>Proxy<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>The special keys class (<code>Keys</code>) can be imported like this:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>keys <span class="token keyword">import</span> Keys<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>The exception classes can be imported like this (Replace the <code>TheNameOfTheExceptionClass</code> with actual class name given below):</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>common<span class="token punctuation">.</span>exceptions <span class="token keyword">import</span> <span class="token punctuation">[</span>TheNameOfTheExceptionClass<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><strong>Conventions used in the API</strong></p>
<p>Some attributes are callable (or methods) and others are non-callable (properties). All the callable attributes are ending with round brackets.</p>
<p>Here is an example for property:</p>
<blockquote>
<ul>
<li><p>current_url</p>
<p>URL of the current loaded page.</p>
<p>Usage:</p>
<pre><code>driver.current_url</code></pre></li>
</ul>
</blockquote>
<p>Here is an example for a method:</p>
<blockquote>
<ul>
<li><p>close()</p>
<p>Closes the current window.</p>
<p>Usage:</p>
<pre><code>driver.close()</code></pre></li>
</ul>
</blockquote>
<h2 id="Exceptions"><a href="#Exceptions" class="headerlink" title="Exceptions"></a>Exceptions</h2><p>Exceptions that may happen in all the webdriver code.</p>
<ul>
<li><p><em>exception<em><code>selenium.common.exceptions.ElementNotInteractableException</code>(</em>msg=None</em>, <em>screen=None</em>, <em>stacktrace=None</em>)</p>
<p>Bases: <a href="https://selenium-python-zh.readthedocs.io/en/latest/api.html#selenium.common.exceptions.InvalidElementStateException" target="_blank" rel="noopener"><code>selenium.common.exceptions.InvalidElementStateException</code></a>Thrown when an element is present in the DOM but interactions with that element will hit another element do to paint order</p>
</li>
<li><p><em>exception<em><code>selenium.common.exceptions.ElementNotSelectableException</code>(</em>msg=None</em>, <em>screen=None</em>, <em>stacktrace=None</em>)</p>
<p>Bases: <a href="https://selenium-python-zh.readthedocs.io/en/latest/api.html#selenium.common.exceptions.InvalidElementStateException" target="_blank" rel="noopener"><code>selenium.common.exceptions.InvalidElementStateException</code></a>Thrown when trying to select an unselectable element.For example, selecting a ‘script’ element.</p>
</li>
<li><p><em>exception<em><code>selenium.common.exceptions.ElementNotVisibleException</code>(</em>msg=None</em>, <em>screen=None</em>, <em>stacktrace=None</em>)</p>
<p>Bases: <a href="https://selenium-python-zh.readthedocs.io/en/latest/api.html#selenium.common.exceptions.InvalidElementStateException" target="_blank" rel="noopener"><code>selenium.common.exceptions.InvalidElementStateException</code></a>Thrown when an element is present on the DOM, but it is not visible, and so is not able to be interacted with.Most commonly encountered when trying to click or read text of an element that is hidden from view.</p>
</li>
<li><p><em>exception<em><code>selenium.common.exceptions.ErrorInResponseException</code>(</em>response</em>, <em>msg</em>)</p>
<p>Bases: <a href="https://selenium-python-zh.readthedocs.io/en/latest/api.html#selenium.common.exceptions.WebDriverException" target="_blank" rel="noopener"><code>selenium.common.exceptions.WebDriverException</code></a>Thrown when an error has occurred on the server side.This may happen when communicating with the firefox extension or the remote driver server.</p>
</li>
<li><p><em>exception<em><code>selenium.common.exceptions.ImeActivationFailedException</code>(</em>msg=None</em>, <em>screen=None</em>, <em>stacktrace=None</em>)</p>
<p>Bases: <a href="https://selenium-python-zh.readthedocs.io/en/latest/api.html#selenium.common.exceptions.WebDriverException" target="_blank" rel="noopener"><code>selenium.common.exceptions.WebDriverException</code></a>Thrown when activating an IME engine has failed.</p>
</li>
<li><p><em>exception<em><code>selenium.common.exceptions.ImeNotAvailableException</code>(</em>msg=None</em>, <em>screen=None</em>, <em>stacktrace=None</em>)</p>
<p>Bases: <a href="https://selenium-python-zh.readthedocs.io/en/latest/api.html#selenium.common.exceptions.WebDriverException" target="_blank" rel="noopener"><code>selenium.common.exceptions.WebDriverException</code></a>Thrown when IME support is not available. This exception is thrown for every IME-related method call if IME support is not available on the machine.</p>
</li>
<li><p><em>exception<em><code>selenium.common.exceptions.InvalidArgumentException</code>(</em>msg=None</em>, <em>screen=None</em>, <em>stacktrace=None</em>)</p>
<p>Bases: <a href="https://selenium-python-zh.readthedocs.io/en/latest/api.html#selenium.common.exceptions.WebDriverException" target="_blank" rel="noopener"><code>selenium.common.exceptions.WebDriverException</code></a>The arguments passed to a command are either invalid or malformed.</p>
</li>
<li><p><em>exception<em><code>selenium.common.exceptions.InvalidCookieDomainException</code>(</em>msg=None</em>, <em>screen=None</em>, <em>stacktrace=None</em>)</p>
<p>Bases: <a href="https://selenium-python-zh.readthedocs.io/en/latest/api.html#selenium.common.exceptions.WebDriverException" target="_blank" rel="noopener"><code>selenium.common.exceptions.WebDriverException</code></a>Thrown when attempting to add a cookie under a different domain than the current URL.</p>
</li>
<li><p><em>exception<em><code>selenium.common.exceptions.InvalidElementStateException</code>(</em>msg=None</em>, <em>screen=None</em>, <em>stacktrace=None</em>)</p>
<p>Bases: <a href="https://selenium-python-zh.readthedocs.io/en/latest/api.html#selenium.common.exceptions.WebDriverException" target="_blank" rel="noopener"><code>selenium.common.exceptions.WebDriverException</code></a></p>
</li>
<li><p><em>exception<em><code>selenium.common.exceptions.InvalidSelectorException</code>(</em>msg=None</em>, <em>screen=None</em>, <em>stacktrace=None</em>)</p>
<p>Bases: <a href="https://selenium-python-zh.readthedocs.io/en/latest/api.html#selenium.common.exceptions.NoSuchElementException" target="_blank" rel="noopener"><code>selenium.common.exceptions.NoSuchElementException</code></a>Thrown when the selector which is used to find an element does not return a WebElement. Currently this only happens when the selector is an xpath expression and it is either syntactically invalid (i.e. it is not a xpath expression) or the expression does not select WebElements (e.g. “count(//input)”).</p>
</li>
<li><p><em>exception<em><code>selenium.common.exceptions.InvalidSwitchToTargetException</code>(</em>msg=None</em>, <em>screen=None</em>, <em>stacktrace=None</em>)</p>
<p>Bases: <a href="https://selenium-python-zh.readthedocs.io/en/latest/api.html#selenium.common.exceptions.WebDriverException" target="_blank" rel="noopener"><code>selenium.common.exceptions.WebDriverException</code></a>Thrown when frame or window target to be switched doesn’t exist.</p>
</li>
<li><p><em>exception<em><code>selenium.common.exceptions.MoveTargetOutOfBoundsException</code>(</em>msg=None</em>, <em>screen=None</em>, <em>stacktrace=None</em>)</p>
<p>Bases: <a href="https://selenium-python-zh.readthedocs.io/en/latest/api.html#selenium.common.exceptions.WebDriverException" target="_blank" rel="noopener"><code>selenium.common.exceptions.WebDriverException</code></a>Thrown when the target provided to the ActionsChains move() method is invalid, i.e. out of document.</p>
</li>
<li><p><em>exception<em><code>selenium.common.exceptions.NoAlertPresentException</code>(</em>msg=None</em>, <em>screen=None</em>, <em>stacktrace=None</em>)</p>
<p>Bases: <a href="https://selenium-python-zh.readthedocs.io/en/latest/api.html#selenium.common.exceptions.WebDriverException" target="_blank" rel="noopener"><code>selenium.common.exceptions.WebDriverException</code></a>Thrown when switching to no presented alert.This can be caused by calling an operation on the Alert() class when an alert is not yet on the screen.</p>
</li>
<li><p><em>exception<em><code>selenium.common.exceptions.NoSuchAttributeException</code>(</em>msg=None</em>, <em>screen=None</em>, <em>stacktrace=None</em>)</p>
<p>Bases: <a href="https://selenium-python-zh.readthedocs.io/en/latest/api.html#selenium.common.exceptions.WebDriverException" target="_blank" rel="noopener"><code>selenium.common.exceptions.WebDriverException</code></a>Thrown when the attribute of element could not be found.You may want to check if the attribute exists in the particular browser you are testing against. Some browsers may have different property names for the same property. (IE8’s .innerText vs. Firefox .textContent)</p>
</li>
<li><p><em>exception<em><code>selenium.common.exceptions.NoSuchElementException</code>(</em>msg=None</em>, <em>screen=None</em>, <em>stacktrace=None</em>)</p>
<p>Bases: <a href="https://selenium-python-zh.readthedocs.io/en/latest/api.html#selenium.common.exceptions.WebDriverException" target="_blank" rel="noopener"><code>selenium.common.exceptions.WebDriverException</code></a>Thrown when element could not be found.If you encounter this exception, you may want to check the following:Check your selector used in your find_by…Element may not yet be on the screen at the time of the find operation, (webpage is still loading) see selenium.webdriver.support.wait.WebDriverWait() for how to write a wait wrapper to wait for an element to appear.</p>
</li>
<li><p><em>exception<em><code>selenium.common.exceptions.NoSuchFrameException</code>(</em>msg=None</em>, <em>screen=None</em>, <em>stacktrace=None</em>)</p>
<p>Bases: <a href="https://selenium-python-zh.readthedocs.io/en/latest/api.html#selenium.common.exceptions.InvalidSwitchToTargetException" target="_blank" rel="noopener"><code>selenium.common.exceptions.InvalidSwitchToTargetException</code></a>Thrown when frame target to be switched doesn’t exist.</p>
</li>
<li><p><em>exception<em><code>selenium.common.exceptions.NoSuchWindowException</code>(</em>msg=None</em>, <em>screen=None</em>, <em>stacktrace=None</em>)</p>
<p>Bases: <a href="https://selenium-python-zh.readthedocs.io/en/latest/api.html#selenium.common.exceptions.InvalidSwitchToTargetException" target="_blank" rel="noopener"><code>selenium.common.exceptions.InvalidSwitchToTargetException</code></a>Thrown when window target to be switched doesn’t exist.To find the current set of active window handles, you can get a list of the active window handles in the following way:<code>print driver.window_handles</code></p>
</li>
<li><p><em>exception<em><code>selenium.common.exceptions.RemoteDriverServerException</code>(</em>msg=None</em>, <em>screen=None</em>, <em>stacktrace=None</em>)</p>
<p>Bases: <a href="https://selenium-python-zh.readthedocs.io/en/latest/api.html#selenium.common.exceptions.WebDriverException" target="_blank" rel="noopener"><code>selenium.common.exceptions.WebDriverException</code></a></p>
</li>
<li><p><em>exception<em><code>selenium.common.exceptions.StaleElementReferenceException</code>(</em>msg=None</em>, <em>screen=None</em>, <em>stacktrace=None</em>)</p>
<p>Bases: <a href="https://selenium-python-zh.readthedocs.io/en/latest/api.html#selenium.common.exceptions.WebDriverException" target="_blank" rel="noopener"><code>selenium.common.exceptions.WebDriverException</code></a>Thrown when a reference to an element is now “stale”.Stale means the element no longer appears on the DOM of the page.Possible causes of StaleElementReferenceException include, but not limited to:You are no longer on the same page, or the page may have refreshed since the element was located.The element may have been removed and re-added to the screen, since it was located. Such as an element being relocated. This can happen typically with a javascript framework when values are updated and the node is rebuilt.Element may have been inside an iframe or another context which was refreshed.</p>
</li>
<li><p><em>exception<em><code>selenium.common.exceptions.TimeoutException</code>(</em>msg=None</em>, <em>screen=None</em>, <em>stacktrace=None</em>)</p>
<p>Bases: <a href="https://selenium-python-zh.readthedocs.io/en/latest/api.html#selenium.common.exceptions.WebDriverException" target="_blank" rel="noopener"><code>selenium.common.exceptions.WebDriverException</code></a>Thrown when a command does not complete in enough time.</p>
</li>
<li><p><em>exception<em><code>selenium.common.exceptions.UnableToSetCookieException</code>(</em>msg=None</em>, <em>screen=None</em>, <em>stacktrace=None</em>)</p>
<p>Bases: <a href="https://selenium-python-zh.readthedocs.io/en/latest/api.html#selenium.common.exceptions.WebDriverException" target="_blank" rel="noopener"><code>selenium.common.exceptions.WebDriverException</code></a>Thrown when a driver fails to set a cookie.</p>
</li>
<li><p><em>exception<em><code>selenium.common.exceptions.UnexpectedAlertPresentException</code>(</em>msg=None</em>, <em>screen=None</em>, <em>stacktrace=None</em>, <em>alert_text=None</em>)</p>
<p>Bases: <a href="https://selenium-python-zh.readthedocs.io/en/latest/api.html#selenium.common.exceptions.WebDriverException" target="_blank" rel="noopener"><code>selenium.common.exceptions.WebDriverException</code></a>Thrown when an unexpected alert is appeared.Usually raised when when an expected modal is blocking webdriver form executing any more commands.</p>
</li>
<li><p><em>exception<em><code>selenium.common.exceptions.UnexpectedTagNameException</code>(</em>msg=None</em>, <em>screen=None</em>, <em>stacktrace=None</em>)</p>
<p>Bases: <a href="https://selenium-python-zh.readthedocs.io/en/latest/api.html#selenium.common.exceptions.WebDriverException" target="_blank" rel="noopener"><code>selenium.common.exceptions.WebDriverException</code></a>Thrown when a support class did not get an expected web element.</p>
</li>
<li><p><em>exception<em><code>selenium.common.exceptions.WebDriverException</code>(</em>msg=None</em>, <em>screen=None</em>, <em>stacktrace=None</em>)</p>
<p>Bases: <code>exceptions.Exception</code>Base webdriver exception.</p>
</li>
</ul>
<h2 id="Action-Chains"><a href="#Action-Chains" class="headerlink" title="Action Chains"></a>Action Chains</h2><p>The ActionChains implementation,</p>
<ul>
<li><p><em>class<em><code>selenium.webdriver.common.action_chains.ActionChains</code>(</em>driver</em>)</p>
<p>Bases: <code>object</code></p>
<p>ActionChains are a way to automate low level interactions such as mouse movements, mouse button actions, key press, and context menu interactions. This is useful for doing more complex actions like hover over and drag and drop</p>
<p>Generate user actions.</p>
<p>When you call methods for actions on the ActionChains object, the actions are stored in a queue in the ActionChains object. When you call perform(), the events are fired in the order they are queued up.</p>
<p>ActionChains can be used in a chain pattern:</p>
<pre class="line-numbers language-python"><code class="language-python">menu <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_css_selector<span class="token punctuation">(</span><span class="token string">".nav"</span><span class="token punctuation">)</span> 
hidden_submenu <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_css_selector<span class="token punctuation">(</span><span class="token string">".nav #submenu1"</span><span class="token punctuation">)</span> ActionChains<span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">.</span>move_to_element<span class="token punctuation">(</span>menu<span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span>hidden_submenu<span class="token punctuation">)</span><span class="token punctuation">.</span>perform<span class="token punctuation">(</span><span class="token punctuation">)</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>Or actions can be queued up one by one, then performed.:</p>
<pre class="line-numbers language-python"><code class="language-python">menu <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_css_selector<span class="token punctuation">(</span><span class="token string">".nav"</span><span class="token punctuation">)</span> 
hidden_submenu <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_css_selector<span class="token punctuation">(</span><span class="token string">".nav #submenu1"</span><span class="token punctuation">)</span> 
actions <span class="token operator">=</span> ActionChains<span class="token punctuation">(</span>driver<span class="token punctuation">)</span> 
actions<span class="token punctuation">.</span>move_to_element<span class="token punctuation">(</span>menu<span class="token punctuation">)</span> 
actions<span class="token punctuation">.</span>click<span class="token punctuation">(</span>hidden_submenu<span class="token punctuation">)</span> 
actions<span class="token punctuation">.</span>perform<span class="token punctuation">(</span><span class="token punctuation">)</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Either way, the actions are performed in the order they are called, one after another.</p>
<ul>
<li><p><code>__init__</code>(<em>driver</em>)</p>
<p>Creates a new ActionChains.</p>
<p>Args:driver: The WebDriver instance which performs user actions.</p>
</li>
<li><p><code>click</code>(<em>on_element=None</em>)</p>
<p>Clicks an element.</p>
<p>Args:on_element: The element to click. If None, clicks on current mouse position.</p>
</li>
<li><p><code>click_and_hold</code>(<em>on_element=None</em>)</p>
<p>Holds down the left mouse button on an element.</p>
<p>Args:on_element: The element to mouse down. If None, clicks on current mouse position.</p>
</li>
<li><p><code>context_click</code>(<em>on_element=None</em>)</p>
<p>Performs a context-click (right click) on an element.</p>
<p>Args:on_element: The element to context-click. If None, clicks on current mouse position.</p>
</li>
<li><p><code>double_click</code>(<em>on_element=None</em>)</p>
<p>Double-clicks an element.</p>
<p>Args:on_element: The element to double-click. If None, clicks on current mouse position.</p>
</li>
<li><p><code>drag_and_drop</code>(<em>source</em>, <em>target</em>)</p>
<p>Holds down the left mouse button on the source element,then moves to the target element and releases the mouse button.</p>
<p>Args:source: The element to mouse down.</p>
<p>target: The element to mouse up.</p>
</li>
<li><p><code>drag_and_drop_by_offset</code>(<em>source</em>, <em>xoffset</em>, <em>yoffset</em>)</p>
<p>Holds down the left mouse button on the source element,then moves to the target offset and releases the mouse button.</p>
<p>Args:source: The element to mouse down.</p>
<p>xoffset: X offset to move to.</p>
<p>yoffset: Y offset to move to.</p>
</li>
<li><p><code>key_down</code>(<em>value</em>, <em>element=None</em>)</p>
<p>Sends a key press only, without releasing it.Should only be used with modifier keys (Control, Alt and Shift).</p>
<p>Args:value: The modifier key to send. Values are defined in Keys class.</p>
<p>element: The element to send keys. If None, sends a key to current focused element.Example, pressing ctrl+c:<code>ActionChains(driver).key_down(Keys.CONTROL).send_keys('c').key_up(Keys.CONTROL).perform()</code></p>
</li>
<li><p><code>key_up</code>(<em>value</em>, <em>element=None</em>)</p>
<p>Releases a modifier key.</p>
<p>Args:value: The modifier key to send. Values are defined in Keys class.</p>
<p>element: The element to send keys. If None, sends a key to current focused element.Example, pressing ctrl+c:<code>ActionChains(driver).key_down(Keys.CONTROL).send_keys('c').key_up(Keys.CONTROL).perform()</code></p>
</li>
<li><p><code>move_by_offset</code>(<em>xoffset</em>, <em>yoffset</em>)</p>
<p>Moving the mouse to an offset from current mouse position.</p>
<p>Args:xoffset: X offset to move to, as a positive or negative integer.</p>
<p>yoffset: Y offset to move to, as a positive or negative integer.</p>
</li>
<li><p><code>move_to_element</code>(<em>to_element</em>)</p>
<p>Moving the mouse to the middle of an element.</p>
<p>Args:to_element: The WebElement to move to.</p>
</li>
<li><p><code>move_to_element_with_offset</code>(<em>to_element</em>, <em>xoffset</em>, <em>yoffset</em>)</p>
<p>Move the mouse by an offset of the specified element.Offsets are relative to the top-left corner of the element.</p>
<p>Args:to_element: The WebElement to move to.</p>
<p>xoffset: X offset to move to.</p>
<p>yoffset: Y offset to move to.</p>
</li>
<li><p><code>pause</code>(<em>seconds</em>)</p>
<p>Pause all inputs for the specified duration in seconds</p>
</li>
<li><p><code>perform</code>()</p>
<p>Performs all stored actions.</p>
</li>
<li><p><code>release</code>(<em>on_element=None</em>)</p>
<p>Releasing a held mouse button on an element.</p>
<p>Args:on_element: The element to mouse up. If None, releases on current mouse position.</p>
</li>
<li><p><code>reset_actions</code>()</p>
<p>Clears actions that are already stored locally and on the remote end</p>
</li>
<li><p><code>send_keys</code>(<em>*keys_to_send</em>)</p>
<p>Sends keys to current focused element.</p>
<p>Args:keys_to_send: The keys to send. Modifier keys constants can be found in the ‘Keys’ class.</p>
</li>
<li><p><code>send_keys_to_element</code>(<em>element</em>, <em>*keys_to_send</em>)</p>
<p>Sends keys to an element.</p>
<p>Args:element: The element to send keys.</p>
<p>keys_to_send: The keys to send. Modifier keys constants can be found in the ‘Keys’ class.</p>
</li>
</ul>
</li>
</ul>
<h2 id="Alerts"><a href="#Alerts" class="headerlink" title="Alerts"></a>Alerts</h2><p>The Alert implementation.</p>
<p><em>class</em> <code>selenium.webdriver.common.alert.Alert</code>(<em>driver</em>)</p>
<p>Bases: <code>object</code></p>
<p>Allows to work with alerts.</p>
<p>Use this class to interact with alert prompts. It contains methods for dismissing, accepting, inputting, and getting text from alert prompts.</p>
<p>Accepting / Dismissing alert prompts:</p>
<pre class="line-numbers language-python"><code class="language-python">Alert<span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>
Alert<span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">.</span>dismiss<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>Inputting a value into an alert prompt:</p>
<blockquote>
<p>name_prompt = Alert(driver) name_prompt.send_keys(“Willian Shakesphere”) name_prompt.accept()</p>
</blockquote>
<p>Reading a the text of a prompt for verification:</p>
<blockquote>
<p>alert_text = Alert(driver).text self.assertEqual(“Do you wish to quit?”, alert_text)</p>
</blockquote>
<ul>
<li><p><code>__init__</code>(<em>driver</em>)</p>
<p>Creates a new Alert.</p>
<p>Args:driver: The WebDriver instance which performs user actions.</p>
</li>
<li><p><code>accept</code>()</p>
<p>Accepts the alert available.</p>
<p>Usage:</p>
<pre class="line-numbers language-python"><code class="language-python">Alert<span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># Confirm a alert dialog.</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p><code>dismiss</code>()</p>
<p>Dismisses the alert available.</p>
</li>
<li><p><code>send_keys</code>(<em>keysToSend</em>)</p>
<p>Send Keys to the Alert.</p>
<p>Args:keysToSend: The text to be sent to Alert.</p>
</li>
<li><p><code>text</code></p>
<p>Gets the text of the Alert.</p>
</li>
</ul>
<h2 id="Special-Keys"><a href="#Special-Keys" class="headerlink" title="Special Keys"></a>Special Keys</h2><p>The Keys implementation.</p>
<p>The Keys implementation.</p>
<ul>
<li><p><em>class</em> <code>selenium.webdriver.common.keys.Keys</code></p>
<p>Bases: <code>object</code>Set of special keys codes.</p>
<ul>
<li><p><code>ADD</code> <em>= ‘\ue025’</em></p>
</li>
<li><p><code>ALT</code> <em>= ‘\ue00a’</em></p>
</li>
<li><p><code>ARROW_DOWN</code> <em>= ‘\ue015’</em></p>
</li>
<li><p><code>ARROW_LEFT</code> <em>= ‘\ue012’</em></p>
</li>
<li><p><code>ARROW_RIGHT</code> <em>= ‘\ue014’</em></p>
</li>
<li><p><code>ARROW_UP</code> <em>= ‘\ue013’</em></p>
</li>
<li><p><code>BACKSPACE</code> <em>= ‘\ue003’</em></p>
</li>
<li><p><code>BACK_SPACE</code> <em>= ‘\ue003’</em></p>
</li>
<li><p><code>CANCEL</code> <em>= ‘\ue001’</em></p>
</li>
<li><p><code>CLEAR</code> <em>= ‘\ue005’</em></p>
</li>
<li><p><code>COMMAND</code> <em>= ‘\ue03d’</em></p>
</li>
<li><p><code>CONTROL</code> <em>= ‘\ue009’</em></p>
</li>
<li><p><code>DECIMAL</code> <em>= ‘\ue028’</em></p>
</li>
<li><p><code>DELETE</code> <em>= ‘\ue017’</em></p>
</li>
<li><p><code>DIVIDE</code> <em>= ‘\ue029’</em></p>
</li>
<li><p><code>DOWN</code> <em>= ‘\ue015’</em></p>
</li>
<li><p><code>END</code> <em>= ‘\ue010’</em></p>
</li>
<li><p><code>ENTER</code> <em>= ‘\ue007’</em></p>
</li>
<li><p><code>EQUALS</code> <em>= ‘\ue019’</em></p>
</li>
<li><p><code>ESCAPE</code> <em>= ‘\ue00c’</em></p>
</li>
<li><p><code>F1</code> <em>= ‘\ue031’</em></p>
</li>
<li><p><code>F10</code> <em>= ‘\ue03a’</em></p>
</li>
<li><p><code>F11</code> <em>= ‘\ue03b’</em></p>
</li>
<li><p><code>F12</code> <em>= ‘\ue03c’</em></p>
</li>
<li><p><code>F2</code> <em>= ‘\ue032’</em></p>
</li>
<li><p><code>F3</code> <em>= ‘\ue033’</em></p>
</li>
<li><p><code>F4</code> <em>= ‘\ue034’</em></p>
</li>
<li><p><code>F5</code> <em>= ‘\ue035’</em></p>
</li>
<li><p><code>F6</code> <em>= ‘\ue036’</em></p>
</li>
<li><p><code>F7</code> <em>= ‘\ue037’</em></p>
</li>
<li><p><code>F8</code> <em>= ‘\ue038’</em></p>
</li>
<li><p><code>F9</code> <em>= ‘\ue039’</em></p>
</li>
<li><p><code>HELP</code> <em>= ‘\ue002’</em></p>
</li>
<li><p><code>HOME</code> <em>= ‘\ue011’</em></p>
</li>
<li><p><code>INSERT</code> <em>= ‘\ue016’</em></p>
</li>
<li><p><code>LEFT</code> <em>= ‘\ue012’</em></p>
</li>
<li><p><code>LEFT_ALT</code> <em>= ‘\ue00a’</em></p>
</li>
<li><p><code>LEFT_CONTROL</code> <em>= ‘\ue009’</em></p>
</li>
<li><p><code>LEFT_SHIFT</code> <em>= ‘\ue008’</em></p>
</li>
<li><p><code>META</code> <em>= ‘\ue03d’</em></p>
</li>
<li><p><code>MULTIPLY</code> <em>= ‘\ue024’</em></p>
</li>
<li><p><code>NULL</code> <em>= ‘\ue000’</em></p>
</li>
<li><p><code>NUMPAD0</code> <em>= ‘\ue01a’</em></p>
</li>
<li><p><code>NUMPAD1</code> <em>= ‘\ue01b’</em></p>
</li>
<li><p><code>NUMPAD2</code> <em>= ‘\ue01c’</em></p>
</li>
<li><p><code>NUMPAD3</code> <em>= ‘\ue01d’</em></p>
</li>
<li><p><code>NUMPAD4</code> <em>= ‘\ue01e’</em></p>
</li>
<li><p><code>NUMPAD5</code> <em>= ‘\ue01f’</em></p>
</li>
<li><p><code>NUMPAD6</code> <em>= ‘\ue020’</em></p>
</li>
<li><p><code>NUMPAD7</code> <em>= ‘\ue021’</em></p>
</li>
<li><p><code>NUMPAD8</code> <em>= ‘\ue022’</em></p>
</li>
<li><p><code>NUMPAD9</code> <em>= ‘\ue023’</em></p>
</li>
<li><p><code>PAGE_DOWN</code> <em>= ‘\ue00f’</em></p>
</li>
<li><p><code>PAGE_UP</code> <em>= ‘\ue00e’</em></p>
</li>
<li><p><code>PAUSE</code> <em>= ‘\ue00b’</em></p>
</li>
<li><p><code>RETURN</code> <em>= ‘\ue006’</em></p>
</li>
<li><p><code>RIGHT</code> <em>= ‘\ue014’</em></p>
</li>
<li><p><code>SEMICOLON</code> <em>= ‘\ue018’</em></p>
</li>
<li><p><code>SEPARATOR</code> <em>= ‘\ue026’</em></p>
</li>
<li><p><code>SHIFT</code> <em>= ‘\ue008’</em></p>
</li>
<li><p><code>SPACE</code> <em>= ‘\ue00d’</em></p>
</li>
<li><p><code>SUBTRACT</code> <em>= ‘\ue027’</em></p>
</li>
<li><p><code>TAB</code> <em>= ‘\ue004’</em></p>
</li>
<li><p><code>UP</code> <em>= ‘\ue013’</em></p>
</li>
</ul>
</li>
</ul>
<h2 id="Locate-elements-By"><a href="#Locate-elements-By" class="headerlink" title="Locate elements By"></a>Locate elements By</h2><p>These are the attributes which can be used to locate elements. See the 查找元素 chapter for example usages.</p>
<p>The By implementation.</p>
<ul>
<li><p><em>class</em> <code>selenium.webdriver.common.by.By</code></p>
<p>Bases: <code>object</code></p>
<p>Set of supported locator strategies.</p>
<ul>
<li><p><code>CLASS_NAME</code> <em>= ‘class name’</em></p>
</li>
<li><p><code>CSS_SELECTOR</code> <em>= ‘css selector’</em></p>
</li>
<li><p><code>ID</code> <em>= ‘id’</em></p>
</li>
<li><p><code>LINK_TEXT</code> <em>= ‘link text’</em></p>
</li>
<li><p><code>NAME</code> <em>= ‘name’</em></p>
</li>
<li><p><code>PARTIAL_LINK_TEXT</code> <em>= ‘partial link text’</em></p>
</li>
<li><p><code>TAG_NAME</code> <em>= ‘tag name’</em></p>
</li>
<li><p><code>XPATH</code> <em>= ‘xpath’</em></p>
</li>
</ul>
</li>
</ul>
<h2 id="Desired-Capabilities"><a href="#Desired-Capabilities" class="headerlink" title="Desired Capabilities"></a>Desired Capabilities</h2><p>See the 使用远程 Selenium WebDriver section for example usages of desired capabilities.</p>
<p>The Desired Capabilities implementation.</p>
<ul>
<li><p><em>class</em> <code>selenium.webdriver.common.desired_capabilities.DesiredCapabilities</code></p>
<p>Bases: <code>object</code></p>
<p>Set of default supported desired capabilities.Use this as a starting point for creating a desired capabilities object for requesting remote webdrivers for connecting to selenium server or selenium grid.</p>
<p>Usage Example:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver

selenium_grid_url <span class="token operator">=</span> <span class="token string">"http://198.0.0.1:4444/wd/hub"</span>

<span class="token comment" spellcheck="true"># Create a desired capabilities object as a starting point.</span>
capabilities <span class="token operator">=</span> DesiredCapabilities<span class="token punctuation">.</span>FIREFOX<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>
capabilities<span class="token punctuation">[</span><span class="token string">'platform'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"WINDOWS"</span>
capabilities<span class="token punctuation">[</span><span class="token string">'version'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"10"</span>

<span class="token comment" spellcheck="true"># Instantiate an instance of Remote WebDriver with the desired capabilities.</span>
driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Remote<span class="token punctuation">(</span>desired_capabilities<span class="token operator">=</span>capabilities<span class="token punctuation">,</span>
                          command_executor<span class="token operator">=</span>selenium_grid_url<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Note: Always use ‘.copy()’ on the DesiredCapabilities object to avoid the side effects of altering the Global class instance.</p>
<ul>
<li><p><code>ANDROID</code> <em>= {‘browserName’: ‘android’, ‘platform’: ‘ANDROID’, ‘version’: ‘’}</em></p>
</li>
<li><p><code>CHROME</code> <em>= {‘browserName’: ‘chrome’, ‘platform’: ‘ANY’, ‘version’: ‘’}</em></p>
</li>
<li><p><code>EDGE</code> <em>= {‘browserName’: ‘MicrosoftEdge’, ‘platform’: ‘WINDOWS’, ‘version’: ‘’}</em></p>
</li>
<li><p><code>FIREFOX</code> <em>= {‘acceptInsecureCerts’: True, ‘browserName’: ‘firefox’, ‘marionette’: True}</em></p>
</li>
<li><p><code>HTMLUNIT</code> <em>= {‘browserName’: ‘htmlunit’, ‘platform’: ‘ANY’, ‘version’: ‘’}</em></p>
</li>
<li><p><code>HTMLUNITWITHJS</code> <em>= {‘browserName’: ‘htmlunit’, ‘javascriptEnabled’: True, ‘platform’: ‘ANY’, ‘version’: ‘firefox’}</em></p>
</li>
<li><p><code>INTERNETEXPLORER</code> <em>= {‘browserName’: ‘internet explorer’, ‘platform’: ‘WINDOWS’, ‘version’: ‘’}</em></p>
</li>
<li><p><code>IPAD</code> <em>= {‘browserName’: ‘iPad’, ‘platform’: ‘MAC’, ‘version’: ‘’}</em></p>
</li>
<li><p><code>IPHONE</code> <em>= {‘browserName’: ‘iPhone’, ‘platform’: ‘MAC’, ‘version’: ‘’}</em></p>
</li>
<li><p><code>OPERA</code> <em>= {‘browserName’: ‘opera’, ‘platform’: ‘ANY’, ‘version’: ‘’}</em></p>
</li>
<li><p><code>PHANTOMJS</code> <em>= {‘browserName’: ‘phantomjs’, ‘javascriptEnabled’: True, ‘platform’: ‘ANY’, ‘version’: ‘’}</em></p>
</li>
<li><p><code>SAFARI</code> <em>= {‘browserName’: ‘safari’, ‘platform’: ‘MAC’, ‘version’: ‘’}</em></p>
</li>
<li><p><code>WEBKITGTK</code> <em>= {‘browserName’: ‘MiniBrowser’, ‘platform’: ‘ANY’, ‘version’: ‘’}</em></p>
</li>
</ul>
</li>
</ul>
<h2 id="Touch-Actions"><a href="#Touch-Actions" class="headerlink" title="Touch Actions"></a>Touch Actions</h2><p>The Touch Actions implementation</p>
<ul>
<li><p><em>class</em> <code>selenium.webdriver.common.touch_actions.TouchActions</code>(<em>driver</em>)</p>
<p>Bases: <code>object</code></p>
<p>Generate touch actions. Works like ActionChains; actions are stored in the TouchActions object and are fired with perform().</p>
<ul>
<li><p><code>__init__</code>(<em>driver</em>)</p>
<p>Creates a new TouchActions object.</p>
<p>Args:driver: The WebDriver instance which performs user actions. It should be with touchscreen enabled.</p>
</li>
<li><p><code>double_tap</code>(<em>on_element</em>)</p>
<p>Double taps on a given element.</p>
<p>Args:on_element: The element to tap.</p>
</li>
<li><p><code>flick</code>(<em>xspeed</em>, <em>yspeed</em>)</p>
<p>Flicks, starting anywhere on the screen.</p>
<p>Args:xspeed: The X speed in pixels per second.yspeed: The Y speed in pixels per second.</p>
</li>
<li><p><code>flick_element</code>(<em>on_element</em>, <em>xoffset</em>, <em>yoffset</em>, <em>speed</em>)</p>
<p>Flick starting at on_element, and moving by the xoffset and yoffset with specified speed.</p>
<p>Args:on_element: Flick will start at center of element.xoffset: X offset to flick to.yoffset: Y offset to flick to.speed: Pixels per second to flick.</p>
</li>
<li><p><code>long_press</code>(<em>on_element</em>)</p>
<p>Long press on an element.</p>
<p>Args:on_element: The element to long press.</p>
</li>
<li><p><code>move</code>(<em>xcoord</em>, <em>ycoord</em>)</p>
<p>Move held tap to specified location.</p>
<p>Args:xcoord: X Coordinate to move.ycoord: Y Coordinate to move.</p>
</li>
<li><p><code>perform</code>()</p>
<p>Performs all stored actions.</p>
</li>
<li><p><code>release</code>(<em>xcoord</em>, <em>ycoord</em>)</p>
<p>Release previously issued tap ‘and hold’ command at specified location.</p>
<p>Args:xcoord: X Coordinate to release.ycoord: Y Coordinate to release.</p>
</li>
<li><p><code>scroll</code>(<em>xoffset</em>, <em>yoffset</em>)</p>
<p>Touch and scroll, moving by xoffset and yoffset.</p>
<p>Args:xoffset: X offset to scroll to.yoffset: Y offset to scroll to.</p>
</li>
<li><p><code>scroll_from_element</code>(<em>on_element</em>, <em>xoffset</em>, <em>yoffset</em>)</p>
<p>Touch and scroll starting at on_element, moving by xoffset and yoffset.</p>
<p>Args:on_element: The element where scroll starts.xoffset: X offset to scroll to.yoffset: Y offset to scroll to.</p>
</li>
<li><p><code>tap</code>(<em>on_element</em>)</p>
<p>Taps on a given element.</p>
<p>Args:on_element: The element to tap.</p>
</li>
<li><p><code>tap_and_hold</code>(<em>xcoord</em>, <em>ycoord</em>)</p>
<p>Touch down at given coordinates.</p>
<p>Args:xcoord: X Coordinate to touch down.ycoord: Y Coordinate to touch down.</p>
</li>
</ul>
</li>
</ul>
<h2 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h2><p>The Proxy implementation.</p>
<ul>
<li><p><em>class</em> <code>selenium.webdriver.common.proxy.Proxy</code>(<em>raw=None</em>)</p>
<p>Bases: <code>object</code></p>
<p>Proxy contains information about proxy type and necessary proxy settings.</p>
<ul>
<li><p><code>__init__</code>(<em>raw=None</em>)</p>
<p>Creates a new Proxy.</p>
<p>Args:raw: raw proxy data. If None, default class values are used.</p>
</li>
<li><p><code>add_to_capabilities</code>(<em>capabilities</em>)</p>
<p>Adds proxy information as capability in specified capabilities.</p>
<p>Args:capabilities: The capabilities to which proxy will be added.</p>
</li>
<li><p><code>auto_detect</code></p>
<p>Returns autodetect setting.</p>
</li>
<li><p><code>autodetect</code> <em>= False</em></p>
</li>
<li><p><code>ftpProxy</code> <em>= ‘’</em></p>
</li>
<li><p><code>ftp_proxy</code></p>
<p>Returns ftp proxy setting.</p>
</li>
<li><p><code>httpProxy</code> <em>= ‘’</em></p>
</li>
<li><p><code>http_proxy</code></p>
<p>Returns http proxy setting.</p>
</li>
<li><p><code>noProxy</code> <em>= ‘’</em></p>
</li>
<li><p><code>no_proxy</code></p>
<p>Returns noproxy setting.</p>
</li>
<li><p><code>proxyAutoconfigUrl</code> <em>= ‘’</em></p>
</li>
<li><p><code>proxyType</code> <em>= {‘ff_value’: 6, ‘string’: ‘UNSPECIFIED’}</em></p>
</li>
<li><p><code>proxy_autoconfig_url</code></p>
<p>Returns proxy autoconfig url setting.</p>
</li>
<li><p><code>proxy_type</code></p>
<p>Returns proxy type as ProxyType.</p>
</li>
<li><p><code>socksPassword</code> <em>= ‘’</em></p>
</li>
<li><p><code>socksProxy</code> <em>= ‘’</em></p>
</li>
<li><p><code>socksUsername</code> <em>= ‘’</em></p>
</li>
<li><p><code>socks_password</code></p>
<p>Returns socks proxy password setting.</p>
</li>
<li><p><code>socks_proxy</code></p>
<p>Returns socks proxy setting.</p>
</li>
<li><p><code>socks_username</code></p>
<p>Returns socks proxy username setting.</p>
</li>
<li><p><code>sslProxy</code> <em>= ‘’</em></p>
</li>
<li><p><code>ssl_proxy</code></p>
<p>Returns https proxy setting.</p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p><em>class</em> <code>selenium.webdriver.common.proxy.ProxyType</code></p>
<p>Bases: <code>object</code></p>
<p>Set of possible types of proxy.</p>
<ul>
<li><p>Each proxy type has 2 properties:</p>
<p>‘ff_value’ is value of Firefox profile preference, ‘string’ is id of proxy type.</p>
</li>
<li><p><em>classmethod</em> <code>load</code>(<em>value</em>)</p>
</li>
<li><p><code>AUTODETECT</code> <em>= {‘ff_value’: 4, ‘string’: ‘AUTODETECT’}</em></p>
</li>
<li><p><code>DIRECT</code> <em>= {‘ff_value’: 0, ‘string’: ‘DIRECT’}</em></p>
</li>
<li><p><code>MANUAL</code> <em>= {‘ff_value’: 1, ‘string’: ‘MANUAL’}</em></p>
</li>
<li><p><code>PAC</code> <em>= {‘ff_value’: 2, ‘string’: ‘PAC’}</em></p>
</li>
<li><p><code>RESERVED_1</code> <em>= {‘ff_value’: 3, ‘string’: ‘RESERVED1’}</em></p>
</li>
<li><p><code>SYSTEM</code> <em>= {‘ff_value’: 5, ‘string’: ‘SYSTEM’}</em></p>
</li>
<li><p><code>UNSPECIFIED</code> <em>= {‘ff_value’: 6, ‘string’: ‘UNSPECIFIED’}</em></p>
</li>
</ul>
</li>
<li><p><em>class</em> <code>selenium.webdriver.common.proxy.ProxyTypeFactory</code></p>
<p>Bases: <code>object</code></p>
<p>Factory for proxy types.</p>
<ul>
<li><em>static</em> <code>make</code>(<em>ff_value</em>, <em>string</em>)</li>
</ul>
</li>
</ul>
<h2 id="Utilities"><a href="#Utilities" class="headerlink" title="Utilities"></a>Utilities</h2><p>The Utils methods.</p>
<ul>
<li><p><code>selenium.webdriver.common.utils.find_connectable_ip</code>(<em>host</em>, <em>port=None</em>)</p>
<p>Resolve a hostname to an IP, preferring IPv4 addresses.</p>
<p>We prefer IPv4 so that we don’t change behavior from previous IPv4-only implementations, and because some drivers (e.g., FirefoxDriver) do not support IPv6 connections.</p>
<p>If the optional port number is provided, only IPs that listen on the given port are considered.</p>
<p>Args:host - A hostname.</p>
<p>port - Optional port number.</p>
<p>Returns:A single IP address, as a string. If any IPv4 address is found, one is returned. Otherwise, if any IPv6 address is found, one is returned. If neither, then None is returned.</p>
</li>
<li><p><code>selenium.webdriver.common.utils.free_port</code>()</p>
<p>Determines a free port using sockets.</p>
</li>
<li><p><code>selenium.webdriver.common.utils.is_connectable</code>(<em>port</em>, <em>host=’localhost’</em>)</p>
<p>Tries to connect to the server at port to see if it is running.</p>
<p>Args:port - The port to connect.</p>
</li>
<li><p><code>selenium.webdriver.common.utils.is_url_connectable</code>(<em>port</em>)</p>
<p>Tries to connect to the HTTP server at /status path and specified port to see if it responds successfully.</p>
<p>Args:port - The port to connect.</p>
</li>
<li><p><code>selenium.webdriver.common.utils.join_host_port</code>(<em>host</em>, <em>port</em>)</p>
<p>Joins a hostname and port together.This is a minimal implementation intended to cope with IPv6 literals. For example, _join_host_port(‘::1’, 80) == ‘[::1]:80’.</p>
<p>Args:host - A hostname.</p>
<p>port - An integer port.</p>
</li>
<li><p><code>selenium.webdriver.common.utils.keys_to_typing</code>(<em>value</em>)</p>
<p>Processes the values that will be typed in the element.</p>
</li>
</ul>
<h2 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h2><ul>
<li><p><em>class</em> <code>selenium.webdriver.common.service.Service</code>(<em>executable</em>, <em>port=0</em>, <em>log_file=-3</em>, <em>env=None</em>, <em>start_error_message=’’</em>)</p>
<p>Bases: <code>object</code></p>
<ul>
<li><p><code>__init__</code>(<em>executable</em>, <em>port=0</em>, <em>log_file=-3</em>, <em>env=None</em>, <em>start_error_message=’’</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><code>assert_process_still_running</code>()</p>
</li>
<li><p><code>command_line_args</code>()</p>
</li>
<li><p><code>is_connectable</code>()</p>
</li>
<li><p><code>send_remote_shutdown_command</code>()</p>
</li>
<li><p><code>start</code>()</p>
<p>Starts the Service.Exceptions:WebDriverException : Raised either when it can’t start the service or when it can’t connect to the service</p>
</li>
<li><p><code>stop</code>()</p>
<p>Stops the service.</p>
</li>
<li><p><code>service_url</code></p>
<p>Gets the url of the Service</p>
</li>
</ul>
</li>
</ul>
<h2 id="Application-Cache"><a href="#Application-Cache" class="headerlink" title="Application Cache"></a>Application Cache</h2><p>The ApplicationCache implementaion.</p>
<ul>
<li><p><em>class</em> <code>selenium.webdriver.common.html5.application_cache.ApplicationCache</code>(<em>driver</em>)</p>
<p>Bases: <code>object</code></p>
<ul>
<li><p><code>__init__</code>(<em>driver</em>)</p>
<p>Creates a new Aplication Cache.</p>
<p>Args:driver: The WebDriver instance which performs user actions.</p>
</li>
<li><p><code>CHECKING</code> <em>= 2</em></p>
</li>
<li><p><code>DOWNLOADING</code> <em>= 3</em></p>
</li>
<li><p><code>IDLE</code> <em>= 1</em></p>
</li>
<li><p><code>OBSOLETE</code> <em>= 5</em></p>
</li>
<li><p><code>UNCACHED</code> <em>= 0</em></p>
</li>
<li><p><code>UPDATE_READY</code> <em>= 4</em></p>
</li>
<li><p><code>status</code></p>
<p>Returns a current status of application cache.</p>
</li>
</ul>
</li>
</ul>
<h2 id="Firefox-WebDriver"><a href="#Firefox-WebDriver" class="headerlink" title="Firefox WebDriver"></a>Firefox WebDriver</h2><p><em>class</em> <code>selenium.webdriver.firefox.webdriver.WebDriver</code>(<em>firefox_profile=None</em>, <em>firefox_binary=None</em>, <em>timeout=30</em>, <em>capabilities=None</em>, <em>proxy=None</em>, <em>executable_path=’geckodriver’</em>, <em>options=None</em>, <em>service_log_path=’geckodriver.log’</em>, <em>firefox_options=None</em>, <em>service_args=None</em>, <em>desired_capabilities=None</em>, <em>log_path=None</em>, <em>keep_alive=True</em>)</p>
<p>Bases: <a href="https://selenium-python.readthedocs.io/api.html#selenium.webdriver.remote.webdriver.WebDriver" target="_blank" rel="noopener"><code>selenium.webdriver.remote.webdriver.WebDriver</code></a></p>
<p><code>__init__</code>(<em>firefox_profile=None</em>, <em>firefox_binary=None</em>, <em>timeout=30</em>, <em>capabilities=None</em>, <em>proxy=None</em>, <em>executable_path=’geckodriver’</em>, <em>options=None</em>, <em>service_log_path=’geckodriver.log’</em>, <em>firefox_options=None</em>, <em>service_args=None</em>, <em>desired_capabilities=None</em>, <em>log_path=None</em>, <em>keep_alive=True</em>)</p>
<p>Starts a new local session of Firefox.</p>
<p>Based on the combination and specificity of the various keyword arguments, a capabilities dictionary will be constructed that is passed to the remote end.</p>
<p>The keyword arguments given to this constructor are helpers to more easily allow Firefox WebDriver sessions to be customised with different options. They are mapped on to a capabilities dictionary that is passed on to the remote end.</p>
<p>As some of the options, such as firefox_profile and options.profile are mutually exclusive, precedence is given from how specific the setting is. capabilities is the least specific keyword argument, followed by options, followed by firefox_binary and firefox_profile.</p>
<p>In practice this means that if firefox_profile and options.profile are both set, the selected profile instance will always come from the most specific variable. In this case that would be firefox_profile. This will result in options.profile to be ignored because it is considered a less specific setting than the top-level firefox_profile keyword argument. Similarily, if you had specified a capabilities[“moz:firefoxOptions”][“profile”] Base64 string, this would rank below options.profile.</p>
<p>​    <img src="/images/loading.gif" data-original="../images/language/image-20210829175545999.png" alt=""></p>
<ul>
<li><p><code>context</code>(<em>context</em>)</p>
<p>Sets the context that Selenium commands are running in using a with statement. The state of the context on the server is saved before entering the block, and restored upon exiting it.</p>
<p>Parameters: <strong>context</strong> – Context, may be one of the class properties CONTEXT_CHROME or CONTEXT_CONTENT. </p>
</li>
</ul>
<p>  Usage example:</p>
<pre><code>  with selenium.context(selenium.CONTEXT_CHROME):
      # chrome scope
      ... do stuff ...</code></pre><ul>
<li><p><code>install_addon</code>(<em>path</em>, <em>temporary=None</em>)</p>
<p>Installs Firefox addon.</p>
<p>Returns identifier of installed addon. This identifier can later be used to uninstall addon.</p>
<p>Parameters: <strong>path</strong> – Absolute path to the addon that will be installed. </p>
<p>Usage: </p>
<p>driver.install_addon(‘/path/to/firebug.xpi’) </p>
</li>
<li><p><code>quit</code>()</p>
<p>Quits the driver and close every associated window.</p>
</li>
<li><p><code>set_context</code>(<em>context</em>)</p>
</li>
<li><p><code>uninstall_addon</code>(<em>identifier</em>)</p>
<p>Uninstalls Firefox addon using its identifier.</p>
<p>Usage:</p>
<p>driver.uninstall_addon(<a href="mailto:'addon@foo.com">‘addon@foo.com</a>’)</p>
</li>
<li><p><code>CONTEXT_CHROME</code> <em>= ‘chrome’</em></p>
</li>
<li><p><code>CONTEXT_CONTENT</code> <em>= ‘content’</em></p>
</li>
<li><p><code>NATIVE_EVENTS_ALLOWED</code> <em>= True</em></p>
</li>
<li><p><code>firefox_profile</code></p>
</li>
</ul>
<h2 id="Firefox-WebDriver-Options"><a href="#Firefox-WebDriver-Options" class="headerlink" title="Firefox WebDriver Options"></a>Firefox WebDriver Options</h2><ul>
<li><p><em>class</em> <code>selenium.webdriver.firefox.options.Log</code></p>
<p>Bases: <code>object</code></p>
<ul>
<li><p><code>__init__</code>()</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><code>to_capabilities</code>()</p>
</li>
</ul>
</li>
<li><p><em>class</em> <code>selenium.webdriver.firefox.options.Options</code></p>
<p>Bases: <code>object</code></p>
<ul>
<li><p><code>_init__</code>()</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><code>add_argument</code>(<em>argument</em>)</p>
<p>Add argument to be used for the browser process.</p>
</li>
<li><p><code>set_capability</code>(<em>name</em>, <em>value</em>)</p>
<p>Sets a capability.</p>
</li>
<li><p><code>set_headless</code>(<em>headless=True</em>)</p>
<p>Deprecated, options.headless = True</p>
</li>
<li><p><code>set_preference</code>(<em>name</em>, <em>value</em>)</p>
<p>Sets a preference.</p>
</li>
<li><p><code>to_capabilities</code>()</p>
<p>Marshals the Firefox options to a moz:firefoxOptions object.</p>
</li>
<li><p><code>KEY</code> <em>= ‘moz:firefoxOptions’</em></p>
</li>
<li><p><code>accept_insecure_certs</code></p>
</li>
<li><p><code>arguments</code></p>
<p>Returns a list of browser process arguments.</p>
</li>
<li><p><code>binary</code></p>
<p>Returns the FirefoxBinary instance</p>
</li>
<li><p><code>binary_location</code></p>
<p>Returns the location of the binary.</p>
</li>
<li><p><code>capabilities</code></p>
</li>
<li><p><code>headless</code></p>
<p>Returns whether or not the headless argument is set</p>
</li>
<li><p><code>preferences</code></p>
<p>Returns a dict of preferences.</p>
</li>
<li><p><code>profile</code></p>
<p>Returns the Firefox profile to use.</p>
</li>
<li><p><code>proxy</code></p>
<p>returns Proxy if set otherwise None.</p>
</li>
</ul>
</li>
</ul>
<h2 id="Firefox-WebDriver-Profile"><a href="#Firefox-WebDriver-Profile" class="headerlink" title="Firefox WebDriver Profile"></a>Firefox WebDriver Profile</h2><p><em>exception</em> <code>selenium.webdriver.firefox.firefox_profile.AddonFormatError</code></p>
<p>Bases: <code>Exception</code></p>
<p>Exception for not well-formed add-on manifest files</p>
<p><em>class</em> <code>selenium.webdriver.firefox.firefox_profile.FirefoxProfile</code>(<em>profile_directory=None</em>)</p>
<p>Bases: <code>object</code></p>
<ul>
<li><p><code>__init__</code>(<em>profile_directory=None</em>)</p>
<p>Initialises a new instance of a Firefox Profile</p>
<p>Args:profile_directory: Directory of profile that you want to use. If a directory is passed in it will be cloned and the cloned directory will be used by the driver when instantiated. This defaults to None and will create a new directory when object is created.</p>
</li>
<li><p><code>add_extension</code>(<em>extension=’webdriver.xpi’</em>)</p>
</li>
<li><p><code>set_preference</code>(<em>key</em>, <em>value</em>)</p>
<p>sets the preference that we want in the profile.</p>
</li>
<li><p><code>set_proxy</code>(<em>proxy</em>)</p>
</li>
<li><p><code>update_preferences</code>()</p>
</li>
<li><p><code>ANONYMOUS_PROFILE_NAME</code> <em>= ‘WEBDRIVER_ANONYMOUS_PROFILE’</em></p>
</li>
<li><p><code>DEFAULT_PREFERENCES</code> <em>= None</em></p>
</li>
<li><p><code>accept_untrusted_certs</code></p>
</li>
<li><p><code>assume_untrusted_cert_issuer</code></p>
</li>
<li><p><code>encoded</code></p>
<p>A zipped, base64 encoded string of profile directory for use with remote WebDriver JSON wire protocol</p>
</li>
<li><p><code>native_events_enabled</code></p>
</li>
<li><p><code>path</code></p>
<p>Gets the profile directory that is currently being used</p>
</li>
<li><p><code>port</code></p>
<p>Gets the port that WebDriver is working on</p>
</li>
</ul>
<h2 id="Firefox-WebDriver-Binary"><a href="#Firefox-WebDriver-Binary" class="headerlink" title="Firefox WebDriver Binary"></a>Firefox WebDriver Binary</h2><p><em>class</em> <code>selenium.webdriver.firefox.firefox_binary.FirefoxBinary</code>(<em>firefox_path=None</em>, <em>log_file=None</em>)</p>
<p>Bases: <code>object</code></p>
<ul>
<li><p><code>__init__</code>(<em>firefox_path=None</em>, <em>log_file=None</em>)</p>
<p>Creates a new instance of Firefox binary.</p>
<p>Args:firefox_path - Path to the Firefox executable. By default, it will be detected from the standard locations.</p>
<p>log_file - A file object to redirect the firefox process output to. It can be sys.stdout.Please note that with parallel run the output won’t be synchronous. By default, it will be redirected to /dev/null.</p>
</li>
<li><p><code>add_command_line_options</code>(<em>*args</em>)</p>
</li>
<li><p><code>kill</code>()</p>
<p>Kill the browser.This is useful when the browser is stuck.</p>
</li>
<li><p><code>launch_browser</code>(<em>profile</em>, <em>timeout=30</em>)</p>
<p>Launches the browser for the given profile name. It is assumed the profile already exists.</p>
</li>
<li><p><code>which</code>(<em>fname</em>)</p>
<p>Returns the fully qualified path by searching Path of the given name</p>
</li>
<li><p><code>NO_FOCUS_LIBRARY_NAME</code> <em>= ‘x_ignore_nofocus.so’</em></p>
</li>
</ul>
<h2 id="Firefox-WebDriver-Extension-Connection"><a href="#Firefox-WebDriver-Extension-Connection" class="headerlink" title="Firefox WebDriver Extension Connection"></a>Firefox WebDriver Extension Connection</h2><ul>
<li><p><em>exception</em> <code>selenium.webdriver.firefox.extension_connection.ExtensionConnectionError</code></p>
<p>Bases: <code>Exception</code>An internal error occurred int the extension.Might be caused by bad input or bugs in webdriver</p>
</li>
<li><p><em>class</em> <code>selenium.webdriver.firefox.extension_connection.ExtensionConnection</code>(<em>host</em>, <em>firefox_profile</em>, <em>firefox_binary=None</em>, <em>timeout=30</em>)</p>
<p>Bases: <a href="https://selenium-python.readthedocs.io/api.html#selenium.webdriver.remote.remote_connection.RemoteConnection" target="_blank" rel="noopener"><code>selenium.webdriver.remote.remote_connection.RemoteConnection</code></a></p>
<ul>
<li><p><code>__init__</code>(<em>host</em>, <em>firefox_profile</em>, <em>firefox_binary=None</em>, <em>timeout=30</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><code>connect</code>()</p>
<p>Connects to the extension and retrieves the session id.</p>
</li>
<li><p><em>classmethod</em> <code>connect_and_quit</code>()</p>
<p>Connects to an running browser and quit immediately.</p>
</li>
<li><p><em>classmethod</em> <code>is_connectable</code>()</p>
<p>Trys to connect to the extension but do not retrieve context.</p>
</li>
<li><p><code>quit</code>(<em>sessionId=None</em>)</p>
</li>
</ul>
</li>
</ul>
<h2 id="Chrome-WebDriver"><a href="#Chrome-WebDriver" class="headerlink" title="Chrome WebDriver"></a>Chrome WebDriver</h2><ul>
<li><p><em>class</em> <code>selenium.webdriver.chrome.webdriver.WebDriver</code>(<em>executable_path=’chromedriver’</em>, <em>port=0</em>, <em>options=None</em>, <em>service_args=None</em>, <em>desired_capabilities=None</em>, <em>service_log_path=None</em>, <em>chrome_options=None</em>, <em>keep_alive=True</em>)</p>
<p>Bases: <a href="https://selenium-python.readthedocs.io/api.html#selenium.webdriver.remote.webdriver.WebDriver" target="_blank" rel="noopener"><code>selenium.webdriver.remote.webdriver.WebDriver</code></a></p>
<p>Controls the ChromeDriver and allows you to drive the browser.</p>
<p>You will need to download the ChromeDriver executable from <a href="http://chromedriver.storage.googleapis.com/index.html" target="_blank" rel="noopener">http://chromedriver.storage.googleapis.com/index.html</a></p>
<ul>
<li><p><code>__init__</code>(<em>executable_path=’chromedriver’</em>, <em>port=0</em>, <em>options=None</em>, <em>service_args=None</em>, <em>desired_capabilities=None</em>, <em>service_log_path=None</em>, <em>chrome_options=None</em>, <em>keep_alive=True</em>)</p>
<p>Creates a new instance of the chrome driver.</p>
<p>Starts the service and then creates new instance of chrome driver.</p>
<p>Args:executable_path - path to the executable. If the default is used it assumes the executable is in the $PATH</p>
<p>port - port you would like the service to run, if left as 0, a free port will be found.</p>
<p>options - this takes an instance of ChromeOptions</p>
<p>service_args - List of args to pass to the driver service</p>
<p>desired_capabilities - Dictionary object with non-browser specific capabilities only, such as “proxy” or “loggingPref”.</p>
<p>service_log_path - Where to log information from the driver.</p>
<p>chrome_options - Deprecated argument for options</p>
<p>keep_alive - Whether to configure ChromeRemoteConnection to use HTTP keep-alive.</p>
</li>
<li><p><code>create_options</code>()</p>
</li>
<li><p><code>execute_cdp_cmd</code>(<em>cmd</em>, <em>cmd_args</em>)</p>
<p>Execute Chrome Devtools Protocol command and get returned result</p>
<p>The command and command args should follow chrome devtools protocol domains/commands, refer to link <a href="https://chromedevtools.github.io/devtools-protocol/" target="_blank" rel="noopener">https://chromedevtools.github.io/devtools-protocol/</a></p>
<p>Args:cmd: A str, command name</p>
<p>cmd_args: A dict, command args. empty dict {} if there is no command args</p>
<p>Usage:driver.execute_cdp_cmd(‘Network.getResponseBody’, {‘requestId’: requestId})</p>
<p>Returns:A dict, empty dict {} if there is no result to return. For example to getResponseBody:{‘base64Encoded’: False, ‘body’: ‘response body string’}</p>
</li>
<li><p><code>get_network_conditions</code>()</p>
<p>Gets Chrome network emulation settings.</p>
<p>Returns:A dict. For example:{‘latency’: 4, ‘download_throughput’: 2, ‘upload_throughput’: 2, ‘offline’: False}</p>
</li>
<li><p><code>launch_app</code>(<em>id</em>)</p>
<p>Launches Chrome app specified by id.</p>
</li>
<li><p><code>quit</code>()</p>
<p>Closes the browser and shuts down the ChromeDriver executable that is started when starting the ChromeDriver</p>
</li>
<li><p><code>set_network_conditions</code>(<em>**network_conditions</em>)</p>
<p>Sets Chrome network emulation settings.</p>
<p>Args:network_conditions: A dict with conditions specification.</p>
<p>Usage:<br>driver.set_network_conditions(offline=False, latency=5, # additional latency (ms) </p>
<p>download_throughput=500 * 1024, # maximal throughput </p>
<p>upload_throughput=500 * 1024) # maximal throughputNote: ‘throughput’ can be used to set both (for download and upload).</p>
</li>
</ul>
</li>
</ul>
<h2 id="Chrome-WebDriver-Service"><a href="#Chrome-WebDriver-Service" class="headerlink" title="Chrome WebDriver Service"></a>Chrome WebDriver Service</h2><p><em>class</em> <code>selenium.webdriver.chrome.service.Service</code>(<em>executable_path</em>, <em>port=0</em>, <em>service_args=None</em>, <em>log_path=None</em>, <em>env=None</em>)</p>
<p>Bases: <a href="https://selenium-python.readthedocs.io/api.html#selenium.webdriver.common.service.Service" target="_blank" rel="noopener"><code>selenium.webdriver.common.service.Service</code></a></p>
<p>Object that manages the starting and stopping of the ChromeDriver</p>
<ul>
<li><p><code>__init__</code>(<em>executable_path</em>, <em>port=0</em>, <em>service_args=None</em>, <em>log_path=None</em>, <em>env=None</em>)</p>
<p>Creates a new instance of the Service</p>
<p>Args:executable_path : Path to the ChromeDriver</p>
<p>port : Port the service is running on</p>
<p>service_args : List of args to pass to the chromedriver service</p>
<p>log_path : Path for the chromedriver service to log to</p>
</li>
<li><p><code>command_line_args</code>()</p>
</li>
</ul>
<h2 id="Remote-WebDriver"><a href="#Remote-WebDriver" class="headerlink" title="Remote WebDriver"></a>Remote WebDriver</h2><p>The WebDriver implementation.</p>
<ul>
<li><p><em>class</em> <code>selenium.webdriver.remote.webdriver.WebDriver</code>(<em>command_executor=’<a href="http://127.0.0.1:4444/wd/hub'" target="_blank" rel="noopener">http://127.0.0.1:4444/wd/hub'</a></em>, <em>desired_capabilities=None</em>, <em>browser_profile=None</em>, <em>proxy=None</em>, <em>keep_alive=False</em>, <em>file_detector=None</em>, <em>options=None</em>)</p>
<p>Bases: <code>object</code></p>
<p>Controls a browser by sending commands to a remote server. This server is expected to be running the WebDriver wire protocol as defined at <a href="https://github.com/SeleniumHQ/selenium/wiki/JsonWireProtocol" target="_blank" rel="noopener">https://github.com/SeleniumHQ/selenium/wiki/JsonWireProtocol</a></p>
<p>Attributes:session_id - String ID of the browser session started and controlled by this WebDriver.capabilities - Dictionaty of effective capabilities of this browser session as returnedby the remote server. See <a href="https://github.com/SeleniumHQ/selenium/wiki/DesiredCapabilitiescommand_executor" target="_blank" rel="noopener">https://github.com/SeleniumHQ/selenium/wiki/DesiredCapabilitiescommand_executor</a> - remote_connection.RemoteConnection object used to execute commands.error_handler - errorhandler.ErrorHandler object used to handle errors.</p>
<ul>
<li><p><code>__init__</code>(<em>command_executor=’<a href="http://127.0.0.1:4444/wd/hub'" target="_blank" rel="noopener">http://127.0.0.1:4444/wd/hub'</a></em>, <em>desired_capabilities=None</em>, <em>browser_profile=None</em>, <em>proxy=None</em>, <em>keep_alive=False</em>, <em>file_detector=None</em>, <em>options=None</em>)</p>
<p>Create a new driver that will issue commands using the wire protocol.</p>
<p>Args:command_executor - Either a string representing URL of the remote server or a customremote_connection.RemoteConnection object. Defaults to ‘<a href="http://127.0.0.1:4444/wd/hub’" target="_blank" rel="noopener">http://127.0.0.1:4444/wd/hub’</a>.</p>
<p>desired_capabilities - A dictionary of capabilities to request whenstarting the browser session. Required parameter.</p>
<p>browser_profile - A selenium.webdriver.firefox.firefox_profile.FirefoxProfile object.Only used if Firefox is requested. Optional.</p>
<p>proxy - A selenium.webdriver.common.proxy.Proxy object. The browser session willbe started with given proxy settings, if possible. Optional.</p>
<p>keep_alive - Whether to configure remote_connection.RemoteConnection to useHTTP keep-alive. Defaults to False.</p>
<p>file_detector - Pass custom file detector object during instantiation. If None,then default LocalFileDetector() will be used.</p>
<p>options - instance of a driver options.Options class</p>
</li>
<li><p><code>add_cookie</code>(<em>cookie_dict</em>)</p>
<p>Adds a cookie to your current session.</p>
<p>Args:cookie_dict: A dictionary object, with required keys - “name” and “value”;</p>
<p>optional keys - “path”, “domain”, “secure”, “expiry”Usage:driver.add_cookie({‘name’ : ‘foo’, ‘value’ : ‘bar’}) driver.add_cookie({‘name’ : ‘foo’, ‘value’ : ‘bar’, ‘path’ : ‘/’}) driver.add_cookie({‘name’ : ‘foo’, ‘value’ : ‘bar’, ‘path’ : ‘/’, ‘secure’:True})</p>
</li>
<li><p><code>back</code>()</p>
<p>Goes one step backward in the browser history.Usage:driver.back()</p>
</li>
<li><p><code>close</code>()</p>
<p>Closes the current window.Usage:driver.close()</p>
</li>
<li><p><code>create_web_element</code>(<em>element_id</em>)</p>
<p>Creates a web element with the specified element_id.</p>
</li>
<li><p><code>delete_all_cookies</code>()</p>
<p>Delete all cookies in the scope of the session.Usage:driver.delete_all_cookies()</p>
</li>
<li><p><code>delete_cookie</code>(<em>name</em>)</p>
<p>Deletes a single cookie with the given name.Usage:driver.delete_cookie(‘my_cookie’)</p>
</li>
<li><p><code>execute</code>(<em>driver_command</em>, <em>params=None</em>)</p>
<p>Sends a command to be executed by a command.CommandExecutor.</p>
<p>Args:driver_command: The name of the command to execute as a string.</p>
<p>params: A dictionary of named parameters to send with the command.</p>
<p>Returns:The command’s JSON response loaded into a dictionary object.</p>
</li>
<li><p><code>execute_async_script</code>(<em>script</em>, <em>*args</em>)</p>
<p>Asynchronously Executes JavaScript in the current window/frame.</p>
<p>Args:script: The JavaScript to execute.</p>
<p>*args: Any applicable arguments for your JavaScript.</p>
<p>Usage:</p>
<p>script = “var callback = arguments[arguments.length - 1]; ” “window.setTimeout(function(){ callback(‘timeout’) }, 3000);”<br>driver.execute_async_script(script)</p>
</li>
<li><p><code>execute_script</code>(<em>script</em>, <em>*args</em>)</p>
<p>Synchronously Executes JavaScript in the current window/frame.</p>
<p>Args:script: The JavaScript to execute.</p>
<p>*args: Any applicable arguments for your JavaScript.</p>
<p>Usage:driver.execute_script(‘return document.title;’)</p>
</li>
<li><p><code>file_detector_context</code>(<em>file_detector_class</em>, <em>\</em>args<em>, <em>\</em>*kwargs</em>)</p>
<p>Overrides the current file detector (if necessary) in limited context. Ensures the original file detector is set afterwards.Example:with webdriver.file_detector_context(UselessFileDetector):someinput.send_keys(‘/etc/hosts’)</p>
<p>Args:file_detector_class - Class of the desired file detector. If the class is differentfrom the current file_detector, then the class is instantiated with args and kwargs and used as a file detector during the duration of the context manager.</p>
<p>args - Optional arguments that get passed to the file detector class duringinstantiation.</p>
<p>kwargs - Keyword arguments, passed the same way as args.</p>
</li>
<li><p><code>find_element</code>(<em>by=’id’</em>, <em>value=None</em>)</p>
<p>Find an element given a By strategy and locator. Prefer the find_element_by_* methods when possible.</p>
<p>Usage:<br>element = driver.find_element(By.ID, ‘foo’)</p>
<p>Return type:<a href="https://selenium-python.readthedocs.io/api.html#selenium.webdriver.remote.webelement.WebElement" target="_blank" rel="noopener">WebElement</a></p>
</li>
<li><p><code>find_element_by_class_name</code>(<em>name</em>)</p>
<p>Finds an element by class name.</p>
<p>Args:name: The class name of the element to find.</p>
<p>Returns:WebElement - the element if it was foundRaises:NoSuchElementException - if the element wasn’t found</p>
<p>Usage:<br>element = driver.find_element_by_class_name(‘foo’)</p>
</li>
<li><p><code>find_element_by_css_selector</code>(<em>css_selector</em>)</p>
<p>Finds an element by css selector.</p>
<p>Args:css_selector - CSS selector string, ex: ‘a.nav#home’</p>
<p>Returns:WebElement - the element if it was foundRaises:NoSuchElementException - if the element wasn’t found</p>
<p>Usage:<br>element = driver.find_element_by_css_selector(‘#foo’)</p>
</li>
<li><p><code>find_element_by_id</code>(<em>id_</em>)</p>
<p>Finds an element by id.</p>
<p>Args:id_ - The id of the element to be found.</p>
<p>Returns:WebElement - the element if it was foundRaises:NoSuchElementException - if the element wasn’t found</p>
<p>Usage:<br>element = driver.find_element_by_id(‘foo’)</p>
</li>
<li><p><code>find_element_by_link_text</code>(<em>link_text</em>)</p>
<p>Finds an element by link text.</p>
<p>Args:link_text: The text of the element to be found.</p>
<p>Returns:WebElement - the element if it was foundRaises:NoSuchElementException - if the element wasn’t found</p>
<p>Usage:<br>element = driver.find_element_by_link_text(‘Sign In’)</p>
</li>
<li><p><code>find_element_by_name</code>(<em>name</em>)</p>
<p>Finds an element by name.</p>
<p>Args:name: The name of the element to find.</p>
<p>Returns:WebElement - the element if it was foundRaises:NoSuchElementException - if the element wasn’t found</p>
<p>Usage:<br>element = driver.find_element_by_name(‘foo’)</p>
</li>
<li><p><code>find_element_by_partial_link_text</code>(<em>link_text</em>)</p>
<p>Finds an element by a partial match of its link text.</p>
<p>Args:link_text: The text of the element to partially match on.</p>
<p>Returns:WebElement - the element if it was foundRaises:NoSuchElementException - if the element wasn’t found</p>
<p>Usage:<br>element = driver.find_element_by_partial_link_text(‘Sign’)</p>
</li>
<li><p><code>find_element_by_tag_name</code>(<em>name</em>)</p>
<p>Finds an element by tag name.</p>
<p>Args:name - name of html tag (eg: h1, a, span)</p>
<p>Returns:WebElement - the element if it was foundRaises:NoSuchElementException - if the element wasn’t found</p>
<p>Usage:<br>element = driver.find_element_by_tag_name(‘h1’)</p>
</li>
<li><p><code>find_element_by_xpath</code>(<em>xpath</em>)</p>
<p>Finds an element by xpath.</p>
<p>Args:xpath - The xpath locator of the element to find.</p>
<p>Returns:WebElement - the element if it was foundRaises:NoSuchElementException - if the element wasn’t found</p>
<p>Usage:<br>element = driver.find_element_by_xpath(‘//div/td[1]’)</p>
</li>
<li><p><code>find_elements</code>(<em>by=’id’</em>, <em>value=None</em>)</p>
<p>Find elements given a By strategy and locator. Prefer the find_elements_by_* methods when possible.</p>
<p>Usage:<br>elements = driver.find_elements(By.CLASS_NAME, ‘foo’)</p>
<p>Return type:list of WebElement</p>
</li>
<li><p><code>find_elements_by_class_name</code>(<em>name</em>)</p>
<p>Finds elements by class name.</p>
<p>Args:name: The class name of the elements to find.</p>
<p>Returns:list of WebElement - a list with elements if any was found. An empty list if not</p>
<p>Usage:elements = driver.find_elements_by_class_name(‘foo’)</p>
</li>
<li><p><code>find_elements_by_css_selector</code>(<em>css_selector</em>)</p>
<p>Finds elements by css selector.</p>
<p>Args:css_selector - CSS selector string, ex: ‘a.nav#home’</p>
<p>Returns:list of WebElement - a list with elements if any was found. An empty list if not</p>
<p>Usage:elements = driver.find_elements_by_css_selector(‘.foo’)</p>
</li>
<li><p><code>find_elements_by_id</code>(<em>id_</em>)</p>
<p>Finds multiple elements by id.</p>
<p>Args:id_ - The id of the elements to be found.</p>
<p>Returns:list of WebElement - a list with elements if any was found. An empty list if not</p>
<p>Usage:elements = driver.find_elements_by_id(‘foo’)</p>
</li>
<li><p><code>find_elements_by_link_text</code>(<em>text</em>)</p>
<p>Finds elements by link text.</p>
<p>Args:link_text: The text of the elements to be found.</p>
<p>Returns:list of webelement - a list with elements if any was found. an empty list if not</p>
<p>Usage:elements = driver.find_elements_by_link_text(‘Sign In’)</p>
</li>
<li><p><code>find_elements_by_name</code>(<em>name</em>)</p>
<p>Finds elements by name.</p>
<p>Args:name: The name of the elements to find.</p>
<p>Returns:list of webelement - a list with elements if any was found. an empty list if not</p>
<p>Usage:elements = driver.find_elements_by_name(‘foo’)</p>
</li>
<li><p><code>find_elements_by_partial_link_text</code>(<em>link_text</em>)</p>
<p>Finds elements by a partial match of their link text.</p>
<p>Args:link_text: The text of the element to partial match on.</p>
<p>Returns:list of webelement - a list with elements if any was found. an empty list if not</p>
<p>Usage:elements = driver.find_elements_by_partial_link_text(‘Sign’)</p>
</li>
<li><p><code>find_elements_by_tag_name</code>(<em>name</em>)</p>
<p>Finds elements by tag name.</p>
<p>Args:name - name of html tag (eg: h1, a, span)</p>
<p>Returns:list of WebElement - a list with elements if any was found. An empty list if not</p>
<p>Usage:elements = driver.find_elements_by_tag_name(‘h1’)</p>
</li>
<li><p><code>find_elements_by_xpath</code>(<em>xpath</em>)</p>
<p>Finds multiple elements by xpath.</p>
<p>Args:xpath - The xpath locator of the elements to be found.</p>
<p>Returns:list of WebElement - a list with elements if any was found. An empty list if not</p>
<p>Usage:elements = driver.find_elements_by_xpath(“//div[contains(@class, ‘foo’)]”)</p>
</li>
<li><p><code>forward</code>()</p>
<p>Goes one step forward in the browser history.</p>
<p>Usage:driver.forward()</p>
</li>
<li><p><code>fullscreen_window</code>()</p>
<p>Invokes the window manager-specific ‘full screen’ operation</p>
</li>
<li><p><code>get</code>(<em>url</em>)</p>
<p>Loads a web page in the current browser session.</p>
</li>
<li><p><code>get_cookie</code>(<em>name</em>)</p>
<p>Get a single cookie by name. </p>
<p>Returns the cookie if found, None if not.</p>
<p>Usage:driver.get_cookie(‘my_cookie’)</p>
</li>
<li><p><code>get_cookies</code>()</p>
<p>Returns a set of dictionaries, corresponding to cookies visible in the current session.</p>
<p>Usage:driver.get_cookies()</p>
</li>
<li><p><code>get_log</code>(<em>log_type</em>)</p>
<p>Gets the log for a given log type</p>
<p>Args:log_type: type of log that which will be returned</p>
<p>Usage:<br>driver.get_log(‘browser’)<br>driver.get_log(‘driver’)<br>driver.get_log(‘client’)<br>driver.get_log(‘server’)</p>
</li>
<li><p><code>get_screenshot_as_base64</code>()</p>
<p>Gets the screenshot of the current window as a base64 encoded stringwhich is useful in embedded images in HTML.</p>
<p>Usage:driver.get_screenshot_as_base64()</p>
</li>
<li><p><code>get_screenshot_as_file</code>(<em>filename</em>)</p>
<p>Saves a screenshot of the current window to a PNG image file. ReturnsFalse if there is any IOError, else returns True. Use full paths in your filename.</p>
<p>Args:filename: The full path you wish to save your screenshot to. This should end with a .png extension.Usage:driver.get_screenshot_as_file(‘/Screenshots/foo.png’)</p>
</li>
<li><p><code>get_screenshot_as_png</code>()</p>
<p>Gets the screenshot of the current window as a binary data.</p>
<p>Usage:driver.get_screenshot_as_png()</p>
</li>
<li><p><code>get_window_position</code>(<em>windowHandle=’current’</em>)</p>
<p>Gets the x,y position of the current window.</p>
<p>Usage:driver.get_window_position()</p>
</li>
<li><p><code>get_window_rect</code>()</p>
<p>Gets the x, y coordinates of the window as well as height and width of the current window.</p>
<p>Usage:driver.get_window_rect()</p>
</li>
<li><p><code>get_window_size</code>(<em>windowHandle=’current’</em>)</p>
<p>Gets the width and height of the current window.</p>
<p>Usage:driver.get_window_size()</p>
</li>
<li><p><code>implicitly_wait</code>(<em>time_to_wait</em>)</p>
<p>Sets a sticky timeout to implicitly wait for an element to be found,or a command to complete. This method only needs to be called one time per session. To set the timeout for calls to execute_async_script, see set_script_timeout.</p>
<p>Args:time_to_wait: Amount of time to wait (in seconds)</p>
<p>Usage:<br>driver.implicitly_wait(30)</p>
</li>
<li><p><code>maximize_window</code>()</p>
<p>Maximizes the current window that webdriver is using</p>
</li>
<li><p><code>minimize_window</code>()</p>
<p>Invokes the window manager-specific ‘minimize’ operation</p>
</li>
<li><p><code>quit</code>()</p>
<p>Quits the driver and closes every associated window.</p>
<p>Usage:<br>driver.quit()</p>
</li>
<li><p><code>refresh</code>()</p>
<p>Refreshes the current page.Usage:driver.refresh()</p>
</li>
<li><p><code>save_screenshot</code>(<em>filename</em>)</p>
<p>Saves a screenshot of the current window to a PNG image file. ReturnsFalse if there is any IOError, else returns True. Use full paths in your filename.</p>
<p>Args:filename: The full path you wish to save your screenshot to. This should end with a .png extension.</p>
<p>Usage:<br>driver.save_screenshot(‘/Screenshots/foo.png’)</p>
</li>
<li><p><code>set_page_load_timeout</code>(<em>time_to_wait</em>)</p>
<p>Set the amount of time to wait for a page load to completebefore throwing an error.</p>
<p>Args:time_to_wait: The amount of time to wait</p>
<p>Usage:<br>driver.set_page_load_timeout(30)</p>
</li>
<li><p><code>set_script_timeout</code>(<em>time_to_wait</em>)</p>
<p>Set the amount of time that the script should wait during anexecute_async_script call before throwing an error.</p>
<p>Args:time_to_wait: The amount of time to wait (in seconds)</p>
<p>Usage:<br>driver.set_script_timeout(30)</p>
</li>
<li><p><code>set_window_position</code>(<em>x</em>, <em>y</em>, <em>windowHandle=’current’</em>)</p>
<p>Sets the x,y position of the current window. (window.moveTo)</p>
<p>Args:x: the x-coordinate in pixels to set the window positiony: the y-coordinate in pixels to set the window position</p>
<p>Usage:<br>driver.set_window_position(0,0)</p>
</li>
<li><p><code>set_window_rect</code>(<em>x=None</em>, <em>y=None</em>, <em>width=None</em>, <em>height=None</em>)</p>
<p>Sets the x, y coordinates of the window as well as height and width of the current window.</p>
<p>Usage:<br>driver.set_window_rect(x=10, y=10)<br>driver.set_window_rect(width=100, height=200)<br>driver.set_window_rect(x=10, y=10, width=100, height=200)</p>
</li>
<li><p><code>set_window_size</code>(<em>width</em>, <em>height</em>, <em>windowHandle=’current’</em>)</p>
<p>Sets the width and height of the current window. (window.resizeTo)</p>
<p>Args:width: the width in pixels to set the window toheight: the height in pixels to set the window to</p>
<p>Usage:driver.set_window_size(800,600)</p>
</li>
<li><p><code>start_client</code>()</p>
<p>Called before starting a new session. This method may be overridden to define custom startup behavior.</p>
</li>
<li><p><code>start_session</code>(<em>capabilities</em>, <em>browser_profile=None</em>)</p>
<p>Creates a new session with the desired capabilities.</p>
<p>Args:browser_name - The name of the browser to request.version - Which browser version to request.platform - Which platform to request the browser on.javascript_enabled - Whether the new session should support JavaScript.</p>
<p>browser_profile - A selenium.webdriver.firefox.firefox_profile.FirefoxProfile object. Only used if Firefox is requested.</p>
</li>
<li><p><code>stop_client</code>()</p>
<p>Called after executing a quit command. This method may be overridden to define custom shutdown behavior.</p>
</li>
<li><p><code>switch_to_active_element</code>()</p>
<p>Deprecated use driver.switch_to.active_element</p>
</li>
<li><p><code>switch_to_alert</code>()</p>
<p>Deprecated use driver.switch_to.alert</p>
</li>
<li><p><code>switch_to_default_content</code>()</p>
<p>Deprecated use driver.switch_to.default_content</p>
</li>
<li><p><code>switch_to_frame</code>(<em>frame_reference</em>)</p>
<p>Deprecated use driver.switch_to.frame</p>
</li>
<li><p><code>switch_to_window</code>(<em>window_name</em>)</p>
<p>Deprecated use driver.switch_to.window</p>
</li>
<li><p><code>application_cache</code></p>
<p>Returns a ApplicationCache Object to interact with the browser app cache</p>
</li>
<li><p><code>current_url</code></p>
<p>Gets the URL of the current page.</p>
<p>Usage:<br>driver.current_url</p>
</li>
<li><p><code>current_window_handle</code></p>
<p>Returns the handle of the current window.</p>
<p>Usage:<br>driver.current_window_handle</p>
</li>
<li><p><code>desired_capabilities</code></p>
<p>returns the drivers current desired capabilities being used</p>
</li>
<li><p><code>file_detector</code></p>
</li>
<li><p><code>log_types</code></p>
<p>Gets a list of the available log types</p>
<p>Usage:<br>driver.log_types</p>
</li>
<li><p><code>mobile</code></p>
</li>
<li><p><code>name</code></p>
<p>Returns the name of the underlying browser for this instance.</p>
<p>Usage:<br>name = driver.name</p>
</li>
<li><p><code>orientation</code></p>
<p>Gets the current orientation of the device</p>
<p>Usage:<br>orientation = driver.orientation</p>
</li>
<li><p><code>page_source</code></p>
<p>Gets the source of the current page.Usage:driver.page_source</p>
</li>
<li><p><code>switch_to</code></p>
<p>Returns:SwitchTo: an object containing all options to switch focus into</p>
<p>Usage:</p>
<pre class="line-numbers language-python"><code class="language-python">element <span class="token operator">=</span> driver<span class="token punctuation">.</span>switch_to<span class="token punctuation">.</span>active_element 
alert <span class="token operator">=</span> driver<span class="token punctuation">.</span>switch_to<span class="token punctuation">.</span>alert 
driver<span class="token punctuation">.</span>switch_to<span class="token punctuation">.</span>default_content<span class="token punctuation">(</span><span class="token punctuation">)</span> 
driver<span class="token punctuation">.</span>switch_to<span class="token punctuation">.</span>frame<span class="token punctuation">(</span>‘frame_name’<span class="token punctuation">)</span> 
driver<span class="token punctuation">.</span>switch_to<span class="token punctuation">.</span>frame<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> 
driver<span class="token punctuation">.</span>switch_to<span class="token punctuation">.</span>frame<span class="token punctuation">(</span>driver<span class="token punctuation">.</span>find_elements_by_tag_name<span class="token punctuation">(</span>“iframe”<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> 
driver<span class="token punctuation">.</span>switch_to<span class="token punctuation">.</span>parent_frame<span class="token punctuation">(</span><span class="token punctuation">)</span> driver<span class="token punctuation">.</span>switch_to<span class="token punctuation">.</span>window<span class="token punctuation">(</span>‘main’<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
</ul>
</li>
</ul>
<ul>
<li><p><code>title</code></p>
<p>Returns the title of the current page.</p>
<p>Usage:</p>
<p>title = driver.title</p>
</li>
<li><p><code>window_handles</code></p>
<p>Returns the handles of all windows within the current session.</p>
<p>Usage:<br>driver.window_handles</p>
</li>
</ul>
<h2 id="Remote-WebDriver-WebElement"><a href="#Remote-WebDriver-WebElement" class="headerlink" title="Remote WebDriver WebElement"></a>Remote WebDriver WebElement</h2><p><em>class</em> <code>selenium.webdriver.remote.webelement.WebElement</code>(<em>parent</em>, <em>id_</em>, <em>w3c=False</em>)</p>
<p>Bases: <code>object</code></p>
<p>Represents a DOM element.</p>
<p>Generally, all interesting operations that interact with a document will be performed through this interface.</p>
<p>All method calls will do a freshness check to ensure that the element reference is still valid. This essentially determines whether or not the element is still attached to the DOM. If this test fails, then an <code>StaleElementReferenceException</code> is thrown, and all future calls to this instance will fail.</p>
<ul>
<li><p><code>__init__</code>(<em>parent</em>, <em>id_</em>, <em>w3c=False</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><code>clear</code>()</p>
<p>Clears the text if it’s a text entry element.</p>
</li>
<li><p><code>click</code>()</p>
<p>Clicks the element.</p>
</li>
<li><p><code>find_element</code>(<em>by=’id’</em>, <em>value=None</em>)</p>
<p>Find an element given a By strategy and locator. Prefer the find_element_by_* methods when possible.</p>
<p>Usage:<br>element = element.find_element(By.ID, ‘foo’)</p>
<p>Return type:<a href="https://selenium-python.readthedocs.io/api.html#selenium.webdriver.remote.webelement.WebElement" target="_blank" rel="noopener">WebElement</a></p>
</li>
<li><p><code>find_element_by_class_name</code>(<em>name</em>)</p>
<p>Finds element within this element’s children by class name.</p>
<p>Args:name: The class name of the element to find.</p>
<p>Returns:WebElement - the element if it was foundRaises:NoSuchElementException - if the element wasn’t found</p>
<p>Usage:<br>element = element.find_element_by_class_name(‘foo’)</p>
</li>
<li><p><code>find_element_by_css_selector</code>(<em>css_selector</em>)</p>
<p>Finds element within this element’s children by CSS selector.</p>
<p>Args:css_selector - CSS selector string, ex: ‘a.nav#home’</p>
<p>Returns:WebElement - the element if it was foundRaises:NoSuchElementException - if the element wasn’t found</p>
<p>Usage:<br>element = element.find_element_by_css_selector(‘#foo’)</p>
</li>
<li><p><code>find_element_by_id</code>(<em>id_</em>)</p>
<p>Finds element within this element’s children by ID.</p>
<p>Args:id_ - ID of child element to locate.</p>
<p>Returns:WebElement - the element if it was found</p>
<p>Raises:NoSuchElementException - if the element wasn’t found</p>
<p>Usage:<br>foo_element = element.find_element_by_id(‘foo’)</p>
</li>
<li><p><code>find_element_by_link_text</code>(<em>link_text</em>)</p>
<p>Finds element within this element’s children by visible link text.</p>
<p>Args:link_text - Link text string to search for.</p>
<p>Returns:WebElement - the element if it was foundRaises:NoSuchElementException - if the element wasn’t found</p>
<p>Usage:element = element.find_element_by_link_text(‘Sign In’)</p>
</li>
<li><p><code>find_element_by_name</code>(<em>name</em>)</p>
<p>Finds element within this element’s children by name.</p>
<p>Args:name - name property of the element to find.</p>
<p>Returns:WebElement - the element if it was foundRaises:NoSuchElementException - if the element wasn’t found</p>
<p>Usage:element = element.find_element_by_name(‘foo’)</p>
</li>
<li><p><code>find_element_by_partial_link_text</code>(<em>link_text</em>)</p>
<p>Finds element within this element’s children by partially visible link text.</p>
<p>Args:link_text: The text of the element to partially match on.</p>
<p>Returns:WebElement - the element if it was found</p>
<p>Raises:NoSuchElementException - if the element wasn’t foundUsage:element = element.find_element_by_partial_link_text(‘Sign’)</p>
</li>
<li><p><code>find_element_by_tag_name</code>(<em>name</em>)</p>
<p>Finds element within this element’s children by tag name.</p>
<p>Args:name - name of html tag (eg: h1, a, span)</p>
<p>Returns:WebElement - the element if it was foundRaises:NoSuchElementException - if the element wasn’t found</p>
<p>Usage:<br>element = element.find_element_by_tag_name(‘h1’)</p>
</li>
<li><p><code>find_element_by_xpath</code>(<em>xpath</em>)</p>
<p>Finds element by xpath.</p>
<p>Args:xpath - xpath of element to locate. “//input[@class=’myelement’]”Note: The base path will be relative to this element’s location.This will select the first link under this element.<code>myelement.find_element_by_xpath(".//a")</code>However, this will select the first link on the page.<code>myelement.find_element_by_xpath("//a")</code></p>
<p>Returns:WebElement - the element if it was foundRaises:NoSuchElementException - if the element wasn’t found</p>
<p>Usage:<br>element = element.find_element_by_xpath(‘//div/td[1]’)</p>
</li>
<li><p><code>find_elements</code>(<em>by=’id’</em>, <em>value=None</em>)</p>
<p>Find elements given a By strategy and locator. Prefer the find_elements_by_* methods when possible.</p>
<p>Usage:<br>element = element.find_elements(By.CLASS_NAME, ‘foo’)</p>
<p>Return type:list of WebElement</p>
</li>
<li><p><code>find_elements_by_class_name</code>(<em>name</em>)</p>
<p>Finds a list of elements within this element’s children by class name.</p>
<p>Args:name: The class name of the elements to find.</p>
<p>Returns:list of WebElement - a list with elements if any was found. An empty list if not</p>
<p>Usage:<br>elements = element.find_elements_by_class_name(‘foo’)</p>
</li>
<li><p><code>find_elements_by_css_selector</code>(<em>css_selector</em>)</p>
<p>Finds a list of elements within this element’s children by CSS selector.</p>
<p>Args:css_selector - CSS selector string, ex: ‘a.nav#home’</p>
<p>Returns:list of WebElement - a list with elements if any was found. An empty list if not</p>
<p>Usage:<br>elements = element.find_elements_by_css_selector(‘.foo’)</p>
</li>
<li><p><code>find_elements_by_id</code>(<em>id_</em>)</p>
<p>Finds a list of elements within this element’s children by ID. Will return a list of webelements if found, or an empty list if not.</p>
<p>Args:id_ - Id of child element to find.</p>
<p>Returns:list of WebElement - a list with elements if any was found. An empty list if not</p>
<p>Usage:<br>elements = element.find_elements_by_id(‘foo’)</p>
</li>
<li><p><code>find_elements_by_link_text</code>(<em>link_text</em>)</p>
<p>Finds a list of elements within this element’s children by visible link text.</p>
<p>Args:link_text - Link text string to search for.</p>
<p>Returns:list of webelement - a list with elements if any was found. an empty list if not</p>
<p>Usage:<br>elements = element.find_elements_by_link_text(‘Sign In’)</p>
</li>
<li><p><code>find_elements_by_name</code>(<em>name</em>)</p>
<p>Finds a list of elements within this element’s children by name.</p>
<p>Args:name - name property to search for.</p>
<p>Returns:list of webelement - a list with elements if any was found. an empty list if not</p>
<p>Usage:<br>elements = element.find_elements_by_name(‘foo’)</p>
</li>
<li><p><code>find_elements_by_partial_link_text</code>(<em>link_text</em>)</p>
<p>Finds a list of elements within this element’s children by link text.</p>
<p>Args:link_text: The text of the element to partial match on.</p>
<p>Returns:list of webelement - a list with elements if any was found. an empty list if not</p>
<p>Usage:<br>elements = element.find_elements_by_partial_link_text(‘Sign’)</p>
</li>
<li><p><code>find_elements_by_tag_name</code>(<em>name</em>)</p>
<p>Finds a list of elements within this element’s children by tag name.</p>
<p>Args:name - name of html tag (eg: h1, a, span)</p>
<p>Returns:list of WebElement - a list with elements if any was found. An empty list if not</p>
<p>Usage:<br>elements = element.find_elements_by_tag_name(‘h1’)</p>
</li>
<li><p><code>find_elements_by_xpath</code>(<em>xpath</em>)</p>
<p>Finds elements within the element by xpath.</p>
<p>Args:xpath - xpath locator string.Note: The base path will be relative to this element’s location.This will select all links under this element.<code>myelement.find_elements_by_xpath(".//a")</code>However, this will select all links in the page itself.<code>myelement.find_elements_by_xpath("//a")</code></p>
<p>Returns:list of WebElement - a list with elements if any was found. An empty list if not</p>
<p>Usage:<br>elements = element.find_elements_by_xpath(“//div[contains(@class, ‘foo’)]”)</p>
</li>
<li><p><code>get_attribute</code>(<em>name</em>)</p>
<p>Gets the given attribute or property of the element.This method will first try to return the value of a property with the given name. If a property with that name doesn’t exist, it returns the value of the attribute with the same name. If there’s no attribute with that name, <code>None</code> is returned.Values which are considered truthy, that is equals “true” or “false”, are returned as booleans. All other non-<code>None</code> values are returned as strings. For attributes or properties which do not exist, <code>None</code> is returned.</p>
<p>Args:name - Name of the attribute/property to retrieve.</p>
<p>Example:<code># Check if the "active" CSS class is applied to an element. is_active = "active" in target_element.get_attribute("class")</code></p>
</li>
<li><p><code>get_property</code>(<em>name</em>)</p>
<p>Gets the given property of the element.</p>
<p>Args:name - Name of the property to retrieve.</p>
<p>Example:<code>text_length = target_element.get_property("text_length")</code></p>
</li>
<li><p><code>is_displayed</code>()</p>
<p>Whether the element is visible to a user.</p>
</li>
<li><p><code>is_enabled</code>()</p>
<p>Returns whether the element is enabled.</p>
</li>
<li><p><code>is_selected</code>()</p>
<p>Returns whether the element is selected.Can be used to check if a checkbox or radio button is selected.</p>
</li>
<li><p><code>screenshot</code>(<em>filename</em>)</p>
<p>Saves a screenshot of the current element to a PNG image file. ReturnsFalse if there is any IOError, else returns True. Use full paths in your filename.</p>
<p>Args:filename: The full path you wish to save your screenshot to. This should end with a .png extension.</p>
<p>Usage:<br>element.screenshot(‘/Screenshots/foo.png’)</p>
</li>
<li><p><code>send_keys</code>(<em>*value</em>)</p>
<p>Simulates typing into the element.</p>
<p>Args:value - A string for typing, or setting form fields. For setting file inputs, this could be a local file path.Use this to send simple key events or to fill out form fields:</p>
<pre class="line-numbers language-python"><code class="language-python">form_textfield <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">'username'</span><span class="token punctuation">)</span> 
form_textfield<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>This can also be used to set file inputs.</p>
<pre class="line-numbers language-python"><code class="language-python">file_input <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">'profilePic'</span><span class="token punctuation">)</span> 
file_input<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"path/to/profilepic.gif"</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># Generally it's better to wrap the file path in one of the methods </span>
<span class="token comment" spellcheck="true"># in os.path to return the actual path to support cross OS testing. </span>
<span class="token comment" spellcheck="true"># file_input.send_keys(os.path.abspath("path/to/profilepic.gif")) </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p><code>submit</code>()</p>
<p>Submits a form.</p>
</li>
<li><p><code>value_of_css_property</code>(<em>property_name</em>)</p>
<p>The value of a CSS property.</p>
</li>
<li><p><code>id</code></p>
<p>Internal ID used by selenium.This is mainly for internal use. Simple use cases such as checking if 2 webelements refer to the same element, can be done using <code>==</code>:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">if</span> element1 <span class="token operator">==</span> element2<span class="token punctuation">:</span>    
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"These 2 are equal"</span><span class="token punctuation">)</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
</li>
<li><p><code>location</code></p>
<p>The location of the element in the renderable canvas.</p>
</li>
<li><p><code>location_once_scrolled_into_view</code></p>
<p>THIS PROPERTY MAY CHANGE WITHOUT WARNING. Use this to discover where on the screen an element is so that we can click it. This method should cause the element to be scrolled into view.Returns the top lefthand corner location on the screen, or <code>None</code> if the element is not visible.</p>
</li>
<li><p><code>parent</code></p>
<p>Internal reference to the WebDriver instance this element was found from.</p>
</li>
<li><p><code>rect</code></p>
<p>A dictionary with the size and location of the element.</p>
</li>
<li><p><code>screenshot_as_base64</code></p>
<p>Gets the screenshot of the current element as a base64 encoded string.</p>
<p>Usage:<br>img_b64 = element.screenshot_as_base64</p>
</li>
<li><p><code>screenshot_as_png</code></p>
<p>Gets the screenshot of the current element as a binary data.</p>
<p>Usage:<br>element_png = element.screenshot_as_png</p>
</li>
<li><p><code>size</code></p>
<p>The size of the element.</p>
</li>
<li><p><code>tag_name</code></p>
<p>This element’s <code>tagName</code> property.</p>
</li>
<li><p><code>text</code></p>
<p>The text of the element.</p>
</li>
</ul>
<h2 id="Remote-WebDriver-Command"><a href="#Remote-WebDriver-Command" class="headerlink" title="Remote WebDriver Command"></a>Remote WebDriver Command</h2><p><em>class</em> <code>selenium.webdriver.remote.command.Command</code></p>
<p>Bases: <code>object</code></p>
<p>Defines constants for the standard WebDriver commands.</p>
<p>While these constants have no meaning in and of themselves, they are used to marshal commands through a service that implements WebDriver’s remote wire protocol:</p>
<blockquote>
<p><a href="https://github.com/SeleniumHQ/selenium/wiki/JsonWireProtocol" target="_blank" rel="noopener">https://github.com/SeleniumHQ/selenium/wiki/JsonWireProtocol</a></p>
</blockquote>
<ul>
<li><p><code>ACCEPT_ALERT</code> <em>= ‘acceptAlert’</em></p>
</li>
<li><p><code>ADD_COOKIE</code> <em>= ‘addCookie’</em></p>
</li>
<li><p><code>CLEAR_APP_CACHE</code> <em>= ‘clearAppCache’</em></p>
</li>
<li><p><code>CLEAR_ELEMENT</code> <em>= ‘clearElement’</em></p>
</li>
<li><p><code>CLEAR_LOCAL_STORAGE</code> <em>= ‘clearLocalStorage’</em></p>
</li>
<li><p><code>CLEAR_SESSION_STORAGE</code> <em>= ‘clearSessionStorage’</em></p>
</li>
<li><p><code>CLICK</code> <em>= ‘mouseClick’</em></p>
</li>
<li><p><code>CLICK_ELEMENT</code> <em>= ‘clickElement’</em></p>
</li>
<li><p><code>CLOSE</code> <em>= ‘close’</em></p>
</li>
<li><p><code>CONTEXT_HANDLES</code> <em>= ‘getContextHandles’</em></p>
</li>
<li><p><code>CURRENT_CONTEXT_HANDLE</code> <em>= ‘getCurrentContextHandle’</em></p>
</li>
<li><p><code>DELETE_ALL_COOKIES</code> <em>= ‘deleteAllCookies’</em></p>
</li>
<li><p><code>DELETE_COOKIE</code> <em>= ‘deleteCookie’</em></p>
</li>
<li><p><code>DELETE_SESSION</code> <em>= ‘deleteSession’</em></p>
</li>
<li><p><code>DISMISS_ALERT</code> <em>= ‘dismissAlert’</em></p>
</li>
<li><p><code>DOUBLE_CLICK</code> <em>= ‘mouseDoubleClick’</em></p>
</li>
<li><p><code>DOUBLE_TAP</code> <em>= ‘touchDoubleTap’</em></p>
</li>
<li><p><code>ELEMENT_SCREENSHOT</code> <em>= ‘elementScreenshot’</em></p>
</li>
<li><p><code>EXECUTE_ASYNC_SCRIPT</code> <em>= ‘executeAsyncScript’</em></p>
</li>
<li><p><code>EXECUTE_SCRIPT</code> <em>= ‘executeScript’</em></p>
</li>
<li><p><code>EXECUTE_SQL</code> <em>= ‘executeSql’</em></p>
</li>
<li><p><code>FIND_CHILD_ELEMENT</code> <em>= ‘findChildElement’</em></p>
</li>
<li><p><code>FIND_CHILD_ELEMENTS</code> <em>= ‘findChildElements’</em></p>
</li>
<li><p><code>FIND_ELEMENT</code> <em>= ‘findElement’</em></p>
</li>
<li><p><code>FIND_ELEMENTS</code> <em>= ‘findElements’</em></p>
</li>
<li><p><code>FLICK</code> <em>= ‘touchFlick’</em></p>
</li>
<li><p><code>FULLSCREEN_WINDOW</code> <em>= ‘fullscreenWindow’</em></p>
</li>
<li><p><code>GET</code> <em>= ‘get’</em></p>
</li>
<li><p><code>GET_ACTIVE_ELEMENT</code> <em>= ‘getActiveElement’</em></p>
</li>
<li><p><code>GET_ALERT_TEXT</code> <em>= ‘getAlertText’</em></p>
</li>
<li><p><code>GET_ALL_COOKIES</code> <em>= ‘getCookies’</em></p>
</li>
<li><p><code>GET_ALL_SESSIONS</code> <em>= ‘getAllSessions’</em></p>
</li>
<li><p><code>GET_APP_CACHE</code> <em>= ‘getAppCache’</em></p>
</li>
<li><p><code>GET_APP_CACHE_STATUS</code> <em>= ‘getAppCacheStatus’</em></p>
</li>
<li><p><code>GET_AVAILABLE_LOG_TYPES</code> <em>= ‘getAvailableLogTypes’</em></p>
</li>
<li><p><code>GET_COOKIE</code> <em>= ‘getCookie’</em></p>
</li>
<li><p><code>GET_CURRENT_URL</code> <em>= ‘getCurrentUrl’</em></p>
</li>
<li><p><code>GET_CURRENT_WINDOW_HANDLE</code> <em>= ‘getCurrentWindowHandle’</em></p>
</li>
<li><p><code>GET_ELEMENT_ATTRIBUTE</code> <em>= ‘getElementAttribute’</em></p>
</li>
<li><p><code>GET_ELEMENT_LOCATION</code> <em>= ‘getElementLocation’</em></p>
</li>
<li><p><code>GET_ELEMENT_LOCATION_ONCE_SCROLLED_INTO_VIEW</code> <em>= ‘getElementLocationOnceScrolledIntoView’</em></p>
</li>
<li><p><code>GET_ELEMENT_PROPERTY</code> <em>= ‘getElementProperty’</em></p>
</li>
<li><p><code>GET_ELEMENT_RECT</code> <em>= ‘getElementRect’</em></p>
</li>
<li><p><code>GET_ELEMENT_SIZE</code> <em>= ‘getElementSize’</em></p>
</li>
<li><p><code>GET_ELEMENT_TAG_NAME</code> <em>= ‘getElementTagName’</em></p>
</li>
<li><p><code>GET_ELEMENT_TEXT</code> <em>= ‘getElementText’</em></p>
</li>
<li><p><code>GET_ELEMENT_VALUE</code> <em>= ‘getElementValue’</em></p>
</li>
<li><p><code>GET_ELEMENT_VALUE_OF_CSS_PROPERTY</code> <em>= ‘getElementValueOfCssProperty’</em></p>
</li>
<li><p><code>GET_LOCAL_STORAGE_ITEM</code> <em>= ‘getLocalStorageItem’</em></p>
</li>
<li><p><code>GET_LOCAL_STORAGE_KEYS</code> <em>= ‘getLocalStorageKeys’</em></p>
</li>
<li><p><code>GET_LOCAL_STORAGE_SIZE</code> <em>= ‘getLocalStorageSize’</em></p>
</li>
<li><p><code>GET_LOCATION</code> <em>= ‘getLocation’</em></p>
</li>
<li><p><code>GET_LOG</code> <em>= ‘getLog’</em></p>
</li>
<li><p><code>GET_NETWORK_CONNECTION</code> <em>= ‘getNetworkConnection’</em></p>
</li>
<li><p><code>GET_PAGE_SOURCE</code> <em>= ‘getPageSource’</em></p>
</li>
<li><p><code>GET_SCREEN_ORIENTATION</code> <em>= ‘getScreenOrientation’</em></p>
</li>
<li><p><code>GET_SESSION_STORAGE_ITEM</code> <em>= ‘getSessionStorageItem’</em></p>
</li>
<li><p><code>GET_SESSION_STORAGE_KEYS</code> <em>= ‘getSessionStorageKeys’</em></p>
</li>
<li><p><code>GET_SESSION_STORAGE_SIZE</code> <em>= ‘getSessionStorageSize’</em></p>
</li>
<li><p><code>GET_TITLE</code> <em>= ‘getTitle’</em></p>
</li>
<li><p><code>GET_WINDOW_HANDLES</code> <em>= ‘getWindowHandles’</em></p>
</li>
<li><p><code>GET_WINDOW_POSITION</code> <em>= ‘getWindowPosition’</em></p>
</li>
<li><p><code>GET_WINDOW_RECT</code> <em>= ‘getWindowRect’</em></p>
</li>
<li><p><code>GET_WINDOW_SIZE</code> <em>= ‘getWindowSize’</em></p>
</li>
<li><p><code>GO_BACK</code> <em>= ‘goBack’</em></p>
</li>
<li><p><code>GO_FORWARD</code> <em>= ‘goForward’</em></p>
</li>
<li><p><code>IMPLICIT_WAIT</code> <em>= ‘implicitlyWait’</em></p>
</li>
<li><p><code>IS_ELEMENT_DISPLAYED</code> <em>= ‘isElementDisplayed’</em></p>
</li>
<li><p><code>IS_ELEMENT_ENABLED</code> <em>= ‘isElementEnabled’</em></p>
</li>
<li><p><code>IS_ELEMENT_SELECTED</code> <em>= ‘isElementSelected’</em></p>
</li>
<li><p><code>LONG_PRESS</code> <em>= ‘touchLongPress’</em></p>
</li>
<li><p><code>MAXIMIZE_WINDOW</code> <em>= ‘windowMaximize’</em></p>
</li>
<li><p><code>MINIMIZE_WINDOW</code> <em>= ‘minimizeWindow’</em></p>
</li>
<li><p><code>MOUSE_DOWN</code> <em>= ‘mouseButtonDown’</em></p>
</li>
<li><p><code>MOUSE_UP</code> <em>= ‘mouseButtonUp’</em></p>
</li>
<li><p><code>MOVE_TO</code> <em>= ‘mouseMoveTo’</em></p>
</li>
<li><p><code>NEW_SESSION</code> <em>= ‘newSession’</em></p>
</li>
<li><p><code>QUIT</code> <em>= ‘quit’</em></p>
</li>
<li><p><code>REFRESH</code> <em>= ‘refresh’</em></p>
</li>
<li><p><code>REMOVE_LOCAL_STORAGE_ITEM</code> <em>= ‘removeLocalStorageItem’</em></p>
</li>
<li><p><code>REMOVE_SESSION_STORAGE_ITEM</code> <em>= ‘removeSessionStorageItem’</em></p>
</li>
<li><p><code>SCREENSHOT</code> <em>= ‘screenshot’</em></p>
</li>
<li><p><code>SEND_KEYS_TO_ACTIVE_ELEMENT</code> <em>= ‘sendKeysToActiveElement’</em></p>
</li>
<li><p><code>SEND_KEYS_TO_ELEMENT</code> <em>= ‘sendKeysToElement’</em></p>
</li>
<li><p><code>SET_ALERT_CREDENTIALS</code> <em>= ‘setAlertCredentials’</em></p>
</li>
<li><p><code>SET_ALERT_VALUE</code> <em>= ‘setAlertValue’</em></p>
</li>
<li><p><code>SET_ELEMENT_SELECTED</code> <em>= ‘setElementSelected’</em></p>
</li>
<li><p><code>SET_LOCAL_STORAGE_ITEM</code> <em>= ‘setLocalStorageItem’</em></p>
</li>
<li><p><code>SET_LOCATION</code> <em>= ‘setLocation’</em></p>
</li>
<li><p><code>SET_NETWORK_CONNECTION</code> <em>= ‘setNetworkConnection’</em></p>
</li>
<li><p><code>SET_SCREEN_ORIENTATION</code> <em>= ‘setScreenOrientation’</em></p>
</li>
<li><p><code>SET_SCRIPT_TIMEOUT</code> <em>= ‘setScriptTimeout’</em></p>
</li>
<li><p><code>SET_SESSION_STORAGE_ITEM</code> <em>= ‘setSessionStorageItem’</em></p>
</li>
<li><p><code>SET_TIMEOUTS</code> <em>= ‘setTimeouts’</em></p>
</li>
<li><p><code>SET_WINDOW_POSITION</code> <em>= ‘setWindowPosition’</em></p>
</li>
<li><p><code>SET_WINDOW_RECT</code> <em>= ‘setWindowRect’</em></p>
</li>
<li><p><code>SET_WINDOW_SIZE</code> <em>= ‘setWindowSize’</em></p>
</li>
<li><p><code>SINGLE_TAP</code> <em>= ‘touchSingleTap’</em></p>
</li>
<li><p><code>STATUS</code> <em>= ‘status’</em></p>
</li>
<li><p><code>SUBMIT_ELEMENT</code> <em>= ‘submitElement’</em></p>
</li>
<li><p><code>SWITCH_TO_CONTEXT</code> <em>= ‘switchToContext’</em></p>
</li>
<li><p><code>SWITCH_TO_FRAME</code> <em>= ‘switchToFrame’</em></p>
</li>
<li><p><code>SWITCH_TO_PARENT_FRAME</code> <em>= ‘switchToParentFrame’</em></p>
</li>
<li><p><code>SWITCH_TO_WINDOW</code> <em>= ‘switchToWindow’</em></p>
</li>
<li><p><code>TOUCH_DOWN</code> <em>= ‘touchDown’</em></p>
</li>
<li><p><code>TOUCH_MOVE</code> <em>= ‘touchMove’</em></p>
</li>
<li><p><code>TOUCH_SCROLL</code> <em>= ‘touchScroll’</em></p>
</li>
<li><p><code>TOUCH_UP</code> <em>= ‘touchUp’</em></p>
</li>
<li><p><code>UPLOAD_FILE</code> <em>= ‘uploadFile’</em></p>
</li>
<li><p><code>W3C_ACCEPT_ALERT</code> <em>= ‘w3cAcceptAlert’</em></p>
</li>
<li><p><code>W3C_ACTIONS</code> <em>= ‘actions’</em></p>
</li>
<li><p><code>W3C_CLEAR_ACTIONS</code> <em>= ‘clearActionState’</em></p>
</li>
<li><p><code>W3C_DISMISS_ALERT</code> <em>= ‘w3cDismissAlert’</em></p>
</li>
<li><p><code>W3C_EXECUTE_SCRIPT</code> <em>= ‘w3cExecuteScript’</em></p>
</li>
<li><p><code>W3C_EXECUTE_SCRIPT_ASYNC</code> <em>= ‘w3cExecuteScriptAsync’</em></p>
</li>
<li><p><code>W3C_GET_ACTIVE_ELEMENT</code> <em>= ‘w3cGetActiveElement’</em></p>
</li>
<li><p><code>W3C_GET_ALERT_TEXT</code> <em>= ‘w3cGetAlertText’</em></p>
</li>
<li><p><code>W3C_GET_CURRENT_WINDOW_HANDLE</code> <em>= ‘w3cGetCurrentWindowHandle’</em></p>
</li>
<li><p><code>W3C_GET_WINDOW_HANDLES</code> <em>= ‘w3cGetWindowHandles’</em></p>
</li>
<li><p><code>W3C_GET_WINDOW_POSITION</code> <em>= ‘w3cGetWindowPosition’</em></p>
</li>
<li><p><code>W3C_GET_WINDOW_SIZE</code> <em>= ‘w3cGetWindowSize’</em></p>
</li>
<li><p><code>W3C_MAXIMIZE_WINDOW</code> <em>= ‘w3cMaximizeWindow’</em></p>
</li>
<li><p><code>W3C_SET_ALERT_VALUE</code> <em>= ‘w3cSetAlertValue’</em></p>
</li>
<li><p><code>W3C_SET_WINDOW_POSITION</code> <em>= ‘w3cSetWindowPosition’</em></p>
</li>
<li><p><code>W3C_SET_WINDOW_SIZE</code> <em>= ‘w3cSetWindowSize’</em></p>
</li>
</ul>
<h2 id="Remote-WebDriver-Error-Handler"><a href="#Remote-WebDriver-Error-Handler" class="headerlink" title="Remote WebDriver Error Handler"></a>Remote WebDriver Error Handler</h2><p><em>class</em> <code>selenium.webdriver.remote.errorhandler.ErrorCode</code></p>
<p>Bases: <code>object</code></p>
<p>Error codes defined in the WebDriver wire protocol.</p>
<ul>
<li><p><code>ELEMENT_CLICK_INTERCEPTED</code> <em>= [64, ‘element click intercepted’]</em></p>
</li>
<li><p><code>ELEMENT_IS_NOT_SELECTABLE</code> <em>= [15, ‘element not selectable’]</em></p>
</li>
<li><p><code>ELEMENT_NOT_INTERACTABLE</code> <em>= [60, ‘element not interactable’]</em></p>
</li>
<li><p><code>ELEMENT_NOT_VISIBLE</code> <em>= [11, ‘element not visible’]</em></p>
</li>
<li><p><code>IME_ENGINE_ACTIVATION_FAILED</code> <em>= [31, ‘ime engine activation failed’]</em></p>
</li>
<li><p><code>IME_NOT_AVAILABLE</code> <em>= [30, ‘ime not available’]</em></p>
</li>
<li><p><code>INSECURE_CERTIFICATE</code> <em>= [‘insecure certificate’]</em></p>
</li>
<li><p><code>INVALID_ARGUMENT</code> <em>= [61, ‘invalid argument’]</em></p>
</li>
<li><p><code>INVALID_COOKIE_DOMAIN</code> <em>= [24, ‘invalid cookie domain’]</em></p>
</li>
<li><p><code>INVALID_COORDINATES</code> <em>= [‘invalid coordinates’]</em></p>
</li>
<li><p><code>INVALID_ELEMENT_COORDINATES</code> <em>= [29, ‘invalid element coordinates’]</em></p>
</li>
<li><p><code>INVALID_ELEMENT_STATE</code> <em>= [12, ‘invalid element state’]</em></p>
</li>
<li><p><code>INVALID_SELECTOR</code> <em>= [32, ‘invalid selector’]</em></p>
</li>
<li><p><code>INVALID_SESSION_ID</code> <em>= [‘invalid session id’]</em></p>
</li>
<li><p><code>INVALID_XPATH_SELECTOR</code> <em>= [51, ‘invalid selector’]</em></p>
</li>
<li><p><code>INVALID_XPATH_SELECTOR_RETURN_TYPER</code> <em>= [52, ‘invalid selector’]</em></p>
</li>
<li><p><code>JAVASCRIPT_ERROR</code> <em>= [17, ‘javascript error’]</em></p>
</li>
<li><p><code>METHOD_NOT_ALLOWED</code> <em>= [405, ‘unsupported operation’]</em></p>
</li>
<li><p><code>MOVE_TARGET_OUT_OF_BOUNDS</code> <em>= [34, ‘move target out of bounds’]</em></p>
</li>
<li><p><code>NO_ALERT_OPEN</code> <em>= [27, ‘no such alert’]</em></p>
</li>
<li><p><code>NO_SUCH_COOKIE</code> <em>= [62, ‘no such cookie’]</em></p>
</li>
<li><p><code>NO_SUCH_ELEMENT</code> <em>= [7, ‘no such element’]</em></p>
</li>
<li><p><code>NO_SUCH_FRAME</code> <em>= [8, ‘no such frame’]</em></p>
</li>
<li><p><code>NO_SUCH_WINDOW</code> <em>= [23, ‘no such window’]</em></p>
</li>
<li><p><code>SCRIPT_TIMEOUT</code> <em>= [28, ‘script timeout’]</em></p>
</li>
<li><p><code>SESSION_NOT_CREATED</code> <em>= [33, ‘session not created’]</em></p>
</li>
<li><p><code>STALE_ELEMENT_REFERENCE</code> <em>= [10, ‘stale element reference’]</em></p>
</li>
<li><p><code>SUCCESS</code> <em>= 0</em></p>
</li>
<li><p><code>TIMEOUT</code> <em>= [21, ‘timeout’]</em></p>
</li>
<li><p><code>UNABLE_TO_CAPTURE_SCREEN</code> <em>= [63, ‘unable to capture screen’]</em></p>
</li>
<li><p><code>UNABLE_TO_SET_COOKIE</code> <em>= [25, ‘unable to set cookie’]</em></p>
</li>
<li><p><code>UNEXPECTED_ALERT_OPEN</code> <em>= [26, ‘unexpected alert open’]</em></p>
</li>
<li><p><code>UNKNOWN_COMMAND</code> <em>= [9, ‘unknown command’]</em></p>
</li>
<li><p><code>UNKNOWN_ERROR</code> <em>= [13, ‘unknown error’]</em></p>
</li>
<li><p><code>UNKNOWN_METHOD</code> <em>= [‘unknown method exception’]</em></p>
</li>
<li><p><code>XPATH_LOOKUP_ERROR</code> <em>= [19, ‘invalid selector’]</em></p>
</li>
</ul>
<p><em>class</em> <code>selenium.webdriver.remote.errorhandler.ErrorHandler</code></p>
<p>Bases: <code>object</code></p>
<p>Handles errors returned by the WebDriver server.</p>
<p><code>check_response</code>(<em>response</em>)</p>
<p>Checks that a JSON response from the WebDriver does not have an error.</p>
<p>Args: response - The JSON response from the WebDriver server as a dictionary object. </p>
<p>Raises: If the response contains an error message. </p>
<h2 id="Remote-WebDriver-Mobile"><a href="#Remote-WebDriver-Mobile" class="headerlink" title="Remote WebDriver Mobile"></a>Remote WebDriver Mobile</h2><p><em>class</em> <code>selenium.webdriver.remote.mobile.Mobile</code>(<em>driver</em>)</p>
<p>Bases: <code>object</code></p>
<ul>
<li><p><em>class</em> <code>ConnectionType</code>(<em>mask</em>)</p>
<p>Bases: <code>object</code></p>
<ul>
<li><p><code>__init__</code>(<em>mask</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><code>airplane_mode</code></p>
</li>
<li><p><code>data</code></p>
</li>
<li><p><code>wifi</code></p>
</li>
</ul>
</li>
<li><p><code>__init__</code>(<em>driver</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><code>set_network_connection</code>(<em>network</em>)</p>
<p>Set the network connection for the remote device.Example of setting airplane mode:<code>driver.mobile.set_network_connection(driver.mobile.AIRPLANE_MODE)</code></p>
</li>
<li><p><code>AIRPLANE_MODE</code> <em>= &lt;selenium.webdriver.remote.mobile.Mobile.ConnectionType object&gt;</em></p>
</li>
<li><p><code>ALL_NETWORK</code> <em>= &lt;selenium.webdriver.remote.mobile.Mobile.ConnectionType object&gt;</em></p>
</li>
<li><p><code>DATA_NETWORK</code> <em>= &lt;selenium.webdriver.remote.mobile.Mobile.ConnectionType object&gt;</em></p>
</li>
<li><p><code>WIFI_NETWORK</code> <em>= &lt;selenium.webdriver.remote.mobile.Mobile.ConnectionType object&gt;</em></p>
</li>
<li><p><code>context</code></p>
<p>returns the current context (Native or WebView).</p>
</li>
<li><p><code>contexts</code></p>
<p>returns a list of available contexts</p>
</li>
<li><p><code>network_connection</code></p>
</li>
</ul>
<h2 id="Remote-WebDriver-Remote-Connection"><a href="#Remote-WebDriver-Remote-Connection" class="headerlink" title="Remote WebDriver Remote Connection"></a>Remote WebDriver Remote Connection</h2><p><em>lass</em> <code>selenium.webdriver.remote.remote_connection.RemoteConnection</code>(<em>remote_server_addr</em>, <em>keep_alive=False</em>, <em>resolve_ip=True</em>)</p>
<p>Bases: <code>object</code></p>
<p>A connection with the Remote WebDriver server.</p>
<p>Communicates with the server using the WebDriver wire protocol: <a href="https://github.com/SeleniumHQ/selenium/wiki/JsonWireProtocol" target="_blank" rel="noopener">https://github.com/SeleniumHQ/selenium/wiki/JsonWireProtocol</a></p>
<ul>
<li><p><code>__init__</code>(<em>remote_server_addr</em>, <em>keep_alive=False</em>, <em>resolve_ip=True</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><code>execute</code>(<em>command</em>, <em>params</em>)</p>
<p>Send a command to the remote server.Any path subtitutions required for the URL mapped to the command should be included in the command parameters.</p>
<p>Args:command - A string specifying the command to execute.params - A dictionary of named parameters to send with the command as its JSON payload.</p>
</li>
<li><p><em>classmethod</em> <code>get_remote_connection_headers</code>(<em>parsed_url</em>, <em>keep_alive=False</em>)</p>
<p>Get headers for remote request.</p>
<p>Args:parsed_url - The parsed urlkeep_alive (Boolean) - Is this a keep-alive connection (default: False)</p>
</li>
<li><p><em>classmethod</em> <code>get_timeout</code>()</p>
<p>Returns:Timeout value in seconds for all http requests made to the Remote Connection</p>
</li>
<li><p><em>classmethod</em> <code>reset_timeout</code>()</p>
<p>Reset the http request timeout to socket._GLOBAL_DEFAULT_TIMEOUT</p>
</li>
<li><p><em>classmethod</em> <code>set_timeout</code>(<em>timeout</em>)</p>
<p>Override the default timeout</p>
<p>Args:timeout - timeout value for http requests in seconds</p>
</li>
</ul>
<h2 id="Remote-WebDriver-Utils"><a href="#Remote-WebDriver-Utils" class="headerlink" title="Remote WebDriver Utils"></a>Remote WebDriver Utils</h2><ul>
<li><p><code>selenium.webdriver.remote.utils.dump_json</code>(<em>json_struct</em>)</p>
</li>
<li><p><code>selenium.webdriver.remote.utils.format_json</code>(<em>json_struct</em>)</p>
</li>
<li><p><code>selenium.webdriver.remote.utils.load_json</code>(<em>s</em>)</p>
</li>
<li><p><code>selenium.webdriver.remote.utils.unzip_to_temp_dir</code>(<em>zip_file_name</em>)</p>
<p>Unzip zipfile to a temporary directory.The directory of the unzipped files is returned if success, otherwise None is returned.</p>
</li>
</ul>
<h2 id="Internet-Explorer-WebDriver"><a href="#Internet-Explorer-WebDriver" class="headerlink" title="Internet Explorer WebDriver"></a>Internet Explorer WebDriver</h2><p><em>class</em> <code>selenium.webdriver.ie.webdriver.WebDriver</code>(<em>executable_path=’IEDriverServer.exe’</em>, <em>capabilities=None</em>, <em>port=0</em>, <em>timeout=30</em>, <em>host=None</em>, <em>log_level=None</em>, <em>service_log_path=None</em>, <em>options=None</em>, <em>ie_options=None</em>, <em>desired_capabilities=None</em>, <em>log_file=None</em>, <em>keep_alive=False</em>)</p>
<p>Bases: <a href="https://selenium-python.readthedocs.io/api.html#selenium.webdriver.remote.webdriver.WebDriver" target="_blank" rel="noopener"><code>selenium.webdriver.remote.webdriver.WebDriver</code></a></p>
<p>Controls the IEServerDriver and allows you to drive Internet Explorer</p>
<ul>
<li><p><code>__init__</code>(<em>executable_path=’IEDriverServer.exe’</em>, <em>capabilities=None</em>, <em>port=0</em>, <em>timeout=30</em>, <em>host=None</em>, <em>log_level=None</em>, <em>service_log_path=None</em>, <em>options=None</em>, <em>ie_options=None</em>, <em>desired_capabilities=None</em>, <em>log_file=None</em>, <em>keep_alive=False</em>)</p>
<p>Creates a new instance of the chrome driver.</p>
<p>Starts the service and then creates new instance of chrome driver.</p>
<p>Args:executable_path - path to the executable. If the default is used it assumes the executable is in the $PATH</p>
<p>capabilities: capabilities Dictionary object</p>
<p>port - port you would like the service to run, if left as 0, a free port will be found.</p>
<p>timeout - no longer used, kept for backward compatibility</p>
<p>host - IP address for the service</p>
<p>log_level - log level you would like the service to run.</p>
<p>service_log_path - target of logging of service, may be “stdout”, “stderr” or file path.</p>
<p>options - IE Options instance, providing additional IE options</p>
<p>ie_options - Deprecated argument for options</p>
<p>desired_capabilities - alias of capabilities; this will make the signature consistent with RemoteWebDriver.</p>
<p>log_file - Deprecated argument for service_log_path</p>
<p>keep_alive - Whether to configure RemoteConnection to use HTTP keep-alive.</p>
</li>
<li><p><code>create_options</code>()</p>
</li>
<li><p><code>quit</code>()</p>
<p>Quits the driver and closes every associated window.Usage:driver.quit()</p>
</li>
</ul>
<h2 id="Android-WebDriver"><a href="#Android-WebDriver" class="headerlink" title="Android WebDriver"></a>Android WebDriver</h2><p><em>class</em> <code>selenium.webdriver.android.webdriver.WebDriver</code>(<em>host=’localhost’</em>, <em>port=4444</em>, <em>desired_capabilities={‘browserName’: ‘android’</em>, <em>‘platform’: ‘ANDROID’</em>, <em>‘version’: ‘’}</em>)</p>
<p>Bases: <a href="https://selenium-python.readthedocs.io/api.html#selenium.webdriver.remote.webdriver.WebDriver" target="_blank" rel="noopener"><code>selenium.webdriver.remote.webdriver.WebDriver</code></a></p>
<p>Simple RemoteWebDriver wrapper to start connect to Selendroid’s WebView app</p>
<p>For more info on getting started with Selendroid <a href="http://selendroid.io/mobileWeb.html" target="_blank" rel="noopener">http://selendroid.io/mobileWeb.html</a></p>
<p><code>__init__</code>(<em>host=’localhost’</em>, <em>port=4444</em>, <em>desired_capabilities={‘browserName’: ‘android’</em>, <em>‘platform’: ‘ANDROID’</em>, <em>‘version’: ‘’}</em>)</p>
<p>Creates a new instance of Selendroid using the WebView app</p>
<p>Args: host - location of where selendroid is running</p>
<p>port - port that selendroid is running on</p>
<p>desired_capabilities: Dictionary object with capabilities</p>
<h2 id="Opera-WebDriver"><a href="#Opera-WebDriver" class="headerlink" title="Opera WebDriver"></a>Opera WebDriver</h2><p><em>class</em> <code>selenium.webdriver.opera.webdriver.OperaDriver</code>(<em>executable_path=None</em>, <em>port=0</em>, <em>options=None</em>, <em>service_args=None</em>, <em>desired_capabilities=None</em>, <em>service_log_path=None</em>, <em>opera_options=None</em>, <em>keep_alive=True</em>)</p>
<p>Bases: <a href="https://selenium-python.readthedocs.io/api.html#selenium.webdriver.chrome.webdriver.WebDriver" target="_blank" rel="noopener"><code>selenium.webdriver.chrome.webdriver.WebDriver</code></a></p>
<p>Controls the new OperaDriver and allows you to drive the Opera browser based on Chromium.</p>
<ul>
<li><p><code>__init__</code>(<em>executable_path=None</em>, <em>port=0</em>, <em>options=None</em>, <em>service_args=None</em>, <em>desired_capabilities=None</em>, <em>service_log_path=None</em>, <em>opera_options=None</em>, <em>keep_alive=True</em>)</p>
<p>Creates a new instance of the operadriver.</p>
<p>Starts the service and then creates new instance of operadriver.</p>
<p>Args:executable_path - path to the executable. If the default is usedit assumes the executable is in the $PATH</p>
<p>port - port you would like the service to run, if left as 0,a free port will be found.</p>
<p>options: this takes an instance of OperaOptions</p>
<p>service_args - List of args to pass to the driver service</p>
<p>desired_capabilities: Dictionary object with non-browser specific</p>
<p>service_log_path - Where to log information from the driver.</p>
<p>opera_options - Deprecated argument for options capabilities only, such as “proxy” or “loggingPref”.</p>
</li>
<li><p><code>create_options</code>()</p>
</li>
</ul>
<p><em>class</em> <code>selenium.webdriver.opera.webdriver.WebDriver</code>(<em>desired_capabilities=None</em>, <em>executable_path=None</em>, <em>port=0</em>, <em>service_log_path=None</em>, <em>service_args=None</em>, <em>options=None</em>)</p>
<p>Bases: <a href="https://selenium-python.readthedocs.io/api.html#selenium.webdriver.opera.webdriver.OperaDriver" target="_blank" rel="noopener"><code>selenium.webdriver.opera.webdriver.OperaDriver</code></a></p>
<ul>
<li><p><em>class</em> <code>ServiceType</code></p>
<p>Bases: <code>object</code></p>
<p><code>CHROMIUM</code> <em>= 2</em></p>
<ul>
<li><p>executable_path - path to the executable. If the default is used</p>
<p>it assumes the executable is in the $PATH</p>
</li>
<li><p>port - port you would like the service to run, if left as 0,</p>
<p>a free port will be found.</p>
</li>
<li><p>options: this takes an instance of OperaOptions</p>
</li>
<li><p>service_args - List of args to pass to the driver service</p>
</li>
<li><p>desired_capabilities: Dictionary object with non-browser specific</p>
</li>
<li><p>service_log_path - Where to log information from the driver.</p>
</li>
<li><p>opera_options - Deprecated argument for options capabilities only, such as “proxy” or “loggingPref”.</p>
</li>
</ul>
</li>
</ul>
<h2 id="PhantomJS-WebDriver"><a href="#PhantomJS-WebDriver" class="headerlink" title="PhantomJS WebDriver"></a>PhantomJS WebDriver</h2><p><em>class</em> <code>selenium.webdriver.phantomjs.webdriver.WebDriver</code>(<em>executable_path=’phantomjs’</em>, <em>port=0</em>, <em>desired_capabilities={‘browserName’: ‘phantomjs’</em>, <em>‘javascriptEnabled’: True</em>, <em>‘platform’: ‘ANY’</em>, <em>‘version’: ‘’}</em>, <em>service_args=None</em>, <em>service_log_path=None</em>)</p>
<p>Bases: <a href="https://selenium-python.readthedocs.io/api.html#selenium.webdriver.remote.webdriver.WebDriver" target="_blank" rel="noopener"><code>selenium.webdriver.remote.webdriver.WebDriver</code></a></p>
<p>Wrapper to communicate with PhantomJS through Ghostdriver.</p>
<p>You will need to follow all the directions here: <a href="https://github.com/detro/ghostdriver" target="_blank" rel="noopener">https://github.com/detro/ghostdriver</a></p>
<ul>
<li><p><code>__init__</code>(<em>executable_path=’phantomjs’</em>, <em>port=0</em>, <em>desired_capabilities={‘browserName’: ‘phantomjs’</em>, <em>‘javascriptEnabled’: True</em>, <em>‘platform’: ‘ANY’</em>, <em>‘version’: ‘’}</em>, <em>service_args=None</em>, <em>service_log_path=None</em>)</p>
<p>Creates a new instance of the PhantomJS / Ghostdriver.</p>
<p>Starts the service and then creates new instance of the driver.</p>
<p>Args:executable_path - path to the executable. If the default is used it assumes the executable is in the $PATH</p>
<p>port - port you would like the service to run, if left as 0, a free port will be found.</p>
<p>desired_capabilities: Dictionary object with non-browser specific capabilities only, such as “proxy” or “loggingPref”.</p>
<p>service_args : A List of command line arguments to pass to PhantomJSservice_log_path: Path for phantomjs service to log to.</p>
</li>
<li><p><code>quit</code>()</p>
<p>Closes the browser and shuts down the PhantomJS executable that is started when starting the PhantomJS</p>
</li>
</ul>
<h2 id="PhantomJS-WebDriver-Service"><a href="#PhantomJS-WebDriver-Service" class="headerlink" title="PhantomJS WebDriver Service"></a>PhantomJS WebDriver Service</h2><p><em>class</em> <code>selenium.webdriver.phantomjs.service.Service</code>(<em>executable_path</em>, <em>port=0</em>, <em>service_args=None</em>, <em>log_path=None</em>)</p>
<p>Bases: <a href="https://selenium-python.readthedocs.io/api.html#selenium.webdriver.common.service.Service" target="_blank" rel="noopener"><code>selenium.webdriver.common.service.Service</code></a></p>
<p>Object that manages the starting and stopping of PhantomJS / Ghostdriver</p>
<ul>
<li><p><code>__init__</code>(<em>executable_path</em>, <em>port=0</em>, <em>service_args=None</em>, <em>log_path=None</em>)</p>
<p>Creates a new instance of the Service</p>
<p>Args:executable_path : Path to PhantomJS binary</p>
<p>port : Port the service is running on</p>
<p>service_args : A List of other command line options to pass to PhantomJS</p>
<p>log_path: Path for PhantomJS service to log to</p>
</li>
<li><p><code>command_line_args</code>()</p>
</li>
<li><p><code>send_remote_shutdown_command</code>()</p>
</li>
<li><p><code>service_url</code></p>
<p>Gets the url of the GhostDriver Service</p>
</li>
</ul>
<h2 id="Safari-WebDriver"><a href="#Safari-WebDriver" class="headerlink" title="Safari WebDriver"></a>Safari WebDriver</h2><p><em>class</em> <code>selenium.webdriver.safari.webdriver.WebDriver</code>(<em>port=0</em>, <em>executable_path=’/usr/bin/safaridriver’</em>, <em>reuse_service=False</em>, <em>desired_capabilities={‘browserName’: ‘safari’</em>, <em>‘platform’: ‘MAC’</em>, <em>‘version’: ‘’}</em>, <em>quiet=False</em>, <em>keep_alive=True</em>, <em>service_args=None</em>)</p>
<p>Bases: <a href="https://selenium-python.readthedocs.io/api.html#selenium.webdriver.remote.webdriver.WebDriver" target="_blank" rel="noopener"><code>selenium.webdriver.remote.webdriver.WebDriver</code></a></p>
<p>Controls the SafariDriver and allows you to drive the browser.</p>
<ul>
<li><p><code>__init__</code>(<em>port=0</em>, <em>executable_path=’/usr/bin/safaridriver’</em>, <em>reuse_service=False</em>, <em>desired_capabilities={‘browserName’: ‘safari’</em>, <em>‘platform’: ‘MAC’</em>, <em>‘version’: ‘’}</em>, <em>quiet=False</em>, <em>keep_alive=True</em>, <em>service_args=None</em>)</p>
<p>Creates a new Safari driver instance and launches or finds a running safaridriver service.</p>
<p>Args:port - The port on which the safaridriver service should listen for new connections. If zero, a free port will be found.</p>
<p>executable_path - Path to a custom safaridriver executable to be used. If absent, /usr/bin/safaridriver is used.</p>
<p>reuse_service - If True, do not spawn a safaridriver instance; instead, connect to an already-running service that was launched externally.</p>
<p>desired_capabilities: Dictionary object with desired capabilities (Can be used to provide various Safari switches).</p>
<p>quiet - If True, the driver’s stdout and stderr is suppressed.</p>
<p>keep_alive - Whether to configure SafariRemoteConnection to useHTTP keep-alive. Defaults to False.</p>
<p>service_args : List of args to pass to the safaridriver service</p>
</li>
<li><p><code>debug</code>()</p>
</li>
<li><p><code>get_permission</code>(<em>permission</em>)</p>
</li>
<li><p><code>quit</code>()</p>
<p>Closes the browser and shuts down the SafariDriver executable that is started when starting the SafariDriver</p>
</li>
<li><p><code>set_permission</code>(<em>permission</em>, <em>value</em>)</p>
</li>
</ul>
<h2 id="Safari-WebDriver-Service"><a href="#Safari-WebDriver-Service" class="headerlink" title="Safari WebDriver Service"></a>Safari WebDriver Service</h2><p><em>class</em> <code>selenium.webdriver.safari.service.Service</code>(<em>executable_path</em>, <em>port=0</em>, <em>quiet=False</em>, <em>service_args=None</em>)</p>
<p>Bases: <a href="https://selenium-python.readthedocs.io/api.html#selenium.webdriver.common.service.Service" target="_blank" rel="noopener"><code>selenium.webdriver.common.service.Service</code></a></p>
<p>Object that manages the starting and stopping of the SafariDriver</p>
<ul>
<li><p><code>__init__</code>(<em>executable_path</em>, <em>port=0</em>, <em>quiet=False</em>, <em>service_args=None</em>)</p>
<p>Creates a new instance of the Service</p>
<p>Args:executable_path : Path to the SafariDriver</p>
<p>port : Port the service is running on</p>
<p>quiet : Suppress driver stdout and stderr</p>
<p>service_args : List of args to pass to the safaridriver service</p>
</li>
<li><p><code>command_line_args</code>()</p>
</li>
<li><p><code>service_url</code></p>
<p>Gets the url of the SafariDriver Service</p>
</li>
</ul>
<h2 id="Select-Support"><a href="#Select-Support" class="headerlink" title="Select Support"></a>Select Support</h2><ul>
<li><p><em>class</em> <code>selenium.webdriver.support.select.Select</code>(<em>webelement</em>)</p>
<p>Bases: <code>object</code></p>
<ul>
<li><p><code>__init__</code>(<em>webelement</em>)</p>
<p>Constructor. A check is made that the given element is, indeed, a SELECT tag. If it is not, then an UnexpectedTagNameException is thrown.</p>
<p>Args:webelement - element SELECT element to wrap</p>
<p>Example:<br>from selenium.webdriver.support.ui import Select<br>Select(driver.find_element_by_tag_name(“select”)).select_by_index(2)</p>
</li>
<li><p><code>deselect_all</code>()</p>
<p>Clear all selected entries. This is only valid when the SELECT supports multiple selections. throws NotImplementedError If the SELECT does not support multiple selections</p>
</li>
<li><p><code>deselect_by_index</code>(<em>index</em>)</p>
<p>Deselect the option at the given index. This is done by examing the “index” attribute of an element, and not merely by counting.</p>
<p>Args:index - The option at this index will be deselectedthrows NoSuchElementException If there is no option with specisied index in SELECT</p>
</li>
<li><p><code>deselect_by_value</code>(<em>value</em>)</p>
<p>Deselect all options that have a value matching the argument. That is, when given “foo” this would deselect an option like:<option value="foo">Bar</option></p>
<p>Args:value - The value to match againstthrows NoSuchElementException If there is no option with specisied value in SELECT</p>
</li>
<li><p><code>deselect_by_visible_text</code>(<em>text</em>)</p>
<p>Deselect all options that display text matching the argument. That is, when given “Bar” this would deselect an option like:<option value="foo">Bar</option></p>
<p>Args:text - The visible text to match against</p>
</li>
<li><p><code>select_by_index</code>(<em>index</em>)</p>
<p>Select the option at the given index. This is done by examing the “index” attribute of an element, and not merely by counting.</p>
<p>Args:index - The option at this index will be selectedthrows NoSuchElementException If there is no option with specisied index in SELECT</p>
</li>
<li><p><code>select_by_value</code>(<em>value</em>)</p>
<p>Select all options that have a value matching the argument. That is, when given “foo” this would select an option like:<option value="foo">Bar</option></p>
<p>Args:value - The value to match againstthrows NoSuchElementException If there is no option with specisied value in SELECT</p>
</li>
<li><p><code>select_by_visible_text</code>(<em>text</em>)</p>
<p>Select all options that display text matching the argument. That is, when given “Bar” this would select an option like:<option value="foo">Bar</option></p>
<p>Args:text - The visible text to match againstthrows NoSuchElementException If there is no option with specisied text in SELECT</p>
</li>
<li><p><code>all_selected_options</code></p>
<p>Returns a list of all selected options belonging to this select tag</p>
</li>
<li><p><code>first_selected_option</code></p>
<p>The first selected option in this select tag (or the currently selected option in a normal select)</p>
</li>
<li><p><code>options</code></p>
<p>Returns a list of all options belonging to this select tag</p>
</li>
</ul>
</li>
</ul>
<h2 id="Wait-Support"><a href="#Wait-Support" class="headerlink" title="Wait Support"></a>Wait Support</h2><p><em>class</em> <code>selenium.webdriver.support.wait.WebDriverWait</code>(<em>driver</em>, <em>timeout</em>, <em>poll_frequency=0.5</em>, <em>ignored_exceptions=None</em>)</p>
<p>Bases: <code>object</code></p>
<ul>
<li><p><code>__init__</code>(<em>driver</em>, <em>timeout</em>, <em>poll_frequency=0.5</em>, <em>ignored_exceptions=None</em>)</p>
<p>Constructor, takes a WebDriver instance and timeout in seconds.</p>
<p>Args:driver - Instance of WebDriver (Ie, Firefox, Chrome or Remote)</p>
<p>timeout - Number of seconds before timing out</p>
<p>poll_frequency - sleep interval between calls By default, it is 0.5 second.</p>
<p>ignored_exceptions - iterable structure of exception classes ignored during calls. By default, it contains NoSuchElementException only.</p>
<p>Example:<br>from selenium.webdriver.support.ui import WebDriver<br>Waitelement = WebDriverWait(driver, 10).until(lambda x: x.find_element_by_id(“someId”))<br>is_disappeared = WebDriverWait(driver, 30, 1, (ElementNotVisibleException)).until_not(lambda x: x.find_element_by_id(“someId”).is_displayed())</p>
</li>
<li><p><code>until</code>(<em>method</em>, <em>message=’’</em>)</p>
<p>Calls the method provided with the driver as an argument until the return value is not False.</p>
</li>
<li><p><code>until_not</code>(<em>method</em>, <em>message=’’</em>)</p>
<p>Calls the method provided with the driver as an argument until the return value is False.</p>
</li>
</ul>
<h2 id="Color-Support"><a href="#Color-Support" class="headerlink" title="Color Support"></a>Color Support</h2><ul>
<li><p><em>class</em> <code>selenium.webdriver.support.color.Color</code>(<em>red</em>, <em>green</em>, <em>blue</em>, <em>alpha=1</em>)</p>
<p>Bases: <code>object</code></p>
<p>Color conversion support class</p>
<p>Example:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>support<span class="token punctuation">.</span>color <span class="token keyword">import</span> Color

<span class="token keyword">print</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>from_string<span class="token punctuation">(</span><span class="token string">'#00ff33'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>rgba<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>from_string<span class="token punctuation">(</span><span class="token string">'rgb(1, 255, 3)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>hex<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>from_string<span class="token punctuation">(</span><span class="token string">'blue'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>rgba<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><p><code>__init__</code>(<em>red</em>, <em>green</em>, <em>blue</em>, <em>alpha=1</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><em>static</em> <code>from_string</code>(<em>str_</em>)</p>
</li>
<li><p><code>hex</code></p>
</li>
<li><p><code>rgb</code></p>
</li>
<li><p><code>rgba</code></p>
</li>
</ul>
</li>
</ul>
<h2 id="Event-Firing-WebDriver-Support"><a href="#Event-Firing-WebDriver-Support" class="headerlink" title="Event Firing WebDriver Support"></a>Event Firing WebDriver Support</h2><p><em>class</em> <code>selenium.webdriver.support.event_firing_webdriver.EventFiringWebDriver</code>(<em>driver</em>, <em>event_listener</em>)</p>
<p>Bases: <code>object</code></p>
<p>A wrapper around an arbitrary WebDriver instance which supports firing events</p>
<ul>
<li><p><code>__init__</code>(<em>driver</em>, <em>event_listener</em>)</p>
<p>Creates a new instance of the EventFiringWebDriver</p>
<p>Args:driver : A WebDriver instanceevent_listener : Instance of a class that subclasses AbstractEventListener and implements it fully or partially</p>
<p>Example:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver <span class="token keyword">import</span> Firefox
<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>support<span class="token punctuation">.</span>events <span class="token keyword">import</span> EventFiringWebDriver<span class="token punctuation">,</span> AbstractEventListener

<span class="token keyword">class</span> <span class="token class-name">MyListener</span><span class="token punctuation">(</span>AbstractEventListener<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">before_navigate_to</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> url<span class="token punctuation">,</span> driver<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Before navigate to %s"</span> <span class="token operator">%</span> url<span class="token punctuation">)</span>
    <span class="token keyword">def</span> <span class="token function">after_navigate_to</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> url<span class="token punctuation">,</span> driver<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"After navigate to %s"</span> <span class="token operator">%</span> url<span class="token punctuation">)</span>

driver <span class="token operator">=</span> Firefox<span class="token punctuation">(</span><span class="token punctuation">)</span>
ef_driver <span class="token operator">=</span> EventFiringWebDriver<span class="token punctuation">(</span>driver<span class="token punctuation">,</span> MyListener<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ef_driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://www.google.co.in/"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p><code>back</code>()</p>
</li>
<li><p><code>close</code>()</p>
</li>
<li><p><code>execute_async_script</code>(<em>script</em>, <em>*args</em>)</p>
</li>
<li><p><code>execute_script</code>(<em>script</em>, <em>*args</em>)</p>
</li>
<li><p><code>find_element</code>(<em>by=’id’</em>, <em>value=None</em>)</p>
</li>
<li><p><code>find_element_by_class_name</code>(<em>name</em>)</p>
</li>
<li><p><code>find_element_by_css_selector</code>(<em>css_selector</em>)</p>
</li>
<li><p><code>find_element_by_id</code>(<em>id_</em>)</p>
</li>
<li><p><code>find_element_by_link_text</code>(<em>link_text</em>)</p>
</li>
<li><p><code>find_element_by_name</code>(<em>name</em>)</p>
</li>
<li><p><code>find_element_by_partial_link_text</code>(<em>link_text</em>)</p>
</li>
<li><p><code>find_element_by_tag_name</code>(<em>name</em>)</p>
</li>
<li><p><code>find_element_by_xpath</code>(<em>xpath</em>)</p>
</li>
<li><p><code>find_elements</code>(<em>by=’id’</em>, <em>value=None</em>)</p>
</li>
<li><p><code>find_elements_by_class_name</code>(<em>name</em>)</p>
</li>
<li><p><code>find_elements_by_css_selector</code>(<em>css_selector</em>)</p>
</li>
<li><p><code>find_elements_by_id</code>(<em>id_</em>)</p>
</li>
<li><p><code>find_elements_by_link_text</code>(<em>text</em>)</p>
</li>
<li><p><code>find_elements_by_name</code>(<em>name</em>)</p>
</li>
<li><p><code>find_elements_by_partial_link_text</code>(<em>link_text</em>)</p>
</li>
<li><p><code>find_elements_by_tag_name</code>(<em>name</em>)</p>
</li>
<li><p><code>find_elements_by_xpath</code>(<em>xpath</em>)</p>
</li>
<li><p><code>forward</code>()</p>
</li>
<li><p><code>get</code>(<em>url</em>)</p>
</li>
<li><p><code>quit</code>()</p>
</li>
<li><p><code>wrapped_driver</code></p>
<p>Returns the WebDriver instance wrapped by this EventsFiringWebDriver</p>
</li>
</ul>
<p><em>class</em> <code>selenium.webdriver.support.event_firing_webdriver.EventFiringWebElement</code>(<em>webelement</em>, <em>ef_driver</em>)</p>
<p>Bases: <code>object</code></p>
<p>” A wrapper around WebElement instance which supports firing events</p>
<ul>
<li><p><code>__init__</code>(<em>webelement</em>, <em>ef_driver</em>)</p>
<p>Creates a new instance of the EventFiringWebElement</p>
</li>
<li><p><code>clear</code>()</p>
</li>
<li><p><code>click</code>()</p>
</li>
<li><p><code>find_element</code>(<em>by=’id’</em>, <em>value=None</em>)</p>
</li>
<li><p><code>find_element_by_class_name</code>(<em>name</em>)</p>
</li>
<li><p><code>find_element_by_css_selector</code>(<em>css_selector</em>)</p>
</li>
<li><p><code>find_element_by_id</code>(<em>id_</em>)</p>
</li>
<li><p><code>find_element_by_link_text</code>(<em>link_text</em>)</p>
</li>
<li><p><code>find_element_by_name</code>(<em>name</em>)</p>
</li>
<li><p><code>find_element_by_partial_link_text</code>(<em>link_text</em>)</p>
</li>
<li><p><code>find_element_by_tag_name</code>(<em>name</em>)</p>
</li>
<li><p><code>find_element_by_xpath</code>(<em>xpath</em>)</p>
</li>
<li><p><code>find_elements</code>(<em>by=’id’</em>, <em>value=None</em>)</p>
</li>
<li><p><code>find_elements_by_class_name</code>(<em>name</em>)</p>
</li>
<li><p><code>find_elements_by_css_selector</code>(<em>css_selector</em>)</p>
</li>
<li><p><code>find_elements_by_id</code>(<em>id_</em>)</p>
</li>
<li><p><code>find_elements_by_link_text</code>(<em>link_text</em>)</p>
</li>
<li><p><code>find_elements_by_name</code>(<em>name</em>)</p>
</li>
<li><p><code>find_elements_by_partial_link_text</code>(<em>link_text</em>)</p>
</li>
<li><p><code>find_elements_by_tag_name</code>(<em>name</em>)</p>
</li>
<li><p><code>find_elements_by_xpath</code>(<em>xpath</em>)</p>
</li>
<li><p><code>send_keys</code>(<em>*value</em>)</p>
</li>
<li><p><code>wrapped_element</code></p>
<p>Returns the WebElement wrapped by this EventFiringWebElement instance</p>
</li>
</ul>
<h2 id="Abstract-Event-Listener-Support"><a href="#Abstract-Event-Listener-Support" class="headerlink" title="Abstract Event Listener Support"></a>Abstract Event Listener Support</h2><p><em>class</em> <code>selenium.webdriver.support.abstract_event_listener.AbstractEventListener</code></p>
<p>Bases: <code>object</code></p>
<p>Event listener must subclass and implement this fully or partially</p>
<ul>
<li><p><code>after_change_value_of</code>(<em>element</em>, <em>driver</em>)</p>
</li>
<li><p><code>after_click</code>(<em>element</em>, <em>driver</em>)</p>
</li>
<li><p><code>after_close</code>(<em>driver</em>)</p>
</li>
<li><p><code>after_execute_script</code>(<em>script</em>, <em>driver</em>)</p>
</li>
<li><p><code>after_find</code>(<em>by</em>, <em>value</em>, <em>driver</em>)</p>
</li>
<li><p><code>after_navigate_back</code>(<em>driver</em>)</p>
</li>
<li><p><code>after_navigate_forward</code>(<em>driver</em>)</p>
</li>
<li><p><code>after_navigate_to</code>(<em>url</em>, <em>driver</em>)</p>
</li>
<li><p><code>after_quit</code>(<em>driver</em>)</p>
</li>
<li><p><code>before_change_value_of</code>(<em>element</em>, <em>driver</em>)</p>
</li>
<li><p><code>before_click</code>(<em>element</em>, <em>driver</em>)</p>
</li>
<li><p><code>before_close</code>(<em>driver</em>)</p>
</li>
<li><p><code>before_execute_script</code>(<em>script</em>, <em>driver</em>)</p>
</li>
<li><p><code>before_find</code>(<em>by</em>, <em>value</em>, <em>driver</em>)</p>
</li>
<li><p><code>before_navigate_back</code>(<em>driver</em>)</p>
</li>
<li><p><code>before_navigate_forward</code>(<em>driver</em>)</p>
</li>
<li><p><code>before_navigate_to</code>(<em>url</em>, <em>driver</em>)</p>
</li>
<li><p><code>before_quit</code>(<em>driver</em>)</p>
</li>
<li><p><code>on_exception</code>(<em>exception</em>, <em>driver</em>)</p>
</li>
</ul>
<h2 id="Expected-conditions-Support"><a href="#Expected-conditions-Support" class="headerlink" title="Expected conditions Support"></a>Expected conditions Support</h2><ul>
<li><p><em>class</em> <code>selenium.webdriver.support.expected_conditions.alert_is_present</code></p>
<p>Bases: <code>object</code>Expect an alert to be present.</p>
<p><code>__init__</code>()</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><em>class</em> <code>selenium.webdriver.support.expected_conditions.element_located_selection_state_to_be</code>(<em>locator</em>, <em>is_selected</em>)</p>
<p>Bases: <code>object</code></p>
<p>An expectation to locate an element and check if the selection state specified is in that state. locator is a tuple of (by, path) is_selected is a boolean</p>
<p><code>__init__</code>(<em>locator</em>, <em>is_selected</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><em>class</em> <code>selenium.webdriver.support.expected_conditions.element_located_to_be_selected</code>(<em>locator</em>)</p>
<p>Bases: <code>object</code></p>
<p>An expectation for the element to be located is selected. locator is a tuple of (by, path)</p>
<p><code>__init__</code>(<em>locator</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><em>class</em> <code>selenium.webdriver.support.expected_conditions.element_selection_state_to_be</code>(<em>element</em>, <em>is_selected</em>)</p>
<p>Bases: <code>object</code></p>
<p>An expectation for checking if the given element is selected. element is WebElement object is_selected is a Boolean.”</p>
<p><code>__init__</code>(<em>element</em>, <em>is_selected</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><em>class</em> <code>selenium.webdriver.support.expected_conditions.element_to_be_clickable</code>(<em>locator</em>)</p>
<p>Bases: <code>object</code></p>
<p>An Expectation for checking an element is visible and enabled such that you can click it.</p>
<p><code>__init__</code>(<em>locator</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><em>class</em> <code>selenium.webdriver.support.expected_conditions.element_to_be_selected</code>(<em>element</em>)</p>
<p>Bases: <code>object</code></p>
<p>An expectation for checking the selection is selected. element is WebElement object</p>
<p><code>__init__</code>(<em>element</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><em>class</em> <code>selenium.webdriver.support.expected_conditions.frame_to_be_available_and_switch_to_it</code>(<em>locator</em>)</p>
<p>Bases: <code>object</code></p>
<p>An expectation for checking whether the given frame is available to switch to. If the frame is available it switches the given driver to the specified frame.</p>
<p><code>__init__</code>(<em>locator</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><em>class</em> <code>selenium.webdriver.support.expected_conditions.invisibility_of_element</code>(<em>locator</em>)</p>
<p>Bases: <a href="https://selenium-python.readthedocs.io/api.html#selenium.webdriver.support.expected_conditions.invisibility_of_element_located" target="_blank" rel="noopener"><code>selenium.webdriver.support.expected_conditions.invisibility_of_element_located</code></a></p>
<p>An Expectation for checking that an element is either invisible or not present on the DOM.element is either a locator (text) or an WebElement</p>
</li>
<li><p><em>class</em> <code>selenium.webdriver.support.expected_conditions.invisibility_of_element_located</code>(<em>locator</em>)</p>
<p>Bases: <code>object</code></p>
<p>An Expectation for checking that an element is either invisible or not present on the DOM.locator used to find the element</p>
<p><code>__init__</code>(<em>locator</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><em>class</em> <code>selenium.webdriver.support.expected_conditions.new_window_is_opened</code>(<em>current_handles</em>)</p>
<p>Bases: <code>object</code></p>
<p>An expectation that a new window will be opened and have the number of windows handles increase</p>
<p><code>__init__</code>(<em>current_handles</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><em>class</em> <code>selenium.webdriver.support.expected_conditions.number_of_windows_to_be</code>(<em>num_windows</em>)</p>
<p>Bases: <code>object</code></p>
<p>An expectation for the number of windows to be a certain value.</p>
<p><code>__init__</code>(<em>num_windows</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><em>class</em> <code>selenium.webdriver.support.expected_conditions.presence_of_all_elements_located</code>(<em>locator</em>)</p>
<p>Bases: <code>object</code></p>
<p>An expectation for checking that there is at least one element present on a web page. locator is used to find the element returns the list of WebElements once they are located</p>
<p><code>__init__</code>(<em>locator</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><em>class</em> <code>selenium.webdriver.support.expected_conditions.presence_of_element_located</code>(<em>locator</em>)</p>
<p>Bases: <code>object</code></p>
<p>An expectation for checking that an element is present on the DOM of a page. This does not necessarily mean that the element is visible. locator - used to find the element returns the WebElement once it is located</p>
<p><code>__init__</code>(<em>locator</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><em>class</em> <code>selenium.webdriver.support.expected_conditions.staleness_of</code>(<em>element</em>)</p>
<p>Bases: <code>object</code></p>
<p>Wait until an element is no longer attached to the DOM. element is the element to wait for. returns False if the element is still attached to the DOM, true otherwise.</p>
<p><code>__init__</code>(<em>element</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><em>class</em> <code>selenium.webdriver.support.expected_conditions.text_to_be_present_in_element</code>(<em>locator</em>, <em>text_</em>)</p>
<p>Bases: <code>object</code></p>
<p>An expectation for checking if the given text is present in the specified element. locator, text</p>
<p><code>__init__</code>(<em>locator</em>, <em>text_</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><em>class</em> <code>selenium.webdriver.support.expected_conditions.text_to_be_present_in_element_value</code>(<em>locator</em>, <em>text_</em>)</p>
<p>Bases: <code>object</code></p>
<p>An expectation for checking if the given text is present in the element’s locator, text</p>
<p><code>__init__</code>(<em>locator</em>, <em>text_</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><em>class</em> <code>selenium.webdriver.support.expected_conditions.title_contains</code>(<em>title</em>)</p>
<p>Bases: <code>object</code></p>
<p>An expectation for checking that the title contains a case-sensitive substring. title is the fragment of title expected returns True when the title matches, False otherwise</p>
<p><code>__init__</code>(<em>title</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><em>class</em> <code>selenium.webdriver.support.expected_conditions.title_is</code>(<em>title</em>)</p>
<p>Bases: <code>object</code></p>
<p>An expectation for checking the title of a page. title is the expected title, which must be an exact match returns True if the title matches, false otherwise.</p>
<p><code>__init__</code>(<em>title</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><em>class</em> <code>selenium.webdriver.support.expected_conditions.url_changes</code>(<em>url</em>)</p>
<p>Bases: <code>object</code></p>
<p>An expectation for checking the current url. url is the expected url, which must not be an exact match returns True if the url is different, false otherwise.</p>
<p><code>__init__</code>(<em>url</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><em>class</em> <code>selenium.webdriver.support.expected_conditions.url_contains</code>(<em>url</em>)</p>
<p>Bases: <code>object</code></p>
<p>An expectation for checking that the current url contains a case-sensitive substring. url is the fragment of url expected, returns True when the url matches, False otherwise</p>
<p><code>__init__</code>(<em>url</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><em>class</em> <code>selenium.webdriver.support.expected_conditions.url_matches</code>(<em>pattern</em>)</p>
<p>Bases: <code>object</code></p>
<p>An expectation for checking the current url. pattern is the expected pattern, which must be an exact match returns True if the url matches, false otherwise.</p>
<p><code>__init__</code>(<em>pattern</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><em>class</em> <code>selenium.webdriver.support.expected_conditions.url_to_be</code>(<em>url</em>)</p>
<p>Bases: <code>object</code></p>
<p>An expectation for checking the current url. url is the expected url, which must be an exact match returns True if the url matches, false otherwise.</p>
<p><code>__init__</code>(<em>url</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><em>class</em> <code>selenium.webdriver.support.expected_conditions.visibility_of</code>(<em>element</em>)</p>
<p>Bases: <code>object</code></p>
<p>An expectation for checking that an element, known to be present on the DOM of a page, is visible. Visibility means that the element is not only displayed but also has a height and width that is greater than 0. element is the WebElement returns the (same) WebElement once it is visible</p>
<p><code>__init__</code>(<em>element</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><em>class</em> <code>selenium.webdriver.support.expected_conditions.visibility_of_all_elements_located</code>(<em>locator</em>)</p>
<p>Bases: <code>object</code></p>
<p>An expectation for checking that all elements are present on the DOM of a page and visible. Visibility means that the elements are not only displayed but also has a height and width that is greater than 0. locator - used to find the elements returns the list of WebElements once they are located and visible</p>
<p><code>__init__</code>(<em>locator</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><em>class</em> <code>selenium.webdriver.support.expected_conditions.visibility_of_any_elements_located</code>(<em>locator</em>)</p>
<p>Bases: <code>object</code></p>
<p>An expectation for checking that there is at least one element visible on a web page. locator is used to find the element returns the list of WebElements once they are located</p>
<p><code>__init__</code>(<em>locator</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
<li><p><em>class</em> <code>selenium.webdriver.support.expected_conditions.visibility_of_element_located</code>(<em>locator</em>)</p>
<p>Bases: <code>object</code></p>
<p>An expectation for checking that an element is present on the DOM of a page and visible. Visibility means that the element is not only displayed but also has a height and width that is greater than 0. locator - used to find the element returns the WebElement once it is located and visible</p>
<p><code>__init__</code>(<em>locator</em>)</p>
<p>Initialize self. See help(type(self)) for accurate signature.</p>
</li>
</ul>
<h1 id="附录：常见问题"><a href="#附录：常见问题" class="headerlink" title="附录：常见问题"></a>附录：常见问题</h1><h2 id="如何使用-ChromeDriver"><a href="#如何使用-ChromeDriver" class="headerlink" title="如何使用 ChromeDriver ?"></a>如何使用 ChromeDriver ?</h2><p>下载最新版本的 <a href="https://sites.google.com/a/chromium.org/chromedriver/downloads" target="_blank" rel="noopener">chromedriver</a>. 解压缩这个文件:</p>
<pre><code>unzip chromedriver_linux32_x.x.x.x.zip</code></pre><p>你应该会看到一个 <code>chromedriver</code> 的可执行文件. 现在你可以像这样创建一个 Chrome WebDriver 实例:</p>
<pre class="line-numbers language-python"><code class="language-python">driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span>executable_path<span class="token operator">=</span><span class="token string">"/path/to/chromedriver"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>这个示例的其余部分应该在其他的文档中给出。</p>
<h2 id="Selenium-2是否支持XPath-2-0版本？"><a href="#Selenium-2是否支持XPath-2-0版本？" class="headerlink" title="Selenium 2是否支持XPath 2.0版本？"></a>Selenium 2是否支持XPath 2.0版本？</h2><p>参考：<a href="http://seleniumhq.org/docs/03_webdriver.html#how-xpath-works-in-webdriver" target="_blank" rel="noopener">http://seleniumhq.org/docs/03_webdriver.html#how-xpath-works-in-webdriver</a></p>
<p>Selenium代表的XPath查询基于浏览器自身的XPath引擎，所以Selenium支持任何 支持XPath的浏览器。在不具备原生的XPath引擎（IE6,7,8）的浏览器，Selenium只支持XPath 1.0。</p>
<h2 id="如何向下滚动到页面的底部？"><a href="#如何向下滚动到页面的底部？" class="headerlink" title="如何向下滚动到页面的底部？"></a>如何向下滚动到页面的底部？</h2><p>参考: <a href="http://blog.varunin.com/2011/08/scrolling-on-pages-using-selenium.html" target="_blank" rel="noopener">http://blog.varunin.com/2011/08/scrolling-on-pages-using-selenium.html</a></p>
<p>你可以在加载完成的页面上使用 execute_script 方法执行js。所以， 你调用javascript API滚动到底部或页面的任何位置。</p>
<p>这里是一个滚动到页面底部的例子:</p>
<pre><code>driver.execute_script("window.scrollTo(0, document.body.scrollHeight);")</code></pre><p>该 <a href="http://www.w3schools.com/jsref/obj_window.asp" target="_blank" rel="noopener">window</a> 对象在DOM有一个 <a href="http://www.w3schools.com/jsref/met_win_scrollto.asp" target="_blank" rel="noopener">scrollTo</a> 滚动到打开窗口 的任意位置的方法。 该 <a href="http://www.w3schools.com/jsref/dom_obj_all.asp" target="_blank" rel="noopener">scrollHeight</a> 是所有元素的共同属性。 该 document.body.scrollHeight 将给出整个页面体的高度。</p>
<h2 id="如何使用自定义的Firefox-配置文件保存文件？"><a href="#如何使用自定义的Firefox-配置文件保存文件？" class="headerlink" title="如何使用自定义的Firefox 配置文件保存文件？"></a>如何使用自定义的Firefox 配置文件保存文件？</h2><p>参考: <a href="http://stackoverflow.com/questions/1176348/access-to-file-download-dialog-in-firefox" target="_blank" rel="noopener">http://stackoverflow.com/questions/1176348/access-to-file-download-dialog-in-firefox</a></p>
<p>参考: <a href="http://blog.codecentric.de/en/2010/07/file-downloads-with-selenium-mission-impossible/" target="_blank" rel="noopener">http://blog.codecentric.de/en/2010/07/file-downloads-with-selenium-mission-impossible/</a></p>
<p>第一步是要确认自动保存文件的类型。</p>
<p>要确定你想要自动下载的内容类型，你可使用 <a href="http://curl.haxx.se/" target="_blank" rel="noopener">curl</a>:</p>
<pre><code>curl -I URL | grep "Content-Type"</code></pre><p>找到内容类型的另一种方法是使用 [<code>](https://selenium-python-zh.readthedocs.io/en/latest/faq.html#id4)requests &lt;[http://python-requests.org](http://python-requests.org/)&gt;</code>模块， 你可以像这样使用:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> requests
content_type <span class="token operator">=</span> requests<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token string">'http://www.python.org'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'content-type'</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>content_type<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>一旦内容类型被确认，你可以用它来设置firefox配置文件的偏好: <code>browser.helperApps.neverAsk.saveToDisk</code> 下面是一个例子:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> os

<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver

fp <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>FirefoxProfile<span class="token punctuation">(</span><span class="token punctuation">)</span>

fp<span class="token punctuation">.</span>set_preference<span class="token punctuation">(</span><span class="token string">"browser.download.folderList"</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
fp<span class="token punctuation">.</span>set_preference<span class="token punctuation">(</span><span class="token string">"browser.download.manager.showWhenStarting"</span><span class="token punctuation">,</span><span class="token boolean">False</span><span class="token punctuation">)</span>
fp<span class="token punctuation">.</span>set_preference<span class="token punctuation">(</span><span class="token string">"browser.download.dir"</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span>getcwd<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
fp<span class="token punctuation">.</span>set_preference<span class="token punctuation">(</span><span class="token string">"browser.helperApps.neverAsk.saveToDisk"</span><span class="token punctuation">,</span> <span class="token string">"application/octet-stream"</span><span class="token punctuation">)</span>

browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Firefox<span class="token punctuation">(</span>firefox_profile<span class="token operator">=</span>fp<span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://pypi.python.org/pypi/selenium"</span><span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>find_element_by_partial_link_text<span class="token punctuation">(</span><span class="token string">"selenium-2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在上面的例子中，<code>application/octet-stream</code> 被当作内容类型。</p>
<p>该 <code>browser.download.dir</code> 选项指定了你要下载文件的目录。</p>
<h2 id="如果上传文件到文件上传控件？"><a href="#如果上传文件到文件上传控件？" class="headerlink" title="如果上传文件到文件上传控件？"></a>如果上传文件到文件上传控件？</h2><p>选择 <code>&lt;input type="file"&gt;</code> 元素并且调用 <code>send_keys()</code> 方法传入要上传文件的路径，可以 是对于测试脚本的相对路径，也可以是绝对路径。 请牢记在Windows和Unix系统之间的路径名的区别。</p>
<h2 id="如果在Firefox中使用firebug工具？"><a href="#如果在Firefox中使用firebug工具？" class="headerlink" title="如果在Firefox中使用firebug工具？"></a>如果在Firefox中使用firebug工具？</h2><p>首先下载Firebug插件的XPI文件， 然后调用对于firefox 的配置提供的 <code>add_extension</code> 方法</p>
<blockquote>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver

fp <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>FirefoxProfile<span class="token punctuation">(</span><span class="token punctuation">)</span>

fp<span class="token punctuation">.</span>add_extension<span class="token punctuation">(</span>extension<span class="token operator">=</span>’firebug<span class="token number">-1.8</span><span class="token punctuation">.</span><span class="token number">4.</span>xpi’<span class="token punctuation">)</span> fp<span class="token punctuation">.</span>set_preference<span class="token punctuation">(</span>“extensions<span class="token punctuation">.</span>firebug<span class="token punctuation">.</span>currentVersion”<span class="token punctuation">,</span> “<span class="token number">1.8</span><span class="token punctuation">.</span><span class="token number">4</span>”<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#Avoid startup screen browser = webdriver.Firefox(firefox_profile=fp)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</blockquote>
<h2 id="如果获取当前窗口的截图？"><a href="#如果获取当前窗口的截图？" class="headerlink" title="如果获取当前窗口的截图？"></a>如果获取当前窗口的截图？</h2><p>使用webdriver提供的 save_screenshot 方法:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver

driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Firefox<span class="token punctuation">(</span><span class="token punctuation">)</span>
driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://www.python.org/'</span><span class="token punctuation">)</span>
driver<span class="token punctuation">.</span>save_screenshot<span class="token punctuation">(</span><span class="token string">'screenshot.png'</span><span class="token punctuation">)</span>
driver<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h1 id="爬虫进阶-Beautiful-Soup-4-4-0"><a href="#爬虫进阶-Beautiful-Soup-4-4-0" class="headerlink" title="爬虫进阶:Beautiful Soup 4.4.0"></a>爬虫进阶:Beautiful Soup 4.4.0</h1><p>Beautiful Soup 是一个可以从HTML或XML文件中提取数据的Python库.它能够通过你喜欢的转换器实现惯用的文档导航,查找,修改文档的方式.Beautiful Soup会帮你节省数小时甚至数天的工作时间.</p>
<p>这篇文档介绍了BeautifulSoup4中所有主要特性,并且有小例子.让我来向你展示它适合做什么,如何工作,怎样使用,如何达到你想要的效果,和处理异常情况.</p>
<p>文档中出现的例子在Python2.7和Python3.2中的执行结果相同</p>
<p>你可能在寻找 <a href="http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html" target="_blank" rel="noopener">Beautiful Soup3</a> 的文档,Beautiful Soup 3 目前已经停止开发,我们推荐在现在的项目中使用Beautiful Soup 4, 移植到BS4</p>
<h2 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a>快速开始</h2><p>下面的一段HTML代码将作为例子被多次用到.这是 <em>爱丽丝梦游仙境的</em> 的一段内容(以后内容中简称为 <em>爱丽丝</em> 的文档):</p>
<pre><code>html_doc = """
&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse's story&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
&lt;p class="title"&gt;&lt;b&gt;The Dormouse's story&lt;/b&gt;&lt;/p&gt;

&lt;p class="story"&gt;Once upon a time there were three little sisters; and their names were
&lt;a href="http://example.com/elsie" class="sister" id="link1"&gt;Elsie&lt;/a&gt;,
&lt;a href="http://example.com/lacie" class="sister" id="link2"&gt;Lacie&lt;/a&gt; and
&lt;a href="http://example.com/tillie" class="sister" id="link3"&gt;Tillie&lt;/a&gt;;
and they lived at the bottom of a well.&lt;/p&gt;

&lt;p class="story"&gt;...&lt;/p&gt;
"""</code></pre><p>使用BeautifulSoup解析这段代码,能够得到一个 <code>BeautifulSoup</code> 的对象,并能按照标准的缩进格式的结构输出:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html_doc<span class="token punctuation">,</span> <span class="token string">'html.parser'</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>prettify<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;html></span>
<span class="token comment" spellcheck="true">#  &lt;head></span>
<span class="token comment" spellcheck="true">#   &lt;title></span>
<span class="token comment" spellcheck="true">#    The Dormouse's story</span>
<span class="token comment" spellcheck="true">#   &lt;/title></span>
<span class="token comment" spellcheck="true">#  &lt;/head></span>
<span class="token comment" spellcheck="true">#  &lt;body></span>
<span class="token comment" spellcheck="true">#   &lt;p class="title"></span>
<span class="token comment" spellcheck="true">#    &lt;b></span>
<span class="token comment" spellcheck="true">#     The Dormouse's story</span>
<span class="token comment" spellcheck="true">#    &lt;/b></span>
<span class="token comment" spellcheck="true">#   &lt;/p></span>
<span class="token comment" spellcheck="true">#   &lt;p class="story"></span>
<span class="token comment" spellcheck="true">#    Once upon a time there were three little sisters; and their names were</span>
<span class="token comment" spellcheck="true">#    &lt;a class="sister" href="http://example.com/elsie" id="link1"></span>
<span class="token comment" spellcheck="true">#     Elsie</span>
<span class="token comment" spellcheck="true">#    &lt;/a></span>
<span class="token comment" spellcheck="true">#    ,</span>
<span class="token comment" spellcheck="true">#    &lt;a class="sister" href="http://example.com/lacie" id="link2"></span>
<span class="token comment" spellcheck="true">#     Lacie</span>
<span class="token comment" spellcheck="true">#    &lt;/a></span>
<span class="token comment" spellcheck="true">#    and</span>
<span class="token comment" spellcheck="true">#    &lt;a class="sister" href="http://example.com/tillie" id="link2"></span>
<span class="token comment" spellcheck="true">#     Tillie</span>
<span class="token comment" spellcheck="true">#    &lt;/a></span>
<span class="token comment" spellcheck="true">#    ; and they lived at the bottom of a well.</span>
<span class="token comment" spellcheck="true">#   &lt;/p></span>
<span class="token comment" spellcheck="true">#   &lt;p class="story"></span>
<span class="token comment" spellcheck="true">#    ...</span>
<span class="token comment" spellcheck="true">#   &lt;/p></span>
<span class="token comment" spellcheck="true">#  &lt;/body></span>
<span class="token comment" spellcheck="true"># &lt;/html></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>几个简单的浏览结构化数据的方法:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>title
<span class="token comment" spellcheck="true"># &lt;title>The Dormouse's story&lt;/title></span>

soup<span class="token punctuation">.</span>title<span class="token punctuation">.</span>name
<span class="token comment" spellcheck="true"># u'title'</span>

soup<span class="token punctuation">.</span>title<span class="token punctuation">.</span>string
<span class="token comment" spellcheck="true"># u'The Dormouse's story'</span>

soup<span class="token punctuation">.</span>title<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>name
<span class="token comment" spellcheck="true"># u'head'</span>

soup<span class="token punctuation">.</span>p
<span class="token comment" spellcheck="true"># &lt;p class="title">&lt;b>The Dormouse's story&lt;/b>&lt;/p></span>

soup<span class="token punctuation">.</span>p<span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">]</span>
<span class="token comment" spellcheck="true"># u'title'</span>

soup<span class="token punctuation">.</span>a
<span class="token comment" spellcheck="true"># &lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a></span>

soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/lacie" id="link2">Lacie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/tillie" id="link3">Tillie&lt;/a>]</span>

soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"link3"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;a class="sister" href="http://example.com/tillie" id="link3">Tillie&lt;/a></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>从文档中找到所有&lt;a&gt;标签的链接:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">for</span> link <span class="token keyword">in</span> soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>link<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'href'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment" spellcheck="true"># http://example.com/elsie</span>
    <span class="token comment" spellcheck="true"># http://example.com/lacie</span>
    <span class="token comment" spellcheck="true"># http://example.com/tillie</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>从文档中获取所有文字内容:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>get_text<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># The Dormouse's story</span>
<span class="token comment" spellcheck="true">#</span>
<span class="token comment" spellcheck="true"># The Dormouse's story</span>
<span class="token comment" spellcheck="true">#</span>
<span class="token comment" spellcheck="true"># Once upon a time there were three little sisters; and their names were</span>
<span class="token comment" spellcheck="true"># Elsie,</span>
<span class="token comment" spellcheck="true"># Lacie and</span>
<span class="token comment" spellcheck="true"># Tillie;</span>
<span class="token comment" spellcheck="true"># and they lived at the bottom of a well.</span>
<span class="token comment" spellcheck="true">#</span>
<span class="token comment" spellcheck="true"># ...</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="安装-Beautiful-Soup"><a href="#安装-Beautiful-Soup" class="headerlink" title="安装 Beautiful Soup"></a>安装 Beautiful Soup</h1><p>如果你用的是新版的Debain或ubuntu,那么可以通过系统的软件包管理来安装:</p>
<pre><code>$ apt-get install Python-bs4</code></pre><p>Beautiful Soup 4 通过PyPi发布,所以如果你无法使用系统包管理安装,那么也可以通过 <code>easy_install</code> 或 <code>pip</code> 来安装.包的名字是 <code>beautifulsoup4</code> ,这个包兼容Python2和Python3.</p>
<pre><code>$ easy_install beautifulsoup4
$ pip install beautifulsoup4</code></pre><p>(在PyPi中还有一个名字是 <code>BeautifulSoup</code> 的包,但那可能不是你想要的,那是 <a href="http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html" target="_blank" rel="noopener">Beautiful Soup3</a> 的发布版本,因为很多项目还在使用BS3, 所以 <code>BeautifulSoup</code> 包依然有效.但是如果你在编写新项目,那么你应该安装的 <code>beautifulsoup4</code> )</p>
<p>如果你没有安装 <code>easy_install</code> 或 <code>pip</code> ,那你也可以 <a href="http://www.crummy.com/software/BeautifulSoup/download/4.x/" target="_blank" rel="noopener">下载BS4的源码</a> ,然后通过setup.py来安装.</p>
<pre><code>$ Python setup.py install</code></pre><p>如果上述安装方法都行不通,Beautiful Soup的发布协议允许你将BS4的代码打包在你的项目中,这样无须安装即可使用.</p>
<p>在Python2.7和Python3.2的版本下开发Beautiful Soup, 理论上Beautiful Soup应该在所有当前的Python版本中正常工作</p>
<h2 id="安装完成后的问题"><a href="#安装完成后的问题" class="headerlink" title="安装完成后的问题"></a>安装完成后的问题</h2><p>Beautiful Soup发布时打包成Python2版本的代码,在Python3环境下安装时,会自动转换成Python3的代码,如果没有一个安装的过程,那么代码就不会被转换.</p>
<p>如果代码抛出了 <code>ImportError</code> 的异常: “No module named HTMLParser”, 这是因为你在Python3版本中执行Python2版本的代码.</p>
<p>如果代码抛出了 <code>ImportError</code> 的异常: “No module named html.parser”, 这是因为你在Python2版本中执行Python3版本的代码.</p>
<p>如果遇到上述2种情况,最好的解决方法是重新安装BeautifulSoup4.</p>
<p>如果在ROOT_TAG_NAME = u’[document]’代码处遇到 <code>SyntaxError</code> “Invalid syntax”错误,需要将把BS4的Python代码版本从Python2转换到Python3. 可以重新安装BS4:</p>
<pre><code>$ Python3 setup.py install</code></pre><p>或在bs4的目录中执行Python代码版本转换脚本</p>
<pre><code>$ 2to3-3.2 -w bs4</code></pre><h2 id="安装解析器"><a href="#安装解析器" class="headerlink" title="安装解析器"></a>安装解析器</h2><p>Beautiful Soup支持Python标准库中的HTML解析器,还支持一些第三方的解析器,其中一个是 <a href="http://lxml.de/" target="_blank" rel="noopener">lxml</a> .根据操作系统不同,可以选择下列方法来安装lxml:</p>
<pre><code>$ apt-get install Python-lxml
$ easy_install lxml
$ pip install lxml</code></pre><p>另一个可供选择的解析器是纯Python实现的 <a href="http://code.google.com/p/html5lib/" target="_blank" rel="noopener">html5lib</a> , html5lib的解析方式与浏览器相同,可以选择下列方法来安装html5lib:</p>
<pre><code>$ apt-get install Python-html5lib
$ easy_install html5lib
$ pip install html5lib</code></pre><p>下表列出了主要的解析器,以及它们的优缺点:</p>
<table>
<thead>
<tr>
<th align="left">解析器</th>
<th align="left">使用方法</th>
<th align="left">优势</th>
<th align="left">劣势</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Python标准库</td>
<td align="left"><code>BeautifulSoup(markup, "html.parser")</code></td>
<td align="left">Python的内置标准库执行速度适中文档容错能力强</td>
<td align="left">Python 2.7.3 or 3.2.2)前 的版本中文档容错能力差</td>
</tr>
<tr>
<td align="left">lxml HTML 解析器</td>
<td align="left"><code>BeautifulSoup(markup, "lxml")</code></td>
<td align="left">速度快文档容错能力强</td>
<td align="left">需要安装C语言库</td>
</tr>
<tr>
<td align="left">lxml XML 解析器</td>
<td align="left"><code>BeautifulSoup(markup, ["lxml-xml"])``BeautifulSoup(markup, "xml")</code></td>
<td align="left">速度快唯一支持XML的解析器</td>
<td align="left">需要安装C语言库</td>
</tr>
<tr>
<td align="left">html5lib</td>
<td align="left"><code>BeautifulSoup(markup, "html5lib")</code></td>
<td align="left">最好的容错性以浏览器的方式解析文档生成HTML5格式的文档</td>
<td align="left">速度慢不依赖外部扩展</td>
</tr>
</tbody></table>
<p>推荐使用lxml作为解析器,因为效率更高. 在Python2.7.3之前的版本和Python3中3.2.2之前的版本,必须安装lxml或html5lib, 因为那些Python版本的标准库中内置的HTML解析方法不够稳定.</p>
<p>提示: 如果一段HTML或XML文档格式不正确的话,那么在不同的解析器中返回的结果可能是不一样的,查看 解析器之间的区别 了解更多细节</p>
<h1 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h1><p>将一段文档传入BeautifulSoup 的构造方法,就能得到一个文档的对象, 可以传入一段字符串或一个文件句柄.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup

soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>open<span class="token punctuation">(</span><span class="token string">"index.html"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span><span class="token string">"&lt;html>data&lt;/html>"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>首先,文档被转换成Unicode,并且HTML的实例都被转换成Unicode编码</p>
<pre class="line-numbers language-python"><code class="language-python">BeautifulSoup<span class="token punctuation">(</span><span class="token string">"Sacr&amp;eacute; bleu!"</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span>html<span class="token operator">></span><span class="token operator">&lt;</span>head<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span><span class="token operator">&lt;</span>body<span class="token operator">></span>Sacré bleu!<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>然后,Beautiful Soup选择最合适的解析器来解析这段文档,如果手动指定解析器那么Beautiful Soup会选择指定的解析器来解析文档.(参考 解析成XML ).</p>
<h1 id="对象的种类"><a href="#对象的种类" class="headerlink" title="对象的种类"></a>对象的种类</h1><p>Beautiful Soup将复杂HTML文档转换成一个复杂的树形结构,每个节点都是Python对象,所有对象可以归纳为4种: <code>Tag</code> , <code>NavigableString</code> , <code>BeautifulSoup</code> , <code>Comment</code> .</p>
<h2 id="Tag"><a href="#Tag" class="headerlink" title="Tag"></a>Tag</h2><p><code>Tag</code> 对象与XML或HTML原生文档中的tag相同:</p>
<pre class="line-numbers language-python"><code class="language-python">soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span><span class="token string">'&lt;b class="boldest">Extremely bold&lt;/b>'</span><span class="token punctuation">)</span>
tag <span class="token operator">=</span> soup<span class="token punctuation">.</span>b
type<span class="token punctuation">(</span>tag<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;class 'bs4.element.Tag'></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>Tag有很多方法和属性,在 遍历文档树 和 搜索文档树 中有详细解释.现在介绍一下tag中最重要的属性: name和attributes</p>
<h3 id="Name"><a href="#Name" class="headerlink" title="Name"></a>Name</h3><p>每个tag都有自己的名字,通过 <code>.name</code> 来获取:</p>
<pre class="line-numbers language-python"><code class="language-python">tag<span class="token punctuation">.</span>name
<span class="token comment" spellcheck="true"># u'b'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>如果改变了tag的name,那将影响所有通过当前Beautiful Soup对象生成的HTML文档:</p>
<pre class="line-numbers language-python"><code class="language-python">tag<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"blockquote"</span>
tag
<span class="token comment" spellcheck="true"># &lt;blockquote class="boldest">Extremely bold&lt;/blockquote></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3 id="Attributes"><a href="#Attributes" class="headerlink" title="Attributes"></a>Attributes</h3><p>一个tag可能有很多个属性. tag <code>&lt;b class="boldest"&gt;</code> 有一个 “class” 的属性,值为 “boldest” . tag的属性的操作方法与字典相同:</p>
<pre class="line-numbers language-python"><code class="language-python">tag<span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">]</span>
<span class="token comment" spellcheck="true"># u'boldest'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>也可以直接”点”取属性, 比如: <code>.attrs</code> :</p>
<pre class="line-numbers language-python"><code class="language-python">tag<span class="token punctuation">.</span>attrs
<span class="token comment" spellcheck="true"># {u'class': u'boldest'}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>tag的属性可以被添加,删除或修改. 再说一次, tag的属性操作方法与字典一样</p>
<pre class="line-numbers language-python"><code class="language-python">tag<span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'verybold'</span>
tag<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
tag
<span class="token comment" spellcheck="true"># &lt;blockquote class="verybold" id="1">Extremely bold&lt;/blockquote></span>

<span class="token keyword">del</span> tag<span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">]</span>
<span class="token keyword">del</span> tag<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span>
tag
<span class="token comment" spellcheck="true"># &lt;blockquote>Extremely bold&lt;/blockquote></span>

tag<span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">]</span>
<span class="token comment" spellcheck="true"># KeyError: 'class'</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>tag<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># None</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="多值属性"><a href="#多值属性" class="headerlink" title="多值属性"></a>多值属性</h4><p>HTML 4定义了一系列可以包含多个值的属性.在HTML5中移除了一些,却增加更多.最常见的多值的属性是 class (一个tag可以有多个CSS的class). 还有一些属性 <code>rel</code> , <code>rev</code> , <code>accept-charset</code> , <code>headers</code> , <code>accesskey</code> . 在Beautiful Soup中多值属性的返回类型是list:</p>
<pre class="line-numbers language-python"><code class="language-python">css_soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span><span class="token string">'&lt;p class="body strikeout">&lt;/p>'</span><span class="token punctuation">)</span>
css_soup<span class="token punctuation">.</span>p<span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">]</span>
<span class="token comment" spellcheck="true"># ["body", "strikeout"]</span>

css_soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span><span class="token string">'&lt;p class="body">&lt;/p>'</span><span class="token punctuation">)</span>
css_soup<span class="token punctuation">.</span>p<span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">]</span>
<span class="token comment" spellcheck="true"># ["body"]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果某个属性看起来好像有多个值,但在任何版本的HTML定义中都没有被定义为多值属性,那么Beautiful Soup会将这个属性作为字符串返回</p>
<pre class="line-numbers language-python"><code class="language-python">id_soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span><span class="token string">'&lt;p id="my id">&lt;/p>'</span><span class="token punctuation">)</span>
id_soup<span class="token punctuation">.</span>p<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span>
<span class="token comment" spellcheck="true"># 'my id'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>将tag转换成字符串时,多值属性会合并为一个值</p>
<pre class="line-numbers language-python"><code class="language-python">rel_soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span><span class="token string">'&lt;p>Back to the &lt;a rel="index">homepage&lt;/a>&lt;/p>'</span><span class="token punctuation">)</span>
rel_soup<span class="token punctuation">.</span>a<span class="token punctuation">[</span><span class="token string">'rel'</span><span class="token punctuation">]</span>
<span class="token comment" spellcheck="true"># ['index']</span>
rel_soup<span class="token punctuation">.</span>a<span class="token punctuation">[</span><span class="token string">'rel'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'index'</span><span class="token punctuation">,</span> <span class="token string">'contents'</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>rel_soup<span class="token punctuation">.</span>p<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;p>Back to the &lt;a rel="index contents">homepage&lt;/a>&lt;/p></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果转换的文档是XML格式,那么tag中不包含多值属性</p>
<pre class="line-numbers language-python"><code class="language-python">xml_soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span><span class="token string">'&lt;p class="body strikeout">&lt;/p>'</span><span class="token punctuation">,</span> <span class="token string">'xml'</span><span class="token punctuation">)</span>
xml_soup<span class="token punctuation">.</span>p<span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">]</span>
<span class="token comment" spellcheck="true"># u'body strikeout'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h2 id="可以遍历的字符串"><a href="#可以遍历的字符串" class="headerlink" title="可以遍历的字符串"></a>可以遍历的字符串</h2><p>字符串常被包含在tag内.Beautiful Soup用 <code>NavigableString</code> 类来包装tag中的字符串:</p>
<pre class="line-numbers language-python"><code class="language-python">tag<span class="token punctuation">.</span>string
<span class="token comment" spellcheck="true"># u'Extremely bold'</span>
type<span class="token punctuation">(</span>tag<span class="token punctuation">.</span>string<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;class 'bs4.element.NavigableString'></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>一个 <code>NavigableString</code> 字符串与Python中的Unicode字符串相同,并且还支持包含在 遍历文档树 和 搜索文档树 中的一些特性. 通过 <code>unicode()</code> 方法可以直接将 <code>NavigableString</code> 对象转换成Unicode字符串:</p>
<pre class="line-numbers language-python"><code class="language-python">unicode_string <span class="token operator">=</span> unicode<span class="token punctuation">(</span>tag<span class="token punctuation">.</span>string<span class="token punctuation">)</span>
unicode_string
<span class="token comment" spellcheck="true"># u'Extremely bold'</span>
type<span class="token punctuation">(</span>unicode_string<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;type 'unicode'></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>tag中包含的字符串不能编辑,但是可以被替换成其它的字符串,用 replace_with() 方法:</p>
<pre class="line-numbers language-python"><code class="language-python">tag<span class="token punctuation">.</span>string<span class="token punctuation">.</span>replace_with<span class="token punctuation">(</span><span class="token string">"No longer bold"</span><span class="token punctuation">)</span>
tag
<span class="token comment" spellcheck="true"># &lt;blockquote>No longer bold&lt;/blockquote></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><code>NavigableString</code> 对象支持 遍历文档树 和 搜索文档树 中定义的大部分属性, 并非全部.尤其是,一个字符串不能包含其它内容(tag能够包含字符串或是其它tag),字符串不支持 <code>.contents</code> 或 <code>.string</code> 属性或 <code>find()</code> 方法.</p>
<p>如果想在Beautiful Soup之外使用 <code>NavigableString</code> 对象,需要调用 <code>unicode()</code> 方法,将该对象转换成普通的Unicode字符串,否则就算Beautiful Soup已方法已经执行结束,该对象的输出也会带有对象的引用地址.这样会浪费内存.</p>
<h2 id="BeautifulSoup"><a href="#BeautifulSoup" class="headerlink" title="BeautifulSoup"></a>BeautifulSoup</h2><p><code>BeautifulSoup</code> 对象表示的是一个文档的全部内容.大部分时候,可以把它当作 <code>Tag</code> 对象,它支持 遍历文档树 和 搜索文档树 中描述的大部分的方法.</p>
<p>因为 <code>BeautifulSoup</code> 对象并不是真正的HTML或XML的tag,所以它没有name和attribute属性.但有时查看它的 <code>.name</code> 属性是很方便的,所以 <code>BeautifulSoup</code> 对象包含了一个值为 “[document]” 的特殊属性 <code>.name</code></p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>name
<span class="token comment" spellcheck="true"># u'[document]'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h2 id="注释及特殊字符串"><a href="#注释及特殊字符串" class="headerlink" title="注释及特殊字符串"></a>注释及特殊字符串</h2><p><code>Tag</code> , <code>NavigableString</code> , <code>BeautifulSoup</code> 几乎覆盖了html和xml中的所有内容,但是还有一些特殊对象.容易让人担心的内容是文档的注释部分:</p>
<pre class="line-numbers language-python"><code class="language-python">markup <span class="token operator">=</span> <span class="token string">"&lt;b>&lt;!--Hey, buddy. Want to buy a used parser?-->&lt;/b>"</span>
soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>markup<span class="token punctuation">)</span>
comment <span class="token operator">=</span> soup<span class="token punctuation">.</span>b<span class="token punctuation">.</span>string
type<span class="token punctuation">(</span>comment<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;class 'bs4.element.Comment'></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>Comment</code> 对象是一个特殊类型的 <code>NavigableString</code> 对象:</p>
<pre class="line-numbers language-python"><code class="language-python">comment
<span class="token comment" spellcheck="true"># u'Hey, buddy. Want to buy a used parser'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>但是当它出现在HTML文档中时, <code>Comment</code> 对象会使用特殊的格式输出:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>b<span class="token punctuation">.</span>prettify<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;b></span>
<span class="token comment" spellcheck="true">#  &lt;!--Hey, buddy. Want to buy a used parser?--></span>
<span class="token comment" spellcheck="true"># &lt;/b></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>Beautiful Soup中定义的其它类型都可能会出现在XML的文档中: <code>CData</code> , <code>ProcessingInstruction</code> , <code>Declaration</code> , <code>Doctype</code> .与 <code>Comment</code> 对象类似,这些类都是 <code>NavigableString</code> 的子类,只是添加了一些额外的方法的字符串独享.下面是用CDATA来替代注释的例子:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> bs4 <span class="token keyword">import</span> CData
cdata <span class="token operator">=</span> CData<span class="token punctuation">(</span><span class="token string">"A CDATA block"</span><span class="token punctuation">)</span>
comment<span class="token punctuation">.</span>replace_with<span class="token punctuation">(</span>cdata<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>b<span class="token punctuation">.</span>prettify<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;b></span>
<span class="token comment" spellcheck="true">#  &lt;![CDATA[A CDATA block]]></span>
<span class="token comment" spellcheck="true"># &lt;/b></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="遍历文档树"><a href="#遍历文档树" class="headerlink" title="遍历文档树"></a>遍历文档树</h1><p>还拿”爱丽丝梦游仙境”的文档来做例子:</p>
<pre><code>html_doc = """
&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse's story&lt;/title&gt;&lt;/head&gt;
    &lt;body&gt;
&lt;p class="title"&gt;&lt;b&gt;The Dormouse's story&lt;/b&gt;&lt;/p&gt;

&lt;p class="story"&gt;Once upon a time there were three little sisters; and their names were
&lt;a href="http://example.com/elsie" class="sister" id="link1"&gt;Elsie&lt;/a&gt;,
&lt;a href="http://example.com/lacie" class="sister" id="link2"&gt;Lacie&lt;/a&gt; and
&lt;a href="http://example.com/tillie" class="sister" id="link3"&gt;Tillie&lt;/a&gt;;
and they lived at the bottom of a well.&lt;/p&gt;

&lt;p class="story"&gt;...&lt;/p&gt;
"""

from bs4 import BeautifulSoup
soup = BeautifulSoup(html_doc, 'html.parser')</code></pre><p>通过这段例子来演示怎样从文档的一段内容找到另一段内容</p>
<h2 id="子节点"><a href="#子节点" class="headerlink" title="子节点"></a>子节点</h2><p>一个Tag可能包含多个字符串或其它的Tag,这些都是这个Tag的子节点.Beautiful Soup提供了许多操作和遍历子节点的属性.</p>
<p>注意: Beautiful Soup中字符串节点不支持这些属性,因为字符串没有子节点</p>
<h3 id="tag的名字"><a href="#tag的名字" class="headerlink" title="tag的名字"></a>tag的名字</h3><p>操作文档树最简单的方法就是告诉它你想获取的tag的name.如果想获取 &lt;head&gt; 标签,只要用 <code>soup.head</code> :</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>head
<span class="token comment" spellcheck="true"># &lt;head>&lt;title>The Dormouse's story&lt;/title>&lt;/head></span>

soup<span class="token punctuation">.</span>title
<span class="token comment" spellcheck="true"># &lt;title>The Dormouse's story&lt;/title></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这是个获取tag的小窍门,可以在文档树的tag中多次调用这个方法.下面的代码可以获取&lt;body&gt;标签中的第一个&lt;b&gt;标签:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>body<span class="token punctuation">.</span>b
<span class="token comment" spellcheck="true"># &lt;b>The Dormouse's story&lt;/b></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>通过点取属性的方式只能获得当前名字的第一个tag:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>a
<span class="token comment" spellcheck="true"># &lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>如果想要得到所有的&lt;a&gt;标签,或是通过名字得到比一个tag更多的内容的时候,就需要用到 Searching the tree 中描述的方法,比如: find_all()</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/lacie" id="link2">Lacie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/tillie" id="link3">Tillie&lt;/a>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="contents-和-children"><a href="#contents-和-children" class="headerlink" title=".contents 和 .children"></a>.contents 和 .children</h3><p>tag的 <code>.contents</code> 属性可以将tag的子节点以列表的方式输出:</p>
<pre class="line-numbers language-python"><code class="language-python">head_tag <span class="token operator">=</span> soup<span class="token punctuation">.</span>head
head_tag
<span class="token comment" spellcheck="true"># &lt;head>&lt;title>The Dormouse's story&lt;/title>&lt;/head></span>

head_tag<span class="token punctuation">.</span>contents
<span class="token punctuation">[</span><span class="token operator">&lt;</span>title<span class="token operator">></span>The Dormouse's story<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span><span class="token punctuation">]</span>

title_tag <span class="token operator">=</span> head_tag<span class="token punctuation">.</span>contents<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
title_tag
<span class="token comment" spellcheck="true"># &lt;title>The Dormouse's story&lt;/title></span>
title_tag<span class="token punctuation">.</span>contents
<span class="token comment" spellcheck="true"># [u'The Dormouse's story']</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>BeautifulSoup</code> 对象本身一定会包含子节点,也就是说&lt;html&gt;标签也是 <code>BeautifulSoup</code> 对象的子节点:</p>
<pre class="line-numbers language-python"><code class="language-python">len<span class="token punctuation">(</span>soup<span class="token punctuation">.</span>contents<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># 1</span>
soup<span class="token punctuation">.</span>contents<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name
<span class="token comment" spellcheck="true"># u'html'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>字符串没有 <code>.contents</code> 属性,因为字符串没有子节点:</p>
<pre class="line-numbers language-python"><code class="language-python">text <span class="token operator">=</span> title_tag<span class="token punctuation">.</span>contents<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
text<span class="token punctuation">.</span>contents
<span class="token comment" spellcheck="true"># AttributeError: 'NavigableString' object has no attribute 'contents'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>通过tag的 <code>.children</code> 生成器,可以对tag的子节点进行循环:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">for</span> child <span class="token keyword">in</span> title_tag<span class="token punctuation">.</span>children<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span>
    <span class="token comment" spellcheck="true"># The Dormouse's story</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3 id="descendants"><a href="#descendants" class="headerlink" title=".descendants"></a>.descendants</h3><p><code>.contents</code> 和 <code>.children</code> 属性仅包含tag的直接子节点.例如,&lt;head&gt;标签只有一个直接子节点&lt;title&gt;</p>
<pre class="line-numbers language-python"><code class="language-python">head_tag<span class="token punctuation">.</span>contents
<span class="token comment" spellcheck="true"># [&lt;title>The Dormouse's story&lt;/title>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>但是&lt;title&gt;标签也包含一个子节点:字符串 “The Dormouse’s story”,这种情况下字符串 “The Dormouse’s story”也属于&lt;head&gt;标签的子孙节点. <code>.descendants</code> 属性可以对所有tag的子孙节点进行递归循环:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">for</span> child <span class="token keyword">in</span> head_tag<span class="token punctuation">.</span>descendants<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span>
    <span class="token comment" spellcheck="true"># &lt;title>The Dormouse's story&lt;/title></span>
    <span class="token comment" spellcheck="true"># The Dormouse's story</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>上面的例子中, &lt;head&gt;标签只有一个子节点,但是有2个子孙节点:&lt;head&gt;节点和&lt;head&gt;的子节点, <code>BeautifulSoup</code> 有一个直接子节点(&lt;html&gt;节点),却有很多子孙节点:</p>
<pre class="line-numbers language-python"><code class="language-python">len<span class="token punctuation">(</span>list<span class="token punctuation">(</span>soup<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># 1</span>
len<span class="token punctuation">(</span>list<span class="token punctuation">(</span>soup<span class="token punctuation">.</span>descendants<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># 25</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="string"><a href="#string" class="headerlink" title=".string"></a>.string</h3><p>如果tag只有一个 <code>NavigableString</code> 类型子节点,那么这个tag可以使用 <code>.string</code> 得到子节点:</p>
<pre class="line-numbers language-python"><code class="language-python">title_tag<span class="token punctuation">.</span>string
<span class="token comment" spellcheck="true"># u'The Dormouse's story'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>如果一个tag仅有一个子节点,那么这个tag也可以使用 <code>.string</code> 方法,输出结果与当前唯一子节点的 <code>.string</code> 结果相同:</p>
<pre class="line-numbers language-python"><code class="language-python">head_tag<span class="token punctuation">.</span>contents
<span class="token comment" spellcheck="true"># [&lt;title>The Dormouse's story&lt;/title>]</span>

head_tag<span class="token punctuation">.</span>string
<span class="token comment" spellcheck="true"># u'The Dormouse's story'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果tag包含了多个子节点,tag就无法确定 <code>.string</code> 方法应该调用哪个子节点的内容, <code>.string</code> 的输出结果是 <code>None</code> :</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>html<span class="token punctuation">.</span>string<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># None</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="strings-和-stripped-strings"><a href="#strings-和-stripped-strings" class="headerlink" title=".strings 和 stripped_strings"></a>.strings 和 stripped_strings</h3><p>如果tag中包含多个字符串,可以使用 <code>.strings</code> 来循环获取:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">for</span> string <span class="token keyword">in</span> soup<span class="token punctuation">.</span>strings<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>repr<span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment" spellcheck="true"># u"The Dormouse's story"</span>
    <span class="token comment" spellcheck="true"># u'\n\n'</span>
    <span class="token comment" spellcheck="true"># u"The Dormouse's story"</span>
    <span class="token comment" spellcheck="true"># u'\n\n'</span>
    <span class="token comment" spellcheck="true"># u'Once upon a time there were three little sisters; and their names were\n'</span>
    <span class="token comment" spellcheck="true"># u'Elsie'</span>
    <span class="token comment" spellcheck="true"># u',\n'</span>
    <span class="token comment" spellcheck="true"># u'Lacie'</span>
    <span class="token comment" spellcheck="true"># u' and\n'</span>
    <span class="token comment" spellcheck="true"># u'Tillie'</span>
    <span class="token comment" spellcheck="true"># u';\nand they lived at the bottom of a well.'</span>
    <span class="token comment" spellcheck="true"># u'\n\n'</span>
    <span class="token comment" spellcheck="true"># u'...'</span>
    <span class="token comment" spellcheck="true"># u'\n'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>输出的字符串中可能包含了很多空格或空行,使用 <code>.stripped_strings</code> 可以去除多余空白内容:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">for</span> string <span class="token keyword">in</span> soup<span class="token punctuation">.</span>stripped_strings<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>repr<span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment" spellcheck="true"># u"The Dormouse's story"</span>
    <span class="token comment" spellcheck="true"># u"The Dormouse's story"</span>
    <span class="token comment" spellcheck="true"># u'Once upon a time there were three little sisters; and their names were'</span>
    <span class="token comment" spellcheck="true"># u'Elsie'</span>
    <span class="token comment" spellcheck="true"># u','</span>
    <span class="token comment" spellcheck="true"># u'Lacie'</span>
    <span class="token comment" spellcheck="true"># u'and'</span>
    <span class="token comment" spellcheck="true"># u'Tillie'</span>
    <span class="token comment" spellcheck="true"># u';\nand they lived at the bottom of a well.'</span>
    <span class="token comment" spellcheck="true"># u'...'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>全部是空格的行会被忽略掉,段首和段末的空白会被删除</p>
<h2 id="父节点"><a href="#父节点" class="headerlink" title="父节点"></a>父节点</h2><p>继续分析文档树,每个tag或字符串都有父节点:被包含在某个tag中</p>
<h3 id="parent"><a href="#parent" class="headerlink" title=".parent"></a>.parent</h3><p>通过 <code>.parent</code> 属性来获取某个元素的父节点.在例子“爱丽丝”的文档中,&lt;head&gt;标签是&lt;title&gt;标签的父节点:</p>
<pre class="line-numbers language-python"><code class="language-python">title_tag <span class="token operator">=</span> soup<span class="token punctuation">.</span>title
title_tag
<span class="token comment" spellcheck="true"># &lt;title>The Dormouse's story&lt;/title></span>
title_tag<span class="token punctuation">.</span>parent
<span class="token comment" spellcheck="true"># &lt;head>&lt;title>The Dormouse's story&lt;/title>&lt;/head></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>文档title的字符串也有父节点:&lt;title&gt;标签</p>
<pre class="line-numbers language-python"><code class="language-python">title_tag<span class="token punctuation">.</span>string<span class="token punctuation">.</span>parent
<span class="token comment" spellcheck="true"># &lt;title>The Dormouse's story&lt;/title></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>文档的顶层节点比如&lt;html&gt;的父节点是 <code>BeautifulSoup</code> 对象:</p>
<pre class="line-numbers language-python"><code class="language-python">html_tag <span class="token operator">=</span> soup<span class="token punctuation">.</span>html
type<span class="token punctuation">(</span>html_tag<span class="token punctuation">.</span>parent<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;class 'bs4.BeautifulSoup'></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><code>BeautifulSoup</code> 对象的 <code>.parent</code> 是None:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>parent<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># None</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="parents"><a href="#parents" class="headerlink" title=".parents"></a>.parents</h3><p>通过元素的 <code>.parents</code> 属性可以递归得到元素的所有父辈节点,下面的例子使用了 <code>.parents</code> 方法遍历了&lt;a&gt;标签到根节点的所有节点.</p>
<pre class="line-numbers language-python"><code class="language-python">link <span class="token operator">=</span> soup<span class="token punctuation">.</span>a
link
<span class="token comment" spellcheck="true"># &lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a></span>
<span class="token keyword">for</span> parent <span class="token keyword">in</span> link<span class="token punctuation">.</span>parents<span class="token punctuation">:</span>
    <span class="token keyword">if</span> parent <span class="token keyword">is</span> None<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># p</span>
<span class="token comment" spellcheck="true"># body</span>
<span class="token comment" spellcheck="true"># html</span>
<span class="token comment" spellcheck="true"># [document]</span>
<span class="token comment" spellcheck="true"># None</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="兄弟节点"><a href="#兄弟节点" class="headerlink" title="兄弟节点"></a>兄弟节点</h2><p>看一段简单的例子:</p>
<pre class="line-numbers language-python"><code class="language-python">sibling_soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span><span class="token string">"&lt;a>&lt;b>text1&lt;/b>&lt;c>text2&lt;/c>&lt;/b>&lt;/a>"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>sibling_soup<span class="token punctuation">.</span>prettify<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;html></span>
<span class="token comment" spellcheck="true">#  &lt;body></span>
<span class="token comment" spellcheck="true">#   &lt;a></span>
<span class="token comment" spellcheck="true">#    &lt;b></span>
<span class="token comment" spellcheck="true">#     text1</span>
<span class="token comment" spellcheck="true">#    &lt;/b></span>
<span class="token comment" spellcheck="true">#    &lt;c></span>
<span class="token comment" spellcheck="true">#     text2</span>
<span class="token comment" spellcheck="true">#    &lt;/c></span>
<span class="token comment" spellcheck="true">#   &lt;/a></span>
<span class="token comment" spellcheck="true">#  &lt;/body></span>
<span class="token comment" spellcheck="true"># &lt;/html></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>因为<b>标签和<c>标签是同一层:他们是同一个元素的子节点,所以<b>和<c>可以被称为兄弟节点.一段文档以标准格式输出时,兄弟节点有相同的缩进级别.在代码中也可以使用这种关系.</c></b></c></b></p><b><b>
<h3 id="next-sibling-和-previous-sibling"><a href="#next-sibling-和-previous-sibling" class="headerlink" title=".next_sibling 和 .previous_sibling"></a>.next_sibling 和 .previous_sibling</h3><p>在文档树中,使用 <code>.next_sibling</code> 和 <code>.previous_sibling</code> 属性来查询兄弟节点:</p>
<pre class="line-numbers language-python"><code class="language-python">sibling_soup<span class="token punctuation">.</span>b<span class="token punctuation">.</span>next_sibling
<span class="token comment" spellcheck="true"># &lt;c>text2&lt;/c></span>

sibling_soup<span class="token punctuation">.</span>c<span class="token punctuation">.</span>previous_sibling
<span class="token comment" spellcheck="true"># &lt;b>text1&lt;/b></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><b>标签有 <code>.next_sibling</code> 属性,但是没有 <code>.previous_sibling</code> 属性,因为<b>标签在同级节点中是第一个.同理,<c>标签有 <code>.previous_sibling</code> 属性,却没有 <code>.next_sibling</code> 属性:</c></b></b></p><b><b>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>sibling_soup<span class="token punctuation">.</span>b<span class="token punctuation">.</span>previous_sibling<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># None</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>sibling_soup<span class="token punctuation">.</span>c<span class="token punctuation">.</span>next_sibling<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># None</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>例子中的字符串“text1”和“text2”不是兄弟节点,因为它们的父节点不同:</p>
<pre class="line-numbers language-python"><code class="language-python">sibling_soup<span class="token punctuation">.</span>b<span class="token punctuation">.</span>string
<span class="token comment" spellcheck="true"># u'text1'</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>sibling_soup<span class="token punctuation">.</span>b<span class="token punctuation">.</span>string<span class="token punctuation">.</span>next_sibling<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># None</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>实际文档中的tag的 <code>.next_sibling</code> 和 <code>.previous_sibling</code> 属性通常是字符串或空白. 看看“爱丽丝”文档:</p>
<pre><code>&lt;a href="http://example.com/elsie" class="sister" id="link1"&gt;Elsie&lt;/a&gt;
&lt;a href="http://example.com/lacie" class="sister" id="link2"&gt;Lacie&lt;/a&gt;
&lt;a href="http://example.com/tillie" class="sister" id="link3"&gt;Tillie&lt;/a&gt;</code></pre><p>如果以为第一个&lt;a&gt;标签的 <code>.next_sibling</code> 结果是第二个&lt;a&gt;标签,那就错了,真实结果是第一个&lt;a&gt;标签和第二个&lt;a&gt;标签之间的顿号和换行符:</p>
<pre class="line-numbers language-python"><code class="language-python">link <span class="token operator">=</span> soup<span class="token punctuation">.</span>a
link
<span class="token comment" spellcheck="true"># &lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a></span>

link<span class="token punctuation">.</span>next_sibling
<span class="token comment" spellcheck="true"># u',\n'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>第二个&lt;a&gt;标签是顿号的 <code>.next_sibling</code> 属性:</p>
<pre class="line-numbers language-python"><code class="language-python">link<span class="token punctuation">.</span>next_sibling<span class="token punctuation">.</span>next_sibling
<span class="token comment" spellcheck="true"># &lt;a class="sister" href="http://example.com/lacie" id="link2">Lacie&lt;/a></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="next-siblings-和-previous-siblings"><a href="#next-siblings-和-previous-siblings" class="headerlink" title=".next_siblings 和 .previous_siblings"></a>.next_siblings 和 .previous_siblings</h3><p>通过 <code>.next_siblings</code> 和 <code>.previous_siblings</code> 属性可以对当前节点的兄弟节点迭代输出:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">for</span> sibling <span class="token keyword">in</span> soup<span class="token punctuation">.</span>a<span class="token punctuation">.</span>next_siblings<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>repr<span class="token punctuation">(</span>sibling<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment" spellcheck="true"># u',\n'</span>
    <span class="token comment" spellcheck="true"># &lt;a class="sister" href="http://example.com/lacie" id="link2">Lacie&lt;/a></span>
    <span class="token comment" spellcheck="true"># u' and\n'</span>
    <span class="token comment" spellcheck="true"># &lt;a class="sister" href="http://example.com/tillie" id="link3">Tillie&lt;/a></span>
    <span class="token comment" spellcheck="true"># u'; and they lived at the bottom of a well.'</span>
    <span class="token comment" spellcheck="true"># None</span>

<span class="token keyword">for</span> sibling <span class="token keyword">in</span> soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"link3"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>previous_siblings<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>repr<span class="token punctuation">(</span>sibling<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment" spellcheck="true"># ' and\n'</span>
    <span class="token comment" spellcheck="true"># &lt;a class="sister" href="http://example.com/lacie" id="link2">Lacie&lt;/a></span>
    <span class="token comment" spellcheck="true"># u',\n'</span>
    <span class="token comment" spellcheck="true"># &lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a></span>
    <span class="token comment" spellcheck="true"># u'Once upon a time there were three little sisters; and their names were\n'</span>
    <span class="token comment" spellcheck="true"># None</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="回退和前进"><a href="#回退和前进" class="headerlink" title="回退和前进"></a>回退和前进</h2><p>看一下“爱丽丝” 文档:</p>
<pre><code>&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse's story&lt;/title&gt;&lt;/head&gt;
&lt;p class="title"&gt;&lt;b&gt;The Dormouse's story&lt;/b&gt;&lt;/p&gt;</code></pre><p>HTML解析器把这段字符串转换成一连串的事件: “打开&lt;html&gt;标签”,”打开一个&lt;head&gt;标签”,”打开一个&lt;title&gt;标签”,”添加一段字符串”,”关闭&lt;title&gt;标签”,”打开&lt;p&gt;标签”,等等.Beautiful Soup提供了重现解析器初始化过程的方法.</p>
<h3 id="next-element-和-previous-element"><a href="#next-element-和-previous-element" class="headerlink" title=".next_element 和 .previous_element"></a>.next_element 和 .previous_element</h3><p><code>.next_element</code> 属性指向解析过程中下一个被解析的对象(字符串或tag),结果可能与 <code>.next_sibling</code> 相同,但通常是不一样的.</p>
<p>这是“爱丽丝”文档中最后一个&lt;a&gt;标签,它的 <code>.next_sibling</code> 结果是一个字符串,因为当前的解析过程 因为当前的解析过程因为遇到了&lt;a&gt;标签而中断了:</p>
<pre class="line-numbers language-python"><code class="language-python">last_a_tag <span class="token operator">=</span> soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span> id<span class="token operator">=</span><span class="token string">"link3"</span><span class="token punctuation">)</span>
last_a_tag
<span class="token comment" spellcheck="true"># &lt;a class="sister" href="http://example.com/tillie" id="link3">Tillie&lt;/a></span>

last_a_tag<span class="token punctuation">.</span>next_sibling
<span class="token comment" spellcheck="true"># '; and they lived at the bottom of a well.'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>但这个&lt;a&gt;标签的 <code>.next_element</code> 属性结果是在&lt;a&gt;标签被解析之后的解析内容,不是&lt;a&gt;标签后的句子部分,应该是字符串”Tillie”:</p>
<pre class="line-numbers language-python"><code class="language-python">last_a_tag<span class="token punctuation">.</span>next_element
<span class="token comment" spellcheck="true"># u'Tillie'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>这是因为在原始文档中,字符串“Tillie” 在分号前出现,解析器先进入&lt;a&gt;标签,然后是字符串“Tillie”,然后关闭&lt;/a&gt;标签,然后是分号和剩余部分.分号与&lt;a&gt;标签在同一层级,但是字符串“Tillie”会被先解析.</p>
<p><code>.previous_element</code> 属性刚好与 <code>.next_element</code> 相反,它指向当前被解析的对象的前一个解析对象:</p>
<pre class="line-numbers language-python"><code class="language-python">last_a_tag<span class="token punctuation">.</span>previous_element
<span class="token comment" spellcheck="true"># u' and\n'</span>
last_a_tag<span class="token punctuation">.</span>previous_element<span class="token punctuation">.</span>next_element
<span class="token comment" spellcheck="true"># &lt;a class="sister" href="http://example.com/tillie" id="link3">Tillie&lt;/a></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="next-elements-和-previous-elements"><a href="#next-elements-和-previous-elements" class="headerlink" title=".next_elements 和 .previous_elements"></a>.next_elements 和 .previous_elements</h3><p>通过 <code>.next_elements</code> 和 <code>.previous_elements</code> 的迭代器就可以向前或向后访问文档的解析内容,就好像文档正在被解析一样:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">for</span> element <span class="token keyword">in</span> last_a_tag<span class="token punctuation">.</span>next_elements<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>repr<span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># u'Tillie'</span>
<span class="token comment" spellcheck="true"># u';\nand they lived at the bottom of a well.'</span>
<span class="token comment" spellcheck="true"># u'\n\n'</span>
<span class="token comment" spellcheck="true"># &lt;p class="story">...&lt;/p></span>
<span class="token comment" spellcheck="true"># u'...'</span>
<span class="token comment" spellcheck="true"># u'\n'</span>
<span class="token comment" spellcheck="true"># None</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="搜索文档树"><a href="#搜索文档树" class="headerlink" title="搜索文档树"></a>搜索文档树</h1><p>Beautiful Soup定义了很多搜索方法,这里着重介绍2个: <code>find()</code> 和 <code>find_all()</code> .其它方法的参数和用法类似,请读者举一反三.</p>
<p>再以“爱丽丝”文档作为例子:</p>
<pre class="line-numbers language-python"><code class="language-python">html_doc <span class="token operator">=</span> <span class="token triple-quoted-string string">"""
&lt;html>&lt;head>&lt;title>The Dormouse's story&lt;/title>&lt;/head>
&lt;body>
&lt;p class="title">&lt;b>The Dormouse's story&lt;/b>&lt;/p>

&lt;p class="story">Once upon a time there were three little sisters; and their names were
&lt;a href="http://example.com/elsie" class="sister" id="link1">Elsie&lt;/a>,
&lt;a href="http://example.com/lacie" class="sister" id="link2">Lacie&lt;/a> and
&lt;a href="http://example.com/tillie" class="sister" id="link3">Tillie&lt;/a>;
and they lived at the bottom of a well.&lt;/p>

&lt;p class="story">...&lt;/p>
"""</span>

<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html_doc<span class="token punctuation">,</span> <span class="token string">'html.parser'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>使用 <code>find_all()</code> 类似的方法可以查找到想要查找的文档内容</p>
<h2 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h2><p>介绍 <code>find_all()</code> 方法前,先介绍一下过滤器的类型,这些过滤器贯穿整个搜索的API.过滤器可以被用在tag的name中,节点的属性中,字符串中或他们的混合中.</p>
<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><p>最简单的过滤器是字符串.在搜索方法中传入一个字符串参数,Beautiful Soup会查找与字符串完整匹配的内容,下面的例子用于查找文档中所有的&lt;b&gt;标签:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;b>The Dormouse's story&lt;/b>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>如果传入字节码参数,Beautiful Soup会当作UTF-8编码,可以传入一段Unicode 编码来避免Beautiful Soup解析编码出错</p>
<h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h3><p>如果传入正则表达式作为参数,Beautiful Soup会通过正则表达式的 <code>search()</code> 来匹配内容.下面例子中找出所有以b开头的标签,这表示&lt;body&gt;和&lt;b&gt;标签都应该被找到:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> re
<span class="token keyword">for</span> tag <span class="token keyword">in</span> soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span>re<span class="token punctuation">.</span>compile<span class="token punctuation">(</span><span class="token string">"^b"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>tag<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># body</span>
<span class="token comment" spellcheck="true"># b</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>下面代码找出所有名字中包含”t”的标签:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">for</span> tag <span class="token keyword">in</span> soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span>re<span class="token punctuation">.</span>compile<span class="token punctuation">(</span><span class="token string">"t"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>tag<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># html</span>
<span class="token comment" spellcheck="true"># title</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h3><p>如果传入列表参数,Beautiful Soup会将与列表中任一元素匹配的内容返回.下面代码找到文档中所有&lt;a&gt;标签和&lt;b&gt;标签:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;b>The Dormouse's story&lt;/b>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/lacie" id="link2">Lacie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/tillie" id="link3">Tillie&lt;/a>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="True"><a href="#True" class="headerlink" title="True"></a>True</h3><p><code>True</code> 可以匹配任何值,下面代码查找到所有的tag,但是不会返回字符串节点</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">for</span> tag <span class="token keyword">in</span> soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>tag<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># html</span>
<span class="token comment" spellcheck="true"># head</span>
<span class="token comment" spellcheck="true"># title</span>
<span class="token comment" spellcheck="true"># body</span>
<span class="token comment" spellcheck="true"># p</span>
<span class="token comment" spellcheck="true"># b</span>
<span class="token comment" spellcheck="true"># p</span>
<span class="token comment" spellcheck="true"># a</span>
<span class="token comment" spellcheck="true"># a</span>
<span class="token comment" spellcheck="true"># a</span>
<span class="token comment" spellcheck="true"># p</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><p>如果没有合适过滤器,那么还可以定义一个方法,方法只接受一个元素参数,如果这个方法返回 <code>True</code> 表示当前元素匹配并且被找到,如果不是则反回 <code>False</code></p>
<p>下面方法校验了当前元素,如果包含 <code>class</code> 属性却不包含 <code>id</code> 属性,那么将返回 <code>True</code>:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">has_class_but_no_id</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> tag<span class="token punctuation">.</span>has_attr<span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">)</span> <span class="token operator">and</span> <span class="token operator">not</span> tag<span class="token punctuation">.</span>has_attr<span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>将这个方法作为参数传入 <code>find_all()</code> 方法,将得到所有&lt;p&gt;标签:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span>has_class_but_no_id<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;p class="title">&lt;b>The Dormouse's story&lt;/b>&lt;/p>,</span>
<span class="token comment" spellcheck="true">#  &lt;p class="story">Once upon a time there were...&lt;/p>,</span>
<span class="token comment" spellcheck="true">#  &lt;p class="story">...&lt;/p>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>返回结果中只有&lt;p&gt;标签没有&lt;a&gt;标签,因为&lt;a&gt;标签还定义了”id”,没有返回&lt;html&gt;和&lt;head&gt;,因为&lt;html&gt;和&lt;head&gt;中没有定义”class”属性.</p>
<p>通过一个方法来过滤一类标签属性的时候, 这个方法的参数是要被过滤的属性的值, 而不是这个标签. 下面的例子是找出 <code>href</code> 属性不符合指定正则的 <code>a</code> 标签.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">not_lacie</span><span class="token punctuation">(</span>href<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> href <span class="token operator">and</span> <span class="token operator">not</span> re<span class="token punctuation">.</span>compile<span class="token punctuation">(</span><span class="token string">"lacie"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>search<span class="token punctuation">(</span>href<span class="token punctuation">)</span>
soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span>href<span class="token operator">=</span>not_lacie<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/tillie" id="link3">Tillie&lt;/a>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>标签过滤方法可以使用复杂方法. 下面的例子可以过滤出前后都有文字的标签.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> bs4 <span class="token keyword">import</span> NavigableString
<span class="token keyword">def</span> <span class="token function">surrounded_by_strings</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>isinstance<span class="token punctuation">(</span>tag<span class="token punctuation">.</span>next_element<span class="token punctuation">,</span> NavigableString<span class="token punctuation">)</span>
            <span class="token operator">and</span> isinstance<span class="token punctuation">(</span>tag<span class="token punctuation">.</span>previous_element<span class="token punctuation">,</span> NavigableString<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> tag <span class="token keyword">in</span> soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span>surrounded_by_strings<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span> tag<span class="token punctuation">.</span>name
<span class="token comment" spellcheck="true"># p</span>
<span class="token comment" spellcheck="true"># a</span>
<span class="token comment" spellcheck="true"># a</span>
<span class="token comment" spellcheck="true"># a</span>
<span class="token comment" spellcheck="true"># p</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>现在来了解一下搜索方法的细节</p>
<h2 id="find-all"><a href="#find-all" class="headerlink" title="find_all()"></a>find_all()</h2><p>find_all( name , attrs , recursive , string , **kwargs )</p>
<p><code>find_all()</code> 方法搜索当前tag的所有tag子节点,并判断是否符合过滤器的条件.这里有几个例子:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;title>The Dormouse's story&lt;/title>]</span>

soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">,</span> <span class="token string">"title"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;p class="title">&lt;b>The Dormouse's story&lt;/b>&lt;/p>]</span>

soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/lacie" id="link2">Lacie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/tillie" id="link3">Tillie&lt;/a>]</span>

soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"link2"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/lacie" id="link2">Lacie&lt;/a>]</span>

<span class="token keyword">import</span> re
soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span>string<span class="token operator">=</span>re<span class="token punctuation">.</span>compile<span class="token punctuation">(</span><span class="token string">"sisters"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># u'Once upon a time there were three little sisters; and their names were\n'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>有几个方法很相似,还有几个方法是新的,参数中的 <code>string</code> 和 <code>id</code> 是什么含义? 为什么 <code>find_all("p", "title")</code> 返回的是CSS Class为”title”的&lt;p&gt;标签? 我们来仔细看一下 <code>find_all()</code> 的参数</p>
<h3 id="name-参数"><a href="#name-参数" class="headerlink" title="name 参数"></a>name 参数</h3><p><code>name</code> 参数可以查找所有名字为 <code>name</code> 的tag,字符串对象会被自动忽略掉.</p>
<p>简单的用法如下:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;title>The Dormouse's story&lt;/title>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>重申: 搜索 <code>name</code> 参数的值可以使任一类型的 过滤器 ,字符窜,正则表达式,列表,方法或是 <code>True</code> .</p>
<h3 id="keyword-参数"><a href="#keyword-参数" class="headerlink" title="keyword 参数"></a>keyword 参数</h3><p>如果一个指定名字的参数不是搜索内置的参数名,搜索时会把该参数当作指定名字tag的属性来搜索,如果包含一个名字为 <code>id</code> 的参数,Beautiful Soup会搜索每个tag的”id”属性.</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'link2'</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/lacie" id="link2">Lacie&lt;/a>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>如果传入 <code>href</code> 参数,Beautiful Soup会搜索每个tag的”href”属性:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span>href<span class="token operator">=</span>re<span class="token punctuation">.</span>compile<span class="token punctuation">(</span><span class="token string">"elsie"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>搜索指定名字的属性时可以使用的参数值包括 字符串 , 正则表达式 , 列表, True .</p>
<p>下面的例子在文档树中查找所有包含 <code>id</code> 属性的tag,无论 <code>id</code> 的值是什么:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/lacie" id="link2">Lacie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/tillie" id="link3">Tillie&lt;/a>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>使用多个指定名字的参数可以同时过滤tag的多个属性:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span>href<span class="token operator">=</span>re<span class="token punctuation">.</span>compile<span class="token punctuation">(</span><span class="token string">"elsie"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> id<span class="token operator">=</span><span class="token string">'link1'</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/elsie" id="link1">three&lt;/a>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>有些tag属性在搜索不能使用,比如HTML5中的 data-* 属性:</p>
<pre class="line-numbers language-python"><code class="language-python">data_soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span><span class="token string">'&lt;div data-foo="value">foo!&lt;/div>'</span><span class="token punctuation">)</span>
data_soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span>data<span class="token operator">-</span>foo<span class="token operator">=</span><span class="token string">"value"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># SyntaxError: keyword can't be an expression</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>但是可以通过 <code>find_all()</code> 方法的 <code>attrs</code> 参数定义一个字典参数来搜索包含特殊属性的tag:</p>
<pre class="line-numbers language-python"><code class="language-python">data_soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">"data-foo"</span><span class="token punctuation">:</span> <span class="token string">"value"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;div data-foo="value">foo!&lt;/div>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="按CSS搜索"><a href="#按CSS搜索" class="headerlink" title="按CSS搜索"></a>按CSS搜索</h3><p>按照CSS类名搜索tag的功能非常实用,但标识CSS类名的关键字 <code>class</code> 在Python中是保留字,使用 <code>class</code> 做参数会导致语法错误.从Beautiful Soup的4.1.1版本开始,可以通过 <code>class_</code> 参数搜索有指定CSS类名的tag:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">"sister"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/lacie" id="link2">Lacie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/tillie" id="link3">Tillie&lt;/a>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>class_</code> 参数同样接受不同类型的 <code>过滤器</code> ,字符串,正则表达式,方法或 <code>True</code> :</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span>class_<span class="token operator">=</span>re<span class="token punctuation">.</span>compile<span class="token punctuation">(</span><span class="token string">"itl"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;p class="title">&lt;b>The Dormouse's story&lt;/b>&lt;/p>]</span>

<span class="token keyword">def</span> <span class="token function">has_six_characters</span><span class="token punctuation">(</span>css_class<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> css_class <span class="token keyword">is</span> <span class="token operator">not</span> None <span class="token operator">and</span> len<span class="token punctuation">(</span>css_class<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">6</span>

soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span>class_<span class="token operator">=</span>has_six_characters<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/lacie" id="link2">Lacie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/tillie" id="link3">Tillie&lt;/a>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>tag的 <code>class</code> 属性是 <a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id16" target="_blank" rel="noopener">多值属性</a> .按照CSS类名搜索tag时,可以分别搜索tag中的每个CSS类名:</p>
<pre class="line-numbers language-python"><code class="language-python">css_soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span><span class="token string">'&lt;p class="body strikeout">&lt;/p>'</span><span class="token punctuation">)</span>
css_soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">"strikeout"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;p class="body strikeout">&lt;/p>]</span>

css_soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">"body"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;p class="body strikeout">&lt;/p>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>搜索 <code>class</code> 属性时也可以通过CSS值完全匹配:</p>
<pre class="line-numbers language-python"><code class="language-python">css_soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">"body strikeout"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;p class="body strikeout">&lt;/p>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>完全匹配 <code>class</code> 的值时,如果CSS类名的顺序与实际不符,将搜索不到结果:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span> attrs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">"class"</span><span class="token punctuation">:</span> <span class="token string">"sister"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/lacie" id="link2">Lacie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/tillie" id="link3">Tillie&lt;/a>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="string-参数"><a href="#string-参数" class="headerlink" title="string 参数"></a><code>string</code> 参数</h3><p>通过 <code>string</code> 参数可以搜搜文档中的字符串内容.与 <code>name</code> 参数的可选值一样, <code>string</code> 参数接受 字符串, 正则表达式 , 列表, True . 看例子:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span>string<span class="token operator">=</span><span class="token string">"Elsie"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [u'Elsie']</span>

soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span>string<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"Tillie"</span><span class="token punctuation">,</span> <span class="token string">"Elsie"</span><span class="token punctuation">,</span> <span class="token string">"Lacie"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [u'Elsie', u'Lacie', u'Tillie']</span>

soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span>string<span class="token operator">=</span>re<span class="token punctuation">.</span>compile<span class="token punctuation">(</span><span class="token string">"Dormouse"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span>u<span class="token string">"The Dormouse's story"</span><span class="token punctuation">,</span> u<span class="token string">"The Dormouse's story"</span><span class="token punctuation">]</span>

<span class="token keyword">def</span> <span class="token function">is_the_only_string_within_a_tag</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token string">""</span>Return <span class="token boolean">True</span> <span class="token keyword">if</span> this string <span class="token keyword">is</span> the only child of its parent tag<span class="token punctuation">.</span><span class="token string">""</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>s <span class="token operator">==</span> s<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>string<span class="token punctuation">)</span>

soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span>string<span class="token operator">=</span>is_the_only_string_within_a_tag<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [u"The Dormouse's story", u"The Dormouse's story", u'Elsie', u'Lacie', u'Tillie', u'...']</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>虽然 <code>string</code> 参数用于搜索字符串,还可以与其它参数混合使用来过滤tag.Beautiful Soup会找到 <code>.string</code> 方法与 <code>string</code> 参数值相符的tag.下面代码用来搜索内容里面包含“Elsie”的&lt;a&gt;标签:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span> string<span class="token operator">=</span><span class="token string">"Elsie"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a href="http://example.com/elsie" class="sister" id="link1">Elsie&lt;/a>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="limit-参数"><a href="#limit-参数" class="headerlink" title="limit 参数"></a><code>limit</code> 参数</h3><p><code>find_all()</code> 方法返回全部的搜索结构,如果文档树很大那么搜索会很慢.如果我们不需要全部结果,可以使用 <code>limit</code> 参数限制返回结果的数量.效果与SQL中的limit关键字类似,当搜索到的结果数量达到 <code>limit</code> 的限制时,就停止搜索返回结果.</p>
<p>文档树中有3个tag符合搜索条件,但结果只返回了2个,因为我们限制了返回数量:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span> limit<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/lacie" id="link2">Lacie&lt;/a>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3 id="recursive-参数"><a href="#recursive-参数" class="headerlink" title="recursive 参数"></a><code>recursive</code> 参数</h3><p>调用tag的 <code>find_all()</code> 方法时,Beautiful Soup会检索当前tag的所有子孙节点,如果只想搜索tag的直接子节点,可以使用参数 <code>recursive=False</code> .</p>
<p>一段简单的文档:</p>
<pre><code>&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt;
   The Dormouse's story
  &lt;/title&gt;
 &lt;/head&gt;
...</code></pre><p>是否使用 <code>recursive</code> 参数的搜索结果:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>html<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;title>The Dormouse's story&lt;/title>]</span>

soup<span class="token punctuation">.</span>html<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">,</span> recursive<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># []</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这是文档片段</p>
<pre><code>&lt;html&gt;
        &lt;head&gt;
        &lt;title&gt;
        The Dormouse's story
    &lt;/title&gt;
        &lt;/head&gt;
        ...</code></pre><p>&lt;title&gt;标签在 &lt;html&gt; 标签下, 但并不是直接子节点, &lt;head&gt; 标签才是直接子节点. 在允许查询所有后代节点时 Beautiful Soup 能够查找到 &lt;title&gt; 标签. 但是使用了 <code>recursive=False</code> 参数之后,只能查找直接子节点,这样就查不到 &lt;title&gt; 标签了.</p>
<p>Beautiful Soup 提供了多种DOM树搜索方法. 这些方法都使用了类似的参数定义. 比如这些方法: <code>find_all()</code>: <code>name</code>, <code>attrs</code>, <code>text</code>, <code>limit</code>. 但是只有 <code>find_all()</code> 和 <code>find()</code> 支持 <code>recursive</code> 参数.</p>
<h2 id="像调用-find-all-一样调用tag"><a href="#像调用-find-all-一样调用tag" class="headerlink" title="像调用 find_all() 一样调用tag"></a>像调用 <code>find_all()</code> 一样调用tag</h2><p><code>find_all()</code> 几乎是Beautiful Soup中最常用的搜索方法,所以我们定义了它的简写方法. <code>BeautifulSoup</code> 对象和 <code>tag</code> 对象可以被当作一个方法来使用,这个方法的执行结果与调用这个对象的 <code>find_all()</code> 方法相同,下面两行代码是等价的:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span>
soup<span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>这两行代码也是等价的:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>title<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span>string<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
soup<span class="token punctuation">.</span>title<span class="token punctuation">(</span>string<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h2 id="find"><a href="#find" class="headerlink" title="find()"></a>find()</h2><p>find( <a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id36" target="_blank" rel="noopener">name</a> , <a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#css" target="_blank" rel="noopener">attrs</a> , <a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#recursive" target="_blank" rel="noopener">recursive</a> , <a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id37" target="_blank" rel="noopener">string</a> , <a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#keyword" target="_blank" rel="noopener">**kwargs</a> )</p>
<p><code>find_all()</code> 方法将返回文档中符合条件的所有tag,尽管有时候我们只想得到一个结果.比如文档中只有一个&lt;body&gt;标签,那么使用 <code>find_all()</code> 方法来查找&lt;body&gt;标签就不太合适, 使用 <code>find_all</code> 方法并设置 <code>limit=1</code> 参数不如直接使用 <code>find()</code> 方法.下面两行代码是等价的:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> limit<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;title>The Dormouse's story&lt;/title>]</span>

soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;title>The Dormouse's story&lt;/title></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>唯一的区别是 <code>find_all()</code> 方法的返回结果是值包含一个元素的列表,而 <code>find()</code> 方法直接返回结果.</p>
<p><code>find_all()</code> 方法没有找到目标是返回空列表, <code>find()</code> 方法找不到目标时,返回 <code>None</code> .</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"nosuchtag"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># None</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><code>soup.head.title</code> 是 tag的名字 方法的简写.这个简写的原理就是多次调用当前tag的 <code>find()</code> 方法:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>head<span class="token punctuation">.</span>title
<span class="token comment" spellcheck="true"># &lt;title>The Dormouse's story&lt;/title></span>

soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"head"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;title>The Dormouse's story&lt;/title></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="find-parents-和-find-parent"><a href="#find-parents-和-find-parent" class="headerlink" title="find_parents() 和 find_parent()"></a>find_parents() 和 find_parent()</h2><p>find_parents( name , attrs , recursive , string , **kwargs )</p>
<p>find_parent( name , attrs , recursive , string , **kwargs )</p>
<p>我们已经用了很大篇幅来介绍 <code>find_all()</code> 和 <code>find()</code> 方法,Beautiful Soup中还有10个用于搜索的API.它们中的五个用的是与 <code>find_all()</code> 相同的搜索参数,另外5个与 <code>find()</code> 方法的搜索参数类似.区别仅是它们搜索文档的不同部分.</p>
<p>记住: <code>find_all()</code> 和 <code>find()</code> 只搜索当前节点的所有子节点,孙子节点等. <code>find_parents()</code> 和 <code>find_parent()</code> 用来搜索当前节点的父辈节点,搜索方法与普通tag的搜索方法相同,搜索文档搜索文档包含的内容. 我们从一个文档中的一个叶子节点开始:</p>
<pre class="line-numbers language-python"><code class="language-python">a_string <span class="token operator">=</span> soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span>string<span class="token operator">=</span><span class="token string">"Lacie"</span><span class="token punctuation">)</span>
a_string
<span class="token comment" spellcheck="true"># u'Lacie'</span>

a_string<span class="token punctuation">.</span>find_parents<span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/lacie" id="link2">Lacie&lt;/a>]</span>

a_string<span class="token punctuation">.</span>find_parent<span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;p class="story">Once upon a time there were three little sisters; and their names were</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/lacie" id="link2">Lacie&lt;/a> and</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/tillie" id="link3">Tillie&lt;/a>;</span>
<span class="token comment" spellcheck="true">#  and they lived at the bottom of a well.&lt;/p></span>

a_string<span class="token punctuation">.</span>find_parents<span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">,</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"title"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># []</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>文档中的一个&lt;a&gt;标签是是当前叶子节点的直接父节点,所以可以被找到.还有一个&lt;p&gt;标签,是目标叶子节点的间接父辈节点,所以也可以被找到.包含class值为”title”的&lt;p&gt;标签不是不是目标叶子节点的父辈节点,所以通过 <code>find_parents()</code> 方法搜索不到.</p>
<p><code>find_parent()</code> 和 <code>find_parents()</code> 方法会让人联想到 .parent 和 .parents 属性.它们之间的联系非常紧密.搜索父辈节点的方法实际上就是对 <code>.parents</code> 属性的迭代搜索.</p>
<h2 id="find-next-siblings-和-find-next-sibling"><a href="#find-next-siblings-和-find-next-sibling" class="headerlink" title="find_next_siblings() 和 find_next_sibling()"></a>find_next_siblings() 和 find_next_sibling()</h2><p>find_next_siblings( name , attrs , recursive , string , **kwargs )</p>
<p>find_next_sibling( name , attrs , recursive , string , **kwargs )</p>
<p>这2个方法通过 .next_siblings 属性对当tag的所有后面解析的兄弟tag节点进行迭代, <code>find_next_siblings()</code> 方法返回所有符合条件的后面的兄弟节点, <code>find_next_sibling()</code> 只返回符合条件的后面的第一个tag节点.</p>
<pre class="line-numbers language-python"><code class="language-python">first_link <span class="token operator">=</span> soup<span class="token punctuation">.</span>a
first_link
<span class="token comment" spellcheck="true"># &lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a></span>

first_link<span class="token punctuation">.</span>find_next_siblings<span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/lacie" id="link2">Lacie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/tillie" id="link3">Tillie&lt;/a>]</span>

first_story_paragraph <span class="token operator">=</span> soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">,</span> <span class="token string">"story"</span><span class="token punctuation">)</span>
first_story_paragraph<span class="token punctuation">.</span>find_next_sibling<span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;p class="story">...&lt;/p></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="find-previous-siblings-和-find-previous-sibling"><a href="#find-previous-siblings-和-find-previous-sibling" class="headerlink" title="find_previous_siblings() 和 find_previous_sibling()"></a>find_previous_siblings() 和 find_previous_sibling()</h2><p>find_previous_siblings( name , attrs , recursive , string , **kwargs )</p>
<p>find_previous_sibling( name , attrs , recursive , string , **kwargs )</p>
<p>这2个方法通过 .previous_siblings 属性对当前tag的前面解析的兄弟tag节点进行迭代, <code>find_previous_siblings()</code> 方法返回所有符合条件的前面的兄弟节点, <code>find_previous_sibling()</code> 方法返回第一个符合条件的前面的兄弟节点:</p>
<pre class="line-numbers language-python"><code class="language-python">last_link <span class="token operator">=</span> soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span> id<span class="token operator">=</span><span class="token string">"link3"</span><span class="token punctuation">)</span>
last_link
<span class="token comment" spellcheck="true"># &lt;a class="sister" href="http://example.com/tillie" id="link3">Tillie&lt;/a></span>

last_link<span class="token punctuation">.</span>find_previous_siblings<span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/lacie" id="link2">Lacie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a>]</span>

first_story_paragraph <span class="token operator">=</span> soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">,</span> <span class="token string">"story"</span><span class="token punctuation">)</span>
first_story_paragraph<span class="token punctuation">.</span>find_previous_sibling<span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;p class="title">&lt;b>The Dormouse's story&lt;/b>&lt;/p></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="find-all-next-和-find-next"><a href="#find-all-next-和-find-next" class="headerlink" title="find_all_next() 和 find_next()"></a>find_all_next() 和 find_next()</h2><p>find_all_next( name , attrs , recursive , string , **kwargs )</p>
<p>find_nex( name , attrs , recursive , string , **kwargs )</p>
<p>这2个方法通过 .next_elements 属性对当前tag的之后的tag和字符串进行迭代, <code>find_all_next()</code> 方法返回所有符合条件的节点, <code>find_next()</code> 方法返回第一个符合条件的节点:</p>
<pre class="line-numbers language-python"><code class="language-python">first_link <span class="token operator">=</span> soup<span class="token punctuation">.</span>a
first_link
<span class="token comment" spellcheck="true"># &lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a></span>

first_link<span class="token punctuation">.</span>find_all_next<span class="token punctuation">(</span>string<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [u'Elsie', u',\n', u'Lacie', u' and\n', u'Tillie',</span>
<span class="token comment" spellcheck="true">#  u';\nand they lived at the bottom of a well.', u'\n\n', u'...', u'\n']</span>

first_link<span class="token punctuation">.</span>find_next<span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;p class="story">...&lt;/p></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>第一个例子中,字符串 “Elsie”也被显示出来,尽管它被包含在我们开始查找的&lt;a&gt;标签的里面.第二个例子中,最后一个&lt;p&gt;标签也被显示出来,尽管它与我们开始查找位置的&lt;a&gt;标签不属于同一部分.例子中,搜索的重点是要匹配过滤器的条件,并且在文档中出现的顺序而不是开始查找的元素的位置.</p>
<h2 id="find-all-previous-和-find-previous"><a href="#find-all-previous-和-find-previous" class="headerlink" title="find_all_previous() 和 find_previous()"></a>find_all_previous() 和 find_previous()</h2><p>find_all_previous( name , attrs , recursive , string , **kwargs )</p>
<p>find_previous( name , attrs , recursive , string , **kwargs )</p>
<p>这2个方法通过 .previous_elements 属性对当前节点前面的tag和字符串进行迭代, <code>find_all_previous()</code> 方法返回所有符合条件的节点, <code>find_previous()</code> 方法返回第一个符合条件的节点.</p>
<pre class="line-numbers language-python"><code class="language-python">first_link <span class="token operator">=</span> soup<span class="token punctuation">.</span>a
first_link
<span class="token comment" spellcheck="true"># &lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a></span>

first_link<span class="token punctuation">.</span>find_all_previous<span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;p class="story">Once upon a time there were three little sisters; ...&lt;/p>,</span>
<span class="token comment" spellcheck="true">#  &lt;p class="title">&lt;b>The Dormouse's story&lt;/b>&lt;/p>]</span>

first_link<span class="token punctuation">.</span>find_previous<span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;title>The Dormouse's story&lt;/title></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>find_all_previous("p")</code> 返回了文档中的第一段(class=”title”的那段),但还返回了第二段,&lt;p&gt;标签包含了我们开始查找的&lt;a&gt;标签.不要惊讶,这段代码的功能是查找所有出现在指定&lt;a&gt;标签之前的&lt;p&gt;标签,因为这个&lt;p&gt;标签包含了开始的&lt;a&gt;标签,所以&lt;p&gt;标签一定是在&lt;a&gt;之前出现的.</p>
<h2 id="CSS选择器"><a href="#CSS选择器" class="headerlink" title="CSS选择器"></a>CSS选择器</h2><p>Beautiful Soup支持大部分的CSS选择器 <a href="http://www.w3.org/TR/CSS2/selector.html" target="_blank" rel="noopener">http://www.w3.org/TR/CSS2/selector.html</a>, 在 <code>Tag</code> 或 <code>BeautifulSoup</code> 对象的 <code>.select()</code> 方法中传入字符串参数, 即可使用CSS选择器的语法找到tag:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;title>The Dormouse's story&lt;/title>]</span>

soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">"p:nth-of-type(3)"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;p class="story">...&lt;/p>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>通过tag标签逐层查找:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">"body a"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/lacie"  id="link2">Lacie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/tillie" id="link3">Tillie&lt;/a>]</span>

soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">"html head title"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;title>The Dormouse's story&lt;/title>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>找到某个tag标签下的直接子标签:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">"head > title"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;title>The Dormouse's story&lt;/title>]</span>

soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">"p > a"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/lacie"  id="link2">Lacie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/tillie" id="link3">Tillie&lt;/a>]</span>

soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">"p > a:nth-of-type(2)"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/lacie" id="link2">Lacie&lt;/a>]</span>

soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">"p > #link1"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a>]</span>

soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">"body > a"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># []</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>找到兄弟节点标签:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">"#link1 ~ .sister"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/lacie" id="link2">Lacie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/tillie"  id="link3">Tillie&lt;/a>]</span>

soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">"#link1 + .sister"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/lacie" id="link2">Lacie&lt;/a>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>通过CSS的类名查找:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">".sister"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/lacie" id="link2">Lacie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/tillie" id="link3">Tillie&lt;/a>]</span>

soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">"[class~=sister]"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/lacie" id="link2">Lacie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/tillie" id="link3">Tillie&lt;/a>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>通过tag的id查找:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">"#link1"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a>]</span>

soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">"a#link2"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/lacie" id="link2">Lacie&lt;/a>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>同时用多种CSS选择器查询元素:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">"#link1,#link2"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/lacie" id="link2">Lacie&lt;/a>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>通过是否存在某个属性来查找:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'a[href]'</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/lacie" id="link2">Lacie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/tillie" id="link3">Tillie&lt;/a>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>通过属性的值来查找:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'a[href="http://example.com/elsie"]'</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a>]</span>

soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'a[href^="http://example.com/"]'</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/lacie" id="link2">Lacie&lt;/a>,</span>
<span class="token comment" spellcheck="true">#  &lt;a class="sister" href="http://example.com/tillie" id="link3">Tillie&lt;/a>]</span>

soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'a[href$="tillie"]'</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/tillie" id="link3">Tillie&lt;/a>]</span>

soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'a[href*=".com/el"]'</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>通过语言设置来查找:</p>
<pre class="line-numbers language-python"><code class="language-python">multilingual_markup <span class="token operator">=</span> <span class="token triple-quoted-string string">"""
 &lt;p lang="en">Hello&lt;/p>
 &lt;p lang="en-us">Howdy, y'all&lt;/p>
 &lt;p lang="en-gb">Pip-pip, old fruit&lt;/p>
 &lt;p lang="fr">Bonjour mes amis&lt;/p>
"""</span>
multilingual_soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>multilingual_markup<span class="token punctuation">)</span>
multilingual_soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'p[lang|=en]'</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># [&lt;p lang="en">Hello&lt;/p>,</span>
<span class="token comment" spellcheck="true">#  &lt;p lang="en-us">Howdy, y'all&lt;/p>,</span>
<span class="token comment" spellcheck="true">#  &lt;p lang="en-gb">Pip-pip, old fruit&lt;/p>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>返回查找到的元素的第一个</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>select_one<span class="token punctuation">(</span><span class="token string">".sister"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;a class="sister" href="http://example.com/elsie" id="link1">Elsie&lt;/a></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>对于熟悉CSS选择器语法的人来说这是个非常方便的方法.Beautiful Soup也支持CSS选择器API, 如果你仅仅需要CSS选择器的功能,那么直接使用 <code>lxml</code> 也可以, 而且速度更快,支持更多的CSS选择器语法,但Beautiful Soup整合了CSS选择器的语法和自身方便使用API.</p>
<h1 id="修改文档树"><a href="#修改文档树" class="headerlink" title="修改文档树"></a>修改文档树</h1><p>Beautiful Soup的强项是文档树的搜索,但同时也可以方便的修改文档树</p>
<h2 id="修改tag的名称和属性"><a href="#修改tag的名称和属性" class="headerlink" title="修改tag的名称和属性"></a>修改tag的名称和属性</h2><p>在 Attributes 的章节中已经介绍过这个功能,但是再看一遍也无妨. 重命名一个tag,改变属性的值,添加或删除属性:</p>
<pre class="line-numbers language-python"><code class="language-python">soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span><span class="token string">'&lt;b class="boldest">Extremely bold&lt;/b>'</span><span class="token punctuation">)</span>
tag <span class="token operator">=</span> soup<span class="token punctuation">.</span>b

tag<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"blockquote"</span>
tag<span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'verybold'</span>
tag<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
tag
<span class="token comment" spellcheck="true"># &lt;blockquote class="verybold" id="1">Extremely bold&lt;/blockquote></span>

<span class="token keyword">del</span> tag<span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">]</span>
<span class="token keyword">del</span> tag<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span>
tag
<span class="token comment" spellcheck="true"># &lt;blockquote>Extremely bold&lt;/blockquote></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="修改-string"><a href="#修改-string" class="headerlink" title="修改 .string"></a>修改 .string</h2><p>给tag的 <code>.string</code> 属性赋值,就相当于用当前的内容替代了原来的内容:</p>
<pre class="line-numbers language-python"><code class="language-python">markup <span class="token operator">=</span> <span class="token string">'&lt;a href="http://example.com/">I linked to &lt;i>example.com&lt;/i>&lt;/a>'</span>
soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>markup<span class="token punctuation">)</span>

tag <span class="token operator">=</span> soup<span class="token punctuation">.</span>a
tag<span class="token punctuation">.</span>string <span class="token operator">=</span> <span class="token string">"New link text."</span>
tag
<span class="token comment" spellcheck="true"># &lt;a href="http://example.com/">New link text.&lt;/a></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>注意: 如果当前的tag包含了其它tag,那么给它的 <code>.string</code> 属性赋值会覆盖掉原有的所有内容包括子tag</p>
<h2 id="append"><a href="#append" class="headerlink" title="append()"></a>append()</h2><p><code>Tag.append()</code> 方法想tag中添加内容,就好像Python的列表的 <code>.append()</code> 方法:</p>
<pre class="line-numbers language-python"><code class="language-python">soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span><span class="token string">"&lt;a>Foo&lt;/a>"</span><span class="token punctuation">)</span>
soup<span class="token punctuation">.</span>a<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">"Bar"</span><span class="token punctuation">)</span>

soup
<span class="token comment" spellcheck="true"># &lt;html>&lt;head>&lt;/head>&lt;body>&lt;a>FooBar&lt;/a>&lt;/body>&lt;/html></span>
soup<span class="token punctuation">.</span>a<span class="token punctuation">.</span>contents
<span class="token comment" spellcheck="true"># [u'Foo', u'Bar']</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="NavigableString-和-new-tag"><a href="#NavigableString-和-new-tag" class="headerlink" title="NavigableString() 和 .new_tag()"></a>NavigableString() 和 .new_tag()</h2><p>如果想添加一段文本内容到文档中也没问题,可以调用Python的 <code>append()</code> 方法 或调用 <code>NavigableString</code> 的构造方法:</p>
<pre class="line-numbers language-python"><code class="language-python">soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span><span class="token string">"&lt;b>&lt;/b>"</span><span class="token punctuation">)</span>
tag <span class="token operator">=</span> soup<span class="token punctuation">.</span>b
tag<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span>
new_string <span class="token operator">=</span> NavigableString<span class="token punctuation">(</span><span class="token string">" there"</span><span class="token punctuation">)</span>
tag<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_string<span class="token punctuation">)</span>
tag
<span class="token comment" spellcheck="true"># &lt;b>Hello there.&lt;/b></span>
tag<span class="token punctuation">.</span>contents
<span class="token comment" spellcheck="true"># [u'Hello', u' there']</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果想要创建一段注释,或 <code>NavigableString</code> 的任何子类, 只要调用 NavigableString 的构造方法:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> bs4 <span class="token keyword">import</span> Comment
new_comment <span class="token operator">=</span> soup<span class="token punctuation">.</span>new_string<span class="token punctuation">(</span><span class="token string">"Nice to see you."</span><span class="token punctuation">,</span> Comment<span class="token punctuation">)</span>
tag<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_comment<span class="token punctuation">)</span>
tag
<span class="token comment" spellcheck="true"># &lt;b>Hello there&lt;!--Nice to see you.-->&lt;/b></span>
tag<span class="token punctuation">.</span>contents
<span class="token comment" spellcheck="true"># [u'Hello', u' there', u'Nice to see you.']</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p># 这是Beautiful Soup 4.2.1 中新增的方法</p>
<p>创建一个tag最好的方法是调用工厂方法 <code>BeautifulSoup.new_tag()</code> :</p>
<pre class="line-numbers language-python"><code class="language-python">soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span><span class="token string">"&lt;b>&lt;/b>"</span><span class="token punctuation">)</span>
original_tag <span class="token operator">=</span> soup<span class="token punctuation">.</span>b

new_tag <span class="token operator">=</span> soup<span class="token punctuation">.</span>new_tag<span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span> href<span class="token operator">=</span><span class="token string">"http://www.example.com"</span><span class="token punctuation">)</span>
original_tag<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_tag<span class="token punctuation">)</span>
original_tag
<span class="token comment" spellcheck="true"># &lt;b>&lt;a href="http://www.example.com">&lt;/a>&lt;/b></span>

new_tag<span class="token punctuation">.</span>string <span class="token operator">=</span> <span class="token string">"Link text."</span>
original_tag
<span class="token comment" spellcheck="true"># &lt;b>&lt;a href="http://www.example.com">Link text.&lt;/a>&lt;/b></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>第一个参数作为tag的name,是必填,其它参数选填</p>
<h2 id="insert"><a href="#insert" class="headerlink" title="insert()"></a>insert()</h2><p><code>Tag.insert()</code> 方法与 <code>Tag.append()</code> 方法类似,区别是不会把新元素添加到父节点 <code>.contents</code> 属性的最后,而是把元素插入到指定的位置.与Python列表总的 <code>.insert()</code> 方法的用法下同:</p>
<pre class="line-numbers language-python"><code class="language-python">markup <span class="token operator">=</span> <span class="token string">'&lt;a href="http://example.com/">I linked to &lt;i>example.com&lt;/i>&lt;/a>'</span>
soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>markup<span class="token punctuation">)</span>
tag <span class="token operator">=</span> soup<span class="token punctuation">.</span>a

tag<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"but did not endorse "</span><span class="token punctuation">)</span>
tag
<span class="token comment" spellcheck="true"># &lt;a href="http://example.com/">I linked to but did not endorse &lt;i>example.com&lt;/i>&lt;/a></span>
tag<span class="token punctuation">.</span>contents
<span class="token comment" spellcheck="true"># [u'I linked to ', u'but did not endorse', &lt;i>example.com&lt;/i>]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="insert-before-和-insert-after"><a href="#insert-before-和-insert-after" class="headerlink" title="insert_before() 和 insert_after()"></a>insert_before() 和 insert_after()</h2><p><code>insert_before()</code> 方法在当前tag或文本节点前插入内容:</p>
<pre class="line-numbers language-python"><code class="language-python">soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span><span class="token string">"&lt;b>stop&lt;/b>"</span><span class="token punctuation">)</span>
tag <span class="token operator">=</span> soup<span class="token punctuation">.</span>new_tag<span class="token punctuation">(</span><span class="token string">"i"</span><span class="token punctuation">)</span>
tag<span class="token punctuation">.</span>string <span class="token operator">=</span> <span class="token string">"Don't"</span>
soup<span class="token punctuation">.</span>b<span class="token punctuation">.</span>string<span class="token punctuation">.</span>insert_before<span class="token punctuation">(</span>tag<span class="token punctuation">)</span>
soup<span class="token punctuation">.</span>b
<span class="token comment" spellcheck="true"># &lt;b>&lt;i>Don't&lt;/i>stop&lt;/b></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>insert_after()</code> 方法在当前tag或文本节点后插入内容:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>b<span class="token punctuation">.</span>i<span class="token punctuation">.</span>insert_after<span class="token punctuation">(</span>soup<span class="token punctuation">.</span>new_string<span class="token punctuation">(</span><span class="token string">" ever "</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
soup<span class="token punctuation">.</span>b
<span class="token comment" spellcheck="true"># &lt;b>&lt;i>Don't&lt;/i> ever stop&lt;/b></span>
soup<span class="token punctuation">.</span>b<span class="token punctuation">.</span>contents
<span class="token comment" spellcheck="true"># [&lt;i>Don't&lt;/i>, u' ever ', u'stop']</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="clear"><a href="#clear" class="headerlink" title="clear()"></a>clear()</h2><p><code>Tag.clear()</code> 方法移除当前tag的内容:</p>
<pre class="line-numbers language-python"><code class="language-python">markup <span class="token operator">=</span> <span class="token string">'&lt;a href="http://example.com/">I linked to &lt;i>example.com&lt;/i>&lt;/a>'</span>
soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>markup<span class="token punctuation">)</span>
tag <span class="token operator">=</span> soup<span class="token punctuation">.</span>a

tag<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>
tag
<span class="token comment" spellcheck="true"># &lt;a href="http://example.com/">&lt;/a></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="extract"><a href="#extract" class="headerlink" title="extract()"></a>extract()</h2><p><code>PageElement.extract()</code> 方法将当前tag移除文档树,并作为方法结果返回:</p>
<pre class="line-numbers language-python"><code class="language-python">markup <span class="token operator">=</span> <span class="token string">'&lt;a href="http://example.com/">I linked to &lt;i>example.com&lt;/i>&lt;/a>'</span>
soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>markup<span class="token punctuation">)</span>
a_tag <span class="token operator">=</span> soup<span class="token punctuation">.</span>a

i_tag <span class="token operator">=</span> soup<span class="token punctuation">.</span>i<span class="token punctuation">.</span>extract<span class="token punctuation">(</span><span class="token punctuation">)</span>

a_tag
<span class="token comment" spellcheck="true"># &lt;a href="http://example.com/">I linked to&lt;/a></span>

i_tag
<span class="token comment" spellcheck="true"># &lt;i>example.com&lt;/i></span>

<span class="token keyword">print</span><span class="token punctuation">(</span>i_tag<span class="token punctuation">.</span>parent<span class="token punctuation">)</span>
None<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这个方法实际上产生了2个文档树: 一个是用来解析原始文档的 <code>BeautifulSoup</code> 对象,另一个是被移除并且返回的tag.被移除并返回的tag可以继续调用 <code>extract</code> 方法:</p>
<pre class="line-numbers language-python"><code class="language-python">my_string <span class="token operator">=</span> i_tag<span class="token punctuation">.</span>string<span class="token punctuation">.</span>extract<span class="token punctuation">(</span><span class="token punctuation">)</span>
my_string
<span class="token comment" spellcheck="true"># u'example.com'</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>my_string<span class="token punctuation">.</span>parent<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># None</span>
i_tag
<span class="token comment" spellcheck="true"># &lt;i>&lt;/i></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="decompose"><a href="#decompose" class="headerlink" title="decompose()"></a>decompose()</h2><p><code>Tag.decompose()</code> 方法将当前节点移除文档树并完全销毁:</p>
<pre class="line-numbers language-python"><code class="language-python">markup <span class="token operator">=</span> <span class="token string">'&lt;a href="http://example.com/">I linked to &lt;i>example.com&lt;/i>&lt;/a>'</span>
soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>markup<span class="token punctuation">)</span>
a_tag <span class="token operator">=</span> soup<span class="token punctuation">.</span>a

soup<span class="token punctuation">.</span>i<span class="token punctuation">.</span>decompose<span class="token punctuation">(</span><span class="token punctuation">)</span>

a_tag
<span class="token comment" spellcheck="true"># &lt;a href="http://example.com/">I linked to&lt;/a></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="replace-with"><a href="#replace-with" class="headerlink" title="replace_with()"></a>replace_with()</h2><p><code>PageElement.replace_with()</code> 方法移除文档树中的某段内容,并用新tag或文本节点替代它:</p>
<pre class="line-numbers language-python"><code class="language-python">markup <span class="token operator">=</span> <span class="token string">'&lt;a href="http://example.com/">I linked to &lt;i>example.com&lt;/i>&lt;/a>'</span>
soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>markup<span class="token punctuation">)</span>
a_tag <span class="token operator">=</span> soup<span class="token punctuation">.</span>a

new_tag <span class="token operator">=</span> soup<span class="token punctuation">.</span>new_tag<span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span>
new_tag<span class="token punctuation">.</span>string <span class="token operator">=</span> <span class="token string">"example.net"</span>
a_tag<span class="token punctuation">.</span>i<span class="token punctuation">.</span>replace_with<span class="token punctuation">(</span>new_tag<span class="token punctuation">)</span>

a_tag
<span class="token comment" spellcheck="true"># &lt;a href="http://example.com/">I linked to &lt;b>example.net&lt;/b>&lt;/a></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>replace_with()</code> 方法返回被替代的tag或文本节点,可以用来浏览或添加到文档树其它地方</p>
<h2 id="wrap"><a href="#wrap" class="headerlink" title="wrap()"></a>wrap()</h2><p><code>PageElement.wrap()</code> 方法可以对指定的tag元素进行包装,并返回包装后的结果:</p>
<pre class="line-numbers language-python"><code class="language-python">soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span><span class="token string">"&lt;p>I wish I was bold.&lt;/p>"</span><span class="token punctuation">)</span>
soup<span class="token punctuation">.</span>p<span class="token punctuation">.</span>string<span class="token punctuation">.</span>wrap<span class="token punctuation">(</span>soup<span class="token punctuation">.</span>new_tag<span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;b>I wish I was bold.&lt;/b></span>

soup<span class="token punctuation">.</span>p<span class="token punctuation">.</span>wrap<span class="token punctuation">(</span>soup<span class="token punctuation">.</span>new_tag<span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;div>&lt;p>&lt;b>I wish I was bold.&lt;/b>&lt;/p>&lt;/div></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>该方法在 Beautiful Soup 4.0.5 中添加</p>
<h2 id="unwrap"><a href="#unwrap" class="headerlink" title="unwrap()"></a>unwrap()</h2><p><code>Tag.unwrap()</code> 方法与 <code>wrap()</code> 方法相反.将移除tag内的所有tag标签,该方法常被用来进行标记的解包:</p>
<pre class="line-numbers language-python"><code class="language-python">markup <span class="token operator">=</span> <span class="token string">'&lt;a href="http://example.com/">I linked to &lt;i>example.com&lt;/i>&lt;/a>'</span>
soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>markup<span class="token punctuation">)</span>
a_tag <span class="token operator">=</span> soup<span class="token punctuation">.</span>a

a_tag<span class="token punctuation">.</span>i<span class="token punctuation">.</span>unwrap<span class="token punctuation">(</span><span class="token punctuation">)</span>
a_tag
<span class="token comment" spellcheck="true"># &lt;a href="http://example.com/">I linked to example.com&lt;/a></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>与 <code>replace_with()</code> 方法相同, <code>unwrap()</code> 方法返回被移除的tag</p>
<h1 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h1><h2 id="格式化输出"><a href="#格式化输出" class="headerlink" title="格式化输出"></a>格式化输出</h2><p><code>prettify()</code> 方法将Beautiful Soup的文档树格式化后以Unicode编码输出,每个XML/HTML标签都独占一行</p>
<pre class="line-numbers language-python"><code class="language-python">markup <span class="token operator">=</span> <span class="token string">'&lt;a href="http://example.com/">I linked to &lt;i>example.com&lt;/i>&lt;/a>'</span>
soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>markup<span class="token punctuation">)</span>
soup<span class="token punctuation">.</span>prettify<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># '&lt;html>\n &lt;head>\n &lt;/head>\n &lt;body>\n  &lt;a href="http://example.com/">\n...'</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>prettify<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;html></span>
<span class="token comment" spellcheck="true">#  &lt;head></span>
<span class="token comment" spellcheck="true">#  &lt;/head></span>
<span class="token comment" spellcheck="true">#  &lt;body></span>
<span class="token comment" spellcheck="true">#   &lt;a href="http://example.com/"></span>
<span class="token comment" spellcheck="true">#    I linked to</span>
<span class="token comment" spellcheck="true">#    &lt;i></span>
<span class="token comment" spellcheck="true">#     example.com</span>
<span class="token comment" spellcheck="true">#    &lt;/i></span>
<span class="token comment" spellcheck="true">#   &lt;/a></span>
<span class="token comment" spellcheck="true">#  &lt;/body></span>
<span class="token comment" spellcheck="true"># &lt;/html></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>BeautifulSoup</code> 对象和它的tag节点都可以调用 <code>prettify()</code> 方法:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>a<span class="token punctuation">.</span>prettify<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;a href="http://example.com/"></span>
<span class="token comment" spellcheck="true">#  I linked to</span>
<span class="token comment" spellcheck="true">#  &lt;i></span>
<span class="token comment" spellcheck="true">#   example.com</span>
<span class="token comment" spellcheck="true">#  &lt;/i></span>
<span class="token comment" spellcheck="true"># &lt;/a></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="压缩输出"><a href="#压缩输出" class="headerlink" title="压缩输出"></a>压缩输出</h2><p>如果只想得到结果字符串,不重视格式,那么可以对一个 <code>BeautifulSoup</code> 对象或 <code>Tag</code> 对象使用Python的 <code>unicode()</code> 或 <code>str()</code> 方法:</p>
<pre class="line-numbers language-python"><code class="language-python">str<span class="token punctuation">(</span>soup<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># '&lt;html>&lt;head>&lt;/head>&lt;body>&lt;a href="http://example.com/">I linked to &lt;i>example.com&lt;/i>&lt;/a>&lt;/body>&lt;/html>'</span>

unicode<span class="token punctuation">(</span>soup<span class="token punctuation">.</span>a<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># u'&lt;a href="http://example.com/">I linked to &lt;i>example.com&lt;/i>&lt;/a>'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>str()</code> 方法返回UTF-8编码的字符串,可以指定 编码 的设置.</p>
<p>还可以调用 <code>encode()</code> 方法获得字节码或调用 <code>decode()</code> 方法获得Unicode.</p>
<h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>Beautiful Soup输出是会将HTML中的特殊字符转换成Unicode,比如“&amp;lquot;”:</p>
<pre class="line-numbers language-python"><code class="language-python">soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span><span class="token string">"&amp;ldquo;Dammit!&amp;rdquo; he said."</span><span class="token punctuation">)</span>
unicode<span class="token punctuation">(</span>soup<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># u'&lt;html>&lt;head>&lt;/head>&lt;body>\u201cDammit!\u201d he said.&lt;/body>&lt;/html>'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>如果将文档转换成字符串,Unicode编码会被编码成UTF-8.这样就无法正确显示HTML特殊字符了:</p>
<pre class="line-numbers language-python"><code class="language-python">str<span class="token punctuation">(</span>soup<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># '&lt;html>&lt;head>&lt;/head>&lt;body>\xe2\x80\x9cDammit!\xe2\x80\x9d he said.&lt;/body>&lt;/html>'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h2 id="get-text"><a href="#get-text" class="headerlink" title="get_text()"></a>get_text()</h2><p>如果只想得到tag中包含的文本内容,那么可以调用 <code>get_text()</code> 方法,这个方法获取到tag中包含的所有文版内容包括子孙tag中的内容,并将结果作为Unicode字符串返回:</p>
<pre class="line-numbers language-python"><code class="language-python">markup <span class="token operator">=</span> <span class="token string">'&lt;a href="http://example.com/">\nI linked to &lt;i>example.com&lt;/i>\n&lt;/a>'</span>
soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>markup<span class="token punctuation">)</span>

soup<span class="token punctuation">.</span>get_text<span class="token punctuation">(</span><span class="token punctuation">)</span>
u<span class="token string">'\nI linked to example.com\n'</span>
soup<span class="token punctuation">.</span>i<span class="token punctuation">.</span>get_text<span class="token punctuation">(</span><span class="token punctuation">)</span>
u<span class="token string">'example.com'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>可以通过参数指定tag的文本内容的分隔符:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># soup.get_text("|")</span>
u<span class="token string">'\nI linked to |example.com|\n'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>还可以去除获得文本内容的前后空白:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># soup.get_text("|", strip=True)</span>
u<span class="token string">'I linked to|example.com'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>或者使用 .stripped_strings 生成器,获得文本列表后手动处理列表:</p>
<pre class="line-numbers language-pythonpython"><code class="language-pythonpython">[text for text in soup.stripped_strings]
# [u'I linked to', u'example.com']<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h1 id="指定文档解析器"><a href="#指定文档解析器" class="headerlink" title="指定文档解析器"></a>指定文档解析器</h1><p>如果仅是想要解析HTML文档,只要用文档创建 <code>BeautifulSoup</code> 对象就可以了.Beautiful Soup会自动选择一个解析器来解析文档.但是还可以通过参数指定使用那种解析器来解析当前文档.</p>
<p><code>BeautifulSoup</code> 第一个参数应该是要被解析的文档字符串或是文件句柄,第二个参数用来标识怎样解析文档.如果第二个参数为空,那么Beautiful Soup根据当前系统安装的库自动选择解析器,解析器的优先数序: lxml, html5lib, Python标准库.在下面两种条件下解析器优先顺序会变化:</p>
<blockquote>
<ul>
<li>要解析的文档是什么类型: 目前支持, “html”, “xml”, 和 “html5”</li>
<li>指定使用哪种解析器: 目前支持, “lxml”, “html5lib”, 和 “html.parser”</li>
</ul>
</blockquote>
<p>安装解析器 章节介绍了可以使用哪种解析器,以及如何安装.</p>
<p>如果指定的解析器没有安装,Beautiful Soup会自动选择其它方案.目前只有 lxml 解析器支持XML文档的解析,在没有安装lxml库的情况下,创建 <code>beautifulsoup</code> 对象时无论是否指定使用lxml,都无法得到解析后的对象</p>
<h2 id="解析器之间的区别"><a href="#解析器之间的区别" class="headerlink" title="解析器之间的区别"></a>解析器之间的区别</h2><p>Beautiful Soup为不同的解析器提供了相同的接口,但解析器本身时有区别的.同一篇文档被不同的解析器解析后可能会生成不同结构的树型文档.区别最大的是HTML解析器和XML解析器,看下面片段被解析成HTML结构:</p>
<pre class="line-numbers language-python"><code class="language-python">BeautifulSoup<span class="token punctuation">(</span><span class="token string">"&lt;a>&lt;b />&lt;/a>"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;html>&lt;head>&lt;/head>&lt;body>&lt;a>&lt;b>&lt;/b>&lt;/a>&lt;/body>&lt;/html></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>因为空标签&lt;b /&gt;不符合HTML标准,所以解析器把它解析成&lt;b&gt;&lt;/b&gt;</p>
<p>同样的文档使用XML解析如下(解析XML需要安装lxml库).注意,空标签&lt;b /&gt;依然被保留,并且文档前添加了XML头,而不是被包含在&lt;html&gt;标签内:</p>
<pre class="line-numbers language-python"><code class="language-python">BeautifulSoup<span class="token punctuation">(</span><span class="token string">"&lt;a>&lt;b />&lt;/a>"</span><span class="token punctuation">,</span> <span class="token string">"xml"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token comment" spellcheck="true"># &lt;a>&lt;b/>&lt;/a></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>HTML解析器之间也有区别,如果被解析的HTML文档是标准格式,那么解析器之间没有任何差别,只是解析速度不同,结果都会返回正确的文档树.</p>
<p>但是如果被解析文档不是标准格式,那么不同的解析器返回结果可能不同.下面例子中,使用lxml解析错误格式的文档,结果&lt;/p&gt;标签被直接忽略掉了:</p>
<pre class="line-numbers language-python"><code class="language-python">BeautifulSoup<span class="token punctuation">(</span><span class="token string">"&lt;a>&lt;/p>"</span><span class="token punctuation">,</span> <span class="token string">"lxml"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;html>&lt;body>&lt;a>&lt;/a>&lt;/body>&lt;/html></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>使用html5lib库解析相同文档会得到不同的结果:</p>
<pre class="line-numbers language-python"><code class="language-python">BeautifulSoup<span class="token punctuation">(</span><span class="token string">"&lt;a>&lt;/p>"</span><span class="token punctuation">,</span> <span class="token string">"html5lib"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;html>&lt;head>&lt;/head>&lt;body>&lt;a>&lt;p>&lt;/p>&lt;/a>&lt;/body>&lt;/html></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>html5lib库没有忽略掉&lt;/p&gt;标签,而是自动补全了标签,还给文档树添加了&lt;head&gt;标签.</p>
<p>使用pyhton内置库解析结果如下:</p>
<pre class="line-numbers language-python"><code class="language-python">BeautifulSoup<span class="token punctuation">(</span><span class="token string">"&lt;a>&lt;/p>"</span><span class="token punctuation">,</span> <span class="token string">"html.parser"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;a>&lt;/a></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>与lxml库类似的,Python内置库忽略掉了&lt;/p&gt;标签,与html5lib库不同的是标准库没有尝试创建符合标准的文档格式或将文档片段包含在&lt;body&gt;标签内,与lxml不同的是标准库甚至连&lt;html&gt;标签都没有尝试去添加.</p>
<p>因为文档片段“&lt;a&gt;&lt;/p&gt;”是错误格式,所以以上解析方式都能算作”正确”,html5lib库使用的是HTML5的部分标准,所以最接近”正确”.不过所有解析器的结构都能够被认为是”正常”的.</p>
<p>不同的解析器可能影响代码执行结果,如果在分发给别人的代码中使用了 <code>BeautifulSoup</code> ,那么最好注明使用了哪种解析器,以减少不必要的麻烦.</p>
<h1 id="编码"><a href="#编码" class="headerlink" title="编码"></a>编码</h1><p>任何HTML或XML文档都有自己的编码方式,比如ASCII 或 UTF-8,但是使用Beautiful Soup解析后,文档都被转换成了Unicode:</p>
<pre class="line-numbers language-python"><code class="language-python">markup <span class="token operator">=</span> <span class="token string">"&lt;h1>Sacr\xc3\xa9 bleu!&lt;/h1>"</span>
soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>markup<span class="token punctuation">)</span>
soup<span class="token punctuation">.</span>h1
<span class="token comment" spellcheck="true"># &lt;h1>Sacré bleu!&lt;/h1></span>
soup<span class="token punctuation">.</span>h1<span class="token punctuation">.</span>string
<span class="token comment" spellcheck="true"># u'Sacr\xe9 bleu!'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这不是魔术(但很神奇),Beautiful Soup用了 编码自动检测 子库来识别当前文档编码并转换成Unicode编码. <code>BeautifulSoup</code> 对象的 <code>.original_encoding</code> 属性记录了自动识别编码的结果:</p>
<pre><code>soup.original_encoding
'utf-8'</code></pre><p>编码自动检测 功能大部分时候都能猜对编码格式,但有时候也会出错.有时候即使猜测正确,也是在逐个字节的遍历整个文档后才猜对的,这样很慢.如果预先知道文档编码,可以设置编码参数来减少自动检查编码出错的概率并且提高文档解析速度.在创建 <code>BeautifulSoup</code> 对象的时候设置 <code>from_encoding</code> 参数.</p>
<p>下面一段文档用了ISO-8859-8编码方式,这段文档太短,结果Beautiful Soup以为文档是用ISO-8859-7编码:</p>
<pre class="line-numbers language-python"><code class="language-python">markup <span class="token operator">=</span> b<span class="token string">"&lt;h1>\xed\xe5\xec\xf9&lt;/h1>"</span>
soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>markup<span class="token punctuation">)</span>
soup<span class="token punctuation">.</span>h1
<span class="token operator">&lt;</span>h1<span class="token operator">></span>νεμω<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
soup<span class="token punctuation">.</span>original_encoding
<span class="token string">'ISO-8859-7'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>通过传入 <code>from_encoding</code> 参数来指定编码方式:</p>
<pre class="line-numbers language-python"><code class="language-python">soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>markup<span class="token punctuation">,</span> from_encoding<span class="token operator">=</span><span class="token string">"iso-8859-8"</span><span class="token punctuation">)</span>
soup<span class="token punctuation">.</span>h1
<span class="token operator">&lt;</span>h1<span class="token operator">></span>םולש<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
soup<span class="token punctuation">.</span>original_encoding
<span class="token string">'iso8859-8'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果仅知道文档采用了Unicode编码, 但不知道具体编码. 可以先自己猜测, 猜测错误(依旧是乱码)时, 可以把错误编码作为 <code>exclude_encodings</code> 参数, 这样文档就不会尝试使用这种编码了解码了. 译者备注: 在没有指定编码的情况下, BS会自己猜测编码, 把不正确的编码排除掉, BS就更容易猜到正确编码.</p>
<pre class="line-numbers language-python"><code class="language-python">soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>markup<span class="token punctuation">,</span> exclude_encodings<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"ISO-8859-7"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
soup<span class="token punctuation">.</span>h1
<span class="token operator">&lt;</span>h1<span class="token operator">></span>םולש<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
soup<span class="token punctuation">.</span>original_encoding
<span class="token string">'WINDOWS-1255'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>猜测结果是 Windows-1255 编码, 猜测结果可能不够准确, 但是 Windows-1255 编码是 ISO-8859-8 的扩展集, 所以猜测结果已经十分接近了, 并且不影响使用. (<code>exclude_encodings</code> 参数是 4.4.0版本的新功能)</p>
<p>少数情况下(通常是UTF-8编码的文档中包含了其它编码格式的文件),想获得正确的Unicode编码就不得不将文档中少数特殊编码字符替换成特殊Unicode编码,“REPLACEMENT CHARACTER” (U+FFFD, �). 如果Beautifu Soup猜测文档编码时作了特殊字符的替换,那么Beautiful Soup会把 <code>UnicodeDammit</code> 或 <code>BeautifulSoup</code> 对象的 <code>.contains_replacement_characters</code> 属性标记为 <code>True</code> .这样就可以知道当前文档进行Unicode编码后丢失了一部分特殊内容字符.如果文档中包含�而 <code>.contains_replacement_characters</code> 属性是 <code>False</code> ,则表示�就是文档中原来的字符,不是转码失败.</p>
<h2 id="输出编码"><a href="#输出编码" class="headerlink" title="输出编码"></a>输出编码</h2><p>通过Beautiful Soup输出文档时,不管输入文档是什么编码方式,输出编码均为UTF-8编码,下面例子输入文档是Latin-1编码:</p>
<pre class="line-numbers language-python"><code class="language-python">markup <span class="token operator">=</span> b<span class="token triple-quoted-string string">'''
&lt;html>
  &lt;head>
    &lt;meta content="text/html; charset=ISO-Latin-1" http-equiv="Content-type" />
  &lt;/head>
  &lt;body>
    &lt;p>Sacr\xe9 bleu!&lt;/p>
  &lt;/body>
&lt;/html>
'''</span>

soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>markup<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>prettify<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;html></span>
<span class="token comment" spellcheck="true">#  &lt;head></span>
<span class="token comment" spellcheck="true">#   &lt;meta content="text/html; charset=utf-8" http-equiv="Content-type" /></span>
<span class="token comment" spellcheck="true">#  &lt;/head></span>
<span class="token comment" spellcheck="true">#  &lt;body></span>
<span class="token comment" spellcheck="true">#   &lt;p></span>
<span class="token comment" spellcheck="true">#    Sacré bleu!</span>
<span class="token comment" spellcheck="true">#   &lt;/p></span>
<span class="token comment" spellcheck="true">#  &lt;/body></span>
<span class="token comment" spellcheck="true"># &lt;/html></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>注意,输出文档中的&lt;meta&gt;标签的编码设置已经修改成了与输出编码一致的UTF-8.</p>
<p>如果不想用UTF-8编码输出,可以将编码方式传入 <code>prettify()</code> 方法:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>prettify<span class="token punctuation">(</span><span class="token string">"latin-1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;html></span>
<span class="token comment" spellcheck="true">#  &lt;head></span>
<span class="token comment" spellcheck="true">#   &lt;meta content="text/html; charset=latin-1" http-equiv="Content-type" /></span>
<span class="token comment" spellcheck="true"># ...</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>还可以调用 <code>BeautifulSoup</code> 对象或任意节点的 <code>encode()</code> 方法,就像Python的字符串调用 <code>encode()</code> 方法一样:</p>
<pre class="line-numbers language-python"><code class="language-python">soup<span class="token punctuation">.</span>p<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">"latin-1"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># '&lt;p>Sacr\xe9 bleu!&lt;/p>'</span>

soup<span class="token punctuation">.</span>p<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># '&lt;p>Sacr\xc3\xa9 bleu!&lt;/p>'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果文档中包含当前编码不支持的字符,那么这些字符将被转换成一系列XML特殊字符引用,下面例子中包含了Unicode编码字符SNOWMAN:</p>
<pre class="line-numbers language-python"><code class="language-python">markup <span class="token operator">=</span> u<span class="token string">"&lt;b>\N{SNOWMAN}&lt;/b>"</span>
snowman_soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>markup<span class="token punctuation">)</span>
tag <span class="token operator">=</span> snowman_soup<span class="token punctuation">.</span>b<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>SNOWMAN字符在UTF-8编码中可以正常显示(看上去像是☃),但有些编码不支持SNOWMAN字符,比如ISO-Latin-1或ASCII,那么在这些编码中SNOWMAN字符会被转换成“&amp;#9731”:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>tag<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;b>☃&lt;/b></span>

<span class="token keyword">print</span> tag<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">"latin-1"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;b>&amp;#9731;&lt;/b></span>

<span class="token keyword">print</span> tag<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">"ascii"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;b>&amp;#9731;&lt;/b></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="Unicode-Dammit"><a href="#Unicode-Dammit" class="headerlink" title="Unicode, Dammit!"></a>Unicode, Dammit!</h2><p>UnicodeDammit 是BS内置库, 主要用来猜测文档编码.</p>
<p>编码自动检测 功能可以在Beautiful Soup以外使用,检测某段未知编码时,可以使用这个方法:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> bs4 <span class="token keyword">import</span> UnicodeDammit
dammit <span class="token operator">=</span> UnicodeDammit<span class="token punctuation">(</span><span class="token string">"Sacr\xc3\xa9 bleu!"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>dammit<span class="token punctuation">.</span>unicode_markup<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># Sacré bleu!</span>
dammit<span class="token punctuation">.</span>original_encoding
<span class="token comment" spellcheck="true"># 'utf-8'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果Python中安装了 <code>chardet</code> 或 <code>cchardet</code> 那么编码检测功能的准确率将大大提高. 输入的字符越多,检测结果越精确,如果事先猜测到一些可能编码, 那么可以将猜测的编码作为参数,这样将优先检测这些编码:</p>
<pre class="line-numbers language-python"><code class="language-python">dammit <span class="token operator">=</span> UnicodeDammit<span class="token punctuation">(</span><span class="token string">"Sacr\xe9 bleu!"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"latin-1"</span><span class="token punctuation">,</span> <span class="token string">"iso-8859-1"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>dammit<span class="token punctuation">.</span>unicode_markup<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># Sacré bleu!</span>
dammit<span class="token punctuation">.</span>original_encoding
<span class="token comment" spellcheck="true"># 'latin-1'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>编码自动检测 功能中有2项功能是Beautiful Soup库中用不到的</p>
<h3 id="智能引号"><a href="#智能引号" class="headerlink" title="智能引号"></a>智能引号</h3><p>使用Unicode时,Beautiful Soup还会智能的把引号 转换成HTML或XML中的特殊字符:</p>
<pre class="line-numbers language-python"><code class="language-python">markup <span class="token operator">=</span> b<span class="token string">"&lt;p>I just \x93love\x94 Microsoft Word\x92s smart quotes&lt;/p>"</span>

UnicodeDammit<span class="token punctuation">(</span>markup<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"windows-1252"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> smart_quotes_to<span class="token operator">=</span><span class="token string">"html"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>unicode_markup
<span class="token comment" spellcheck="true"># u'&lt;p>I just &amp;ldquo;love&amp;rdquo; Microsoft Word&amp;rsquo;s smart quotes&lt;/p>'</span>

UnicodeDammit<span class="token punctuation">(</span>markup<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"windows-1252"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> smart_quotes_to<span class="token operator">=</span><span class="token string">"xml"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>unicode_markup
<span class="token comment" spellcheck="true"># u'&lt;p>I just &amp;#x201C;love&amp;#x201D; Microsoft Word&amp;#x2019;s smart quotes&lt;/p>'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>也可以把引号转换为ASCII码:</p>
<pre class="line-numbers language-python"><code class="language-python">UnicodeDammit<span class="token punctuation">(</span>markup<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"windows-1252"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> smart_quotes_to<span class="token operator">=</span><span class="token string">"ascii"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>unicode_markup
<span class="token comment" spellcheck="true"># u'&lt;p>I just "love" Microsoft Word\'s smart quotes&lt;/p>'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>很有用的功能,但是Beautiful Soup没有使用这种方式.默认情况下,Beautiful Soup把引号转换成Unicode:</p>
<pre class="line-numbers language-python"><code class="language-python">UnicodeDammit<span class="token punctuation">(</span>markup<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"windows-1252"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>unicode_markup
<span class="token comment" spellcheck="true"># u'&lt;p>I just \u201clove\u201d Microsoft Word\u2019s smart quotes&lt;/p>'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="矛盾的编码"><a href="#矛盾的编码" class="headerlink" title="矛盾的编码"></a>矛盾的编码</h3><p>有时文档的大部分都是用UTF-8,但同时还包含了Windows-1252编码的字符,就像微软的智能引号一样. 一些包含多个信息的来源网站容易出现这种情况. <code>UnicodeDammit.detwingle()</code> 方法可以把这类文档转换成纯UTF-8编码格式,看个简单的例子:</p>
<pre class="line-numbers language-python"><code class="language-python">snowmen <span class="token operator">=</span> <span class="token punctuation">(</span>u<span class="token string">"\N{SNOWMAN}"</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">)</span>
quote <span class="token operator">=</span> <span class="token punctuation">(</span>u<span class="token string">"\N{LEFT DOUBLE QUOTATION MARK}I like snowmen!\N{RIGHT DOUBLE QUOTATION MARK}"</span><span class="token punctuation">)</span>
doc <span class="token operator">=</span> snowmen<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">"utf8"</span><span class="token punctuation">)</span> <span class="token operator">+</span> quote<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">"windows_1252"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>这段文档很杂乱,snowmen是UTF-8编码,引号是Windows-1252编码,直接输出时不能同时显示snowmen和引号,因为它们编码不同:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>doc<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># ☃☃☃�I like snowmen!�</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">"windows-1252"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># â˜ƒâ˜ƒâ˜ƒ“I like snowmen!”</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果对这段文档用UTF-8解码就会得到 <code>UnicodeDecodeError</code> 异常,如果用Windows-1252解码就回得到一堆乱码. 幸好, <code>UnicodeDammit.detwingle()</code> 方法会把这段字符串转换成UTF-8编码,允许我们同时显示出文档中的snowmen和引号:</p>
<pre class="line-numbers language-python"><code class="language-python">new_doc <span class="token operator">=</span> UnicodeDammit<span class="token punctuation">.</span>detwingle<span class="token punctuation">(</span>doc<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>new_doc<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">"utf8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># ☃☃☃“I like snowmen!”</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><code>UnicodeDammit.detwingle()</code> 方法只能解码包含在UTF-8编码中的Windows-1252编码内容,但这解决了最常见的一类问题.</p>
<p>在创建 <code>BeautifulSoup</code> 或 <code>UnicodeDammit</code> 对象前一定要先对文档调用 <code>UnicodeDammit.detwingle()</code> 确保文档的编码方式正确.如果尝试去解析一段包含Windows-1252编码的UTF-8文档,就会得到一堆乱码,比如: â˜ƒâ˜ƒâ˜ƒ“I like snowmen!”.</p>
<p><code>UnicodeDammit.detwingle()</code> 方法在Beautiful Soup 4.1.0版本中新增</p>
<h1 id="比较对象是否相同"><a href="#比较对象是否相同" class="headerlink" title="比较对象是否相同"></a>比较对象是否相同</h1><p>两个 <code>NavigableString</code> 或 <code>Tag</code> 对象具有相同的HTML或XML结构时, Beautiful Soup就判断这两个对象相同. 这个例子中, 2个 &lt;b&gt; 标签在 BS 中是相同的, 尽管他们在文档树的不同位置, 但是具有相同的表象: “&lt;b&gt;pizza&lt;/b&gt;”</p>
<pre class="line-numbers language-python"><code class="language-python">markup <span class="token operator">=</span> <span class="token string">"&lt;p>I want &lt;b>pizza&lt;/b> and more &lt;b>pizza&lt;/b>!&lt;/p>"</span>
soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>markup<span class="token punctuation">,</span> <span class="token string">'html.parser'</span><span class="token punctuation">)</span>
first_b<span class="token punctuation">,</span> second_b <span class="token operator">=</span> soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> first_b <span class="token operator">==</span> second_b
<span class="token comment" spellcheck="true"># True</span>

<span class="token keyword">print</span> first_b<span class="token punctuation">.</span>previous_element <span class="token operator">==</span> second_b<span class="token punctuation">.</span>previous_element
<span class="token comment" spellcheck="true"># False</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果想判断两个对象是否严格的指向同一个对象可以通过 <code>is</code> 来判断</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">print</span> first_b <span class="token keyword">is</span> second_b
<span class="token comment" spellcheck="true"># False</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h1 id="复制Beautiful-Soup对象"><a href="#复制Beautiful-Soup对象" class="headerlink" title="复制Beautiful Soup对象"></a>复制Beautiful Soup对象</h1><p><code>copy.copy()</code> 方法可以复制任意 <code>Tag</code> 或 <code>NavigableString</code> 对象</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> copy
p_copy <span class="token operator">=</span> copy<span class="token punctuation">.</span>copy<span class="token punctuation">(</span>soup<span class="token punctuation">.</span>p<span class="token punctuation">)</span>
<span class="token keyword">print</span> p_copy
<span class="token comment" spellcheck="true"># &lt;p>I want &lt;b>pizza&lt;/b> and more &lt;b>pizza&lt;/b>!&lt;/p></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>复制后的对象跟与对象是相等的, 但指向不同的内存地址</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">print</span> soup<span class="token punctuation">.</span>p <span class="token operator">==</span> p_copy
<span class="token comment" spellcheck="true"># True</span>

<span class="token keyword">print</span> soup<span class="token punctuation">.</span>p <span class="token keyword">is</span> p_copy
<span class="token comment" spellcheck="true"># False</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>源对象和复制对象的区别是源对象在文档树中, 而复制后的对象是独立的还没有添加到文档树中. 复制后对象的效果跟调用了 <code>extract()</code> 方法相同.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">print</span> p_copy<span class="token punctuation">.</span>parent
<span class="token comment" spellcheck="true"># None</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>这是因为相等的对象不能同时插入相同的位置</p>
<h1 id="解析部分文档"><a href="#解析部分文档" class="headerlink" title="解析部分文档"></a>解析部分文档</h1><p>如果仅仅因为想要查找文档中的&lt;a&gt;标签而将整片文档进行解析,实在是浪费内存和时间.最快的方法是从一开始就把&lt;a&gt;标签以外的东西都忽略掉. <code>SoupStrainer</code> 类可以定义文档的某段内容,这样搜索文档时就不必先解析整篇文档,只会解析在 <code>SoupStrainer</code> 中定义过的文档. 创建一个 <code>SoupStrainer</code> 对象并作为 <code>parse_only</code> 参数给 <code>BeautifulSoup</code> 的构造方法即可.</p>
<h2 id="SoupStrainer"><a href="#SoupStrainer" class="headerlink" title="SoupStrainer"></a>SoupStrainer</h2><p><code>SoupStrainer</code> 类接受与典型搜索方法相同的参数：name , attrs , recursive , string , **kwargs 。下面举例说明三种 <code>SoupStrainer</code> 对象：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> bs4 <span class="token keyword">import</span> SoupStrainer

only_a_tags <span class="token operator">=</span> SoupStrainer<span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span>

only_tags_with_id_link2 <span class="token operator">=</span> SoupStrainer<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">"link2"</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">is_short_string</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> len<span class="token punctuation">(</span>string<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">10</span>

only_short_strings <span class="token operator">=</span> SoupStrainer<span class="token punctuation">(</span>string<span class="token operator">=</span>is_short_string<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>再拿“爱丽丝”文档来举例，来看看使用三种 <code>SoupStrainer</code> 对象做参数会有什么不同:</p>
<pre class="line-numbers language-python"><code class="language-python">html_doc <span class="token operator">=</span> <span class="token triple-quoted-string string">"""
&lt;html>&lt;head>&lt;title>The Dormouse's story&lt;/title>&lt;/head>
    &lt;body>
&lt;p class="title">&lt;b>The Dormouse's story&lt;/b>&lt;/p>

&lt;p class="story">Once upon a time there were three little sisters; and their names were
&lt;a href="http://example.com/elsie" class="sister" id="link1">Elsie&lt;/a>,
&lt;a href="http://example.com/lacie" class="sister" id="link2">Lacie&lt;/a> and
&lt;a href="http://example.com/tillie" class="sister" id="link3">Tillie&lt;/a>;
and they lived at the bottom of a well.&lt;/p>

&lt;p class="story">...&lt;/p>
"""</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>BeautifulSoup<span class="token punctuation">(</span>html_doc<span class="token punctuation">,</span> <span class="token string">"html.parser"</span><span class="token punctuation">,</span> parse_only<span class="token operator">=</span>only_a_tags<span class="token punctuation">)</span><span class="token punctuation">.</span>prettify<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;a class="sister" href="http://example.com/elsie" id="link1"></span>
<span class="token comment" spellcheck="true">#  Elsie</span>
<span class="token comment" spellcheck="true"># &lt;/a></span>
<span class="token comment" spellcheck="true"># &lt;a class="sister" href="http://example.com/lacie" id="link2"></span>
<span class="token comment" spellcheck="true">#  Lacie</span>
<span class="token comment" spellcheck="true"># &lt;/a></span>
<span class="token comment" spellcheck="true"># &lt;a class="sister" href="http://example.com/tillie" id="link3"></span>
<span class="token comment" spellcheck="true">#  Tillie</span>
<span class="token comment" spellcheck="true"># &lt;/a></span>

<span class="token keyword">print</span><span class="token punctuation">(</span>BeautifulSoup<span class="token punctuation">(</span>html_doc<span class="token punctuation">,</span> <span class="token string">"html.parser"</span><span class="token punctuation">,</span> parse_only<span class="token operator">=</span>only_tags_with_id_link2<span class="token punctuation">)</span><span class="token punctuation">.</span>prettify<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># &lt;a class="sister" href="http://example.com/lacie" id="link2"></span>
<span class="token comment" spellcheck="true">#  Lacie</span>
<span class="token comment" spellcheck="true"># &lt;/a></span>

<span class="token keyword">print</span><span class="token punctuation">(</span>BeautifulSoup<span class="token punctuation">(</span>html_doc<span class="token punctuation">,</span> <span class="token string">"html.parser"</span><span class="token punctuation">,</span> parse_only<span class="token operator">=</span>only_short_strings<span class="token punctuation">)</span><span class="token punctuation">.</span>prettify<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># Elsie</span>
<span class="token comment" spellcheck="true"># ,</span>
<span class="token comment" spellcheck="true"># Lacie</span>
<span class="token comment" spellcheck="true"># and</span>
<span class="token comment" spellcheck="true"># Tillie</span>
<span class="token comment" spellcheck="true"># ...</span>
<span class="token comment" spellcheck="true">#</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>还可以将 <code>SoupStrainer</code> 作为参数传入 搜索文档树 中提到的方法.这可能不是个常用用法,所以还是提一下:</p>
<pre><code>soup = BeautifulSoup(html_doc)
soup.find_all(only_short_strings)
# [u'\n\n', u'\n\n', u'Elsie', u',\n', u'Lacie', u' and\n', u'Tillie',
#  u'\n\n', u'...', u'\n']</code></pre><h1 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h1><h2 id="代码诊断"><a href="#代码诊断" class="headerlink" title="代码诊断"></a>代码诊断</h2><p>如果想知道Beautiful Soup到底怎样处理一份文档,可以将文档传入 <code>diagnose()</code> 方法(Beautiful Soup 4.2.0中新增),Beautiful Soup会输出一份报告,说明不同的解析器会怎样处理这段文档,并标出当前的解析过程会使用哪种解析器:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> bs4<span class="token punctuation">.</span>diagnose <span class="token keyword">import</span> diagnose
data <span class="token operator">=</span> open<span class="token punctuation">(</span><span class="token string">"bad.html"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
diagnose<span class="token punctuation">(</span>data<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># Diagnostic running on Beautiful Soup 4.2.0</span>
<span class="token comment" spellcheck="true"># Python version 2.7.3 (default, Aug  1 2012, 05:16:07)</span>
<span class="token comment" spellcheck="true"># I noticed that html5lib is not installed. Installing it may help.</span>
<span class="token comment" spellcheck="true"># Found lxml version 2.3.2.0</span>
<span class="token comment" spellcheck="true">#</span>
<span class="token comment" spellcheck="true"># Trying to parse your data with html.parser</span>
<span class="token comment" spellcheck="true"># Here's what html.parser did with the document:</span>
<span class="token comment" spellcheck="true"># ...</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>diagnose()</code> 方法的输出结果可能帮助你找到问题的原因,如果不行,还可以把结果复制出来以便寻求他人的帮助</p>
<h2 id="文档解析错误"><a href="#文档解析错误" class="headerlink" title="文档解析错误"></a>文档解析错误</h2><p>文档解析错误有两种.一种是崩溃,Beautiful Soup尝试解析一段文档结果却抛除了异常,通常是 <code>HTMLParser.HTMLParseError</code> .还有一种异常情况,是Beautiful Soup解析后的文档树看起来与原来的内容相差很多.</p>
<p>这些错误几乎都不是Beautiful Soup的原因,这不会是因为Beautiful Soup的代码写的太优秀,而是因为Beautiful Soup没有包含任何文档解析代码.异常产生自被依赖的解析器,如果解析器不能很好的解析出当前的文档,那么最好的办法是换一个解析器.更多细节查看 安装解析器 章节.</p>
<p>最常见的解析错误是 <code>HTMLParser.HTMLParseError: malformed start tag</code> 和 <code>HTMLParser.HTMLParseError: bad end tag</code> .这都是由Python内置的解析器引起的,解决方法是 安装lxml或html5lib</p>
<p>最常见的异常现象是当前文档找不到指定的Tag,而这个Tag光是用眼睛就足够发现的了. <code>find_all()</code> 方法返回 [] ,而 <code>find()</code> 方法返回 None .这是Python内置解析器的又一个问题: 解析器会跳过那些它不知道的tag.解决方法还是 安装lxml或html5lib</p>
<h2 id="版本错误"><a href="#版本错误" class="headerlink" title="版本错误"></a>版本错误</h2><ul>
<li><code>SyntaxError: Invalid syntax</code> (异常位置在代码行: <code>ROOT_TAG_NAME = u'[document]'</code> ),因为Python2语法的代码(没有经过迁移)直接在Python3中运行</li>
<li><code>ImportError: No module named HTMLParser</code> 因为在Python3中执行Python2版本的Beautiful Soup</li>
<li><code>ImportError: No module named html.parser</code> 因为在Python2中执行Python3版本的Beautiful Soup</li>
<li><code>ImportError: No module named BeautifulSoup</code> 因为在没有安装BeautifulSoup3库的Python环境下执行代码,或忘记了BeautifulSoup4的代码需要从 <code>bs4</code> 包中引入</li>
<li><code>ImportError: No module named bs4</code> 因为当前Python环境下还没有安装BeautifulSoup4</li>
</ul>
<h2 id="解析成XML"><a href="#解析成XML" class="headerlink" title="解析成XML"></a>解析成XML</h2><p>默认情况下,Beautiful Soup会将当前文档作为HTML格式解析,如果要解析XML文档,要在 <code>BeautifulSoup</code> 构造方法中加入第二个参数 “xml”:</p>
<pre class="line-numbers language-python"><code class="language-python">soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>markup<span class="token punctuation">,</span> <span class="token string">"xml"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>当然,还需要 安装lxml</p>
<h2 id="解析器的错误"><a href="#解析器的错误" class="headerlink" title="解析器的错误"></a>解析器的错误</h2><ul>
<li>如果同样的代码在不同环境下结果不同,可能是因为两个环境下使用不同的解析器造成的.例如这个环境中安装了lxml,而另一个环境中只有html5lib, 解析器之间的区别 中说明了原因.修复方法是在 <code>BeautifulSoup</code> 的构造方法中中指定解析器</li>
<li>因为HTML标签是 <a href="http://www.w3.org/TR/html5/syntax.html#syntax" target="_blank" rel="noopener">大小写敏感</a> 的,所以3种解析器再出来文档时都将tag和属性转换成小写.例如文档中的 &lt;TAG&gt;&lt;/TAG&gt; 会被转换为 &lt;tag&gt;&lt;/tag&gt; .如果想要保留tag的大写的话,那么应该将文档 解析成XML .</li>
</ul>
<h2 id="杂项错误"><a href="#杂项错误" class="headerlink" title="杂项错误"></a>杂项错误</h2><ul>
<li><code>UnicodeEncodeError: 'charmap' codec can't encode character u'\xfoo' in position bar</code> (或其它类型的 <code>UnicodeEncodeError</code> )的错误,主要是两方面的错误(都不是Beautiful Soup的原因),第一种是正在使用的终端(console)无法显示部分Unicode,参考 <a href="http://wiki.python.org/moin/PrintFails" target="_blank" rel="noopener">Python wiki</a> ,第二种是向文件写入时,被写入文件不支持部分Unicode,这时只要用 <code>u.encode("utf8")</code> 方法将编码转换为UTF-8.</li>
<li><code>KeyError: [attr]</code> 因为调用 <code>tag['attr']</code> 方法而引起,因为这个tag没有定义该属性.出错最多的是 <code>KeyError: 'href'</code> 和 <code>KeyError: 'class'</code> .如果不确定某个属性是否存在时,用 <code>tag.get('attr')</code> 方法去获取它,跟获取Python字典的key一样</li>
<li><code>AttributeError: 'ResultSet' object has no attribute 'foo'</code> 错误通常是因为把 <code>find_all()</code> 的返回结果当作一个tag或文本节点使用,实际上返回结果是一个列表或 <code>ResultSet</code> 对象的字符串,需要对结果进行循环才能得到每个节点的 <code>.foo</code> 属性.或者使用 <code>find()</code> 方法仅获取到一个节点</li>
<li><code>AttributeError: 'NoneType' object has no attribute 'foo'</code> 这个错误通常是在调用了 <code>find()</code> 方法后直节点取某个属性 .foo 但是 <code>find()</code> 方法并没有找到任何结果,所以它的返回值是 <code>None</code> .需要找出为什么 <code>find()</code> 的返回值是 <code>None</code> .</li>
</ul>
<h2 id="如何提高效率"><a href="#如何提高效率" class="headerlink" title="如何提高效率"></a>如何提高效率</h2><p>Beautiful Soup对文档的解析速度不会比它所依赖的解析器更快,如果对计算时间要求很高或者计算机的时间比程序员的时间更值钱,那么就应该直接使用 <a href="http://lxml.de/" target="_blank" rel="noopener">lxml</a> .</p>
<p>换句话说,还有提高Beautiful Soup效率的办法,使用lxml作为解析器.Beautiful Soup用lxml做解析器比用html5lib或Python内置解析器速度快很多.</p>
<p>安装 <a href="http://pypi.python.org/pypi/cchardet/" target="_blank" rel="noopener">cchardet</a> 后文档的解码的编码检测会速度更快</p>
<p>解析部分文档 不会节省多少解析时间,但是会节省很多内存,并且搜索时也会变得更快.</p>
<h1 id="Beautiful-Soup-3"><a href="#Beautiful-Soup-3" class="headerlink" title="Beautiful Soup 3"></a>Beautiful Soup 3</h1><p>Beautiful Soup 3是上一个发布版本,目前已经停止维护.Beautiful Soup 3库目前已经被几个主要的linux平台添加到源里:</p>
<pre><code>$ apt-get install Python-beautifulsoup</code></pre><p>在PyPi中分发的包名字是 <code>BeautifulSoup</code> :</p>
<pre><code>$ easy_install BeautifulSoup
$ pip install BeautifulSoup</code></pre><p>或通过 <a href="http://www.crummy.com/software/BeautifulSoup/bs3/download/3.x/BeautifulSoup-3.2.0.tar.gz" target="_blank" rel="noopener">Beautiful Soup 3.2.0源码包</a> 安装</p>
<p>Beautiful Soup 3的在线文档查看 <a href="http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html" target="_blank" rel="noopener">这里</a> .</p>
<h2 id="迁移到BS4"><a href="#迁移到BS4" class="headerlink" title="迁移到BS4"></a>迁移到BS4</h2><p>只要一个小变动就能让大部分的Beautiful Soup 3代码使用Beautiful Soup 4的库和方法—-修改 <code>BeautifulSoup</code> 对象的引入方式:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> BeautifulSoup <span class="token keyword">import</span> BeautifulSoup<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>修改为:</p>
<pre><code>from bs4 import BeautifulSoup</code></pre><ul>
<li>如果代码抛出 <code>ImportError</code> 异常“No module named BeautifulSoup”,原因可能是尝试执行Beautiful Soup 3,但环境中只安装了Beautiful Soup 4库</li>
<li>如果代码跑出 <code>ImportError</code> 异常“No module named bs4”,原因可能是尝试运行Beautiful Soup 4的代码,但环境中只安装了Beautiful Soup 3.</li>
</ul>
<p>虽然BS4兼容绝大部分BS3的功能,但BS3中的大部分方法已经不推荐使用了,就方法按照 <a href="http://www.python.org/dev/peps/pep-0008/" target="_blank" rel="noopener">PEP8标准</a> 重新定义了方法名.很多方法都重新定义了方法名,但只有少数几个方法没有向下兼容.</p>
<p>上述内容就是BS3迁移到BS4的注意事项</p>
<h3 id="需要的解析器"><a href="#需要的解析器" class="headerlink" title="需要的解析器"></a>需要的解析器</h3><p>Beautiful Soup 3曾使用Python的 <code>SGMLParser</code> 解析器,这个模块在Python3中已经被移除了.Beautiful Soup 4默认使用系统的 <code>html.parser</code> ,也可以使用lxml或html5lib扩展库代替.查看 安装解析器 章节</p>
<p>因为解析器 <code>html.parser</code> 与 <code>SGMLParser</code> 不同. BS4 和 BS3 处理相同的文档会产生不同的对象结构. 使用lxml或html5lib解析文档的时候, 如果添加了 <code>html.parser</code> 参数, 解析的对象又回发生变化. 如果发生了这种情况, 只能修改对应的处文档结果处理代码了.</p>
<h3 id="方法名的变化"><a href="#方法名的变化" class="headerlink" title="方法名的变化"></a>方法名的变化</h3><ul>
<li><code>renderContents</code> -&gt; <code>encode_contents</code></li>
<li><code>replaceWith</code> -&gt; <code>replace_with</code></li>
<li><code>replaceWithChildren</code> -&gt; <code>unwrap</code></li>
<li><code>findAll</code> -&gt; <code>find_all</code></li>
<li><code>findAllNext</code> -&gt; <code>find_all_next</code></li>
<li><code>findAllPrevious</code> -&gt; <code>find_all_previous</code></li>
<li><code>findNext</code> -&gt; <code>find_next</code></li>
<li><code>findNextSibling</code> -&gt; <code>find_next_sibling</code></li>
<li><code>findNextSiblings</code> -&gt; <code>find_next_siblings</code></li>
<li><code>findParent</code> -&gt; <code>find_parent</code></li>
<li><code>findParents</code> -&gt; <code>find_parents</code></li>
<li><code>findPrevious</code> -&gt; <code>find_previous</code></li>
<li><code>findPreviousSibling</code> -&gt; <code>find_previous_sibling</code></li>
<li><code>findPreviousSiblings</code> -&gt; <code>find_previous_siblings</code></li>
<li><code>nextSibling</code> -&gt; <code>next_sibling</code></li>
<li><code>previousSibling</code> -&gt; <code>previous_sibling</code></li>
</ul>
<p>Beautiful Soup构造方法的参数部分也有名字变化:</p>
<ul>
<li><code>BeautifulSoup(parseOnlyThese=...)</code> -&gt; <code>BeautifulSoup(parse_only=...)</code></li>
<li><code>BeautifulSoup(fromEncoding=...)</code> -&gt; <code>BeautifulSoup(from_encoding=...)</code></li>
</ul>
<p>为了适配Python3,修改了一个方法名:</p>
<ul>
<li><code>Tag.has_key()</code> -&gt; <code>Tag.has_attr()</code></li>
</ul>
<p>修改了一个属性名,让它看起来更专业点:</p>
<ul>
<li><code>Tag.isSelfClosing</code> -&gt; <code>Tag.is_empty_element</code></li>
</ul>
<p>修改了下面3个属性的名字,以免雨Python保留字冲突.这些变动不是向下兼容的,如果在BS3中使用了这些属性,那么在BS4中这些代码无法执行.</p>
<ul>
<li>UnicodeDammit.Unicode -&gt; UnicodeDammit.Unicode_markup``</li>
<li><code>Tag.next</code> -&gt; <code>Tag.next_element</code></li>
<li><code>Tag.previous</code> -&gt; <code>Tag.previous_element</code></li>
</ul>
<h3 id="生成器"><a href="#生成器" class="headerlink" title="生成器"></a>生成器</h3><p>将下列生成器按照PEP8标准重新命名,并转换成对象的属性:</p>
<ul>
<li><code>childGenerator()</code> -&gt; <code>children</code></li>
<li><code>nextGenerator()</code> -&gt; <code>next_elements</code></li>
<li><code>nextSiblingGenerator()</code> -&gt; <code>next_siblings</code></li>
<li><code>previousGenerator()</code> -&gt; <code>previous_elements</code></li>
<li><code>previousSiblingGenerator()</code> -&gt; <code>previous_siblings</code></li>
<li><code>recursiveChildGenerator()</code> -&gt; <code>descendants</code></li>
<li><code>parentGenerator()</code> -&gt; <code>parents</code></li>
</ul>
<p>所以迁移到BS4版本时要替换这些代码:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">for</span> parent <span class="token keyword">in</span> tag<span class="token punctuation">.</span>parentGenerator<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>替换为:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">for</span> parent <span class="token keyword">in</span> tag<span class="token punctuation">.</span>parents<span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>(两种调用方法现在都能使用)</p>
<p>BS3中有的生成器循环结束后会返回 <code>None</code> 然后结束.这是个bug.新版生成器不再返回 <code>None</code> .</p>
<p>BS4中增加了2个新的生成器, .strings 和 stripped_strings . <code>.strings</code> 生成器返回NavigableString对象, <code>.stripped_strings</code> 方法返回去除前后空白的Python的string对象.</p>
<h3 id="XML"><a href="#XML" class="headerlink" title="XML"></a>XML</h3><p>BS4中移除了解析XML的 <code>BeautifulStoneSoup</code> 类.如果要解析一段XML文档,使用 <code>BeautifulSoup</code> 构造方法并在第二个参数设置为“xml”.同时 <code>BeautifulSoup</code> 构造方法也不再识别 <code>isHTML</code> 参数.</p>
<p>Beautiful Soup处理XML空标签的方法升级了.旧版本中解析XML时必须指明哪个标签是空标签. 构造方法的 <code>selfClosingTags</code> 参数已经不再使用.新版Beautiful Soup将所有空标签解析为空元素,如果向空元素中添加子节点,那么这个元素就不再是空元素了.</p>
<h3 id="实体"><a href="#实体" class="headerlink" title="实体"></a>实体</h3><p>HTML或XML实体都会被解析成Unicode字符,Beautiful Soup 3版本中有很多处理实体的方法,在新版中都被移除了. <code>BeautifulSoup</code> 构造方法也不再接受 <code>smartQuotesTo</code> 或 <code>convertEntities</code> 参数. 编码自动检测 方法依然有 <code>smart_quotes_to</code> 参数,但是默认会将引号转换成Unicode.内容配置项 <code>HTML_ENTITIES</code> , <code>XML_ENTITIES</code> 和 <code>XHTML_ENTITIES</code> 在新版中被移除.因为它们代表的特性已经不再被支持.</p>
<p>如果在输出文档时想把Unicode字符转换成HTML实体,而不是输出成UTF-8编码,那就需要用到 输出格式 的方法.</p>
<h3 id="迁移杂项"><a href="#迁移杂项" class="headerlink" title="迁移杂项"></a>迁移杂项</h3><p>Tag.string 属性现在是一个递归操作.如果A标签只包含了一个B标签,那么A标签的.string属性值与B标签的.string属性值相同.</p>
<p>多值属性 比如 <code>class</code> 属性包含一个他们的值的列表,而不是一个字符串.这可能会影响到如何按照CSS类名哦搜索tag.</p>
<p>如果使用 <code>find*</code> 方法时同时传入了 string 参数 和 name 参数 .Beautiful Soup会搜索指定name的tag,并且这个tag的 Tag.string 属性包含text参数的内容.结果中不会包含字符串本身.旧版本中Beautiful Soup会忽略掉tag参数,只搜索text参数.</p>
<p><code>BeautifulSoup</code> 构造方法不再支持 markupMassage 参数.现在由解析器负责文档的解析正确性.</p>
<p>很少被用到的几个解析器方法在新版中被移除,比如 <code>ICantBelieveItsBeautifulSoup</code> 和 <code>BeautifulSOAP</code> .现在由解析器完全负责如何解释模糊不清的文档标记.</p>
<p><code>prettify()</code> 方法在新版中返回Unicode字符串,不再返回字节流.</p>
<h1 id="爬虫项目推荐"><a href="#爬虫项目推荐" class="headerlink" title="爬虫项目推荐"></a>爬虫项目推荐</h1><h2 id="GoPUP"><a href="#GoPUP" class="headerlink" title="GoPUP"></a>GoPUP</h2><ul>
<li><a href="https://github.com/justinzm/gopup" target="_blank" rel="noopener">GoPUP</a>，项目所采集的数据皆来自公开的数据源，数据接口：百度、谷歌、头条、微博指数,宏观数据，利率数据，货币汇率，千里马、独角兽公司，新闻联播文字稿，影视票房数据，高校名单，疫情数据等等</li>
</ul>
<h4 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h4><p>使用清华的 pip 源</p>
<pre><code>pip install gopup -i https://pypi.tuna.tsinghua.edu.cn/simple</code></pre><h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><p>查看文档 <a href="http://doc.gopup.cn/#/" target="_blank" rel="noopener">http://doc.gopup.cn/#/</a></p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> gopup <span class="token keyword">as</span> gp
df_index <span class="token operator">=</span> gp<span class="token punctuation">.</span>weibo_index<span class="token punctuation">(</span>word<span class="token operator">=</span><span class="token string">"疫情"</span><span class="token punctuation">,</span> time_type<span class="token operator">=</span><span class="token string">"3month"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>df_index<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h2 id="weibo-spider"><a href="#weibo-spider" class="headerlink" title="weibo-spider"></a>weibo-spider</h2><p><a href="https://github.com/dataabc/weiboSpider" target="_blank" rel="noopener">weibo-spider</a> ，是一个微博的爬虫，可以连续的爬取一个或多个微博用户的数据，并将数据写入文件和数据库。支持下载微博中的原始图片/视频、转载图片/视频，Live Photo 中的视频。</p>
<h4 id="安装-2"><a href="#安装-2" class="headerlink" title="安装"></a>安装</h4><p>安装有两种方式，一种是源码安装，一种是pip</p>
<pre><code>$ git clone https://github.com/dataabc/weiboSpider.git
$ cd weiboSpider
$ pip install -r requirements.txt

或者

python3 -m pip install weibo-spider</code></pre><h4 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h4><ol>
<li>安装后第一次运行命令行 <code>python3 -m weibo_spider</code> ，会自动在当前目录创建config.json配置文件</li>
<li>修改 config.json 文件中 user_id_list 微博用户 ID。</li>
<li>再次运行 <code>python3 -m weibo_spider</code></li>
</ol>
<h2 id="You-Get"><a href="#You-Get" class="headerlink" title="You-Get"></a>You-Get</h2><p><a href="https://github.com/soimort/you-get" target="_blank" rel="noopener">you-get</a>， 提供便利的方式来下载网络上的媒体信息,包括视频、音频、图片，支持 80+ 网站。小编经常用来下载 B 站视频。</p>
<h4 id="安装-3"><a href="#安装-3" class="headerlink" title="安装"></a>安装</h4><p>在 pip 之前需要安装 FFmpeg (强烈推荐) 或 Libav、(可选) RTMPDump。</p>
<pre><code>pip3 install you-get

升级用 
pip3 install --upgrade you-get</code></pre><h4 id="使用-2"><a href="#使用-2" class="headerlink" title="使用"></a>使用</h4><p>只需要简单的使用 you-get 命令就可以下载视频、图片、音频</p>
<pre><code>you-get 网址

如:

you-get https://www.bilibili.com/video/BV1Dq4y1Z7zC?spm_id_from=333.851.b_7265636f6d6d656e64.1</code></pre><h2 id="musicdl"><a href="#musicdl" class="headerlink" title="musicdl"></a>musicdl</h2><p><a href="https://github.com/0xHJK/music-dl" target="_blank" rel="noopener">Music-dl</a> ，是一个基于 Python3 的命令行工具，可以从多个网站搜索和下载音乐，解决音乐不知道在哪个网站的问题。Music-dl 的 API 是从公共网络获取的，下载不了 VIP 音乐。</p>
<p>Music-dl 支持 QQ音乐，酷狗音乐，网易云音乐，咪咕音乐和百度音乐。</p>
<h4 id="安装-4"><a href="#安装-4" class="headerlink" title="安装"></a>安装</h4><pre><code>pip install musicdl</code></pre><h4 id="使用-3"><a href="#使用-3" class="headerlink" title="使用"></a>使用</h4><pre><code>music-dl -k 周杰伦</code></pre></b></b></b></b><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://jackhcc.github.io" rel="external nofollow noreferrer">杰克成</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://jackhcc.github.io/posts/blog-python16.html">https://jackhcc.github.io/posts/blog-python16.html</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="https://jackhcc.github.io" target="_blank">杰克成</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Selenium-BeautifulSoup/">
                                    <span class="chip bg-color">Selenium | BeautifulSoup</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/share/css/share.min.css">

<div id="article-share">
    
    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/reward/aliqr.png" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/reward/wxqr.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>
            
        </div>
    </div>

    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/gitalk/gitalk.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/css/my-gitalk.css">

<div class="card gitalk-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="gitalk-container" class="card-content"></div>
</div>

<script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/gitalk/gitalk.min.js"></script>
<script>
    let gitalk = new Gitalk({
        clientID: '3821a0bbb773038a51fc',
        clientSecret: '4b30b507d67ec5497ec0e77f43f80cb3e0d7dd3a',
        repo: 'JackHCC.github.io',
        owner: 'JackHCC',
        admin: "JackHCC",
        id: '2021-08-29T16-03-55',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });

    gitalk.render('gitalk-container');
</script>
    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/posts/graph-embedding.html">
                    <div class="card-image">
                        
                        
                        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/featureimages/10.jpg" class="responsive-img" alt="Graph embedding详解">
                        
                        <span class="card-title">Graph embedding详解</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            Graph embedding学习记录
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-09-01
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Deep-learning/" class="post-category">
                                    Deep learning
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/GNN/">
                        <span class="chip bg-color">GNN</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/posts/life-long-learning.html">
                    <div class="card-image">
                        
                        
                        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/featureimages/23.jpg" class="responsive-img" alt="Life Long Learning机器终身学习">
                        
                        <span class="card-title">Life Long Learning机器终身学习</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            Life Long Learning机器终身学习详解
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-08-28
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Deep-Learning/" class="post-category">
                                    Deep Learning
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Life-Long-Learning/">
                        <span class="chip bg-color">Life Long Learning</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('4'),
            headingSelector: 'h1, h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>



    <footer class="page-footer bg-color">
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2020</span>
            <a href="https://jackhcc.github.io" target="_blank">杰克成</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">3591.2k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2020";
                    var startMonth = "2";
                    var startDate = "27";
                    var startHour = "6";
                    var startMinute = "30";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/JackHCC" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:jackcc0701@163.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>



    <a href="https://www.facebook.com/profile.php?id=100046343443643" class="tooltipped" target="_blank" data-tooltip="关注我的Facebook: https://www.facebook.com/profile.php?id=100046343443643" data-position="top" data-delay="50">
        <i class="fab fa-facebook-f"></i>
    </a>



    <a href="https://twitter.com/JackChe66021834" class="tooltipped" target="_blank" data-tooltip="关注我的Twitter: https://twitter.com/JackChe66021834" data-position="top" data-delay="50">
        <i class="fab fa-twitter"></i>
    </a>



    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=2508074836" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 2508074836" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>



    <a href="https://weibo.com/u/6885584679" class="tooltipped" target="_blank" data-tooltip="关注我的微博: https://weibo.com/u/6885584679" data-position="top" data-delay="50">
        <i class="fab fa-weibo"></i>
    </a>



    <a href="https://www.zhihu.com/people/8f8482f01f0d6a04e844efe32e0f0710" class="tooltipped" target="_blank" data-tooltip="关注我的知乎: https://www.zhihu.com/people/8f8482f01f0d6a04e844efe32e0f0710" data-position="top" data-delay="50">
        <i class="fab fa-zhihu1">知</i>
    </a>



</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/materialize/materialize.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/aos/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/js/matery.js"></script>

    <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas>
    <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script>
    <script type="text/javascript" src="/js/fireworks.js"></script>

    <script type="text/javascript">
        //只在桌面版网页启用特效
        var windowWidth = $(window).width();
        if (windowWidth > 768) {
            document.write('<script type="text/javascript" src="/js/sakura.js"><\/script>'); }
    </script>

    <!-- weather -->
	<script type="text/javascript">
	WIDGET = {FID: 'TToslpmkVO'}
	</script>
	<script type="text/javascript" src="https://apip.weatherdt.com/float/static/js/r.js?v=1111"></script>


    <!-- Global site tag (gtag.js) - Google Analytics -->


    <!-- Baidu Analytics -->

<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

    <!-- Baidu Push -->

    
    
    <script async src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/others/busuanzi.pure.mini.js"></script>
    

    
        <script src="//code.tidio.co/kqhlkxviiccyoa0czpfpu4ijuey9hfre.js"></script>
        <script> 
            $(document).ready(function () {
                setInterval(change_Tidio, 50);  
                function change_Tidio() { 
                    var tidio=$("#tidio-chat iframe");
                    if(tidio.css("display")=="block"&& $(window).width()>977 ){
                        document.getElementById("tidio-chat-iframe").style.bottom= ($("div#backTop.top-scroll").css("display")=="none" &&$(window).width()>977)>0? "-40px" : ($("div.toc-title").length&&$(window).width()>977)>0?"85px":"20px";   
                        document.getElementById("tidio-chat-iframe").style.right="-15px";   
                        document.getElementById("tidio-chat-iframe").style.height=parseInt(tidio.css("height"))>=520?"520px":tidio.css("height");
                        document.getElementById("tidio-chat-iframe").style.zIndex="997";
                    } 
                    else if(tidio.css("display")=="block"&&$(window).width()>601 &&$(window).width()<992 ){
                        document.getElementById("tidio-chat-iframe").style.bottom= ($("div#backTop.top-scroll").css("display")=="none" && 601< $(window).width()<992)>0? "-40px":"20px" ;   
                        document.getElementById("tidio-chat-iframe").style.right="-15px"; 
                        document.getElementById("tidio-chat-iframe").style.zIndex="997";
                    }
                    else if(tidio.css("display")=="block"&&$(window).width()<601 && parseInt(tidio.css("height"))<230){
                        document.getElementById("tidio-chat-iframe").style.bottom= ($("div#backTop.top-scroll").css("display")=="none" && $(window).width()<601)>0? "-10px":"45px" ;   
                        document.getElementById("tidio-chat-iframe").style.zIndex="997";
                    }
                    if( tidio.css("display")=="block"&&$(window).width()<601 && parseInt(tidio.css("height"))>=230){
                        document.getElementById("tidio-chat-iframe").style.zIndex="998";
                    }
                } 
            }); 
        </script>
    

    

    
    <script type="text/javascript" color="0,0,255"
        pointColor="0,0,255" opacity='0.7'
        zIndex="-1" count="99"
        src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/background/canvas-nest.js"></script>
    

    

    
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/background/ribbon-dynamic.js" async="async"></script>
    
    
    
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/instantpage/instantpage.js" type="module"></script>
    

        <script src="//cdn.jsdelivr.net/npm/js-base64/base64.min.js"></script>
        <script>
        $('a').each(function() {
          const $this = $(this);
          const href = $this.attr('href');
          if (href && href.match('^((http|https|thunder|qqdl|ed2k|Flashget|qbrowser|ftp|rtsp|mms)://)')) {
            const strs = href.split('/');
            if (strs.length >= 3) {
                const host = strs[2];
                if (host !== 'your_domain' || window.location.host) {
                    $this.attr('href', '/go.html?u='+Base64.encode(href)+'').attr('rel', 'external nofollow noopener noreferrer');
                    if (true) {
                        $this.attr('target', '_blank');
                    }
                }
            }
          }
        });
        </script><script>!function(e){var c=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function i(){for(var r=0;r<c.length;r++)t=c[r],0<=(n=t.getBoundingClientRect()).bottom&&0<=n.left&&n.top<=(e.innerHeight||document.documentElement.clientHeight)&&function(){var t,n,e,i,o=c[r];t=o,n=function(){c=c.filter(function(t){return o!==t})},e=new Image,i=t.getAttribute("data-original"),e.onload=function(){t.src=i,n&&n()},e.src=i}();var t,n}i(),e.addEventListener("scroll",function(){var t,n;t=i,n=e,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(n)},500)})}(this);</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script></body>

</html>

