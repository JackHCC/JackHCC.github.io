<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Swagger官方API, JackHCC">
    <meta name="description" content="Swagger(OpenAPI)文档">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Swagger官方API | JackHCC</title>
    <link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/favicon.png">

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/css/matery.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/css/my.css">
    
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/jquery/jquery.min.js"></script>
    
<meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="JackHCC" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-hopscotch.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper head-container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/me.jpg" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">JackHCC</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="" class="waves-effect waves-light">

      
      <i class="fas fa-list" style="zoom: 0.6;"></i>
      
      <span>Tools</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="https://creativecc.cn/" target="_blank" rel="noopener">
          
          <i class="fas fa-book" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>Creative工具导航</span>
        </a>
      </li>
      
      <li>
        <a href="https://blog.creativecc.cn/Arxiv-NLP-Reporter/" target="_blank" rel="noopener">
          
          <i class="fas fa-film" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>NLP每日论文</span>
        </a>
      </li>
      
      <li>
        <a href="http://chat.creativecc.cn/" target="_blank" rel="noopener">
          
          <i class="fas fa-music" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>RocketChat聊天室</span>
        </a>
      </li>
      
      <li>
        <a href="/contact">
          
          <i class="fas fa-comments" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>Contact留言板</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/me.jpg" class="logo-img circle responsive-img">
        
        <div class="logo-name">JackHCC</div>
        <div class="logo-desc">
            
            Make the world betterrrr!!!
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-list"></i>
			
			Tools
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>   
				
                  <a href="https://creativecc.cn/ " target="_blank" rel="noopener" style="margin-left:75px";>
				  
				   <i class="fa fas fa-book" style="position: absolute;left:50px" ></i>
			      
		          <span>Creative工具导航</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="https://blog.creativecc.cn/Arxiv-NLP-Reporter/ " target="_blank" rel="noopener" style="margin-left:75px";>
				  
				   <i class="fa fas fa-film" style="position: absolute;left:50px" ></i>
			      
		          <span>NLP每日论文</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="http://chat.creativecc.cn/ " target="_blank" rel="noopener" style="margin-left:75px";>
				  
				   <i class="fa fas fa-music" style="position: absolute;left:50px" ></i>
			      
		          <span>RocketChat聊天室</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/contact " style="margin-left:75px";>
				  
				   <i class="fa fas fa-comments" style="position: absolute;left:50px" ></i>
			      
		          <span>Contact留言板</span>
                  </a>
                </li>
               
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/JackHCC/JackHCC.github.io" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>

        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/JackHCC/JackHCC.github.io" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    
<script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/featureimages/17.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Swagger官方API</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 30px;
        bottom: 146px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Swagger/">
                                <span class="chip bg-color">Swagger</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/API/" class="post-category">
                                API
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-12-19
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2021-12-20
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    70.9k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    296 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>

        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="Swagger快速使用"><a href="#Swagger快速使用" class="headerlink" title="Swagger快速使用"></a>Swagger快速使用</h1><h2 id="Swagger简介"><a href="#Swagger简介" class="headerlink" title="Swagger简介"></a>Swagger简介</h2><p>Swagger 是一个规范且完整的框架，用于生成、描述、调用和可视化 RESTful 风格的 Web 服务。</p>
<p>Swagger 是一套基于 OpenAPI 规范（OpenAPI Specification，OAS）构建的开源工具，后来成为了 Open API 标准的主要定义者，现在最新的版本为17年发布的 Swagger3（Open Api3）。 国内绝大部分人还在用过时的swagger2（17年停止维护并更名为swagger3） 对于 Rest API 来说很重要的一部分内容就是文档，Swagger 为我们提供了一套通过代码和注解自动生成文档的方法，这一点对于保证API 文档的及时性将有很大的帮助。 OAS本身是一个API规范，它用于描述一整套API接口，包括一个接口是哪种请求方式、哪些参数、哪些header等，都会被包括在这个文件中。它在设计的时候通常是YAML格式，这种格式书写起来比较方便，而在网络中传输时又会以json形式居多，因为json的通用性比较强。 SpringFox是 spring 社区维护的一个项目（非官方），帮助使用者将 swagger2 集成到 Spring 中。</p>
<p>Swagger 的目标是对 REST API 定义一个标准且和语言无关的接口，可以让人和计算机拥有无须访问源码、文档或网络流量监测就可以发现和理解服务的能力。当通过 Swagger 进行正确定义，用户可以理解远程服务并使用最少实现逻辑与远程服务进行交互。与为底层编程所实现的接口类似，Swagger 消除了调用服务时可能会有的猜测。</p>
<p>Swagger 主要包含了以下三个部分：</p>
<ul>
<li>Swagger Editor：基于浏览器的编辑器，我们可以使用它编写我们 OpenAPI 规范。</li>
<li>Swagger UI：它会将我们编写的 OpenAPI 规范呈现为交互式的 API 文档，后文我将使用浏览器来查看并且操作我们的 Rest API。</li>
<li>Swagger Codegen：它可以通过为 OpenAPI（以前称为 Swagger）规范定义的任何 API 生成服务器存根和客户端 SDK 来简化构建过程。</li>
</ul>
<h2 id="Swagger-的优势"><a href="#Swagger-的优势" class="headerlink" title="Swagger 的优势"></a>Swagger 的优势</h2><ul>
<li>支持 API 自动生成同步的在线文档：使用 Swagger 后可以直接通过代码生成文档，不再需要自己手动编写接口文档了，对程序员来说非常方便，可以节约写文档的时间去学习新技术。</li>
<li>提供 Web 页面在线测试 API：光有文档还不够，Swagger 生成的文档还支持在线测试。参数和格式都定好了，直接在界面上输入参数对应的值即可在线测试接口。</li>
</ul>
<h2 id="集成-Swagger-管理-API-文档"><a href="#集成-Swagger-管理-API-文档" class="headerlink" title="集成 Swagger 管理 API 文档"></a>集成 Swagger 管理 API 文档</h2><h4 id="1）项目中集成-Swagger"><a href="#1）项目中集成-Swagger" class="headerlink" title="1）项目中集成 Swagger"></a>1）项目中集成 Swagger</h4><p>集成 Swagger 我们使用封装好了的 Starter 包，代码如下所示。</p>
<pre><code>&lt;!-- Swagger --&gt;
&lt;dependency&gt;
  &lt;groupId&gt;com.spring4all&lt;/groupId&gt;
  &lt;artifactId&gt;swagger-spring-boot-starter&lt;/artifactId&gt;
  &lt;version&gt;1.7.1.RELEASE&lt;/version&gt;
&lt;/dependency&gt;</code></pre><p>在启动类中使用 @EnableSwagger2Doc 开启 Swagger，代码如下所示。</p>
<pre class="line-numbers language-Java"><code class="language-Java">@EnableSwagger2Doc
@SpringBootApplication
public class AuthApplication {
    public static void main(String[] args) {
        SpringApplication.run(AuthApplication.class, args);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="2）使用-Swagger-生成文档"><a href="#2）使用-Swagger-生成文档" class="headerlink" title="2）使用 Swagger 生成文档"></a>2）使用 Swagger 生成文档</h4><p>Swagger 是通过注解的方式来生成对应的 API，在接口上我们需要加上各种注解来描述这个接口.</p>
<pre class="line-numbers language-Java"><code class="language-Java">@ApiOperation(value = "新增用户")
@ApiResponses({ @ApiResponse(code = 200, message = "OK", response = UserDto.class) })
@PostMapping("/user")
public UserDto addUser(@RequestBody AddUserParam param) {
    System.err.println(param.getName());
    return new UserDto();
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>参数类定义代码如下所示。</p>
<pre class="line-numbers language-Java"><code class="language-Java">@Data
@ApiModel(value = "com.biancheng.auth.param.AddUserParam", description = "新增用户参数")
public class AddUserParam {
    @ApiModelProperty(value = "ID")
    private String id;
    @ApiModelProperty(value = "名称")
    private String name;
    @ApiModelProperty(value = "年龄")
    private int age;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="在线测试接口"><a href="#在线测试接口" class="headerlink" title="在线测试接口"></a>在线测试接口</h2><p>接口查看地址可以通过服务地址 /swagger-ui.html 来访问.</p>
<p><img src="/images/loading.gif" data-original="../images/development/5-1ZS0115025A8.png" alt=""></p>
<p>可以展开看详情</p>
<p><img src="/images/loading.gif" data-original="../images/development/5-1ZS01153045a.png" alt=""></p>
<p>在 param 中输入参数，点击 Try it out 按钮可以调用接口</p>
<p><img src="/images/loading.gif" data-original="../images/development/5-1ZS0120RY03.png" alt=""></p>
<h1 id="SpringBoot-OpenAPI3"><a href="#SpringBoot-OpenAPI3" class="headerlink" title="SpringBoot OpenAPI3"></a>SpringBoot OpenAPI3</h1><h2 id="0-Get-Start"><a href="#0-Get-Start" class="headerlink" title="0. Get Start"></a>0. Get Start</h2><ul>
<li><a href="https://blog.csdn.net/ai_miracle/article/details/82709949" target="_blank" rel="noopener">Swagger详解（SpringBoot+Swagger集成）</a></li>
<li><a href="https://blog.csdn.net/qq_40205116/article/details/105200104" target="_blank" rel="noopener">SpringBoot整合Swagger2（完整版）</a></li>
</ul>
<h2 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1. Introduction"></a>1. Introduction</h2><p>springdoc-openapi java 库有助于使用 spring boot 项目自动生成 API 文档。springdoc-openapi 通过在运行时检查应用程序来根据 spring 配置、类结构和各种注释推断 API 语义。</p>
<p>自动生成 JSON/YAML 和 HTML 格式 API 的文档。本文档可以通过使用 swagger-api 注释的注释来完成。</p>
<p>该库支持：</p>
<ul>
<li>开放API 3</li>
<li>Spring-boot（v1 和 v2）</li>
<li>JSR-303，专门针对 @NotNull、@Min、@Max 和 @Size。</li>
<li>Swagger-ui</li>
<li>OAuth 2</li>
<li>GraalVM 原生镜像</li>
</ul>
<h2 id="2-入门"><a href="#2-入门" class="headerlink" title="2. 入门"></a>2. 入门</h2><p>对于spring-boot和swagger-ui的集成，把库添加到你的项目依赖列表中（不需要额外配置）</p>
<pre class="line-numbers language-xml"><code class="language-xml">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springdoc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>springdoc-openapi-ui<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.6.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这将自动将 swagger-ui 部署到 spring-boot 应用程序：</p>
<ul>
<li>文档将以 HTML 格式提供，使用官方<a href="https://github.com/swagger-api/swagger-ui.git" target="_blank" rel="noopener">swagger-ui jars</a></li>
<li>Swagger UI 页面将<code>http://server:port/context-path/swagger-ui.html</code>在以下位置提供，OpenAPI 描述将在以下 json 格式的 url 中提供：<code>http://server:port/context-path/v3/api-docs</code><ul>
<li>服务器：服务器名称或 IP</li>
<li>端口：服务器端口</li>
<li>上下文路径：应用程序的上下文路径</li>
</ul>
</li>
<li>文档也可以 yaml 格式提供，位于以下路径：/v3/api-docs.yaml</li>
</ul>
<p>对于 HTML 格式的 swagger 文档的自定义路径，请在 spring-boot 配置文件中添加自定义 springdoc 属性：</p>
<pre class="line-numbers language-properties"><code class="language-properties"><span class="token comment" spellcheck="true"># swagger-ui custom path</span>
<span class="token attr-name">springdoc.swagger-ui.path</span><span class="token punctuation">=</span><span class="token attr-value">/swagger-ui.html</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h2 id="3-Springdoc-openapi-模块"><a href="#3-Springdoc-openapi-模块" class="headerlink" title="3. Springdoc-openapi 模块"></a>3. Springdoc-openapi 模块</h2><h3 id="3-1-总体概述"><a href="#3-1-总体概述" class="headerlink" title="3.1. 总体概述"></a>3.1. 总体概述</h3><p><img src="/images/loading.gif" data-original="../images/development/common.jpg" alt=""></p>
<h3 id="3-2-Spring-webmvc-支持"><a href="#3-2-Spring-webmvc-支持" class="headerlink" title="3.2. Spring-webmvc 支持"></a>3.2. Spring-webmvc 支持</h3><ul>
<li>json 格式的文档将在以下 url 处提供： <code>http://server:port/context-path/v3/api-docs</code><ul>
<li>服务器：服务器名称或 IP</li>
<li>端口：服务器端口</li>
<li>上下文路径：应用程序的上下文路径</li>
</ul>
</li>
<li>文档也将以 yaml 格式提供，位于以下路径：/v3/api-docs.yaml</li>
<li>将该库添加到项目依赖项列表中。（无需额外配置）</li>
</ul>
<pre class="line-numbers language-xml"><code class="language-xml">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springdoc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>springdoc-openapi-webmvc-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.6.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p> 如果您想在不使用 swagger-ui 的情况下生成 OpenAPI 描述，则此依赖项是相关的。</p>
</blockquote>
<p>对于 Json 格式的 OpenAPI 文档的自定义路径，在您的 spring-boot 配置文件中添加自定义 springdoc 属性：</p>
<pre class="line-numbers language-properties"><code class="language-properties"><span class="token comment" spellcheck="true"># /api-docs endpoint custom path</span>
<span class="token attr-name">springdoc.api-docs.path</span><span class="token punctuation">=</span><span class="token attr-value">/api-docs</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="3-3-Spring-webflux-支持"><a href="#3-3-Spring-webflux-支持" class="headerlink" title="3.3. Spring-webflux 支持"></a>3.3. Spring-webflux 支持</h3><ul>
<li>文档也可以 yaml 格式提供，位于以下路径：/v3/api-docs.yaml</li>
<li>将库添加到您的项目依赖项列表中（无需额外配置）</li>
</ul>
<pre class="line-numbers language-xml"><code class="language-xml">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springdoc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>springdoc-openapi-webflux-ui<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.6.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="3-4-Spring-Hateoas-支持"><a href="#3-4-Spring-Hateoas-支持" class="headerlink" title="3.4. Spring Hateoas 支持"></a>3.4. Spring Hateoas 支持</h3><p>使用依赖 springdoc-openapi-hateoas 可以获得对 Spring Hateoas 的支持。使用 Spring Hateoas 的项目应该将此依赖项与 springdoc-openapi-ui 依赖项结合起来。这种依赖支持 Spring Hateoas 格式。</p>
<pre class="line-numbers language-xml"><code class="language-xml">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springdoc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>springdoc-openapi-hateoas<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.6.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="3-5-Spring-Data-Rest-支持"><a href="#3-5-Spring-Data-Rest-支持" class="headerlink" title="3.5. Spring Data Rest 支持"></a>3.5. Spring Data Rest 支持</h3><p>使用<code>spring-data-rest</code>和需要<code>Pageable</code>类型支持的项目可以结合依赖添加如下<code>springdoc-openapi-ui</code>依赖。这种依赖支持<code>spring-boot-starter-data-rest</code>诸如：<code>@RepositoryRestResource</code>和<code>QuerydslPredicate</code>注释之类的类型。</p>
<pre class="line-numbers language-xml"><code class="language-xml">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springdoc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>springdoc-openapi-data-rest<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.6.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="3-6-Spring-安全支持"><a href="#3-6-Spring-安全支持" class="headerlink" title="3.6. Spring 安全支持"></a>3.6. Spring 安全支持</h3><p>对于使用 spring-security 的项目，您应该添加以下依赖项，并结合 springdoc-openapi-ui 依赖项：此依赖项有助于忽略 @AuthenticationPrincipal，以防它在 REST 控制器上使用。</p>
<pre class="line-numbers language-xml"><code class="language-xml">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springdoc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>springdoc-openapi-security<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.6.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="3-7-Spring-原生支持"><a href="#3-7-Spring-原生支持" class="headerlink" title="3.7. Spring 原生支持"></a>3.7. Spring 原生支持</h3><p><code>springdoc-openapi</code>，支持开箱即用的<a href="https://www.graalvm.org/" target="_blank" rel="noopener">GraalVM</a>原生镜像。如果应用程序使用<a href="https://docs.spring.io/spring-native/docs/current/reference/htmlsingle/" target="_blank" rel="noopener">spring-native</a>，则应添加以下依赖项，并结合 (<code>springdoc-openapi-ui</code>或<code>springdoc-openapi-webflux-ui</code>) 依赖项： - 此依赖项有助于对 springdoc-openapi 的本机支持（仅自 以来可用<code>v1.5.13</code>）。</p>
<pre class="line-numbers language-xml"><code class="language-xml">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springdoc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>springdoc-openapi-native<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.6.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这是兼容性矩阵，它显示了经过测试/验证的版本<code>springdoc-openapi</code>：</p>
<table>
<thead>
<tr>
<th>springdoc-openapi 版本</th>
<th>spring-native 版本</th>
</tr>
</thead>
<tbody><tr>
<td><code>1.6.0</code></td>
<td><code>0.11.0</code></td>
</tr>
<tr>
<td><code>1.5.13</code></td>
<td><code>0.11-RC1</code></td>
</tr>
<tr>
<td><code>1.5.12</code></td>
<td><code>0.10.5</code></td>
</tr>
<tr>
<td><code>1.5.11</code></td>
<td><code>0.10.3</code></td>
</tr>
<tr>
<td><code>1.5.10</code></td>
<td><code>0.10.1</code></td>
</tr>
<tr>
<td><code>1.5.9</code></td>
<td><code>0.9.2</code></td>
</tr>
</tbody></table>
<p>使用本机图像的 swagger-ui 的 url，包含 swagger-ui 的版本。这与 GraalVM <a href="https://github.com/oracle/graal/issues/1108" target="_blank" rel="noopener">#1108 中</a>的以下增强请求有关。</p>
<h3 id="3-8-Kotlin-支持"><a href="#3-8-Kotlin-支持" class="headerlink" title="3.8. Kotlin 支持"></a>3.8. Kotlin 支持</h3><p>对于使用 Kotlin 的项目，您应该添加以下依赖项。此依赖项改进了对 Kotlin 类型的支持：</p>
<pre class="line-numbers language-xml"><code class="language-xml">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springdoc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>springdoc-openapi-kotlin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.6.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>如果您使用的是 spring-web，则将 springdoc-openapi-kotlin 模块与 springdoc-openapi-ui 结合使用。</li>
<li>如果您使用的是 spring-webflux，则将 springdoc-openapi-kotlin 模块与 springdoc-openapi-webflux-ui 结合使用。</li>
</ul>
<h3 id="3-9-常规支持"><a href="#3-9-常规支持" class="headerlink" title="3.9. 常规支持"></a>3.9. 常规支持</h3><p>对于使用 Groovy 的项目，应该添加以下依赖项，结合 springdoc-openapi-ui 依赖项： 该依赖项改进了对 Kotlin 类型的支持：</p>
<pre class="line-numbers language-xml"><code class="language-xml">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springdoc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>springdoc-openapi-groovy<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.6.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="3-10-Javadoc-支持"><a href="#3-10-Javadoc-支持" class="headerlink" title="3.10. Javadoc 支持"></a>3.10. Javadoc 支持</h3><p>对于想要启用 javadoc 支持的项目，您应该添加以下依赖项，并结合<code>springdoc-openapi-ui</code>依赖项：</p>
<pre class="line-numbers language-xml"><code class="language-xml">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springdoc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>springdoc-openapi-javadoc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.6.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>此依赖项改进了对 javadoc 标记和注释的支持：</p>
<ul>
<li>方法的 javadoc 注释：解析为<code>@Operation</code>描述</li>
<li><code>@return</code>: 解析为<code>@Operation</code>响应描述</li>
<li>属性的 javadoc 注释：被解析为此字段的“@Schema”描述。</li>
</ul>
<p>此依赖项基于库<a href="https://github.com/dnault/therapi-runtime-javadoc" target="_blank" rel="noopener">therapi-runtime-javadoc</a></p>
<blockquote>
<p>确保您启用了注解处理器，<code>therapi-runtime-javadoc</code>以便为 springdoc-openapi 启用 javadoc 支持。</p>
</blockquote>
<pre class="line-numbers language-xml"><code class="language-xml">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>maven-compiler-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>annotationProcessorPaths</span><span class="token punctuation">></span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span><span class="token punctuation">></span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.github.therapi<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>therapi-runtime-javadoc-scribe<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>0.12.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>annotationProcessorPaths</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p> 如果同时存在 swagger-annotation 描述和 javadoc 注释。将使用 swagger-annotation 描述的值。</p>
<h2 id="4-Springdoc-openapi-特性"><a href="#4-Springdoc-openapi-特性" class="headerlink" title="4. Springdoc-openapi 特性"></a>4. Springdoc-openapi 特性</h2><h3 id="4-1-添加-API-信息和安全文档"><a href="#4-1-添加-API-信息和安全文档" class="headerlink" title="4.1. 添加 API 信息和安全文档"></a>4.1. 添加 API 信息和安全文档</h3><p>该库使用 spring-boot 应用程序自动配置的包来扫描 spring bean 中的以下注释：OpenAPIDefinition 和 Info。这些注解声明，API 信息：标题、版本、许可证、安全性、服务器、标签、安全性和 externalDocs。为了获得更好的文档生成性能，请在 spring 管理的 bean 中声明 @OpenAPIDefinition 和 @SecurityScheme 注释。</p>
<h3 id="4-2-使用-ControllerAdvice-处理-REST-的错误"><a href="#4-2-使用-ControllerAdvice-处理-REST-的错误" class="headerlink" title="4.2. 使用 @ControllerAdvice 处理 REST 的错误"></a>4.2. 使用 @ControllerAdvice 处理 REST 的错误</h3><p>要自动生成文档，请确保所有方法都使用以下注释声明 HTTP 代码响应：@ResponseStatus</p>
<h3 id="4-3-禁用-springdoc-openapi-端点"><a href="#4-3-禁用-springdoc-openapi-端点" class="headerlink" title="4.3. 禁用 springdoc-openapi 端点"></a>4.3. 禁用 springdoc-openapi 端点</h3><p>为了禁用 springdoc-openapi 端点（默认为 /v3/api-docs），请使用以下属性：</p>
<pre class="line-numbers language-properties"><code class="language-properties"><span class="token comment" spellcheck="true"># Disabling the /v3/api-docs enpoint</span>
<span class="token attr-name">springdoc.api-docs.enabled</span><span class="token punctuation">=</span><span class="token attr-value">false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="4-4-禁用-swagger-ui"><a href="#4-4-禁用-swagger-ui" class="headerlink" title="4.4. 禁用 swagger-ui"></a>4.4. 禁用 swagger-ui</h3><p>要禁用 swagger-ui，请使用以下属性：</p>
<pre class="line-numbers language-properties"><code class="language-properties"><span class="token comment" spellcheck="true"># Disabling the swagger-ui</span>
<span class="token attr-name">springdoc.swagger-ui.enabled</span><span class="token punctuation">=</span><span class="token attr-value">false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="4-5-Swagger-ui-配置"><a href="#4-5-Swagger-ui-配置" class="headerlink" title="4.5. Swagger-ui 配置"></a>4.5. Swagger-ui 配置</h3><p>该库支持 swagger-ui 官方属性：</p>
<ul>
<li><a href="https://swagger.io/docs/open-source-tools/swagger-ui/usage/configuration/" target="_blank" rel="noopener">https://swagger.io/docs/open-source-tools/swagger-ui/usage/configuration/</a></li>
</ul>
<p>您需要将 swagger-ui 属性声明为 spring-boot 属性。所有这些属性都应使用以下前缀声明：<strong>springdoc.swagger-ui</strong></p>
<h3 id="4-6-选择要包含在文档中的-Rest-Controllers"><a href="#4-6-选择要包含在文档中的-Rest-Controllers" class="headerlink" title="4.6. 选择要包含在文档中的 Rest Controllers"></a>4.6. 选择要包含在文档中的 Rest Controllers</h3><p>除了来自 swagger-annotations 的 @Hidden 注释之外，还可以使用包或路径配置来限制生成的 OpenAPI 描述。</p>
<p>对于要包含的包列表，请使用以下属性：</p>
<pre class="line-numbers language-properties"><code class="language-properties"><span class="token comment" spellcheck="true"># Packages to include</span>
<span class="token attr-name">springdoc.packagesToScan</span><span class="token punctuation">=</span><span class="token attr-value">com.package1, com.package2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>对于要包含的路径列表，请使用以下属性：</p>
<pre class="line-numbers language-properties"><code class="language-properties"><span class="token comment" spellcheck="true"># Paths to include</span>
<span class="token attr-name">springdoc.pathsToMatch</span><span class="token punctuation">=</span><span class="token attr-value">/v1, /api/balance/**</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="4-7-带有功能端点的-Spring-webflux-WebMvc-fn"><a href="#4-7-带有功能端点的-Spring-webflux-WebMvc-fn" class="headerlink" title="4.7. 带有功能端点的 Spring-webflux/WebMvc.fn"></a>4.7. 带有功能端点的 Spring-webflux/WebMvc.fn</h3><p>从 v1.5.0 版本开始，由于 spring-framework 中的这一增强，引入了功能性 DSL：<a href="https://github.com/spring-projects/spring-framework/issues/25938" target="_blank" rel="noopener">#25938</a></p>
<p>它是<code>@RouterOperations</code>注释的替代功能 API 。</p>
<p>这是一个示例 DSL，用于为 webflux/WebMvc.fn REST 端点生成 OpenAPI 描述：</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@Bean</span>
RouterFunction<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> <span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">route</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">"/foo"</span><span class="token punctuation">,</span> HANDLER_FUNCTION<span class="token punctuation">,</span> ops <span class="token operator">-</span><span class="token operator">></span> ops
            <span class="token punctuation">.</span><span class="token function">operationId</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">parameter</span><span class="token punctuation">(</span><span class="token function">parameterBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">"My key1 description"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">parameter</span><span class="token punctuation">(</span><span class="token function">parameterBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">"key2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">"My key2 description"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">response</span><span class="token punctuation">(</span><span class="token function">responseBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">responseCode</span><span class="token punctuation">(</span><span class="token string">"200"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">"This is normal response description"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">response</span><span class="token punctuation">(</span><span class="token function">responseBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">responseCode</span><span class="token punctuation">(</span><span class="token string">"404"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">"This is another response description"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这是一些示例代码的链接：</p>
<ul>
<li><a href="https://github.com/springdoc/springdoc-openapi/blob/master/springdoc-openapi-webflux-core/src/test/java/test/org/springdoc/api/app90/HelloRouter.java" target="_blank" rel="noopener">你好路由器</a></li>
<li><a href="https://github.com/springdoc/springdoc-openapi/blob/master/springdoc-openapi-webflux-core/src/test/java/test/org/springdoc/api/app90/quotes/QuotesRouter.java" target="_blank" rel="noopener">行情路由器</a></li>
<li><a href="https://github.com/springdoc/springdoc-openapi/blob/master/springdoc-openapi-webflux-core/src/test/java/test/org/springdoc/api/app90/book/BookRouter.java" target="_blank" rel="noopener">图书路由器</a></li>
<li><a href="https://github.com/springdoc/springdoc-openapi/blob/master/springdoc-openapi-webflux-core/src/test/java/test/org/springdoc/api/app90/employee/EmployeeRouter.java" target="_blank" rel="noopener">员工路由器</a></li>
<li><a href="https://github.com/springdoc/springdoc-openapi/blob/master/springdoc-openapi-webflux-core/src/test/java/test/org/springdoc/api/app90/position/PositionRouter.java" target="_blank" rel="noopener">位置路由器</a></li>
</ul>
<p>以及使用功能端点 DSL 的演示代码：</p>
<ul>
<li><a href="https://github.com/springdoc/springdoc-openapi-demos/tree/master/springdoc-openapi-spring-boot-2-webflux-functional" target="_blank" rel="noopener">使用函数式 DSL 的示例 webflux 应用程序</a></li>
</ul>
<p>从 v1.3.8 版本开始，增加了对功能端点的支持。为此目的添加了两个主要注释：<code>@RouterOperations</code>和<code>@RouterOperation</code>.</p>
<p>只有带有<code>@RouterOperations</code>和 的REST API<code>@RouterOperation</code>才能显示在 swagger-ui 上。</p>
<ul>
<li><code>@RouterOperation</code>: 可以单独使用，如果Router bean包含一个与REST API相关的单一路由..使用@RouterOperation时，不需要填写路径</li>
<li><code>@RouterOperation</code>，可以直接引用一个spring Bean（beanClass属性）和底层方法（beanMethod属性）：Springdoc-openapi，然后会检查这个方法和这个方法级别的swagger注解。</li>
</ul>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@RouterOperation</span><span class="token punctuation">(</span>beanClass <span class="token operator">=</span> EmployeeService<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> beanMethod <span class="token operator">=</span> <span class="token string">"findAllEmployees"</span><span class="token punctuation">)</span>
RouterFunction<span class="token operator">&lt;</span>ServerResponse<span class="token operator">></span> <span class="token function">getAllEmployeesRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token function">route</span><span class="token punctuation">(</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">"/employees"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token function">accept</span><span class="token punctuation">(</span>MediaType<span class="token punctuation">.</span>APPLICATION_JSON<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
         req <span class="token operator">-</span><span class="token operator">></span> <span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span>
               <span class="token function">employeeService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findAllEmployees</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Employee<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><code>@RouterOperation</code>, 包含<code>@Operation</code>注释。该<code>@Operation</code>注释也可以放置在bean的方法级别，如果该属性beanMethod声明。</li>
</ul>
<p>不要忘记设置<strong>operationId</strong>这是<strong>强制性的</strong>。</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@RouterOperation</span><span class="token punctuation">(</span>operation <span class="token operator">=</span> <span class="token annotation punctuation">@Operation</span><span class="token punctuation">(</span>operationId <span class="token operator">=</span> <span class="token string">"findEmployeeById"</span><span class="token punctuation">,</span> summary <span class="token operator">=</span> <span class="token string">"Find purchase order by ID"</span><span class="token punctuation">,</span> tags <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">"MyEmployee"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      parameters <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token annotation punctuation">@Parameter</span><span class="token punctuation">(</span>in <span class="token operator">=</span> ParameterIn<span class="token punctuation">.</span>PATH<span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"Employee Id"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      responses <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token annotation punctuation">@ApiResponse</span><span class="token punctuation">(</span>responseCode <span class="token operator">=</span> <span class="token string">"200"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"successful operation"</span><span class="token punctuation">,</span> content <span class="token operator">=</span> <span class="token annotation punctuation">@Content</span><span class="token punctuation">(</span>schema <span class="token operator">=</span> <span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>implementation <span class="token operator">=</span> Employee<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@ApiResponse</span><span class="token punctuation">(</span>responseCode <span class="token operator">=</span> <span class="token string">"400"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"Invalid Employee ID supplied"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@ApiResponse</span><span class="token punctuation">(</span>responseCode <span class="token operator">=</span> <span class="token string">"404"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"Employee not found"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
RouterFunction<span class="token operator">&lt;</span>ServerResponse<span class="token operator">></span> <span class="token function">getEmployeeByIdRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token function">route</span><span class="token punctuation">(</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">"/employees/{id}"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
         req <span class="token operator">-</span><span class="token operator">></span> <span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span>
               <span class="token function">employeeRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findEmployeeById</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">pathVariable</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Employee<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><code>@RouterOperations</code>: 如果 Router bean 包含多个路由，则应使用此注释。使用 RouterOperations 时，必须填写 path 属性。</li>
<li>A <code>@RouterOperations</code>、包含很多<code>@RouterOperation</code>。</li>
</ul>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@RouterOperations</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token annotation punctuation">@RouterOperation</span><span class="token punctuation">(</span>path <span class="token operator">=</span> <span class="token string">"/getAllPersons"</span><span class="token punctuation">,</span> beanClass <span class="token operator">=</span> PersonService<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> beanMethod <span class="token operator">=</span> <span class="token string">"getAll"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token annotation punctuation">@RouterOperation</span><span class="token punctuation">(</span>path <span class="token operator">=</span> <span class="token string">"/getPerson/{id}"</span><span class="token punctuation">,</span> beanClass <span class="token operator">=</span> PersonService<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> beanMethod <span class="token operator">=</span> <span class="token string">"getById"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token annotation punctuation">@RouterOperation</span><span class="token punctuation">(</span>path <span class="token operator">=</span> <span class="token string">"/createPerson"</span><span class="token punctuation">,</span> beanClass <span class="token operator">=</span> PersonService<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> beanMethod <span class="token operator">=</span> <span class="token string">"save"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token annotation punctuation">@RouterOperation</span><span class="token punctuation">(</span>path <span class="token operator">=</span> <span class="token string">"/deletePerson/{id}"</span><span class="token punctuation">,</span> beanClass <span class="token operator">=</span> PersonService<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> beanMethod <span class="token operator">=</span> <span class="token string">"delete"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> RouterFunction<span class="token operator">&lt;</span>ServerResponse<span class="token operator">></span> <span class="token function">personRoute</span><span class="token punctuation">(</span>PersonHandler handler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> RouterFunctions
         <span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">"/getAllPersons"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token function">accept</span><span class="token punctuation">(</span>MediaType<span class="token punctuation">.</span>APPLICATION_JSON<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> handler<span class="token operator">:</span><span class="token operator">:</span>findAll<span class="token punctuation">)</span>
         <span class="token punctuation">.</span><span class="token function">andRoute</span><span class="token punctuation">(</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">"/getPerson/{id}"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token function">accept</span><span class="token punctuation">(</span>MediaType<span class="token punctuation">.</span>APPLICATION_STREAM_JSON<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> handler<span class="token operator">:</span><span class="token operator">:</span>findById<span class="token punctuation">)</span>
         <span class="token punctuation">.</span><span class="token function">andRoute</span><span class="token punctuation">(</span><span class="token function">POST</span><span class="token punctuation">(</span><span class="token string">"/createPerson"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token function">accept</span><span class="token punctuation">(</span>MediaType<span class="token punctuation">.</span>APPLICATION_JSON<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> handler<span class="token operator">:</span><span class="token operator">:</span>save<span class="token punctuation">)</span>
         <span class="token punctuation">.</span><span class="token function">andRoute</span><span class="token punctuation">(</span><span class="token function">DELETE</span><span class="token punctuation">(</span><span class="token string">"/deletePerson/{id}"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token function">accept</span><span class="token punctuation">(</span>MediaType<span class="token punctuation">.</span>APPLICATION_JSON<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> handler<span class="token operator">:</span><span class="token operator">:</span>delete<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>使用@RouterOperation 填写的所有文档，可能由路由器功能数据完成。为此，@RouterOperation 字段必须帮助唯一标识相关路由。springdoc-openpi 使用以下条件扫描与 @RouterOperation 注释相关的唯一路由：</p>
<ul>
<li>按路径</li>
<li>按路径和请求方法</li>
<li>通过路径并产生</li>
<li>通过路径和消耗</li>
<li>通过路径和请求方法并产生</li>
<li>通过路径和请求方法并消耗</li>
<li>按路径生产和消费</li>
<li>通过路径和请求方法并产生和消耗</li>
</ul>
<p>演示的 GITHUB 上提供了一些代码示例：</p>
<ul>
<li><a href="https://github.com/springdoc/springdoc-openapi-demos/tree/master/springdoc-openapi-spring-boot-2-webflux-functional" target="_blank" rel="noopener">带有功能端点文档的示例应用程序</a></li>
</ul>
<p>还有一些项目测试：（从app69到app75）</p>
<ul>
<li><a href="https://github.com/springdoc/springdoc-openapi/tree/master/springdoc-openapi-webflux-core/src/test/java/test/org/springdoc/api" target="_blank" rel="noopener">带有功能端点文档的示例代码</a></li>
</ul>
<h3 id="4-8-在-Actuator-端口上暴露-swagger-ui"><a href="#4-8-在-Actuator-端口上暴露-swagger-ui" class="headerlink" title="4.8. 在 Actuator 端口上暴露 swagger-ui"></a>4.8. 在 Actuator 端口上暴露 swagger-ui</h3><p>从 release 开始<code>1.5.1</code>，可以在执行器端口上公开<strong>swagger-ui</strong>和<strong>openapi</strong>端点。注意：执行器管理端口必须与应用程序端口不同。</p>
<p>要公开 swagger-ui，在管理端口上，您应该设置</p>
<pre class="line-numbers language-properties"><code class="language-properties"><span class="token attr-name">springdoc.use-management-port</span><span class="token punctuation">=</span><span class="token attr-value">true</span>
<span class="token comment" spellcheck="true"># This property enables the openapi and swaggerui endpoints to be exposed beneath the actuator base path.</span>
<span class="token attr-name">management.endpoints.web.exposure.include</span><span class="token punctuation">=</span><span class="token attr-value">openapi, swaggerui</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>启用后，您还应该能够在以下位置看到 springdoc-openapi 端点：（主机和端口取决于您的设置）- <code>http://serverName:managementPort/actuator</code></p>
<p>例如，如果您有以下设置：</p>
<p>有两个端点可用：</p>
<ol>
<li>包含 OpenAPI 定义的 REST API：<ul>
<li><code>http://serverName:managementPort/actuator/openapi</code></li>
</ul>
</li>
<li>一个端点，路由到 swagger-ui：<ul>
<li><code>http://serverName:managementPort/actuator/swaggerui</code></li>
</ul>
</li>
</ol>
<pre class="line-numbers language-properties"><code class="language-properties"><span class="token attr-name">management.server.port</span><span class="token punctuation">=</span><span class="token attr-value">9090</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>例如，您还应该能够看到 springdoc-openapi 端点：</p>
<ul>
<li><code>http://serverName:9090/actuator</code></li>
<li><code>http://serverName:9090/actuator/swaggerui</code></li>
<li><code>http://serverName:9090/actuator/openapi</code></li>
</ul>
<p>如果您想访问应用程序端点，从部署在执行器基本路径下的 swagger-ui，使用与您的应用程序不同的端口，<code>CORS for your endpoints</code>应在您的应用程序级别启用。</p>
<p>此外，还可以将此属性与现有属性相结合，以在 swagger-ui 中显示执行器端点。</p>
<pre class="line-numbers language-properties"><code class="language-properties"><span class="token attr-name">springdoc.show-actuator</span><span class="token punctuation">=</span><span class="token attr-value">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>启用后： - 默认情况下将添加执行器端点的专用组。- 如果没有为应用程序定义组，则会添加一个默认组。</p>
<p>然后可以通过执行器端口访问 swagger-ui：- <code>http://serverName:managementPort/actuator/swaggerui</code></p>
<p>如果管理端口与应用程序端口不同并且 ‘springdoc.use-management-port’ 未定义但 ‘springdoc.show-actuator’ 设置为 true：</p>
<p>启用后： - 然后可以通过应用程序端口访问 swagger-ui。例如：<code>http://serverName:applicationPort/swagger-ui.html</code> - 默认情况下将添加执行器端点的专用组。- 如果没有为应用程序定义组，则会添加一个默认组。</p>
<blockquote>
<p> 如果您想访问这种情况下的执行器端点（与您的应用程序不同的端口），<code>CORS</code>则应启用执行器端点。</p>
</blockquote>
<p>注意：现在无法自定义执行器基本路径下这些新端点的命名。</p>
<h3 id="4-9-与-WildFly-集成"><a href="#4-9-与-WildFly-集成" class="headerlink" title="4.9. 与 WildFly 集成"></a>4.9. 与 WildFly 集成</h3><ul>
<li>对于 WildFly 用户，您需要添加以下依赖项才能使 swagger-ui 工作：</li>
</ul>
<pre class="line-numbers language-xml"><code class="language-xml">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.webjars<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>webjars-locator-jboss-vfs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>0.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="5-Springdoc-openapi-属性"><a href="#5-Springdoc-openapi-属性" class="headerlink" title="5. Springdoc-openapi 属性"></a>5. Springdoc-openapi 属性</h2><p>springdoc-openapi 依赖于使用标准文件位置的标准<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-external-config" target="_blank" rel="noopener">spring 配置属性</a>（yml 或属性）。</p>
<h3 id="5-1-springdoc-openapi-核心属性"><a href="#5-1-springdoc-openapi-核心属性" class="headerlink" title="5.1. springdoc-openapi 核心属性"></a>5.1. springdoc-openapi 核心属性</h3><table>
<thead>
<tr>
<th align="left">参数名称</th>
<th align="left">默认值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">springdoc.api-docs.path</td>
<td align="left"><code>/v3/api-docs</code></td>
<td align="left"><code>String</code>, 用于自定义 Json 格式的 OpenAPI 文档路径。</td>
</tr>
<tr>
<td align="left">springdoc.api-docs.enabled</td>
<td align="left"><code>true</code></td>
<td align="left"><code>Boolean</code>. 禁用 springdoc-openapi 端点（默认为 /v3/api-docs）。</td>
</tr>
<tr>
<td align="left">springdoc.packages-to-scan</td>
<td align="left"><code>*</code></td>
<td align="left"><code>List of Strings</code>.要扫描的包列表（逗号分隔）</td>
</tr>
<tr>
<td align="left">springdoc.paths-to-match</td>
<td align="left"><code>/*</code></td>
<td align="left"><code>List of Strings</code>.要匹配的路径列表（逗号分隔）</td>
</tr>
<tr>
<td align="left">springdoc.produces-to-match</td>
<td align="left"><code>/*</code></td>
<td align="left"><code>List of Strings</code>.要匹配的生产媒体类型列表（逗号分隔）</td>
</tr>
<tr>
<td align="left">springdoc.headers-to-match</td>
<td align="left"><code>/*</code></td>
<td align="left"><code>List of Strings</code>.要匹配的标题列表（逗号分隔）</td>
</tr>
<tr>
<td align="left">springdoc.consumes-to-match</td>
<td align="left"><code>/*</code></td>
<td align="left"><code>List of Strings</code>.要匹配的消耗媒体类型列表（逗号分隔）</td>
</tr>
<tr>
<td align="left">springdoc.paths-to-exclude</td>
<td align="left"></td>
<td align="left"><code>List of Strings</code>.要排除的路径列表（逗号分隔）</td>
</tr>
<tr>
<td align="left">springdoc.packages-to-exclude</td>
<td align="left"></td>
<td align="left"><code>List of Strings</code>.要排除的包列表（逗号分隔）</td>
</tr>
<tr>
<td align="left">springdoc.default-consumes-media-type</td>
<td align="left"><code>application/json</code></td>
<td align="left"><code>String</code>. 默认使用媒体类型。</td>
</tr>
<tr>
<td align="left">springdoc.default-produces-media-type</td>
<td align="left"><code>**/**</code></td>
<td align="left"><code>String</code>.默认产生媒体类型。</td>
</tr>
<tr>
<td align="left">springdoc.cache.disabled</td>
<td align="left"><code>false</code></td>
<td align="left"><code>Boolean</code>. 禁用计算出来的 OpenAPI 的 springdoc-openapi 缓存。</td>
</tr>
<tr>
<td align="left">springdoc.show-actuator</td>
<td align="left"><code>false</code></td>
<td align="left"><code>Boolean</code>. 显示执行器端点。</td>
</tr>
<tr>
<td align="left">springdoc.auto-tag-classes</td>
<td align="left"><code>true</code></td>
<td align="left"><code>Boolean</code>. 禁用 springdoc-openapi 自动标签。</td>
</tr>
<tr>
<td align="left">springdoc.model-and-view-allowed</td>
<td align="left"><code>false</code></td>
<td align="left"><code>Boolean</code>. 允许带有 ModelAndView 的 RestControllers 返回出现在 OpenAPI 描述中。</td>
</tr>
<tr>
<td align="left">springdoc.override-with-generic-response</td>
<td align="left"><code>true</code></td>
<td align="left"><code>Boolean</code>. 当为 true 时，自动将 @ControllerAdvice 响应添加到所有生成的响应中。</td>
</tr>
<tr>
<td align="left">springdoc.api-docs.groups.enabled</td>
<td align="left"><code>true</code></td>
<td align="left"><code>Boolean</code>. 禁用 springdoc-openapi 组。</td>
</tr>
<tr>
<td align="left">springdoc.group-configs[0].group</td>
<td align="left"></td>
<td align="left"><code>String</code>.组名</td>
</tr>
<tr>
<td align="left">springdoc.group-configs[0].packages-to-scan</td>
<td align="left"><code>*</code></td>
<td align="left"><code>List of Strings</code>.要扫描的包列表（逗号分隔）</td>
</tr>
<tr>
<td align="left">springdoc.group-configs[0].paths-to-match</td>
<td align="left"><code>/*</code></td>
<td align="left"><code>List of Strings</code>. 匹配组的路径列表（逗号分隔）</td>
</tr>
<tr>
<td align="left">springdoc.group-configs[0].paths-to-exclude</td>
<td align="left">``</td>
<td align="left"><code>List of Strings</code>.要排除的路径列表（逗号分隔）</td>
</tr>
<tr>
<td align="left">springdoc.group-configs[0].packages-to-exclude</td>
<td align="left"></td>
<td align="left"><code>List of Strings</code>.要排除的包列表（逗号分隔）</td>
</tr>
<tr>
<td align="left">springdoc.group-configs[0].produces-to-match</td>
<td align="left"><code>/*</code></td>
<td align="left"><code>List of Strings</code>.要匹配的生产媒体类型列表（逗号分隔）</td>
</tr>
<tr>
<td align="left">springdoc.group-configs[0].consumes-to-match</td>
<td align="left"><code>/*</code></td>
<td align="left"><code>List of Strings</code>.要匹配的消耗媒体类型列表（逗号分隔）</td>
</tr>
<tr>
<td align="left">springdoc.group-configs[0].headers-to-match</td>
<td align="left"><code>/*</code></td>
<td align="left"><code>List of Strings</code>.要匹配的标题列表（逗号分隔）</td>
</tr>
<tr>
<td align="left">springdoc.webjars.prefix</td>
<td align="left"><code>/webjars</code></td>
<td align="left"><code>String</code>, 要更改可见的 webjars 前缀，请更改 spring-webflux 的 swagger-ui 的 URL。</td>
</tr>
<tr>
<td align="left">springdoc.api-docs.resolve-schema-properties</td>
<td align="left"><code>false</code></td>
<td align="left"><code>Boolean</code>. 在@Schema 上启用属性解析器（名称、标题和描述）。</td>
</tr>
<tr>
<td align="left">springdoc.remove-broken-reference-definitions</td>
<td align="left"><code>true</code></td>
<td align="left"><code>Boolean</code>. 禁止删除损坏的参考定义。</td>
</tr>
<tr>
<td align="left">springdoc.writer-with-default-pretty-printer</td>
<td align="left"><code>false</code></td>
<td align="left"><code>Boolean</code>. 启用 OpenApi 规范的漂亮打印。</td>
</tr>
<tr>
<td align="left">springdoc.model-converters。弃用-converter.enabled</td>
<td align="left"><code>true</code></td>
<td align="left"><code>Boolean</code>. 禁用弃用模型转换器。</td>
</tr>
<tr>
<td align="left">springdoc.model-converters.polymorphic-converter.enabled</td>
<td align="left"><code>true</code></td>
<td align="left"><code>Boolean</code>. 禁用多态模型转换器。</td>
</tr>
<tr>
<td align="left">springdoc.model-converters.pageable-converter.enabled</td>
<td align="left"><code>true</code></td>
<td align="left"><code>Boolean</code>. 禁用可分页模型转换器。</td>
</tr>
<tr>
<td align="left">springdoc.use-fqn</td>
<td align="left"><code>false</code></td>
<td align="left"><code>Boolean</code>. 启用完全限定名称。</td>
</tr>
<tr>
<td align="left">springdoc.show-login-endpoint</td>
<td align="left"><code>false</code></td>
<td align="left"><code>Boolean</code>. 使 spring 安全登录端点可见。</td>
</tr>
<tr>
<td align="left">springdoc.pre-loading-enabled</td>
<td align="left"><code>false</code></td>
<td align="left"><code>Boolean</code>. 在应用程序启动时加载 OpenAPI 的预加载设置。</td>
</tr>
<tr>
<td align="left">springdoc.writer-with-order-by-keys</td>
<td align="left"><code>false</code></td>
<td align="left"><code>Boolean</code>. 启用确定性/字母顺序。</td>
</tr>
<tr>
<td align="left">springdoc.use-management-port</td>
<td align="left"><code>false</code></td>
<td align="left"><code>Boolean</code>. 在执行器管理端口上公开 swagger-ui。</td>
</tr>
<tr>
<td align="left">springdoc.disable-i18n</td>
<td align="left"><code>false</code></td>
<td align="left"><code>Boolean</code>. 使用 i18n 禁用自动翻译。</td>
</tr>
</tbody></table>
<h3 id="5-2-swagger-ui-属性"><a href="#5-2-swagger-ui-属性" class="headerlink" title="5.2. swagger-ui 属性"></a>5.2. swagger-ui 属性</h3><ul>
<li>对 swagger-ui 属性的支持可在<code>springdoc-openapi</code>. 请参阅<a href="https://swagger.io/docs/open-source-tools/swagger-ui/usage/configuration/" target="_blank" rel="noopener">官方文档</a>。</li>
<li>您可以在文档中使用与 Spring Boot 属性相同的 swagger-ui 属性。</li>
</ul>
<blockquote>
<p>所有这些属性都应使用以下前缀声明： <code>springdoc.swagger-ui</code></p>
</blockquote>
<table>
<thead>
<tr>
<th align="left">参数名称</th>
<th align="left">默认值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">springdoc.swagger-ui.path</td>
<td align="left"><code>/swagger-ui.html</code></td>
<td align="left"><code>String</code>, 用于 swagger-ui HTML 文档的自定义路径。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.enabled</td>
<td align="left"><code>true</code></td>
<td align="left"><code>Boolean</code>. 禁用 swagger-ui 端点（默认为 /swagger-ui.html）。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.configUrl</td>
<td align="left"><code>/v3/api-docs/swagger-config</code></td>
<td align="left"><code>String</code>. 从中获取外部配置文档的 URL。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.layout</td>
<td align="left"><code>BaseLayout</code></td>
<td align="left"><code>String</code>. 可通过插件系统用作 Swagger UI 的顶级布局的组件的名称。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.validatorUrl</td>
<td align="left"><code>validator.swagger.io/validator</code></td>
<td align="left">默认情况下，Swagger UI 尝试根据 swagger.io 的在线验证器验证规范。您可以使用此参数设置不同的验证器 URL，例如为本地部署的验证器<a href="https://github.com/swagger-api/validator-badge" target="_blank" rel="noopener">Validator Badge</a>。将其设置为<code>none</code>,<code>127.0.0.1</code>或<code>localhost</code>将禁用验证。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.tryItOutEnabled</td>
<td align="left"><code>false</code></td>
<td align="left"><code>Boolean</code>. 控制是否应默认启用“试用”部分。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.filter</td>
<td align="left"><code>false</code></td>
<td align="left"><code>Boolean OR String</code>. 如果设置，则启用过滤。顶部栏将显示一个编辑框，您可以使用它来过滤显示的标记操作。可以是布尔值以启用或禁用，也可以是字符串，在这种情况下，将使用该字符串作为过滤器表达式来启用过滤。过滤区分大小写，匹配标签内任何地方的过滤器表达式。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.operationsSorter</td>
<td align="left"></td>
<td align="left"><code>Function=(a ⇒ a)</code>. 对每个 API 的操作列表应用排序。它可以是“alpha”（按字母数字路径排序）、“method”（按 HTTP 方法排序）或函数（请参阅 Array.prototype.sort() 以了解排序函数的工作原理）。默认是服务器返回的顺序不变。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.tagsSorter</td>
<td align="left"></td>
<td align="left"><code>Function=(a ⇒ a)</code>. 对每个 API 的标签列表应用排序。它可以是“alpha”（按字母数字路径排序）或函数，<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort" target="_blank" rel="noopener">请参阅 Array.prototype.sort()</a>以了解如何编写排序函数）。每次通过时，都会将两个标签名称字符串传递给分拣机。默认是 Swagger UI 确定的顺序。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.oauth2RedirectUrl</td>
<td align="left"><code>/swagger-ui/oauth2-redirect.html</code></td>
<td align="left"><code>String</code>. OAuth 重定向 URL。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.displayOperationId</td>
<td align="left"><code>false</code></td>
<td align="left"><code>Boolean</code>. 控制操作列表中 operationId 的显示。默认为<code>false</code>。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.displayRequestDuration</td>
<td align="left"><code>false</code></td>
<td align="left"><code>Boolean</code>. 控制“试用”请求的请求持续时间（以毫秒为单位）的显示。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.deepLinking</td>
<td align="left"><code>false</code></td>
<td align="left"><code>Boolean</code>. 如果设置为<code>true</code>，则启用标签和操作的深层链接。有关详细信息，请参阅 <a href="/docs/usage/deep-linking.md">深层链接文档</a>。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.defaultModelsExpandDepth</td>
<td align="left"><code>1</code></td>
<td align="left"><code>Number</code>. 模型的默认扩展深度（设置为 -1 完全隐藏模型）。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.defaultModelExpandDepth</td>
<td align="left"><code>1</code></td>
<td align="left"><code>Number</code>. 模型示例部分中模型的默认扩展深度。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.defaultModelRendering</td>
<td align="left"></td>
<td align="left"><code>String=["example"*, "model"]</code>. 控制首次呈现 API 时模型的显示方式。（用户始终可以通过单击“模型”和“示例值”链接来切换给定模型的渲染。）</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.docExpansion</td>
<td align="left"></td>
<td align="left"><code>String=["list"*, "full", "none"]</code>. 控制操作和标签的默认扩展设置。它可以是“list”（仅展开标签）、“full”（展开标签和操作）或“none”（不展开任何内容）。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.maxDisplayedTags</td>
<td align="left"></td>
<td align="left"><code>Number</code>. 如果设置，将显示的标记操作数量限制为最多这么多。默认是显示所有操作。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.showExtensions</td>
<td align="left"><code>false</code></td>
<td align="left"><code>Boolean</code>. 控制供应商扩展 ( <code>x-</code>) 字段和操作、参数和架构值的显示。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.url</td>
<td align="left"></td>
<td align="left"><code>String</code>.要配置，自定义 OpenAPI 文件的路径。如果<code>urls</code>使用将被忽略。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.showCommonExtensions</td>
<td align="left"><code>false</code></td>
<td align="left"><code>Boolean</code>. 控制参数的扩展（<code>pattern</code>、<code>maxLength</code>、<code>minLength</code>、<code>maximum</code>、<code>minimum</code>）字段和值的显示。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.supportedSubmitMethods</td>
<td align="left"></td>
<td align="left"><code>Array=["get", "put", "post", "delete", "options", "head", "patch", "trace"]</code>. 启用了“试用”功能的 HTTP 方法列表。空数组禁用所有操作的“试用”。这不会从显示中过滤操作。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.queryConfigEnabled</td>
<td align="left"><code>false</code></td>
<td align="left"><code>Boolean</code>. 自禁用<code>v1.6.0</code>。此参数通过 URL 搜索参数启用（旧版）覆盖配置参数。在启用此功能之前，<a href="https://github.com/swagger-api/swagger-ui/security/advisories/GHSA-qrmm-w75w-3wpx" target="_blank" rel="noopener">请参阅安全公告</a>。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.oauth。附加查询字符串参数</td>
<td align="left"></td>
<td align="left"><code>String</code>. 添加到authorizationUrl 和tokenUrl 的附加查询参数。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.disable-swagger-default-url</td>
<td align="left"><code>false</code></td>
<td align="left"><code>Boolean</code>. 禁用 swagger-ui 默认 petstore url。（自 v1.4.1 起可用）。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.urls[0].url</td>
<td align="left"></td>
<td align="left"><code>URL</code>. swagger 组的 url，由 Topbar 插件使用。URL 在此数组中的所有项目中必须是唯一的，因为它们用作标识符。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.urls[0].name</td>
<td align="left"></td>
<td align="left"><code>String</code>. Topbar 插件使用的 swagger 组的名称。名称在此数组中的所有项目中必须是唯一的，因为它们用作标识符。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.urlsPrimaryName</td>
<td align="left"></td>
<td align="left"><code>String</code>. Swagger UI 加载时将显示的 swagger 组的名称。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.oauth.clientId</td>
<td align="left"></td>
<td align="left"><code>String</code>. 默认客户端 ID。必须是字符串。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.oauth.clientSecret</td>
<td align="left"></td>
<td align="left"><code>String</code>. 默认客户端机密。切勿在您的生产环境中使用此参数。它暴露了关键的安全信息。此功能仅适用于开发/测试环境。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.oauth.realm</td>
<td align="left"></td>
<td align="left"><code>String</code>. 领域查询参数（用于 OAuth 1）添加到 authorizationUrl 和 tokenUrl。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.oauth.appName</td>
<td align="left"></td>
<td align="left"><code>String</code>. OAuth 应用程序名称，显示在授权弹出窗口中。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.oauth.scopeSeparator</td>
<td align="left"></td>
<td align="left"><code>String</code>. 用于传递范围的 OAuth 范围分隔符，在调用前编码，默认值为空格（编码值 %20）。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.csrf.enabled</td>
<td align="left"><code>false</code></td>
<td align="left"><code>Boolean</code>. 启用 CSRF 支持</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.csrf.cookie-name</td>
<td align="left"><code>XSRF-TOKEN</code></td>
<td align="left"><code>String</code>. 可选 CSRF，设置 CSRF cookie 名称。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.csrf.header-name</td>
<td align="left"><code>X-XSRF-TOKEN</code></td>
<td align="left"><code>String</code>. 可选的 CSRF，设置 CSRF 头名称。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.syntaxHighlight.activated</td>
<td align="left"><code>true</code></td>
<td align="left"><code>Boolean</code>. 是否应激活语法突出显示。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.syntaxHighlight.theme</td>
<td align="left"><code>agate</code></td>
<td align="left"><code>String</code>. <code>String=["agate"*, "arta", "monokai", "nord", "obsidian", "tomorrow-night"]</code>. 要使用的<a href="https://highlightjs.org/static/demo/" target="_blank" rel="noopener">Highlight.js</a>语法着色主题。（仅提供这 6 种样式。）</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.oauth。useBasicAuthentication WithAccessCodeGrant</td>
<td align="left"><code>false</code></td>
<td align="left"><code>Boolean</code>. 仅针对 accessCode 流激活。在对 tokenUrl 的 authorization_code 请求期间，使用 HTTP 基本身份验证方案（具有基本 base64encode(client_id + client_secret) 的授权标头）传递客户端密码。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.oauth。usePkceWithAuthorization CodeGrant</td>
<td align="left"><code>false</code></td>
<td align="left"><code>Boolean</code>.仅适用于授权码流。代码交换证明密钥为 OAuth 公共客户端带来了增强的安全性。</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.persistAuthorization</td>
<td align="left"><code>false</code></td>
<td align="left"><code>Boolean</code>. 如果设置为 true，它会保留授权数据，并且不会在浏览器关闭/刷新时丢失</td>
</tr>
<tr>
<td align="left">springdoc.swagger-ui.use-root-path</td>
<td align="left"><code>false</code></td>
<td align="left"><code>Boolean</code>. 如果设置为 true，则可以直接从应用程序根路径访问 swagger-ui。</td>
</tr>
</tbody></table>
<h2 id="6-Springdoc-openapi-插件"><a href="#6-Springdoc-openapi-插件" class="headerlink" title="6. Springdoc-openapi 插件"></a>6. Springdoc-openapi 插件</h2><h3 id="6-1-Maven插件"><a href="#6-1-Maven插件" class="headerlink" title="6.1. Maven插件"></a>6.1. Maven插件</h3><p>springdoc-openapi-maven-plugin 的目的是在构建时生成 json 和 yaml OpenAPI 描述。该插件在集成测试阶段工作，并生成 OpenAPI 描述。该插件与 spring-boot-maven 插件配合使用。</p>
<p>您可以在集成测试阶段使用 maven 命令对其进行测试：</p>
<pre class="line-numbers language-bash"><code class="language-bash">mvn verify<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>为了使用这个功能，你需要在 pom.xml 的 plugins 部分添加插件声明：</p>
<pre class="line-numbers language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.3.4.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>jvmArguments</span><span class="token punctuation">></span></span>-Dspring.application.admin.enabled=true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>jvmArguments</span><span class="token punctuation">></span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>executions</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>pre-integration-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">></span></span>start<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>post-integration-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">></span></span>stop<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">></span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>executions</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springdoc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>springdoc-openapi-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>executions</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>integration-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">></span></span>generate<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">></span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>executions</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>springdoc-openapi-maven-plugin的更多自定义设置可以参考插件文档：</p>
<ul>
<li><a href="https://github.com/springdoc/springdoc-openapi-maven-plugin" target="_blank" rel="noopener">https://github.com/springdoc/springdoc-openapi-maven-plugin</a></li>
</ul>
<h3 id="6-2-Gradle插件"><a href="#6-2-Gradle插件" class="headerlink" title="6.2. Gradle插件"></a>6.2. Gradle插件</h3><p>此插件允许您从 Gradle 构建为 Spring Boot 应用程序生成 OpenAPI 3 规范。</p>
<pre class="line-numbers language-groovy"><code class="language-groovy">plugins <span class="token punctuation">{</span>
      <span class="token function">id</span><span class="token punctuation">(</span><span class="token string">"org.springframework.boot"</span><span class="token punctuation">)</span> version <span class="token string">"2.3.0.RELEASE"</span>
      <span class="token function">id</span><span class="token punctuation">(</span><span class="token string">"com.github.johnrengelman.processes"</span><span class="token punctuation">)</span> version <span class="token string">"0.5.0"</span>
      <span class="token function">id</span><span class="token punctuation">(</span><span class="token string">"org.springdoc.openapi-gradle-plugin"</span><span class="token punctuation">)</span> version <span class="token string">"1.3.3"</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>当您将此插件及其运行时依赖项插件添加到您的构建文件时，该插件会创建以下任务：</p>
<ul>
<li>分叉的SpringBootRun</li>
<li>生成OpenApiDocs</li>
</ul>
<pre class="line-numbers language-bash"><code class="language-bash">gradle clean generateOpenApiDocs<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>更多关于 springdoc-openapi-gradle-plugin 的自定义配置，可以参考插件文档：</p>
<ul>
<li><a href="https://github.com/springdoc/springdoc-openapi-gradle-plugin" target="_blank" rel="noopener">https://github.com/springdoc/springdoc-openapi-gradle-plugin</a></li>
</ul>
<h2 id="7-Springdoc-openapi-演示"><a href="#7-Springdoc-openapi-演示" class="headerlink" title="7. Springdoc-openapi 演示"></a>7. Springdoc-openapi 演示</h2><h3 id="7-1-springdoc-应用程序演示"><a href="#7-1-springdoc-应用程序演示" class="headerlink" title="7.1. springdoc 应用程序演示"></a>7.1. springdoc 应用程序演示</h3><ul>
<li><a href="http://158.101.191.70:8081/" target="_blank" rel="noopener">使用 OpenAPI 3 演示 Spring Boot 2 Web MVC</a></li>
<li><a href="http://158.101.191.70:8082/" target="_blank" rel="noopener">使用 OpenAPI 3 演示 Spring Boot 2 WebFlux</a></li>
<li><a href="http://158.101.191.70:8083/" target="_blank" rel="noopener">演示 Spring Boot 1 Web MVC with OpenAPI 3</a></li>
<li><a href="http://158.101.191.70:8084/" target="_blank" rel="noopener">演示 Spring Boot 2 WebFlux 与功能端点 OpenAPI 3</a></li>
<li><a href="http://158.101.191.70:8085/" target="_blank" rel="noopener">使用 OpenAPI 3 演示 Spring Boot 2 和 Spring Hateoas</a></li>
<li><a href="http://158.101.191.70:8060/" target="_blank" rel="noopener">演示 Spring Boot 2 和 Spring Cloud Gateway</a></li>
</ul>
<p><img src="/images/loading.gif" data-original="../images/development/pets.png" alt=""></p>
<h3 id="7-2-演示应用程序的源代码"><a href="#7-2-演示应用程序的源代码" class="headerlink" title="7.2. 演示应用程序的源代码"></a>7.2. 演示应用程序的源代码</h3><ul>
<li><a href="https://github.com/springdoc/springdoc-openapi-demos.git" target="_blank" rel="noopener">https://github.com/springdoc/springdoc-openapi-demos.git</a></li>
</ul>
<h2 id="8-从-SpringFox-迁移"><a href="#8-从-SpringFox-迁移" class="headerlink" title="8. 从 SpringFox 迁移"></a>8. 从 SpringFox 迁移</h2><ul>
<li>删除 springfox 和 swagger 2 依赖项。添加<code>springdoc-openapi-ui</code>依赖项。</li>
</ul>
<pre class="line-numbers language-xml"><code class="language-xml">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springdoc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>springdoc-openapi-ui<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.6.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>用 swagger 3 注释替换 swagger 2 注释（它已经包含在<code>springdoc-openapi-ui</code>依赖项中）。swagger 3 注释的包是<code>io.swagger.v3.oas.annotations</code>.<ul>
<li><code>@Api</code> → <code>@Tag</code></li>
<li><code>@ApiIgnore</code>→<code>@Parameter(hidden = true)</code>或<code>@Operation(hidden = true)</code>或<code>@Hidden</code></li>
<li><code>@ApiImplicitParam</code> → <code>@Parameter</code></li>
<li><code>@ApiImplicitParams</code> → <code>@Parameters</code></li>
<li><code>@ApiModel</code> → <code>@Schema</code></li>
<li><code>@ApiModelProperty(hidden = true)</code> → <code>@Schema(accessMode = READ_ONLY)</code></li>
<li><code>@ApiModelProperty</code> → <code>@Schema</code></li>
<li><code>@ApiOperation(value = "foo", notes = "bar")</code> → <code>@Operation(summary = "foo", description = "bar")</code></li>
<li><code>@ApiParam</code> → <code>@Parameter</code></li>
<li><code>@ApiResponse(code = 404, message = "foo")</code> → <code>@ApiResponse(responseCode = "404", description = "foo")</code></li>
</ul>
</li>
<li>此步骤是可选的：仅当您有<strong>多个</strong> <code>Docket</code>bean 时将它们替换为<code>GroupedOpenApi</code>bean。</li>
</ul>
<p>前：</p>
<pre class="line-numbers language-java"><code class="language-java">  <span class="token annotation punctuation">@Bean</span>
  <span class="token keyword">public</span> Docket <span class="token function">publicApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Docket</span><span class="token punctuation">(</span>DocumentationType<span class="token punctuation">.</span>SWAGGER_2<span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">apis</span><span class="token punctuation">(</span>RequestHandlerSelectors<span class="token punctuation">.</span><span class="token function">basePackage</span><span class="token punctuation">(</span><span class="token string">"org.github.springshop.web.public"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">paths</span><span class="token punctuation">(</span>PathSelectors<span class="token punctuation">.</span><span class="token function">regex</span><span class="token punctuation">(</span><span class="token string">"/public.*"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">groupName</span><span class="token punctuation">(</span><span class="token string">"springshop-public"</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Bean</span>
  <span class="token keyword">public</span> Docket <span class="token function">adminApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Docket</span><span class="token punctuation">(</span>DocumentationType<span class="token punctuation">.</span>SWAGGER_2<span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">apis</span><span class="token punctuation">(</span>RequestHandlerSelectors<span class="token punctuation">.</span><span class="token function">basePackage</span><span class="token punctuation">(</span><span class="token string">"org.github.springshop.web.admin"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">paths</span><span class="token punctuation">(</span>PathSelectors<span class="token punctuation">.</span><span class="token function">regex</span><span class="token punctuation">(</span><span class="token string">"/admin.*"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">groupName</span><span class="token punctuation">(</span><span class="token string">"springshop-admin"</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>现在：</p>
<pre class="line-numbers language-java"><code class="language-java">  <span class="token annotation punctuation">@Bean</span>
  <span class="token keyword">public</span> GroupedOpenApi <span class="token function">publicApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> GroupedOpenApi<span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">"springshop-public"</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">pathsToMatch</span><span class="token punctuation">(</span><span class="token string">"/public/**"</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token annotation punctuation">@Bean</span>
  <span class="token keyword">public</span> GroupedOpenApi <span class="token function">adminApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> GroupedOpenApi<span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">"springshop-admin"</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">pathsToMatch</span><span class="token punctuation">(</span><span class="token string">"/admin/**"</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果您<strong>只有一个</strong> <code>Docket</code> - 将其删除，而是将属性添加到您的<code>application.properties</code>:</p>
<pre class="line-numbers language-properties"><code class="language-properties"><span class="token attr-name">springdoc.packagesToScan</span><span class="token punctuation">=</span><span class="token attr-value">package1, package2</span>
<span class="token attr-name">springdoc.pathsToMatch</span><span class="token punctuation">=</span><span class="token attr-value">/v1, /api/balance/**</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<ul>
<li>添加<code>OpenAPI</code>类型的bean 。见示例：</li>
</ul>
<pre class="line-numbers language-java"><code class="language-java">  <span class="token annotation punctuation">@Bean</span>
  <span class="token keyword">public</span> OpenAPI <span class="token function">springShopOpenAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OpenAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">"SpringShop API"</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">"Spring shop sample application"</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span><span class="token string">"v0.0.1"</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">license</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">License</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">"Apache 2.0"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">"http://springdoc.org"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">externalDocs</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ExternalDocumentation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">"SpringShop Wiki Documentation"</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">"https://springshop.wiki.github.org/docs"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>如果 swagger-ui 在代理后面提供：<ul>
<li><a href="https://springdoc.org/index.html#how-can-i-deploy-springdoc-openapi-ui-behind-a-reverse-proxy" target="_blank" rel="noopener">How-can-i-deploy-springdoc-openapi-ui-behind-a-reverse-proxy</a></li>
</ul>
</li>
<li>自定义 Swagger UI<ul>
<li><a href="https://springdoc.org/index.html#how-can-i-configure-swagger-ui" target="_blank" rel="noopener">How-can-i-configure-swagger-ui</a></li>
</ul>
</li>
<li>从文档中隐藏操作或控制器<ul>
<li><a href="https://springdoc.org/index.html#how-can-i-hide-an-operation-or-a-controller-from-documentation" target="_blank" rel="noopener">如何从文档中隐藏操作或控制器</a></li>
</ul>
</li>
</ul>
<h2 id="9-其他资源"><a href="#9-其他资源" class="headerlink" title="9. 其他资源"></a>9. 其他资源</h2><h3 id="9-1-其他入门资源"><a href="#9-1-其他入门资源" class="headerlink" title="9.1. 其他入门资源"></a>9.1. 其他入门资源</h3><ul>
<li><a href="https://prezi.com/view/r4DP4TCmYUJk1eaqjKG4/" target="_blank" rel="noopener">Springdoc-openapi presentation</a></li>
<li><a href="https://www.baeldung.com/spring-rest-openapi-documentation" target="_blank" rel="noopener">Baeldung</a></li>
<li><a href="https://dzone.com/articles/openapi-3-documentation-with-spring-boot" target="_blank" rel="noopener">DZone Part1</a></li>
<li><a href="https://dzone.com/articles/doing-more-with-springdoc-openapi" target="_blank" rel="noopener">DZone Part2</a></li>
<li><a href="https://dzone.com/articles/extending-swagger-and-spring-doc-open-api" target="_blank" rel="noopener">Extending Swagger and Spring Doc Open API</a></li>
<li><a href="https://piotrminkowski.com/2020/02/20/microservices-api-documentation-with-springdoc-openapi/" target="_blank" rel="noopener">Piotrminkowski Blog</a></li>
</ul>
<h3 id="9-2-依赖库"><a href="#9-2-依赖库" class="headerlink" title="9.2. 依赖库"></a>9.2. 依赖库</h3><p>springdoc-openapi 库托管在 maven 中央存储库上。可以在以下位置查看工件：</p>
<p>发布：</p>
<ul>
<li><a href="https://s01.oss.sonatype.org/content/groups/public/org/springdoc/" target="_blank" rel="noopener">https://s01.oss.sonatype.org/content/groups/public/org/springdoc/</a></li>
</ul>
<p>快照：</p>
<ul>
<li><a href="https://s01.oss.sonatype.org/content/repositories/snapshots/org/springdoc/" target="_blank" rel="noopener">https://s01.oss.sonatype.org/content/repositories/snapshots/org/springdoc/</a></li>
</ul>
<h2 id="10-特别感谢"><a href="#10-特别感谢" class="headerlink" title="10. 特别感谢"></a>10. 特别感谢</h2><ul>
<li>感谢<a href="https://spring.io/team" target="_blank" rel="noopener">Spring 团队</a>分享有关 Spring 项目的所有相关资源。</li>
<li>非常感谢<a href="https://www.jetbrains.com/?from=springdoc-openapi" target="_blank" rel="noopener">JetBrains</a>对 springdoc-openapi 项目的支持。</li>
</ul>
<h2 id="11-常见问题"><a href="#11-常见问题" class="headerlink" title="11. 常见问题"></a>11. 常见问题</h2><h3 id="11-1-如何在一个-Spring-Boot-项目中定义多个-OpenAPI-定义？"><a href="#11-1-如何在一个-Spring-Boot-项目中定义多个-OpenAPI-定义？" class="headerlink" title="11.1. 如何在一个 Spring Boot 项目中定义多个 OpenAPI 定义？"></a>11.1. 如何在一个 Spring Boot 项目中定义多个 OpenAPI 定义？</h3><p>您可以根据以下组合定义自己的 API 组：要扫描的 API 路径和包。每个组都应该有一个唯一的<code>groupName</code>. 该组的 OpenAPI 描述，默认情况下可用于：</p>
<ul>
<li><code>http://server:port/context-path/v3/api-docs/groupName</code></li>
</ul>
<p>为了支持多个 OpenAPI 定义，<code>GroupedOpenApi</code>需要定义一个类型的 bean 。</p>
<p>对于以下 Group 定义（基于包路径），OpenAPI 描述 URL 将为：/v3/api-docs/ <strong>stores</strong></p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> GroupedOpenApi <span class="token function">storeOpenApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   String paths<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"/store/**"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> GroupedOpenApi<span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">"stores"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pathsToMatch</span><span class="token punctuation">(</span>paths<span class="token punctuation">)</span>
         <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>对于以下组定义（基于包名称），OpenAPI 描述 URL 将为：/v3/api-docs/ <strong>users</strong></p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> GroupedOpenApi <span class="token function">userOpenApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   String packagesToscan<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"test.org.springdoc.api.app68.api.user"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> GroupedOpenApi<span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">"users"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">packagesToScan</span><span class="token punctuation">(</span>packagesToscan<span class="token punctuation">)</span>
         <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>对于以下 Group 定义（基于路径），OpenAPI 描述 URL 将为：/v3/api-docs/ <strong>pets</strong></p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> GroupedOpenApi <span class="token function">petOpenApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   String paths<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"/pet/**"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> GroupedOpenApi<span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">"pets"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pathsToMatch</span><span class="token punctuation">(</span>paths<span class="token punctuation">)</span>
         <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>对于以下 Group 定义（基于包名称和路径），OpenAPI 描述 URL 将为：/v3/api-docs/ <strong>groups</strong></p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> GroupedOpenApi <span class="token function">groupOpenApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   String paths<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"/v1/**"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
   String packagesToscan<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"test.org.springdoc.api.app68.api.user"</span><span class="token punctuation">,</span> <span class="token string">"test.org.springdoc.api.app68.api.store"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> GroupedOpenApi<span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">"groups"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pathsToMatch</span><span class="token punctuation">(</span>paths<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">packagesToScan</span><span class="token punctuation">(</span>packagesToscan<span class="token punctuation">)</span>
         <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>关于使用的更多详细信息，您可以查看以下示例测试：</p>
<ul>
<li><a href="https://github.com/springdoc/springdoc-openapi/tree/master/springdoc-openapi-webmvc-core/src/test/java/test/org/springdoc/api/app68" target="_blank" rel="noopener">https://github.com/springdoc/springdoc-openapi/tree/master/springdoc-openapi-webmvc-core/src/test/java/test/org/springdoc/api/app68</a></li>
</ul>
<h3 id="11-2-如何配置-Swagger-UI？"><a href="#11-2-如何配置-Swagger-UI？" class="headerlink" title="11.2. 如何配置 Swagger UI？"></a>11.2. 如何配置 Swagger UI？</h3><ul>
<li>对 swagger 官方属性的支持可在<code>springdoc-openapi</code>. 请参阅<a href="https://swagger.io/docs/open-source-tools/swagger-ui/usage/configuration/" target="_blank" rel="noopener">官方文档</a>。</li>
<li>您可以在文档中使用与 Spring Boot 属性相同的 swagger 属性。</li>
</ul>
<blockquote>
<p>所有这些属性都应使用以下前缀声明： <code>springdoc.swagger-ui</code></p>
</blockquote>
<h3 id="11-3-如何按提供的组过滤输出规范中记录的资源？"><a href="#11-3-如何按提供的组过滤输出规范中记录的资源？" class="headerlink" title="11.3. 如何按提供的组过滤输出规范中记录的资源？"></a>11.3. 如何按提供的组过滤输出规范中记录的资源？</h3><ul>
<li>您可以使用标准<code>swagger-ui</code>属性过滤器。</li>
</ul>
<pre><code>springdoc.swagger-ui.filter=group-a</code></pre><h3 id="11-4-如何根据环境变量禁用-启用-Swagger-UI-生成？"><a href="#11-4-如何根据环境变量禁用-启用-Swagger-UI-生成？" class="headerlink" title="11.4. 如何根据环境变量禁用/启用 Swagger UI 生成？"></a>11.4. 如何根据环境变量禁用/启用 Swagger UI 生成？</h3><ul>
<li>此属性可帮助您仅禁用 UI。</li>
</ul>
<pre><code>springdoc.swagger-ui.enabled=false</code></pre><h3 id="11-5-如何在-Swagger-UI-中控制操作和标签的默认扩展设置，"><a href="#11-5-如何在-Swagger-UI-中控制操作和标签的默认扩展设置，" class="headerlink" title="11.5. 如何在 Swagger UI 中控制操作和标签的默认扩展设置，"></a>11.5. 如何在 Swagger UI 中控制操作和标签的默认扩展设置，</h3><ul>
<li>您可以在 application.yml 中设置此属性，例如：</li>
</ul>
<pre><code>springdoc.swagger-ui.doc-expansion=无</code></pre><h3 id="11-6-如何更改-的布局swagger-ui？"><a href="#11-6-如何更改-的布局swagger-ui？" class="headerlink" title="11.6. 如何更改 的布局swagger-ui？"></a>11.6. 如何更改 的布局<code>swagger-ui</code>？</h3><ul>
<li>对于布局选项，您可以使用 swagger-ui 配置选项。例如：</li>
</ul>
<pre><code>springdoc.swagger-ui.layout=BaseLayout</code></pre><h3 id="11-7-如何按字母顺序对端点进行排序？"><a href="#11-7-如何按字母顺序对端点进行排序？" class="headerlink" title="11.7. 如何按字母顺序对端点进行排序？"></a>11.7. 如何按字母顺序对端点进行排序？</h3><ul>
<li>您可以使用以下<code>springdoc-openapi</code>属性：</li>
</ul>
<pre><code>#按字母顺序排列端点
springdoc.swagger-ui.operationsSorter=alpha #
按字母顺序排列标签
springdoc.swagger-ui.tagsSorter=alpha</code></pre><h3 id="11-8-如何禁用试用按钮？"><a href="#11-8-如何禁用试用按钮？" class="headerlink" title="11.8. 如何禁用试用按钮？"></a>11.8. 如何禁用试用按钮？</h3><ul>
<li>您必须设置以下属性：</li>
</ul>
<pre><code>springdoc.swagger-ui.supportedSubmitMethods="get", "put", "post", "delete", "options", "head", "patch", "trace"</code></pre><h3 id="11-9-如何添加可重用枚举？"><a href="#11-9-如何添加可重用枚举？" class="headerlink" title="11.9. 如何添加可重用枚举？"></a>11.9. 如何添加可重用枚举？</h3><ul>
<li>你应该添加<code>@Schema(enumAsRef = true)</code>你的枚举。</li>
</ul>
<h3 id="11-10-如何明确设置要过滤的路径？"><a href="#11-10-如何明确设置要过滤的路径？" class="headerlink" title="11.10. 如何明确设置要过滤的路径？"></a>11.10. 如何明确设置要过滤的路径？</h3><ul>
<li>您可以使用以下属性设置要包含的路径列表：</li>
</ul>
<pre><code>springdoc.pathsToMatch=/v1, /api/balance/**</code></pre><h3 id="11-11-如何明确设置要扫描的包？"><a href="#11-11-如何明确设置要扫描的包？" class="headerlink" title="11.11. 如何明确设置要扫描的包？"></a>11.11. 如何明确设置要扫描的包？</h3><ul>
<li>您可以使用以下属性设置要包含的包列表：</li>
</ul>
<pre><code>springdoc.packagesToScan=package1, package2</code></pre><h3 id="11-12-如何忽略模型的某些领域？"><a href="#11-12-如何忽略模型的某些领域？" class="headerlink" title="11.12. 如何忽略模型的某些领域？"></a>11.12. 如何忽略模型的某些领域？</h3><ul>
<li>您可以在要隐藏的字段顶部使用以下注释：</li>
<li><code>@Schema(hidden = true)</code></li>
</ul>
<h3 id="11-13-如何忽略-AuthenticationPrincipalspring-security-的参数？"><a href="#11-13-如何忽略-AuthenticationPrincipalspring-security-的参数？" class="headerlink" title="11.13. 如何忽略@AuthenticationPrincipalspring-security 的参数？"></a>11.13. 如何忽略<code>@AuthenticationPrincipal</code>spring-security 的参数？</h3><ul>
<li>解决方法是使用： <code>@Parameter(hidden = true)</code></li>
<li>对于使用 的项目<code>spring-security</code>，您应该添加以下依赖项，并结合<code>springdoc-openapi-ui</code>依赖项：</li>
</ul>
<pre class="line-numbers language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springdoc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>springdoc-openapi-security<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>last.version<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="11-14-有可用的-Gradle-插件吗？"><a href="#11-14-有可用的-Gradle-插件吗？" class="headerlink" title="11.14. 有可用的 Gradle 插件吗？"></a>11.14. 有可用的 Gradle 插件吗？</h3><ul>
<li>是的。<a href="https://springdoc.org/#gradle-plugin" target="_blank" rel="noopener">gradle 插件</a>部分提供了更多详细信息。</li>
</ul>
<h3 id="11-15-如何从文档中隐藏参数？"><a href="#11-15-如何从文档中隐藏参数？" class="headerlink" title="11.15. 如何从文档中隐藏参数？"></a>11.15. 如何从文档中隐藏参数？</h3><ul>
<li>您可以使用 <code>@Parameter(hidden = true)</code></li>
</ul>
<h3 id="11-16-是否-Parameters支持注释？"><a href="#11-16-是否-Parameters支持注释？" class="headerlink" title="11.16. 是否@Parameters支持注释？"></a>11.16. 是否<code>@Parameters</code>支持注释？</h3><ul>
<li>是的</li>
</ul>
<h3 id="11-17-是否springdoc-openapi支持-Jersey？"><a href="#11-17-是否springdoc-openapi支持-Jersey？" class="headerlink" title="11.17. 是否springdoc-openapi支持 Jersey？"></a>11.17. 是否<code>springdoc-openapi</code>支持 Jersey？</h3><ul>
<li>如果您使用 JAX-RS 并作为实现 Jersey（<code>@Path</code>例如），我们不支持它。</li>
<li>我们只支持使用 Spring 管理的 bean 来暴露 Rest Endpoints（<code>@RestController</code>例如）。</li>
<li>你可以看看 swagger-jaxrs2 项目：<ul>
<li><a href="https://github.com/swagger-api/swagger-samples/tree/2.0/java/java-jersey2-minimal" target="_blank" rel="noopener">https://github.com/swagger-api/swagger-samples/tree/2.0/java/java-jersey2-minimal</a></li>
</ul>
</li>
</ul>
<h3 id="11-18-可springdoc-openapi仅生成API-RestController？"><a href="#11-18-可springdoc-openapi仅生成API-RestController？" class="headerlink" title="11.18. 可springdoc-openapi仅生成API @RestController？"></a>11.18. 可<code>springdoc-openapi</code>仅生成API <code>@RestController</code>？</h3><ul>
<li><code>@RestController</code>在类型级别上相当于<code>@Controller</code>+ <code>@RequestMapping</code>。</li>
<li>对于某些遗留应用程序，我们仍然必须同时支持两者。</li>
<li>如果您需要<code>@Controller</code>在类型级别隐藏，在这种情况下，您可以使用：<code>@Hidden</code>在控制器级别。</li>
<li>请注意，此注释还可用于从生成的文档中隐藏某些方法。</li>
</ul>
<h3 id="11-19-是否支持以下验证注释：-NotEmpty-NotBlank-PositiveOrZero-NegativeOrZero"><a href="#11-19-是否支持以下验证注释：-NotEmpty-NotBlank-PositiveOrZero-NegativeOrZero" class="headerlink" title="11.19. 是否支持以下验证注释：@NotEmpty @NotBlank @PositiveOrZero @NegativeOrZero?"></a>11.19. 是否支持以下验证注释：<code>@NotEmpty</code> <code>@NotBlank</code> <code>@PositiveOrZero</code> <code>@NegativeOrZero</code>?</h3><ul>
<li>是的</li>
</ul>
<h3 id="11-20-如何Pageable在-Swagger-UI-中将-spring-date-commons-对象映射到正确的-URL-参数？"><a href="#11-20-如何Pageable在-Swagger-UI-中将-spring-date-commons-对象映射到正确的-URL-参数？" class="headerlink" title="11.20. 如何Pageable在 Swagger UI 中将 (spring-date-commons) 对象映射到正确的 URL 参数？"></a>11.20. 如何<code>Pageable</code>在 Swagger UI 中将 (spring-date-commons) 对象映射到正确的 URL 参数？</h3><p>从<code>springdoc-openapi v1.6.0</code>. 为此，您必须将<code>@ParameterObject</code>注解与<code>Pageable</code>类型结合起来。</p>
<p>之前<code>springdoc-openapi v1.6.0</code>: * 您也可以使用 as well<code>@ParameterObject</code>而不是<code>@PageableAsQueryParam</code>HTTP<code>GET</code>方法。</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">static</span> <span class="token punctuation">{</span>
    <span class="token function">getConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceParameterObjectWithClass</span><span class="token punctuation">(</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>domain<span class="token punctuation">.</span>Pageable<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> Pageable<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">replaceParameterObjectWithClass</span><span class="token punctuation">(</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>domain<span class="token punctuation">.</span>PageRequest<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> Pageable<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>另一种解决方案是手动配置 Pageable：<ul>
<li>您必须将 Pageable 字段的显式映射声明为 Query Params 并<code>@Parameter(hidden = true) Pageable pageable</code>在 pageable 参数上添加。</li>
<li>您还应该<code>@PageableAsQueryParam</code>在方法级别声明 springdoc 提供的注解，或者如果需要定义您的自定义描述、defaultValue、…</li>
</ul>
</li>
</ul>
<p>如果要禁用 spring Pageable Type 的支持，可以使用：</p>
<pre class="line-numbers language-properties"><code class="language-properties"><span class="token attr-name">springdoc.model-converters.pageable-converter.enabled</span><span class="token punctuation">=</span><span class="token attr-value">false</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<blockquote>
<p> 该属性<code>springdoc.model-converters.pageable-converter.enabled</code>仅自 v1.5.11+ 起可用</p>
</blockquote>
<h3 id="11-21-如何在生成的描述中生成枚举？"><a href="#11-21-如何在生成的描述中生成枚举？" class="headerlink" title="11.21. 如何在生成的描述中生成枚举？"></a>11.21. 如何在生成的描述中生成枚举？</h3><ul>
<li>您可以添加一个属性<code>allowableValues</code>, 到<code>@Parameter</code>。例如：</li>
</ul>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/example"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> Object <span class="token function">example</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Parameter</span><span class="token punctuation">(</span>name <span class="token operator">=</span><span class="token string">"json"</span><span class="token punctuation">,</span> schema <span class="token operator">=</span> <span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"var 1"</span><span class="token punctuation">,</span>type <span class="token operator">=</span> <span class="token string">"string"</span><span class="token punctuation">,</span> allowableValues <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"1"</span><span class="token punctuation">,</span> <span class="token string">"2"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
String json<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> null<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>或者你可以覆盖<code>toString</code>你的枚举：</li>
</ul>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span>
<span class="token annotation punctuation">@JsonValue</span>
<span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> String<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="11-22-它真的支持-Spring-Boot-2-2-x-RELEASE-amp-HATEOAS-1-0-吗？"><a href="#11-22-它真的支持-Spring-Boot-2-2-x-RELEASE-amp-HATEOAS-1-0-吗？" class="headerlink" title="11.22. 它真的支持 Spring Boot 2.2.x.RELEASE &amp; HATEOAS 1.0 吗？"></a>11.22. 它真的支持 Spring Boot 2.2.x.RELEASE &amp; HATEOAS 1.0 吗？</h3><ul>
<li>是的</li>
</ul>
<h3 id="11-23-如何部署springdoc-openapi-ui在反向代理后面？"><a href="#11-23-如何部署springdoc-openapi-ui在反向代理后面？" class="headerlink" title="11.23. 如何部署springdoc-openapi-ui在反向代理后面？"></a>11.23. 如何部署<code>springdoc-openapi-ui</code>在反向代理后面？</h3><ul>
<li>如果您的应用程序在代理、负载平衡器或云中运行，请求信息（如主机、端口、方案……）可能会在此过程中发生变化。您的应用程序可能正在运行<code>10.10.10.10:8080</code>，但 HTTP 客户端应该只能看到<code>example.org</code>.</li>
<li><a href="https://tools.ietf.org/html/rfc7239" target="_blank" rel="noopener">RFC7239“Forwarded Headers”</a>定义了转发的HTTP头；代理可以使用此标头提供有关原始请求的信息。您可以将应用程序配置为读取这些标头，并在创建链接并将它们以 HTTP 302 响应、JSON 文档或 HTML 页面发送给客户端时自动使用该信息。还有一些非标准的标题，如：<code>X-Forwarded-Host</code>，<code>X-Forwarded-Port</code>，<code>X-Forwarded-Proto</code>，<code>X-Forwarded-Ssl</code>，和<code>X-Forwarded-Prefix</code>。</li>
<li>如果代理添加了常用的<code>X-Forwarded-For</code>and <code>X-Forwarded-Proto headers</code>，将 server.forward-headers-strategy 设置为 NATIVE 就足以支持这些。有了这个选项，Web 服务器本身就支持这个特性；您可以查看他们的特定文档以了解特定行为。</li>
<li>您需要确保在反向代理配置中设置了以下标头： <code>X-Forwarded-Prefix</code></li>
<li>例如使用Apache 2，配置：</li>
</ul>
<pre><code>RequestHeader=set X-Forwarded-Prefix "/custom-path"</code></pre><ul>
<li>然后，在您的 Spring Boot 应用程序中，确保您的应用程序处理此标头：<code>X-Forwarded-For</code>. 有两种方法可以实现这一点：</li>
</ul>
<pre><code>server.use-forward-headers=true</code></pre><ul>
<li>如果这还不够，Spring Framework 提供了一个<code>ForwardedHeaderFilter</code>. 您可以通过将 server.forward-headers-strategy 设置为 FRAMEWORK 将其注册为应用程序中的 Servlet 过滤器。</li>
<li>从 Spring Boot 2.2 开始，这是处理反向代理标头的新属性：</li>
</ul>
<pre class="line-numbers language-properties"><code class="language-properties"><span class="token attr-name">server.forward-headers-strategy</span><span class="token punctuation">=</span><span class="token attr-value">framework</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li>您可以将以下 bean 添加到您的应用程序中：</li>
</ul>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@Bean</span>
ForwardedHeaderFilter <span class="token function">forwardedHeaderFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ForwardedHeaderFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="11-24-是否-JsonView支持-Spring-MVC-API-中的注释？"><a href="#11-24-是否-JsonView支持-Spring-MVC-API-中的注释？" class="headerlink" title="11.24. 是否@JsonView支持 Spring MVC API 中的注释？"></a>11.24. 是否<code>@JsonView</code>支持 Spring MVC API 中的注释？</h3><ul>
<li>是的</li>
</ul>
<h3 id="11-25-添加springdoc-openapi-ui依赖会破坏我的public-index-html欢迎页面"><a href="#11-25-添加springdoc-openapi-ui依赖会破坏我的public-index-html欢迎页面" class="headerlink" title="11.25. 添加springdoc-openapi-ui依赖会破坏我的public/index.html欢迎页面"></a>11.25. 添加<code>springdoc-openapi-ui</code>依赖会破坏我的<code>public/index.html</code>欢迎页面</h3><ul>
<li>如果您的根目录上已经有静态内容，并且您不希望它被<code>springdoc-openapi-ui</code>配置覆盖，您可以定义 的自定义配置<code>swagger-ui</code>，以免覆盖上下文根目录中的文件配置：</li>
<li>例如使用：</li>
</ul>
<pre><code>springdoc.swagger-ui.path= /swagger-ui/api-docs.html</code></pre><h3 id="11-26-如何测试-Swagger-UI？"><a href="#11-26-如何测试-Swagger-UI？" class="headerlink" title="11.26. 如何测试 Swagger UI？"></a>11.26. 如何测试 Swagger UI？</h3><ul>
<li>你可以看看这个 UI 的示例测试：<ul>
<li><a href="https://github.com/springdoc/springdoc-openapi/blob/master/springdoc-openapi-ui/src/test/java/test/org/springdoc/ui/app1/SpringDocApp1Test.java" target="_blank" rel="noopener">https://github.com/springdoc/springdoc-openapi/blob/master/springdoc-openapi-ui/src/test/java/test/org/springdoc/ui/app1/SpringDocApp1Test.java</a></li>
</ul>
</li>
</ul>
<h3 id="11-27-如何自定义-OpenAPI-对象？"><a href="#11-27-如何自定义-OpenAPI-对象？" class="headerlink" title="11.27. 如何自定义 OpenAPI 对象？"></a>11.27. 如何自定义 OpenAPI 对象？</h3><ul>
<li>您可以编写自己的<code>OpenApiCustomiser</code>.</li>
<li>一个示例可用于：<ul>
<li><a href="https://github.com/springdoc/springdoc-openapi/blob/master/springdoc-openapi-webmvc-core/src/test/java/test/org/springdoc/api/app39/SpringDocApp39Test.java" target="_blank" rel="noopener">https://github.com/springdoc/springdoc-openapi/blob/master/springdoc-openapi-webflux-core/src/test/java/test/org/springdoc/api/app39/SpringDocTestApp.java</a></li>
</ul>
</li>
</ul>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> OpenApiCustomiser <span class="token function">consumerTypeHeaderOpenAPICustomiser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> openApi <span class="token operator">-</span><span class="token operator">></span> openApi<span class="token punctuation">.</span><span class="token function">getPaths</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>pathItem <span class="token operator">-</span><span class="token operator">></span> pathItem<span class="token punctuation">.</span><span class="token function">readOperations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>operation <span class="token operator">-</span><span class="token operator">></span> operation<span class="token punctuation">.</span><span class="token function">addParametersItem</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HeaderParameter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>$<span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">"#/components/parameters/myConsumerTypeHeader"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="11-28-如何在-Swagger-UI-中包含-spring-boot-actuator-端点？"><a href="#11-28-如何在-Swagger-UI-中包含-spring-boot-actuator-端点？" class="headerlink" title="11.28. 如何在 Swagger UI 中包含 spring-boot-actuator 端点？"></a>11.28. 如何在 Swagger UI 中包含 spring-boot-actuator 端点？</h3><ul>
<li>为了显示<code>spring-boot-actuator</code>端点，您需要添加以下属性：</li>
</ul>
<pre><code>springdoc.show-actuator=true</code></pre><h3 id="11-29-如何返回空内容作为响应？"><a href="#11-29-如何返回空内容作为响应？" class="headerlink" title="11.29. 如何返回空内容作为响应？"></a>11.29. 如何返回空内容作为响应？</h3><ul>
<li>可以使用以下语法之一将空内容作为响应处理：</li>
<li><code>content = @Content</code></li>
<li><code>content = @Content(schema = @Schema(hidden = true))</code></li>
<li>例如：</li>
</ul>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@Operation</span><span class="token punctuation">(</span>summary <span class="token operator">=</span> <span class="token string">"Get thing"</span><span class="token punctuation">,</span> responses <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token annotation punctuation">@ApiResponse</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"Successful Operation"</span><span class="token punctuation">,</span> responseCode <span class="token operator">=</span> <span class="token string">"200"</span><span class="token punctuation">,</span> content <span class="token operator">=</span> <span class="token annotation punctuation">@Content</span><span class="token punctuation">(</span>mediaType <span class="token operator">=</span> <span class="token string">"application/json"</span><span class="token punctuation">,</span> schema <span class="token operator">=</span> <span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>implementation <span class="token operator">=</span> String<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token annotation punctuation">@ApiResponse</span><span class="token punctuation">(</span>responseCode <span class="token operator">=</span> <span class="token string">"404"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"Not found"</span><span class="token punctuation">,</span> content <span class="token operator">=</span> <span class="token annotation punctuation">@Content</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token annotation punctuation">@ApiResponse</span><span class="token punctuation">(</span>responseCode <span class="token operator">=</span> <span class="token string">"401"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"Authentication Failure"</span><span class="token punctuation">,</span> content <span class="token operator">=</span> <span class="token annotation punctuation">@Content</span><span class="token punctuation">(</span>schema <span class="token operator">=</span> <span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>hidden <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>path <span class="token operator">=</span> <span class="token string">"/testme"</span><span class="token punctuation">,</span> method <span class="token operator">=</span> RequestMethod<span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
ResponseEntity<span class="token operator">&lt;</span>String<span class="token operator">></span> <span class="token function">testme</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> ResponseEntity<span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="11-30。如何支持具有多种消费媒体类型的端点？"><a href="#11-30。如何支持具有多种消费媒体类型的端点？" class="headerlink" title="11.30。如何支持具有多种消费媒体类型的端点？"></a>11.30。如何支持具有多种消费媒体类型的端点？</h3><ul>
<li>同一类上的重载方法，具有相同的 HTTP 方法和路径，因此只会生成一个 OpenAPI 操作。</li>
<li>此外，建议<code>@Operation</code>在重载方法之一的级别中设置 。否则，如果在同一个重载方法中多次声明它，它可能会被覆盖。</li>
</ul>
<h3 id="11-31-如何在编译时获得-yaml-和-json-OpenAPI-？"><a href="#11-31-如何在编译时获得-yaml-和-json-OpenAPI-？" class="headerlink" title="11.31. 如何在编译时获得 yaml 和 json (OpenAPI)？"></a>11.31. 如何在编译时获得 yaml 和 json (OpenAPI)？</h3><ul>
<li>您可以使用<code>springdoc-openapi-maven-plugin</code>此功能：<ul>
<li><a href="https://github.com/springdoc/springdoc-openapi-maven-plugin.git" target="_blank" rel="noopener">https://github.com/springdoc/springdoc-openapi-maven-plugin.git</a></li>
</ul>
</li>
<li>可以自定义输出目录（property outputDir）：默认值为：${project.build.directory}</li>
</ul>
<h3 id="11-32-文档中忽略的类型是什么？"><a href="#11-32-文档中忽略的类型是什么？" class="headerlink" title="11.32. 文档中忽略的类型是什么？"></a>11.32. 文档中忽略的类型是什么？</h3><ul>
<li><code>Principal</code>、<code>Locale</code>、<code>HttpServletRequest</code>和<code>HttpServletResponse</code>Spring MVC 支持的其他可注入参数被排除在外。</li>
<li>完整文档在这里：<ul>
<li><a href="https://docs.spring.io/spring/docs/5.1.x/spring-framework-reference/web.html#mvc-ann-arguments" target="_blank" rel="noopener">https://docs.spring.io/spring/docs/5.1.x/spring-framework-reference/web.html#mvc-ann-arguments</a></li>
</ul>
</li>
</ul>
<h3 id="11-33-如何禁用忽略的类型："><a href="#11-33-如何禁用忽略的类型：" class="headerlink" title="11.33. 如何禁用忽略的类型："></a>11.33. 如何禁用忽略的类型：</h3><p>如果您不想忽略类型、、 和其他类型<code>Principal</code>，请执行以下操作：<code>Locale``HttpServletRequest</code></p>
<pre class="line-numbers language-java"><code class="language-java">SpringDocUtils<span class="token punctuation">.</span><span class="token function">getConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeRequestWrapperToIgnore</span><span class="token punctuation">(</span>HttpServletRequest<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="11-34-如何在请求中添加授权标头？"><a href="#11-34-如何在请求中添加授权标头？" class="headerlink" title="11.34. 如何在请求中添加授权标头？"></a>11.34. 如何在请求中添加授权标头？</h3><ul>
<li>您应该将<code>@SecurityRequirement</code>标签添加到受保护的 API。</li>
<li>例如：</li>
</ul>
<pre><code>@Operation(security = { @SecurityRequirement(name = "bearer-key") })</code></pre><ul>
<li>和安全定义示例：</li>
</ul>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@Bean</span>
 <span class="token keyword">public</span> OpenAPI <span class="token function">customOpenAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OpenAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">components</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Components</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">addSecuritySchemes</span><span class="token punctuation">(</span><span class="token string">"bearer-key"</span><span class="token punctuation">,</span>
          <span class="token keyword">new</span> <span class="token class-name">SecurityScheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span>SecurityScheme<span class="token punctuation">.</span>Type<span class="token punctuation">.</span>HTTP<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scheme</span><span class="token punctuation">(</span><span class="token string">"bearer"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bearerFormat</span><span class="token punctuation">(</span><span class="token string">"JWT"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="11-35-与-Springfox-项目的区别"><a href="#11-35-与-Springfox-项目的区别" class="headerlink" title="11.35. 与 Springfox 项目的区别"></a>11.35. 与 Springfox 项目的区别</h3><ul>
<li>OAS 3 于 2017 年 7 月发布，并没有发布<code>springfox</code>支持 OAS 3 的 版本。<code>springfox</code>目前仅涵盖 swagger 2 与 Spring Boot 的集成。最新发布日期是 2018 年 6 月。所以，在维护方面，最近严重缺乏支持。</li>
<li>我们决定向前推进并与社区共享我们已经在内部项目中使用的库。</li>
<li>与<code>springfox</code>,的最大区别在于我们集成了未涵盖的新功能<code>springfox</code>：</li>
<li>Spring Boot 和 OpenAPI 3 标准之间的集成。</li>
<li>我们依赖<code>swagger-annotations</code>并且<code>swagger-ui</code>只依赖官方图书馆。</li>
<li>我们支持 Spring 5 的新特性，比如<code>spring-webflux</code>带注释的和函数式的风格。</li>
<li>我们尽最大努力回答所有问题并解决所有问题或增强请求</li>
</ul>
<h3 id="11-36-如何使用-springdoc-openapi-迁移到-OpenAPI-3"><a href="#11-36-如何使用-springdoc-openapi-迁移到-OpenAPI-3" class="headerlink" title="11.36. 如何使用 springdoc-openapi 迁移到 OpenAPI 3"></a>11.36. 如何使用 springdoc-openapi 迁移到 OpenAPI 3</h3><ul>
<li><code>springdoc-openapi</code>和之间没有关系<code>springfox</code>。如果要迁移到 OpenAPI 3：</li>
<li>删除所有依赖和相关代码到springfox</li>
<li>添加<code>springdoc-openapi-ui</code>依赖</li>
<li>如果您不想从根路径提供 UI 或与现有配置存在冲突，则只需更改以下属性：</li>
</ul>
<pre><code>springdoc.swagger-ui.path=/you-path/swagger-ui.html</code></pre><h3 id="11-37-如何设置全局标题？"><a href="#11-37-如何设置全局标题？" class="headerlink" title="11.37. 如何设置全局标题？"></a>11.37. 如何设置全局标题？</h3><ul>
<li>您可能有具有标准 OpenAPI 描述的全局参数。</li>
<li>如果您需要定义全局显示（在每个组内），无论组是否满足 GroupedOpenApi 上指定的条件，您都可以使用 OpenAPI Bean。</li>
<li>您可以在全局组件部分的参数下定义通用参数，并通过<code>$ref</code>. 您还可以定义全局标头参数。</li>
<li>为此，您可以覆盖 OpenAPI Bean，并在组件级别设置全局标头或参数定义。</li>
</ul>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> OpenAPI <span class="token function">customOpenAPI</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"${springdoc.version}"</span><span class="token punctuation">)</span> String appVersion<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OpenAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">components</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Components</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addSecuritySchemes</span><span class="token punctuation">(</span><span class="token string">"basicScheme"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SecurityScheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span>SecurityScheme<span class="token punctuation">.</span>Type<span class="token punctuation">.</span>HTTP<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scheme</span><span class="token punctuation">(</span><span class="token string">"basic"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addParameters</span><span class="token punctuation">(</span><span class="token string">"myHeader1"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Parameter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">in</span><span class="token punctuation">(</span><span class="token string">"header"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringSchema</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">"myHeader1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addHeaders</span><span class="token punctuation">(</span><span class="token string">"myHeader2"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Header</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">"myHeader2 header"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringSchema</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Info</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">"Petstore API"</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span>appVersion<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">"This is a sample server Petstore server. You can find out more about Swagger at [http://swagger.io](http://swagger.io) or on [irc.freenode.net, #swagger](http://swagger.io/irc/). For this sample, you can use the api key `special-key` to test the authorization filters."</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">termsOfService</span><span class="token punctuation">(</span><span class="token string">"http://swagger.io/terms/"</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">license</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">License</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">"Apache 2.0"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">"http://springdoc.org"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="11-38-是否支持回调？"><a href="#11-38-是否支持回调？" class="headerlink" title="11.38. 是否支持回调？"></a>11.38. 是否支持回调？</h3><ul>
<li>是的</li>
</ul>
<h3 id="11-39-如何定义-SecurityScheme-？"><a href="#11-39-如何定义-SecurityScheme-？" class="headerlink" title="11.39. 如何定义 SecurityScheme ？"></a>11.39. 如何定义 SecurityScheme ？</h3><ul>
<li>您可以使用：<code>@SecurityScheme</code>注释。</li>
<li>或者您可以通过覆盖 OpenAPI Bean 以编程方式定义它：</li>
</ul>
<pre class="line-numbers language-java"><code class="language-java"> <span class="token annotation punctuation">@Bean</span>
 <span class="token keyword">public</span> OpenAPI <span class="token function">customOpenAPI</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"${springdoc.version}"</span><span class="token punctuation">)</span> String appVersion<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OpenAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">components</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Components</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addSecuritySchemes</span><span class="token punctuation">(</span><span class="token string">"basicScheme"</span><span class="token punctuation">,</span>
   <span class="token keyword">new</span> <span class="token class-name">SecurityScheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span>SecurityScheme<span class="token punctuation">.</span>Type<span class="token punctuation">.</span>HTTP<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scheme</span><span class="token punctuation">(</span><span class="token string">"basic"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
   <span class="token function">info</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">"SpringShop API"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span>appVersion<span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">license</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">License</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">"Apache 2.0"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">"http://springdoc.org"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="11-40。如何从文档中隐藏操作或控制器？"><a href="#11-40。如何从文档中隐藏操作或控制器？" class="headerlink" title="11.40。如何从文档中隐藏操作或控制器？"></a>11.40。如何从文档中隐藏操作或控制器？</h3><ul>
<li>您可以<code>@io.swagger.v3.oas.annotations.Hidden</code>在<code>@RestController</code>,<code>@RestControllerAdvice</code>和方法级别使用注释</li>
<li>在<code>@Hidden</code>从异常处理程序构建通用（错误）响应时，会考虑异常处理程序方法的注释<code>@ControllerAdvice</code>。</li>
<li>或使用： <code>@Operation(hidden = true)</code></li>
</ul>
<h3 id="11-41-如何配置全局安全方案？"><a href="#11-41-如何配置全局安全方案？" class="headerlink" title="11.41. 如何配置全局安全方案？"></a>11.41. 如何配置全局安全方案？</h3><ul>
<li>对于全局 SecurityScheme，您可以将其添加到您自己的 OpenAPI 定义中：</li>
</ul>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> OpenAPI <span class="token function">customOpenAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OpenAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">components</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Components</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">addSecuritySchemes</span><span class="token punctuation">(</span><span class="token string">"basicScheme"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SecurityScheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span>SecurityScheme<span class="token punctuation">.</span>Type<span class="token punctuation">.</span>HTTP<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scheme</span><span class="token punctuation">(</span><span class="token string">"basic"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">"Custom API"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span><span class="token string">"100"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addTagsItem</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Tag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">"mytag"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="11-42。我可以使用带有-swagger-注释的-spring-属性吗？"><a href="#11-42。我可以使用带有-swagger-注释的-spring-属性吗？" class="headerlink" title="11.42。我可以使用带有 swagger 注释的 spring 属性吗？"></a>11.42。我可以使用带有 swagger 注释的 spring 属性吗？</h3><ul>
<li>spring 属性解析器的支持<code>@Info</code>：<code>title</code>* <code>description</code>* <code>version</code>*<code>termsOfService</code></li>
<li>spring 属性解析器的支持<code>@Info.license</code>：<code>name</code>*<code>url</code></li>
<li>spring 属性解析器的支持<code>@Info.contact</code>：<code>name</code>* <code>email</code>*<code>url</code></li>
<li>spring 属性解析器的支持<code>@Operation</code>：<code>description</code>*<code>summary</code></li>
<li>spring 属性解析器的支持<code>@Parameter</code>：<code>description</code>*<code>name</code></li>
<li>spring 属性解析器的支持<code>@ApiResponse</code>：<code>description</code></li>
<li>也可以声明以下安全 URL <code>@OAuthFlow</code>：<code>openIdConnectUrl</code>* <code>authorizationUrl</code>* <code>refreshUrl</code>*<code>tokenUrl</code></li>
<li>spring 属性解析器对<code>@Schema</code>: <code>name</code>* <code>title</code>* 的支持<code>description</code>，通过设置<code>springdoc.api-docs.resolve-schema-properties</code>为<code>true</code></li>
</ul>
<h3 id="11-43-服务器-URL-是如何生成的？"><a href="#11-43-服务器-URL-是如何生成的？" class="headerlink" title="11.43. 服务器 URL 是如何生成的？"></a>11.43. 服务器 URL 是如何生成的？</h3><ul>
<li>如果文档不存在，自动生成服务器 URL 可能很有用。</li>
<li>如果存在服务器注释，则将使用它们。</li>
</ul>
<h3 id="11-44-如何禁用-springdoc-openapi-缓存？"><a href="#11-44-如何禁用-springdoc-openapi-缓存？" class="headerlink" title="11.44. 如何禁用 springdoc-openapi 缓存？"></a>11.44. 如何禁用 springdoc-openapi 缓存？</h3><ul>
<li>默认情况下，OpenAPI 描述计算一次，然后缓存。</li>
<li>有时在内部和外部代理后面提供相同的 swagger-ui。一些用户希望在每个 http 请求上计算服务器 URL。</li>
<li>为了禁用 springdoc 缓存，您必须设置以下属性：</li>
</ul>
<pre><code>springdoc.cache.disabled=真</code></pre><h3 id="11-45。如何在不使用swagger-ui"><a href="#11-45。如何在不使用swagger-ui" class="headerlink" title="11.45。如何在不使用swagger-ui?"></a>11.45。如何在不使用<code>swagger-ui</code>?</h3><ul>
<li>您应该<code>springdoc-openapi-core</code>只使用依赖项：</li>
</ul>
<pre class="line-numbers language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springdoc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>springdoc-openapi-webmvc-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>latest.version<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="11-46-如何禁用springdoc-openapi端点？"><a href="#11-46-如何禁用springdoc-openapi端点？" class="headerlink" title="11.46. 如何禁用springdoc-openapi端点？"></a>11.46. 如何禁用<code>springdoc-openapi</code>端点？</h3><ul>
<li>使用以下属性：</li>
</ul>
<pre><code>springdoc.api-docs.enabled=false</code></pre><h3 id="11-47-如何隐藏响应的架构？"><a href="#11-47-如何隐藏响应的架构？" class="headerlink" title="11.47. 如何隐藏响应的架构？"></a>11.47. 如何隐藏响应的架构？</h3><ul>
<li>要隐藏响应元素，请使用<code>@Schema</code>注释，如下所示，在操作级别：</li>
</ul>
<pre><code>@Operation(responses = @ApiResponse(responseCode = "200", content = @Content(schema = @Schema(hidden = true))))</code></pre><ul>
<li>或直接在<code>@ApiResponses</code>级别：</li>
</ul>
<pre><code>@ApiResponses(value = {@ApiResponse(responseCode = "200", content = @Content(schema = @Schema(hidden = true))) }) 
OR 
@ApiResponse(responseCode = "404", description = "Not found",内容 = @Content)</code></pre><h3 id="11-48-swagger-ui当我设置不同的上下文路径时，的-URL-是什么？"><a href="#11-48-swagger-ui当我设置不同的上下文路径时，的-URL-是什么？" class="headerlink" title="11.48. swagger-ui当我设置不同的上下文路径时，的 URL 是什么？"></a>11.48. <code>swagger-ui</code>当我设置不同的上下文路径时，的 URL 是什么？</h3><ul>
<li>如果您使用不同的上下文路径：</li>
</ul>
<pre><code>server.servlet.context-path= /foo</code></pre><ul>
<li>在<code>swagger-ui</code>将可在以下网址：<ul>
<li><code>http://server:port/foo/swagger-ui.html</code></li>
</ul>
</li>
</ul>
<h3 id="11-49-我可以以编程方式自定义-OpenAPI-对象吗？"><a href="#11-49-我可以以编程方式自定义-OpenAPI-对象吗？" class="headerlink" title="11.49. 我可以以编程方式自定义 OpenAPI 对象吗？"></a>11.49. 我可以以编程方式自定义 OpenAPI 对象吗？</h3><ul>
<li>您可以定义自己的 OpenAPI Bean：如果您需要定义全局显示（在每个组内），无论该组是否满足 GroupedOpenApi 上指定的条件，您都可以使用 OpenAPI Bean。</li>
</ul>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> OpenAPI <span class="token function">customOpenAPI</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"${springdoc.version}"</span><span class="token punctuation">)</span> String appVersion<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OpenAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">components</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Components</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addSecuritySchemes</span><span class="token punctuation">(</span><span class="token string">"basicScheme"</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token class-name">SecurityScheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span>SecurityScheme<span class="token punctuation">.</span>Type<span class="token punctuation">.</span>HTTP<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scheme</span><span class="token punctuation">(</span><span class="token string">"basic"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">"SpringShop API"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span>appVersion<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">license</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">License</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">"Apache 2.0"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">"http://springdoc.org"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>如果您需要定义出现在特定组中，并遵守 GroupedOpenApi 上指定的条件，您可以将 OpenApiCustomiser 添加到您的 GroupedOpenApi 定义中。</li>
</ul>
<pre class="line-numbers language-java"><code class="language-java">GroupedOpenApi<span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">"users"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pathsToMatch</span><span class="token punctuation">(</span>paths<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">packagesToScan</span><span class="token punctuation">(</span>packagedToMatch<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addOpenApiCustomiser</span><span class="token punctuation">(</span><span class="token function">customerGlobalHeaderOpenApiCustomiser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> OpenApiCustomiser <span class="token function">customerGlobalHeaderOpenApiCustomiser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> openApi <span class="token operator">-</span><span class="token operator">></span> openApi<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"/foo"</span><span class="token punctuation">,</span>
   <span class="token keyword">new</span> <span class="token class-name">PathItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">operationId</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">responses</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ApiResponses</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">addApiResponse</span><span class="token punctuation">(</span><span class="token string">"default"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">ApiResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addMediaType</span><span class="token punctuation">(</span><span class="token string">"fatz"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MediaType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="11-50。在哪里可以找到演示应用程序的源代码？"><a href="#11-50。在哪里可以找到演示应用程序的源代码？" class="headerlink" title="11.50。在哪里可以找到演示应用程序的源代码？"></a>11.50。在哪里可以找到演示应用程序的源代码？</h3><ul>
<li>该应用程序的源代码可在以下 GitHub 存储库中找到：<ul>
<li><a href="https://github.com/springdoc/springdoc-openapi-demos.git" target="_blank" rel="noopener">https://github.com/springdoc/springdoc-openapi-demos.git</a></li>
</ul>
</li>
</ul>
<h3 id="11-51。这个库是否支持来自接口的注释？"><a href="#11-51。这个库是否支持来自接口的注释？" class="headerlink" title="11.51。这个库是否支持来自接口的注释？"></a>11.51。这个库是否支持来自接口的注释？</h3><ul>
<li>是的</li>
</ul>
<h3 id="11-52。排除的参数类型列表是什么？"><a href="#11-52。排除的参数类型列表是什么？" class="headerlink" title="11.52。排除的参数类型列表是什么？"></a>11.52。排除的参数类型列表是什么？</h3><ul>
<li><a href="https://docs.spring.io/spring/docs/5.1.x/spring-framework-reference/web.html#mvc-ann-arguments。" target="_blank" rel="noopener">https://docs.spring.io/spring/docs/5.1.x/spring-framework-reference/web.html#mvc-ann-arguments。</a></li>
</ul>
<h3 id="11-53。是否支持文件上传？"><a href="#11-53。是否支持文件上传？" class="headerlink" title="11.53。是否支持文件上传？"></a>11.53。是否支持文件上传？</h3><ul>
<li>该库支持主要文件类型：<code>MultipartFile</code>, <code>@RequestPart</code>,<code>FilePart</code></li>
</ul>
<h3 id="11-54。我可以使用-Parameter内部-Operation注释吗？"><a href="#11-54。我可以使用-Parameter内部-Operation注释吗？" class="headerlink" title="11.54。我可以使用@Parameter内部@Operation注释吗？"></a>11.54。我可以使用<code>@Parameter</code>内部<code>@Operation</code>注释吗？</h3><ul>
<li>是的，支持</li>
</ul>
<h3 id="11-55。为什么我的参数被标记为required？"><a href="#11-55。为什么我的参数被标记为required？" class="headerlink" title="11.55。为什么我的参数被标记为required？"></a>11.55。为什么我的参数被标记为required？</h3><ul>
<li>任何<code>@GetMapping</code>参数都标记为必需，即使<code>@RequestParam</code>缺少。</li>
<li><code>@Parameter(required=false)</code>如果您需要不同的行为，您可以添加注释。</li>
<li><code>defaultValue</code>指定的查询参数标记为必填项。</li>
</ul>
<h3 id="11-56。具有相同端点但具有不同参数的重载方法如何"><a href="#11-56。具有相同端点但具有不同参数的重载方法如何" class="headerlink" title="11.56。具有相同端点但具有不同参数的重载方法如何"></a>11.56。具有相同端点但具有不同参数的重载方法如何</h3><ul>
<li><code>springdoc</code>将这些方法呈现为单个端点。它检测过载的端点，并生成 parameters.schema.oneOf。</li>
</ul>
<h3 id="11-57。设置-Swagger-UI-以使用提供的-spec-yml-的正确方法是什么？"><a href="#11-57。设置-Swagger-UI-以使用提供的-spec-yml-的正确方法是什么？" class="headerlink" title="11.57。设置 Swagger UI 以使用提供的 spec.yml 的正确方法是什么？"></a>11.57。设置 Swagger UI 以使用提供的 spec.yml 的正确方法是什么？</h3><ul>
<li>使用此属性，所有 springdoc-openapi 自动配置 bean 都被禁用：</li>
</ul>
<pre><code>springdoc.api-docs.enabled=false</code></pre><ul>
<li>然后通过添加这个 Bean 来启用最小 bean 配置：</li>
</ul>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@Bean</span>
SpringDocConfiguration <span class="token function">springDocConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SpringDocConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> SpringDocConfigProperties <span class="token function">springDocConfigProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SpringDocConfigProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>然后配置自定义 UI yaml 文件的路径。</li>
</ul>
<pre><code>springdoc.swagger-ui.url=/api-docs.yaml</code></pre><h3 id="11-58。有没有办法通过-Parameter-标签发送授权标头？"><a href="#11-58。有没有办法通过-Parameter-标签发送授权标头？" class="headerlink" title="11.58。有没有办法通过@Parameter 标签发送授权标头？"></a>11.58。有没有办法通过@Parameter 标签发送授权标头？</h3><ul>
<li>OpenAPI 3 规范不允许显式添加 Authorization 标头。 <code>Note: Header parameters named Accept, Content-Type and Authorization are not allowed. To describe these headers</code></li>
<li>有关更多信息，您可以阅读：<ul>
<li><a href="https://swagger.io/docs/specification/describing-parameters/#header-parameters" target="_blank" rel="noopener">https://swagger.io/docs/specification/describing-parameters/#header-parameters</a></li>
</ul>
</li>
</ul>
<h3 id="11-59。我使用-Controller-注释的-Rest-Controller-被忽略了？"><a href="#11-59。我使用-Controller-注释的-Rest-Controller-被忽略了？" class="headerlink" title="11.59。我使用 @Controller 注释的 Rest Controller 被忽略了？"></a>11.59。我使用 @Controller 注释的 Rest Controller 被忽略了？</h3><ul>
<li>如果您<code>@Controller</code>没有注释，这是默认行为<code>@ResponseBody</code></li>
<li>您可以将控制器更改为<code>@RestControllers</code>. 或添加<code>@ResponseBody</code>+ <code>@Controller</code>。</li>
<li>如果不可能，您可以配置 springdoc 以使用 SpringDocUtils 扫描您的其他控制器。例如：</li>
</ul>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">static</span> <span class="token punctuation">{</span>
   SpringDocUtils<span class="token punctuation">.</span><span class="token function">getConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addRestControllers</span><span class="token punctuation">(</span>HelloController<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3 id="11-60。如何使用-application-yml-定义组？"><a href="#11-60。如何使用-application-yml-定义组？" class="headerlink" title="11.60。如何使用 application.yml 定义组？"></a>11.60。如何使用 application.yml 定义组？</h3><ul>
<li>您可以使用 spring-boot 配置文件动态加载组。</li>
<li>请注意，对于这种用法，您不必声明<strong>GroupedOpenApi</strong> Bean。</li>
<li>您需要在前缀<strong>springdoc.group-configs</strong>下声明以下属性。</li>
<li>例如：</li>
</ul>
<pre><code>springdoc.group-configs[0] 
.group =users springdoc.group-configs[0].paths-to-match=/user/** 
springdoc.group-configs[0].packages-to-scan=test.org .springdoc.api</code></pre><ul>
<li>此前缀下的属性列表可在此处获得：<ul>
<li><a href="https://springdoc.org/index.html#properties" target="_blank" rel="noopener">springdoc-openapi-属性</a></li>
</ul>
</li>
</ul>
<h3 id="11-61。如何从参数对象中提取字段？"><a href="#11-61。如何从参数对象中提取字段？" class="headerlink" title="11.61。如何从参数对象中提取字段？"></a>11.61。如何从参数对象中提取字段？</h3><ul>
<li>您可以使用 springdoc 注释@ParameterObject。</li>
<li>使用@ParameterObject 注释的请求参数将有助于将参数的每个字段添加为单独的请求参数。</li>
<li>这与映射到 POJO 对象的 Spring MVC 请求参数兼容。</li>
<li>此注释不支持嵌套参数对象。</li>
</ul>
<h3 id="11-62。如何将-Open-API-3-与-Spring-项目（不是-Spring-Boot）集成？"><a href="#11-62。如何将-Open-API-3-与-Spring-项目（不是-Spring-Boot）集成？" class="headerlink" title="11.62。如何将 Open API 3 与 Spring 项目（不是 Spring Boot）集成？"></a>11.62。如何将 Open API 3 与 Spring 项目（不是 Spring Boot）集成？</h3><p>当您的应用程序在不使用 (spring-boot) 的情况下使用 spring 时，您需要添加 spring-boot 中本机提供的 bean 和自动配置。</p>
<p>例如，假设您想在 spring-mvc 应用程序中加载 swagger-ui：</p>
<ul>
<li>您主要需要添加 springdoc-openapi 模块</li>
</ul>
<pre class="line-numbers language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springdoc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>springdoc-openapi-ui<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>last.version<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>如果您没有 spring-boot 和 spring-boot-autoconfigure 依赖项，则需要添加它们。并注意 spring.version 和 spring-boot.version 之间的兼容性矩阵。例如，在这种情况下（spring.version=5.1.12.RELEASE）：</li>
</ul>
<pre class="line-numbers language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.1.11.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-autoconfigure<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.1.11.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>扫描 spring-boot 自动为你加载的 springdoc 自动配置类。</li>
<li>根据您的模块，您可以在每个 springdoc-openapi 模块的文件 spring.factories 中找到它们。</li>
</ul>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@EnableWebMvc</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppInitializer</span> <span class="token keyword">implements</span> <span class="token class-name">WebApplicationInitializer</span> <span class="token punctuation">{</span>

   <span class="token annotation punctuation">@Override</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onStartup</span><span class="token punctuation">(</span>ServletContext servletContext<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException <span class="token punctuation">{</span>
      WebApplicationContext context <span class="token operator">=</span> <span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      servletContext<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ContextLoaderListener</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      ServletRegistration<span class="token punctuation">.</span>Dynamic dispatcher <span class="token operator">=</span> servletContext<span class="token punctuation">.</span><span class="token function">addServlet</span><span class="token punctuation">(</span><span class="token string">"RestServlet"</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token class-name">DispatcherServlet</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      dispatcher<span class="token punctuation">.</span><span class="token function">setLoadOnStartup</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      dispatcher<span class="token punctuation">.</span><span class="token function">addMapping</span><span class="token punctuation">(</span><span class="token string">"/*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">private</span> AnnotationConfigWebApplicationContext <span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      AnnotationConfigWebApplicationContext context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigWebApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      context<span class="token punctuation">.</span><span class="token function">scan</span><span class="token punctuation">(</span><span class="token string">"rest"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      context<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> org<span class="token punctuation">.</span>springdoc<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>SwaggerConfig<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
            org<span class="token punctuation">.</span>springdoc<span class="token punctuation">.</span>core<span class="token punctuation">.</span>SwaggerUiConfigProperties<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> org<span class="token punctuation">.</span>springdoc<span class="token punctuation">.</span>core<span class="token punctuation">.</span>SwaggerUiOAuthProperties<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
            org<span class="token punctuation">.</span>springdoc<span class="token punctuation">.</span>webmvc<span class="token punctuation">.</span>core<span class="token punctuation">.</span>SpringDocWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
            org<span class="token punctuation">.</span>springdoc<span class="token punctuation">.</span>webmvc<span class="token punctuation">.</span>core<span class="token punctuation">.</span>MultipleOpenApiSupportConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
            org<span class="token punctuation">.</span>springdoc<span class="token punctuation">.</span>core<span class="token punctuation">.</span>SpringDocConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> org<span class="token punctuation">.</span>springdoc<span class="token punctuation">.</span>core<span class="token punctuation">.</span>SpringDocConfigProperties<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
            org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>JacksonAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">return</span> context<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="11-63。如何使用最后一个-springdoc-openapi-SNAPSHOT-？"><a href="#11-63。如何使用最后一个-springdoc-openapi-SNAPSHOT-？" class="headerlink" title="11.63。如何使用最后一个 springdoc-openapi SNAPSHOT ？"></a>11.63。如何使用最后一个 springdoc-openapi SNAPSHOT ？</h3><ul>
<li>仅用于测试目的，您可以使用最后一个 springdoc-openapi SNAPSHOT 临时测试</li>
<li>为此，您可以在 pom.xml 或 settings.xml 中添加以下部分：</li>
</ul>
<pre class="line-numbers language-xml"><code class="language-xml">     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">></span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">></span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>snapshots-repo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">></span></span>https://s01.oss.sonatype.org/content/repositories/snapshots<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">></span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">></span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">></span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">></span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">></span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="11-64。如何使用启用-springdoc-openapi-MonetaryAmount-支持？"><a href="#11-64。如何使用启用-springdoc-openapi-MonetaryAmount-支持？" class="headerlink" title="11.64。如何使用启用 springdoc-openapi MonetaryAmount 支持？"></a>11.64。如何使用启用 springdoc-openapi MonetaryAmount 支持？</h3><ul>
<li>如果应用程序想要启用 springdoc-openapi 支持，它声明：</li>
</ul>
<pre class="line-numbers language-java"><code class="language-java">SpringDocUtils<span class="token punctuation">.</span><span class="token function">getConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceWithClass</span><span class="token punctuation">(</span>MonetaryAmount<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> org<span class="token punctuation">.</span>springdoc<span class="token punctuation">.</span>core<span class="token punctuation">.</span>converters<span class="token punctuation">.</span>models<span class="token punctuation">.</span>MonetaryAmount<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li>另一种不使用 springdoc-openapi MonetaryAmount 的解决方案是：</li>
</ul>
<pre class="line-numbers language-java"><code class="language-java">SpringDocUtils<span class="token punctuation">.</span><span class="token function">getConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceWithSchema</span><span class="token punctuation">(</span>MonetaryAmount<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ObjectSchema</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">addProperties</span><span class="token punctuation">(</span><span class="token string">"amount"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">NumberSchema</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">example</span><span class="token punctuation">(</span><span class="token number">99.96</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">addProperties</span><span class="token punctuation">(</span><span class="token string">"currency"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">StringSchema</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">example</span><span class="token punctuation">(</span><span class="token string">"USD"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3 id="11-65。如何在一个应用程序中聚合外部端点（公开-OPENAPI-3-规范）？"><a href="#11-65。如何在一个应用程序中聚合外部端点（公开-OPENAPI-3-规范）？" class="headerlink" title="11.65。如何在一个应用程序中聚合外部端点（公开 OPENAPI 3 规范）？"></a>11.65。如何在一个应用程序中聚合外部端点（公开 OPENAPI 3 规范）？</h3><p>属性<code>springdoc.swagger-ui.urls.*</code>，适合配置外部（/v3/api-docs url）。例如，如果您想在一个应用程序中聚合其他服务的所有端点。重要提示：不要忘记还需要启用 CORS。</p>
<h3 id="11-66。如何使用自定义-json-yml-文件而不是生成的文件？"><a href="#11-66。如何使用自定义-json-yml-文件而不是生成的文件？" class="headerlink" title="11.66。如何使用自定义 json/yml 文件而不是生成的文件？"></a>11.66。如何使用自定义 json/yml 文件而不是生成的文件？</h3><p>如果您的文件 open-api.json 包含 OpenAPI 3 格式的 OpenAPI 文档。然后简单地声明：文件名可以是任何你想要的，从你声明的那一刻起就一致 yaml 或 json OpenAPI 规范。</p>
<pre class="line-numbers language-properties"><code class="language-properties"><span class="token attr-name">   springdoc.swagger-ui.url</span><span class="token punctuation">=</span><span class="token attr-value">/open-api.json</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>然后文件open-api.json，应该位于：src/main/resources/static 不需要额外的配置。</p>
<h3 id="11-67。如何启用-CSRF-支持？"><a href="#11-67。如何启用-CSRF-支持？" class="headerlink" title="11.67。如何启用 CSRF 支持？"></a>11.67。如何启用 CSRF 支持？</h3><p>如果您使用标准标头。（例如使用 spring-security 标头）如果需要 CSRF 令牌，swagger-ui 会在每个 HTTP REQUEST 期间自动发送新的 XSRF-TOKEN。</p>
<p>如果您的 XSRF-TOKEN 不是基于标准的，您可以使用 requestInterceptor 手动捕获最新的 xsrf 令牌并将其附加到通过 spring 资源转换器以编程方式的请求：</p>
<ul>
<li><a href="https://github.com/swagger-api/swagger-ui/blob/master/docs/usage/configuration.md#requestinterceptor" target="_blank" rel="noopener">https://github.com/swagger-api/swagger-ui/blob/master/docs/usage/configuration.md#requestinterceptor</a></li>
</ul>
<p>从 springdoc-openapi 的 v1.4.4 版本开始，添加了一个新属性以启用 CSRF 支持，同时使用标准头名称：</p>
<pre class="line-numbers language-properties"><code class="language-properties"><span class="token attr-name">springdoc.swagger-ui.csrf.enabled</span><span class="token punctuation">=</span><span class="token attr-value">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="11-68。如何禁用默认的-swagger-petstore-URL？"><a href="#11-68。如何禁用默认的-swagger-petstore-URL？" class="headerlink" title="11.68。如何禁用默认的 swagger petstore URL？"></a>11.68。如何禁用默认的 swagger petstore URL？</h3><p>您可以使用以下属性：</p>
<pre class="line-numbers language-properties"><code class="language-properties"><span class="token attr-name">springdoc.swagger-ui.disable-swagger-default-url</span><span class="token punctuation">=</span><span class="token attr-value">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="11-69。是否支持-PageableDefault-以增强-OpenAPI-3-文档？"><a href="#11-69。是否支持-PageableDefault-以增强-OpenAPI-3-文档？" class="headerlink" title="11.69。是否支持 @PageableDefault 以增强 OpenAPI 3 文档？"></a>11.69。是否支持 @PageableDefault 以增强 OpenAPI 3 文档？</h3><p>是的，您可以将它与<code>@ParameterObject</code>注释结合使用 。此外，从 v1.4.5 开始支持spring-boot<strong>和</strong>属性<code>spring.data.web.</code><strong><code>spring.data.rest.default.</code></strong></p>
<h3 id="11-70。如何使-spring-安全登录端点可见？"><a href="#11-70。如何使-spring-安全登录端点可见？" class="headerlink" title="11.70。如何使 spring 安全登录端点可见？"></a>11.70。如何使 spring 安全登录端点可见？</h3><p>您可以使用以下属性：</p>
<pre class="line-numbers language-properties"><code class="language-properties"><span class="token attr-name">springdoc.show-login-endpoint</span><span class="token punctuation">=</span><span class="token attr-value">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="11-71。即使未引用架构，我如何显示架构定义？"><a href="#11-71。即使未引用架构，我如何显示架构定义？" class="headerlink" title="11.71。即使未引用架构，我如何显示架构定义？"></a>11.71。即使未引用架构，我如何显示架构定义？</h3><p>您可以使用以下属性：</p>
<pre class="line-numbers language-properties"><code class="language-properties"><span class="token attr-name">springdoc.remove-broken-reference-definitions</span><span class="token punctuation">=</span><span class="token attr-value">false</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="11-72。如何覆盖-Deprecated？"><a href="#11-72。如何覆盖-Deprecated？" class="headerlink" title="11.72。如何覆盖@Deprecated？"></a>11.72。如何覆盖@Deprecated？</h3><p>springdoc-openapi 的整个想法是让您的文档最接近代码，而代码更改最少。如果代码包含<code>@Deprecated</code>，sprindoc-openapi 也会将其架构视为已弃用。如果您想将 swagger 上的字段声明为不弃用，即使使用 java 代码，该字段也包含<code>@Depreacted</code>，您可以使用自 v1.4.3 版以来可用的以下属性：</p>
<pre class="line-numbers language-properties"><code class="language-properties"><span class="token attr-name">springdoc.model-converters.deprecating-converter.enabled</span><span class="token punctuation">=</span><span class="token attr-value">false</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="11-73。如何显示返回-ModelAndView-的方法？"><a href="#11-73。如何显示返回-ModelAndView-的方法？" class="headerlink" title="11.73。如何显示返回 ModelAndView 的方法？"></a>11.73。如何显示返回 ModelAndView 的方法？</h3><p>您可以使用以下属性：</p>
<pre class="line-numbers language-properties"><code class="language-properties"><span class="token attr-name">springdoc.model-and-view-allowed</span><span class="token punctuation">=</span><span class="token attr-value">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="11-74。如何获得-OpenApi-规范的漂亮打印输出？"><a href="#11-74。如何获得-OpenApi-规范的漂亮打印输出？" class="headerlink" title="11.74。如何获得 OpenApi 规范的漂亮打印输出？"></a>11.74。如何获得 OpenApi 规范的漂亮打印输出？</h3><p>您可以使用以下属性：</p>
<pre class="line-numbers language-properties"><code class="language-properties"><span class="token attr-name">springdoc.writer-with-default-pretty-printer</span><span class="token punctuation">=</span><span class="token attr-value">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="11-75。如何为同一个类定义不同的模式？"><a href="#11-75。如何为同一个类定义不同的模式？" class="headerlink" title="11.75。如何为同一个类定义不同的模式？"></a>11.75。如何为同一个类定义不同的模式？</h3><p>复杂对象总是被解析为对组件中定义的模式的引用。例如，让我们考虑一个<code>PersonDTO</code>类型为<code>workAddress</code>and<code>homeAddress</code>属性的类<code>Address</code>：</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PersonDTO</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@JsonProperty</span>
    <span class="token keyword">private</span> String email<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@JsonProperty</span>
    <span class="token keyword">private</span> String firstName<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@JsonProperty</span>
    <span class="token keyword">private</span> String lastName<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>ref <span class="token operator">=</span> <span class="token string">"WorkAddressSchema"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@JsonProperty</span>
    <span class="token keyword">private</span> Address workAddress<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>ref <span class="token operator">=</span> <span class="token string">"HomeAddressSchema"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@JsonProperty</span>
    <span class="token keyword">private</span> Address homeAddress<span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Address</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@JsonProperty</span>
    <span class="token keyword">private</span> String addressName<span class="token punctuation">;</span>

<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果你想为这个类定义两个不同的 schema，你可以设置 2 个不同的 schema，如下所示：</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> OpenAPI <span class="token function">customOpenAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OpenAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">components</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Components</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">addSchemas</span><span class="token punctuation">(</span><span class="token string">"WorkAddressSchema"</span><span class="token punctuation">,</span> <span class="token function">getSchemaWithDifferentDescription</span><span class="token punctuation">(</span>Address<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string">"work Address"</span> <span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">addSchemas</span><span class="token punctuation">(</span><span class="token string">"HomeAddressSchema"</span><span class="token punctuation">,</span> <span class="token function">getSchemaWithDifferentDescription</span><span class="token punctuation">(</span>Address<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string">"home Address"</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> Schema <span class="token function">getSchemaWithDifferentDescription</span><span class="token punctuation">(</span>Class <span class="token class-name">className</span><span class="token punctuation">,</span> String description<span class="token punctuation">)</span><span class="token punctuation">{</span>
ResolvedSchema resolvedSchema <span class="token operator">=</span> ModelConverters<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">resolveAsResolvedSchema</span><span class="token punctuation">(</span>
<span class="token keyword">new</span> <span class="token class-name">AnnotatedType</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">resolveAsRef</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> resolvedSchema<span class="token punctuation">.</span>schema<span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span>description<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="11-76。如何根据使用情况为类属性定义不同的描述？"><a href="#11-76。如何根据使用情况为类属性定义不同的描述？" class="headerlink" title="11.76。如何根据使用情况为类属性定义不同的描述？"></a>11.76。如何根据使用情况为类属性定义不同的描述？</h3><p>例如，让我们考虑一个<code>PersonDTO</code>具有<code>email</code>属性的类：</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PersonDTO</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@JsonProperty</span>
    <span class="token keyword">private</span> String email<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@JsonProperty</span>
    <span class="token keyword">private</span> String firstName<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@JsonProperty</span>
    <span class="token keyword">private</span> String lastName<span class="token punctuation">;</span>


<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果你想为 定义两个不同的描述 <code>email</code>，你可以设置 2 个不同的模式，如下所示：</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> OpenAPI <span class="token function">customOpenAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OpenAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">components</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Components</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">addSchemas</span><span class="token punctuation">(</span><span class="token string">"PersonDTO1"</span><span class="token punctuation">,</span> <span class="token function">getFieldSchemaWithDifferentDescription</span><span class="token punctuation">(</span>PersonDTO<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string">"work email"</span> <span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">addSchemas</span><span class="token punctuation">(</span><span class="token string">"PersonDTO2"</span><span class="token punctuation">,</span> <span class="token function">getFieldSchemaWithDifferentDescription</span><span class="token punctuation">(</span>PersonDTO<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string">"home email"</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> Schema <span class="token function">getFieldSchemaWithDifferentDescription</span><span class="token punctuation">(</span>Class <span class="token class-name">className</span><span class="token punctuation">,</span> String description<span class="token punctuation">)</span><span class="token punctuation">{</span>
    ResolvedSchema resolvedSchema <span class="token operator">=</span> ModelConverters<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">resolveAsResolvedSchema</span><span class="token punctuation">(</span>
                    <span class="token keyword">new</span> <span class="token class-name">AnnotatedType</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">resolveAsRef</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> resolvedSchema<span class="token punctuation">.</span>schema<span class="token punctuation">.</span><span class="token function">addProperties</span><span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">StringSchema</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span>description<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="11-77。什么是兼容性矩阵springdoc-openapi用spring-boot？"><a href="#11-77。什么是兼容性矩阵springdoc-openapi用spring-boot？" class="headerlink" title="11.77。什么是兼容性矩阵springdoc-openapi用spring-boot？"></a>11.77。什么是兼容性矩阵<code>springdoc-openapi</code>用<code>spring-boot</code>？</h3><p><code>springdoc-openapi</code>与<code>spring-boot 1</code>和兼容<code>spring-boot 2</code>。</p>
<p>一般来说，<strong>你应该只选择今天 1.6.2 的最后一个稳定版本。</strong></p>
<p>更准确地说，这是针对其<code>springdoc-openapi</code>构建的 spring-boot 版本的详尽列表：</p>
<table>
<thead>
<tr>
<th>spring-boot 版本</th>
<th>最低 springdoc-openapi 版本</th>
</tr>
</thead>
<tbody><tr>
<td><code>2.6.x</code>, <code>1.5.x</code></td>
<td><code>1.6.0</code>+</td>
</tr>
<tr>
<td><code>2.5.x</code>, <code>1.5.x</code></td>
<td><code>1.5.9</code>+</td>
</tr>
<tr>
<td><code>2.4.x</code>, <code>1.5.x</code></td>
<td><code>1.5.0</code>+</td>
</tr>
<tr>
<td><code>2.3.x</code>, <code>1.5.x</code></td>
<td><code>1.4.0</code>+</td>
</tr>
<tr>
<td><code>2.2.x</code>, <code>1.5.x</code></td>
<td><code>1.2.1</code>+</td>
</tr>
<tr>
<td><code>2.0.x</code>, <code>1.5.x</code></td>
<td><code>1.0.0</code>+</td>
</tr>
</tbody></table>
<h1 id="SwaggerHub文档"><a href="#SwaggerHub文档" class="headerlink" title="SwaggerHub文档"></a>SwaggerHub文档</h1><p>SwaggerHub 是一个协作平台，您可以在其中使用<a href="https://swagger.io/specification/" target="_blank" rel="noopener">OpenAPI 规范</a>定义 API ，并在 API 的整个生命周期中对其进行管理。SwaggerHub 是由开源 Swagger 工具背后的同一个人带给您的。它将核心 Swagger 工具（UI、编辑器、Codegen、Validator）集成到一个平台中，以帮助您协调 API 生命周期的整个工作流。</p>
<p>使用 SwaggerHub，您可以：</p>
<ul>
<li>以 OpenAPI 格式定义您的 API。</li>
<li>在一个地方托管所有 API 定义。</li>
<li>将常用 API 组件（例如数据模型和响应）存储在<a href="https://support.smartbear.com/swaggerhub/docs/domains/index.html" target="_blank" rel="noopener">域中</a>，并从 API 定义中引用它们。</li>
<li>与您的团队<a href="https://support.smartbear.com/swaggerhub/docs/collaboration/index.html" target="_blank" rel="noopener">协作</a>处理 API 定义。</li>
<li><a href="https://support.smartbear.com/swaggerhub/docs/apis/generating-code/index.html" target="_blank" rel="noopener">生成服务器和客户端代码</a>并将其推送到<a href="https://support.smartbear.com/swaggerhub/docs/integrations/github-sync.html" target="_blank" rel="noopener">GitHub</a>、<a href="https://support.smartbear.com/swaggerhub/docs/integrations/gitlab-sync.html" target="_blank" rel="noopener">GitLab</a>、<a href="https://support.smartbear.com/swaggerhub/docs/integrations/bitbucket-sync.html" target="_blank" rel="noopener">Bitbucket</a>或<a href="https://support.smartbear.com/swaggerhub/docs/integrations/azure-devops-services.html" target="_blank" rel="noopener">Azure DevOps Services</a>。</li>
<li>公开和私下共享您的 API。</li>
<li>迭代 API 设计并管理多个 API<a href="https://support.smartbear.com/swaggerhub/docs/apis/versioning.html" target="_blank" rel="noopener">版本</a>。</li>
</ul>
<h2 id="SwaggerHub-入门"><a href="#SwaggerHub-入门" class="headerlink" title="SwaggerHub 入门"></a>SwaggerHub 入门</h2><h3 id="SwaggerHub-是什么？"><a href="#SwaggerHub-是什么？" class="headerlink" title="SwaggerHub 是什么？"></a>SwaggerHub 是什么？</h3><p>SwaggerHub 是一个在线平台，您可以在其中设计 REST API——无论是公共 API、内部私有 API 还是微服务。SwaggerHub 背后的核心原则是<strong>Design First, Code</strong> later 。也就是说，您首先要布置 API、其资源、操作和数据模型，一旦设计完成，您就可以实现业务逻辑。</p>
<p>API 定义以 OpenAPI 格式（以前称为 Swagger）编写。它们保存在 SwaggerHub 云中，可以与 GitHub 或 Amazon API Gateway 等外部系统同步。您还可以在 SwaggerHub 上与您的团队协作，并随着 API 的发展维护多个版本的 API。</p>
<h3 id="什么是-OpenAPI？"><a href="#什么是-OpenAPI？" class="headerlink" title="什么是 OpenAPI？"></a>什么是 OpenAPI？</h3><p><a href="https://github.com/OAI/OpenAPI-Specification" target="_blank" rel="noopener"><strong>OpenAPI 规范</strong></a>（以前称为 Swagger 规范）是 REST API 的一种 API 描述格式。它同样适用于设计新 API 和记录现有 API。OpenAPI 可让您描述整个 API，包括可用的端点、操作、请求和响应格式、支持的身份验证方法、支持联系人和其他信息。</p>
<p>OpenAPI 规范自最初发布以来经历了多个版本。SwaggerHub 支持 OpenAPI 3.0（最新版本）和 OpenAPI 2.0。</p>
<p>OpenAPI 定义可以用 YAML 或 JSON 编写。SwaggerHub Editor 使用 YAML，但您可以导入和下载 YAML 和 JSON。</p>
<p>示例 OpenAPI 3.0 规范（采用 YAML 格式）如下所示：</p>
<pre><code>openapi: 3.0.0
info:
  title: Sample API
  version: '1.0'
servers:
  - url: https://api.example.com/v1
paths:
  /hello:
    get:
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: string</code></pre><p>这种简单的格式是人类可读的、机器可读的和不言自明的。这也是 OpenAPI 在 API 开发人员中如此受欢迎的原因之一。</p>
<h3 id="什么是-Swagger？"><a href="#什么是-Swagger？" class="headerlink" title="什么是 Swagger？"></a>什么是 Swagger？</h3><p>OpenAPI 规范的伟大之处在于有很多支持它的 API 开发工具。Swagger 就是一个例子，它是一组用于设计、构建、记录和使用 REST API 的开源工具。主要的 Swagger 工具包括：</p>
<ul>
<li>Swagger Editor – 基于浏览器的编辑器，您可以在其中编写 OpenAPI 定义。</li>
<li>Swagger UI – 将 OpenAPI 定义呈现为交互式 API 文档，例如<a href="http://petstore.swagger.io/" target="_blank" rel="noopener">http://petstore.swagger.io </a>中的文档。</li>
<li>Swagger Codegen – 基于 OpenAPI 定义生成服务器代码和客户端库。</li>
</ul>
<p>SwaggerHub 结合了这些工具以提供无缝体验，并在其上添加托管存储、访问控制和协作功能。</p>
<h3 id="SwaggerHub-用户界面概述"><a href="#SwaggerHub-用户界面概述" class="headerlink" title="SwaggerHub 用户界面概述"></a>SwaggerHub 用户界面概述</h3><p>当您登录 SwaggerHub 时， <strong>我的中心</strong>页面列出了您有权访问的所有 API。这些既是您创建的 API，也是您被邀请合作开发的 API。如果您是 SwaggerHub 的新手并且还没有 API，则该列表将为空，但一旦您开始创建 API，它就会发生变化。</p>
<p><img src="/images/loading.gif" data-original="../images/development/swaggerhub-api-explore-page.png" alt=""></p>
<p>要在 SwaggerHub 上搜索现有 API，请使用可以通过单击访问的<a href="https://support.smartbear.com/swaggerhub/docs/ui/searching.html" target="_blank" rel="noopener">搜索页面</a>在左侧边栏中。通过这种方式，您可以找到其他 SwaggerHub 用户开发的一些很棒的公共 API。有关<a href="https://support.smartbear.com/swaggerhub/docs/ui/searching.html" target="_blank" rel="noopener">搜索</a>语法，请参阅<a href="https://support.smartbear.com/swaggerhub/docs/ui/searching.html" target="_blank" rel="noopener">搜索 SwaggerHub</a>。</p>
<p><img src="/images/loading.gif" data-original="../images/development/searching.png" alt=""></p>
<p>要查看特定 API，请在列表中单击它。</p>
<p><img src="/images/loading.gif" data-original="../images/development/open-to-view.png" alt=""></p>
<p>SwaggerHub 上的 API 页面是一个拆分视图，显示您的 OpenAPI 定义的 YAML 代码以及从中生成的漂亮的参考样式 API 文档。API 文档允许用户直接在浏览器中测试 API 调用。左侧的导航面板显示了 API 中定义的操作和模型列表，让您可以跳转到 YAML 代码中的相应位置。您可以通过拖动面板之间的分隔线来调整面板的大小。</p>
<p><img src="/images/loading.gif" data-original="../images/development/editor.png" alt=""></p>
<h3 id="使用-SwaggerHub-创建示例-API"><a href="#使用-SwaggerHub-创建示例-API" class="headerlink" title="使用 SwaggerHub 创建示例 API"></a>使用 SwaggerHub 创建示例 API</h3><p>了解 SwaggerHub 的最佳方式是创建一个示例 API，让我们这样做。不要担心配置服务器。在本教程中，我们将专注于设计 API。</p>
<h4 id="步骤-1-创建-API"><a href="#步骤-1-创建-API" class="headerlink" title="步骤 1. 创建 API"></a>步骤 1. 创建 API</h4><p>在左侧边栏中，单击 并选择<strong>创建新 API</strong>。</p>
<p><img src="/images/loading.gif" data-original="../images/development/create-new-api.png" alt=""></p>
<p>填写API信息，如下图所示。</p>
<p>OpenAPI 版本指定了规范格式，OpenAPI 3.0.0 或 2.0。选择<em>3.0.0</em>（最新版本）。</p>
<p>有预定义的模板，例如<em>Petstore</em>，但是现在，让我们从一个空白的 API（无模板）开始。</p>
<p>输入<em>示例</em>作为 API 名称，<em>1.0.0</em>作为版本，<em>示例 API</em>作为标题和任意描述。</p>
<p><img src="/images/loading.gif" data-original="../images/development/create-api-2.png" alt=""></p>
<p>单击<strong>创建 API</strong>。SwaggerHub 编辑器将打开，其中预先填充了您输入的 API 元数据：</p>
<p><img src="/images/loading.gif" data-original="../images/development/new-api.png" alt=""></p>
<p>每个 API 定义都以 OpenAPI 版本开头，在我们的示例中是<code>openapi: 3.0.0</code>.</p>
<pre><code>openapi: 3.0.0</code></pre><p>下一部分<code>info</code>包含有关 API 的元数据——API 标题、描述、版本等。该<code>info</code>部分还可能包含联系信息、许可证和其他详细信息。</p>
<pre><code>info:
  title: Sample API
  version: 1.0.0
  description: This is a sample API.</code></pre><p>该<code>paths</code>部分是您定义 API 操作的地方。我们稍后会填充它。</p>
<pre><code>paths: {}</code></pre><h4 id="步骤-2-添加服务器信息"><a href="#步骤-2-添加服务器信息" class="headerlink" title="步骤 2. 添加服务器信息"></a>步骤 2. 添加服务器信息</h4><p>接下来，我们需要定义 API 服务器地址和 API 调用的基本 URL。假设 API 将位于<code>https://api.example.com/v1</code>. 这可以描述为：</p>
<pre><code>servers:
  - url: https://api.example.com/v1</code></pre><p>在<code>info</code>和之间添加这些行<code>paths</code>，如下所示：</p>
<p><img src="/images/loading.gif" data-original="../images/development/api-host-info.png" alt=""></p>
<h4 id="步骤-3-定义-GET-操作"><a href="#步骤-3-定义-GET-操作" class="headerlink" title="步骤 3. 定义 GET 操作"></a>步骤 3. 定义 GET 操作</h4><p>假设我们的 API 旨在管理用户列表。每个用户都有一个 ID，API 需要一个操作以通过他们的 ID 返回用户。那将是一个像这样的 GET 请求：</p>
<pre><code>GET /users/3
GET /users/15</code></pre><p>使用 Swagger，我们可以将这个 GET 操作描述如下。的<code>{userId}</code>部分<code>/users/{userId}</code>表示路径参数，即，一个URL组件可以变化。</p>
<pre><code>paths:
  /users/{userId}:
    get:
      summary: Returns a user by ID
      responses:
        '200':
          description: OK</code></pre><p>将上面的代码粘贴到编辑器中，替换该<code>paths: {}</code>行。您的规范应如下所示：</p>
<p><img src="/images/loading.gif" data-original="../images/development/get-operation.png" alt=""></p>
<p>请注意，在您编辑规范时，SwaggerHub 会自动更新右侧的预览。</p>
<h4 id="步骤-4-定义参数"><a href="#步骤-4-定义参数" class="headerlink" title="步骤 4. 定义参数"></a>步骤 4. 定义参数</h4><p>我们的 API 操作<code>GET /users/{userId}</code>具有<code>userId</code>指定要返回的用户 ID的参数。要在您的规范中定义此参数，请添加以下<code>parameter</code>部分：</p>
<pre><code>paths:
  /users/{userId}:
    get:
      summary: Returns a user by ID
      parameters:
        - name: userId
          in: path
          required: true
          description: The ID of the user to return
          schema:
            type: integer
      responses:
        '200':
          description: OK</code></pre><p>此代码指定参数<code>name</code>（与 URL 路径中使用的参数相同）<code>type</code>、<code>description</code>以及是否为<code>required</code>。<code>in: path</code>表示参数作为 URL 路径的一部分 ( <code>GET /users/15</code>)传递，而不是例如查询字符串参数 ( <code>GET /users?id=15</code>)。</p>
<p>请注意，添加该<code>parameters</code>部分后，预览会更新以反映新添加的参数信息：</p>
<p><img src="/images/loading.gif" data-original="../images/development/parameter.png" alt=""></p>
<h4 id="步骤-5-定义响应"><a href="#步骤-5-定义响应" class="headerlink" title="步骤 5. 定义响应"></a>步骤 5. 定义响应</h4><p>接下来，我们需要描述可能<code>responses</code>的 API 调用。响应由 HTTP 状态代码、描述和可选<code>schema</code>（响应主体的数据模型，如果有）定义。</p>
<p>假设成功调用<code>GET /users/{userId}</code>返回 HTTP 状态 200 和此 JSON 对象：</p>
<pre><code>{
  "id": 42,
  "name": "Arthur Dent"
}</code></pre><p>要描述此响应，请<code>content</code>在 200 响应下添加如下部分。该<code>content</code>部分指定响应包含 JSON 数据 ( <code>application/json</code>)。注意<code>schema</code>元素——它描述了响应主体的结构，例如返回的 JSON 对象的属性。</p>
<pre><code>paths: 
  /users/{userId}:
    get:
      ...
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string</code></pre><p>您还可以描述 API 调用可以返回的各种错误代码：</p>
<pre><code>      responses:
        ...
        '400':
          description: The specified user ID is invalid (e.g. not a number)
        '404':
          description: A user with the specified ID was not found</code></pre><p>完整的规范现在应该是这样的：</p>
<p><img src="/images/loading.gif" data-original="../images/development/responses.png" alt=""></p>
<h4 id="步骤-6-发布-API"><a href="#步骤-6-发布-API" class="headerlink" title="步骤 6. 发布 API"></a>步骤 6. 发布 API</h4><p>我们的 API 已经完成，所以让我们发布它。发布是一种告诉人们 API 处于稳定状态的方式，它将按设计工作并准备好供应用程序使用。不要担心配置服务器——本教程是关于在没有实际实现的情况下设计 API 规范。</p>
<p>要发布 API，请单击您的 API 版本旁边的下拉箭头，然后单击<img src="/images/loading.gif" data-original="../images/development/publish.png" alt="">。</p>
<p><img src="/images/loading.gif" data-original="../images/development/publish-version.png" alt=""></p>
<p>恭喜！您已经在 SwaggerHub 上发布了您的第一个 API！您可以从浏览器的地址栏中复制其地址并与他人共享。由于这是一个公共 API，任何有链接的人都可以查看它，它会显示在 SwaggerHub 的搜索结果中。如果您的 SwaggerHub 计划允许，您可以将<a href="https://support.smartbear.com/swaggerhub/docs/apis/public-and-private-apis.html" target="_blank" rel="noopener"> API</a>设为<a href="https://support.smartbear.com/swaggerhub/docs/apis/public-and-private-apis.html" target="_blank" rel="noopener">私有</a>。</p>
<p>请注意，已发布的 API 将变为只读，并且只有在再次取消发布 API 时才能对其进行编辑。如果您需要改进<code>description</code>文本或修复拼写错误，可以暂时取消发布 API 。但是对于像新操作或参数这样的重大更改，您应该使用SwaggerHub 编辑器中的“<strong>添加版本”</strong>命令来启动一个新<em>版本</em>。SwaggerHub 允许您维护 API 规范的多个版本，因此您可以处理下一个 API 版本，同时保持已发布版本（“生产”版本）的完整性。</p>
<h4 id="在-SwaggerHub-编辑器中要做的其他事情"><a href="#在-SwaggerHub-编辑器中要做的其他事情" class="headerlink" title="在 SwaggerHub 编辑器中要做的其他事情"></a>在 SwaggerHub 编辑器中要做的其他事情</h4><p>SwaggerHub 编辑器不仅仅是一个编辑器，它还提供了用于管理 API 规范并将其集成到工作流中的工具。让我们快速浏览一下其他可用的命令：</p>
<ul>
<li>这 <strong>设置</strong>菜单可让您重命名 API、将其分叉或将其转移给其他所有者。</li>
<li>“<strong>导出”</strong>菜单可让您为 API<a href="https://support.smartbear.com/swaggerhub/docs/apis/generating-code/server-stub.html" target="_blank" rel="noopener">生成服务器</a>和<a href="https://support.smartbear.com/swaggerhub/docs/apis/generating-code/client-sdk.html" target="_blank" rel="noopener">客户端</a>代码，以帮助您开始实施。您还可以在此处将 OpenAPI 定义下载为 YAML 或 JSON。</li>
</ul>
<h2 id="SwaggerHub-上的协作"><a href="#SwaggerHub-上的协作" class="headerlink" title="SwaggerHub 上的协作"></a>SwaggerHub 上的协作</h2><p>设计、开发和文档是发布优秀 API 不可或缺的一部分。在软件团队中，角色重叠，不同团队之间不断交换信息以构建完美的 API。我们将引导您完成创建和管理组织的指南，同时重点介绍如何在团队中使用 SwaggerHub 在 API 开发过程中进行迭代和审议。</p>
<h3 id="定义组织和团队"><a href="#定义组织和团队" class="headerlink" title="定义组织和团队"></a>定义组织和团队</h3><p>SwaggerHub 协作功能的构建牢记现代团队的需求，以允许 API 的迭代和跨功能开发。这可以通过在 SwaggerHub 中定义组织和团队来实现。</p>
<p>要创建组织，请单击 <strong>新建</strong>在左侧边栏中，选择<strong>创建新组织</strong>。指定<strong>组织帐户名称</strong>（唯一 ID）、<strong>组织电子邮件</strong>和可选的<strong>Title</strong>。</p>
<p><img src="/images/loading.gif" data-original="../images/development/create-organization.png" alt=""></p>
<p>成功创建组织后，您可以将现有 SwaggerHub 用户添加为组织的成员。为此，请单击<img src="/images/loading.gif" data-original="../images/development/settings.png" alt=""> 组织页面右上角的 。</p>
<p><img src="/images/loading.gif" data-original="../images/development/created-organization.png" alt=""></p>
<p>这将打开<strong>组织设置</strong>。切换到“<strong>成员”</strong>选项卡以邀请用户加入您的组织。</p>
<p>请记住，您的组织邀请将通过电子邮件发送给团队成员，由他们来接受邀请。例如，在下图中，Fernando ( <code>fbmattos</code>) 已接受组织邀请，而 Daria ( <code>daria</code>) 尚未接受。</p>
<p><img src="/images/loading.gif" data-original="../images/development/members.png" alt=""></p>
<p>组织的力量可以通过<strong>团队</strong>完全实现，该功能可以让组织所有者组成员共同处理 API。在任何组织中，您都可以在<strong>组织设置</strong>屏幕的<strong>团队</strong>选项卡上创建团队：</p>
<p><img src="/images/loading.gif" data-original="../images/development/list-of-teams.png" alt=""></p>
<p>在我们的场景中，以下团队将开发 API：</p>
<ul>
<li>API 架构师 – 负责 API 设计。</li>
<li>API 文档 - 负责记录 API。</li>
<li>API 开发——负责开发 API 的服务器端和客户端代码。</li>
</ul>
<p>我们现在已经成功创建了一个组织，添加了成员并将他们添加到团队中。</p>
<h3 id="在您的组织下创建-API"><a href="#在您的组织下创建-API" class="headerlink" title="在您的组织下创建 API"></a>在您的组织下创建 API</h3><p>我们将介绍如何在组织下从头开始创建 API，但最好记住 API 也可以导入或分叉。</p>
<p>点击 ，选择<strong>创建新 API</strong>并从<strong>所有者</strong>列表中选择您的组织。如果您不熟悉在 SwaggerHub 上创建 API，请查看<a href="https://support.smartbear.com/swaggerhub/docs/tutorials/getting-started.html" target="_blank" rel="noopener">入门指南</a>：</p>
<p><img src="/images/loading.gif" data-original="../images/development/creating-api-for-organization.png" alt=""></p>
<p>不同的利益相关者管理 API 开发过程的不同部分。每个 API 都从了解需求开始。这是供公司内部使用以构建更好软件的私有 API，还是可用于推动市场发展并提高对公司产品和服务的认识的面向公众的 API？</p>
<p>根据产品所有者和技术负责人提出的要求，API 将确定对 API 的需求，无论是公共的还是私有的。SwaggerHub 允许所有者直接在<a href="https://support.smartbear.com/swaggerhub/docs/ui/editor.html" target="_blank" rel="noopener">SwaggerHub 编辑器中</a>定义 API 的可见性：</p>
<p><img src="/images/loading.gif" data-original="../images/development/make-private.png" alt=""></p>
<p>私有 API 通常由技术主管和开发经理带头，他们认识到需要内部 API 来简化组织内其他应用程序的开发过程。产品负责人、营销经理和技术负责人通常会主导对大众开放的公共 API 的讨论。只有充分探索和设定 API 的愿景、目的和技术，API 设计和开发团队才能帮助其成为现实。</p>
<h3 id="添加协作者"><a href="#添加协作者" class="headerlink" title="添加协作者"></a>添加协作者</h3><p>SwaggerHub 上的 API，无论是公共的还是私有的，都可以有多个与其关联的协作者。创建 API 后，组织所有者可以通过 SwaggerHub 编辑器将团队作为协作者添加到 API，并使用他们选择的权限。</p>
<p><img src="/images/loading.gif" data-original="../images/development/collaborators-dialog.png" alt=""></p>
<p>协作者可以编辑 API 并通过评论与其他协作者交流。协作者可以被赋予编辑 API 的能力（编辑器）、对 API 定义的各个行进行评论（评论者）或仅仅具有查看 API 的能力（查看器）。使用评论来讨论想法或指出 SwaggerHub 编辑器中 API 定义特定行中的问题。</p>
<p>例如，API 架构师和 API 文档团队可以编辑 API 和添加注释。可以赋予开发团队添加评论的能力。讨论想法、提出问题并指出 API 定义中的问题。</p>
<h3 id="通过版本控制迭代"><a href="#通过版本控制迭代" class="headerlink" title="通过版本控制迭代"></a>通过版本控制迭代</h3><p>软件团队发布其应用程序的新版本和更新版本。这些版本建立在先前版本的基础上，添加了新的更改或错误修复，无需重写现有代码或语法。SwaggerHub 的版本控制系统可以帮助解决这个问题。协作者可以定义每个 API 的多个版本，这意味着可以在多个版本中进行新的修订和编辑，而不会覆盖源。</p>
<h5 id="添加新版本"><a href="#添加新版本" class="headerlink" title="添加新版本"></a>添加新版本</h5><p>协作者可以通过在 API 版本列表中单击<strong>添加新版</strong>本来<strong>添加新版本</strong>的 API：</p>
<p><img src="/images/loading.gif" data-original="../images/development/create-new-version.png" alt=""></p>
<p>所有合作者都将获得对新版本的即时访问，这使得继续处理 API 的多个更新变得非常简单。版本控制不仅对于跟踪修订很重要，而且对于保持最新的 API 概念和设计更新也很重要。</p>
<p>一旦团队对 API 设计感到满意，并且所有后端服务和文档都准备就绪，就可以发布 API。</p>
<p><img src="/images/loading.gif" data-original="../images/development/publish-api.png" alt=""></p>
<p>通过发布最新版本，所有可以访问 API 的用户都知道该版本是稳定的，可以安全地引用和使用。发布 API 版本使其成为只读。但是，如果您需要对已发布的版本进行一些重要更改，您可以暂时取消发布它。</p>
<h3 id="最后阶段"><a href="#最后阶段" class="headerlink" title="最后阶段"></a>最后阶段</h3><p>在您完成设计并发布 API 后，所有协作者都会收到通知并可以开始处理客户端 SDK 和后端服务。</p>
<p>SwaggerHub 支持生成服务器端模板和客户端 SDK，它负责处理所有样板代码，让开发人员可以完全专注于业务逻辑。</p>
<p><img src="/images/loading.gif" data-original="../images/development/generating-client-sdk.png" alt=""></p>
<p>设计、后端服务和客户端 SDK 准备就绪后，剩下的就是部署和管理 API，可能使用 SwaggerHub 的 API 管理<a href="https://support.smartbear.com/swaggerhub/docs/integrations/index.html" target="_blank" rel="noopener">集成</a>（如 Azure 或 AWS Gateway）。</p>
<p>使用组织、团队、成员角色、版本控制和评论的力量，SwaggerHub 为协作 API 开发提供了很好的体验。</p>
<h2 id="OpenAPI-3-0-教程"><a href="#OpenAPI-3-0-教程" class="headerlink" title="OpenAPI 3.0 教程"></a>OpenAPI 3.0 教程</h2><p>OpenAPI 3.0 是 OpenAPI 规范的最新版本，这是一种用于描述和记录 API 的开源格式。在本教程中，我们将以 OpenAPI 3.0 格式编写一个简单的 API 定义。如果您使用的是 OpenAPI 2.0 (Swagger 2.0)，请参阅<a href="https://support.smartbear.com/swaggerhub/docs/tutorials/writing-swagger-definitions.html" target="_blank" rel="noopener">本教程</a>。</p>
<h3 id="什么是-OpenAPI？-1"><a href="#什么是-OpenAPI？-1" class="headerlink" title="什么是 OpenAPI？"></a>什么是 OpenAPI？</h3><p><strong>OpenAPI 规范</strong>（以前称为 Swagger 规范）是一种用于描述和记录 API 的开源格式。该规范最初由 Reverb Technologies（原 Wordnik）于 2010 年开发，旨在使 API 设计和文档保持同步。它已成为设计和描述 RESTful API 的事实上的标准，并被数以百万计的开发人员和组织用于开发他们的 API，无论是内部的还是面向客户端的。</p>
<p>OpenAPI 的最新版本是<strong>3.0</strong>。OpenAPI 定义可以用 JSON 或 YAML 编写。我们推荐 YAML，因为它更易于阅读和编写。</p>
<p>一个简单的 OpenAPI 3.0 规范如下所示：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">openapi</span><span class="token punctuation">:</span> 3.0.0
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 1.0.0
  <span class="token key atrule">title</span><span class="token punctuation">:</span> Sample API
  <span class="token key atrule">description</span><span class="token punctuation">:</span> A sample API to illustrate OpenAPI concepts
<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/list</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Returns a list of stuff              
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successful response<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>一旦我们完成本演练，上面的语法就会有意义。</p>
<h4 id="先决条件"><a href="#先决条件" class="headerlink" title="先决条件"></a>先决条件</h4><ul>
<li>RESTful API 的基础知识。</li>
<li>推荐 YAML 基础知识。</li>
</ul>
<p>我们建议使用 SwaggerHub 的内置编辑器和验证器来快速编写和可视化本教程中描述的 OpenAPI 定义。SwaggerHub 是免费的，具有大量功能，可让您快速入门，快来试试吧！</p>
<h3 id="创建-API"><a href="#创建-API" class="headerlink" title="创建 API"></a>创建 API</h3><p>我们将为唱片公司设计一个 API。让我们假设唱片公司有一个包含以下信息的艺术家数据库：</p>
<ul>
<li>艺人姓名</li>
<li>艺术家类型</li>
<li>在该标签下发布的专辑数量</li>
<li>艺术家用户名</li>
</ul>
<p>该 API 将让消费者获取存储在数据库中的艺术家列表并将新艺术家添加到数据库中。</p>
<p>使用 OpenAPI 规范定义的 API 可以分为 3 个主要部分 -</p>
<ul>
<li>元信息</li>
<li>路径项（端点）：<ul>
<li>参数</li>
<li>请求主体</li>
<li>回应</li>
</ul>
</li>
<li>可重用组件：<ul>
<li>模式（数据模型）</li>
<li>参数</li>
<li>回应</li>
<li>其他组件</li>
</ul>
</li>
</ul>
<h4 id="元信息"><a href="#元信息" class="headerlink" title="元信息"></a>元信息</h4><p>让我们从一个简单的 API 定义开始，它只包含元信息，例如 API 标题、版本、服务器 URL 和其他描述性信息。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">openapi</span><span class="token punctuation">:</span> 3.0.0
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 1.0.0
  <span class="token key atrule">title</span><span class="token punctuation">:</span> Simple Artist API
  <span class="token key atrule">description</span><span class="token punctuation">:</span> A simple API to illustrate OpenAPI concepts

<span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.io/v1

<span class="token comment" spellcheck="true"># Basic authentication</span>
<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">securitySchemes</span><span class="token punctuation">:</span>
    <span class="token key atrule">BasicAuth</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> http
      <span class="token key atrule">scheme</span><span class="token punctuation">:</span> basic
<span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">BasicAuth</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token key atrule">paths</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>每个 API 定义都以该定义使用的 OpenAPI 规范的版本开始。在我们的示例中，它是<code>openapi: 3.0.0</code>。该<code>info</code>对象包含必需的 API<code>title</code>和<code>version</code>，以及可选的<code>description</code>.</p>
<p>该<code>servers</code>数组为 API 调用指定了一个或多个服务器 URL。API 端点路径附加到服务器 URL。一些 API 有一个服务器，其他的可能有多个服务器，例如生产和沙箱。在我们的示例中，服务器 URL 是<code>https://example.io/v1</code>。</p>
<p>我们还使用基本身份验证保护 API，以便只有授权用户才能使用 API。有关更高级的安全性，请参阅<a href="https://swagger.io/docs/specification/authentication/" target="_blank" rel="noopener">身份验证</a>。</p>
<h4 id="路径项"><a href="#路径项" class="headerlink" title="路径项"></a>路径项</h4><p>路径项是您的 API 的端点，您可以在这些端点下指定 HTTP 动词以所需的方式操作资源。这些端点与服务器 URL 相关，在我们的示例中是<code>https://example.io/v1</code>.</p>
<p>我们将定义<code>/artists</code>端点和该端点的 GET 方法。因此，客户端将用于<code>GET https://example.io/v1/artists</code>获取艺术家列表。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">openapi</span><span class="token punctuation">:</span> 3.0.0
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 1.0.0
  <span class="token key atrule">title</span><span class="token punctuation">:</span> Simple API
  <span class="token key atrule">description</span><span class="token punctuation">:</span> A simple API to illustrate OpenAPI concepts

<span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.io/v1

<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">securitySchemes</span><span class="token punctuation">:</span>
    <span class="token key atrule">BasicAuth</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> http
      <span class="token key atrule">scheme</span><span class="token punctuation">:</span> basic
<span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">BasicAuth</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token comment" spellcheck="true">#  ----- Added lines  ----------------------------------------</span>
<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/artists</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
     <span class="token key atrule">description</span><span class="token punctuation">:</span> Returns a list of artists 
<span class="token comment" spellcheck="true">#  ---- /Added lines  ----------------------------------------</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="回应"><a href="#回应" class="headerlink" title="回应"></a>回应</h4><p><code>artists</code>端点下的 GET 方法让 API 的使用者可以从 <a href="https://example.io/v1" target="_blank" rel="noopener">https://example.io/v1</a> 数据库中获取艺术家列表的详细信息。</p>
<p>每个响应至少需要一个 HTTP 状态代码来描述消费者可能期望的响应类型。该描述详细说明了 API 的响应内容。在我们的示例代码中，我们指定了 200，这是一个成功的客户端请求，而 400 是一个不成功的请求。您可以<a href="http://www.restapitutorial.com/httpstatuscodes.html" target="_blank" rel="noopener">在此处</a>找到有关 HTTP 状态代码的更多信息。成功的响应将返回艺术家姓名、流派、用户名和录制的专辑。不成功的请求在 400 HTTP 代码下描述，并带有相应的错误消息，详细说明响应无效的原因。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">openapi</span><span class="token punctuation">:</span> 3.0.0
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 1.0.0
  <span class="token key atrule">title</span><span class="token punctuation">:</span> Simple API
  <span class="token key atrule">description</span><span class="token punctuation">:</span> A simple API to illustrate OpenAPI concepts

<span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.io/v1

<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">securitySchemes</span><span class="token punctuation">:</span>
    <span class="token key atrule">BasicAuth</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> http
      <span class="token key atrule">scheme</span><span class="token punctuation">:</span> basic
<span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">BasicAuth</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/artists</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Returns a list of artists 
      <span class="token comment" spellcheck="true">#  ----- Added lines  ----------------------------------------</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successfully returned a list of artists
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> array
                <span class="token key atrule">items</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                  <span class="token key atrule">required</span><span class="token punctuation">:</span>
                    <span class="token punctuation">-</span> username
                  <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                    <span class="token key atrule">artist_name</span><span class="token punctuation">:</span>
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                    <span class="token key atrule">artist_genre</span><span class="token punctuation">:</span>
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                    <span class="token key atrule">albums_recorded</span><span class="token punctuation">:</span>
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
                    <span class="token key atrule">username</span><span class="token punctuation">:</span>
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> string

        <span class="token key atrule">'400'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Invalid request
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                <span class="token key atrule">properties</span><span class="token punctuation">:</span>   
                  <span class="token key atrule">message</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> string
      <span class="token comment" spellcheck="true">#  ---- /Added lines  ----------------------------------------</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>有关<a href="https://swagger.io/docs/specification/describing-responses/" target="_blank" rel="noopener">响应</a>的更多信息，请参阅<a href="https://swagger.io/docs/specification/describing-responses/" target="_blank" rel="noopener">描述响应</a>。</p>
<h4 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h4><p>RESTful 参数指定用户使用的资源的可变部分。如果您想获得一些有关参数的高级信息，请参阅<a href="https://swagger.io/docs/specification/describing-parameters/" target="_blank" rel="noopener">描述参数</a>。</p>
<h5 id="查询参数"><a href="#查询参数" class="headerlink" title="查询参数"></a>查询参数</h5><p><a href="https://en.wikipedia.org/wiki/Query_string" target="_blank" rel="noopener">查询参数</a>是最常见的参数类型。它们出现在 URL 末尾的问号后面。查询参数是可选的且非唯一的，因此可以在 URL 中多次指定它们。它是 URL 的非分层组件。</p>
<p>在我们的示例中，让客户端限制所需的信息而不是从数据库中返回整个艺术家列表是有意义的，这会导致服务器上不必要的负载。客户端可以描述页码（偏移量）和页面上的信息量（限制），例如：</p>
<pre><code>GET https://example.io/v1/artists?limit=20&amp;offset=3</code></pre><p>这些变量<code>parameters</code>在 OpenAPI 定义中的对象下定义。因此，规范现在看起来如下</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">openapi</span><span class="token punctuation">:</span> 3.0.0
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 1.0.0
  <span class="token key atrule">title</span><span class="token punctuation">:</span> Simple API
  <span class="token key atrule">description</span><span class="token punctuation">:</span> A simple API to illustrate OpenAPI concepts

<span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.io/v1

<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">securitySchemes</span><span class="token punctuation">:</span>
    <span class="token key atrule">BasicAuth</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> http
      <span class="token key atrule">scheme</span><span class="token punctuation">:</span> basic
<span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">BasicAuth</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/artists</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Returns a list of artists 
      <span class="token comment" spellcheck="true">#  ----- Added lines  ----------------------------------------</span>
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> limit
          <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Limits the number of items on a page
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> offset
          <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Specifies the page number of the artists to be displayed
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
      <span class="token comment" spellcheck="true">#  ---- /Added lines  ----------------------------------------         </span>

      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successfully returned a list of artists
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> array
                <span class="token key atrule">items</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                  <span class="token key atrule">required</span><span class="token punctuation">:</span>
                    <span class="token punctuation">-</span> username
                  <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                    <span class="token key atrule">artist_name</span><span class="token punctuation">:</span>
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                    <span class="token key atrule">artist_genre</span><span class="token punctuation">:</span>
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                    <span class="token key atrule">albums_recorded</span><span class="token punctuation">:</span>
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
                    <span class="token key atrule">username</span><span class="token punctuation">:</span>
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> string

        <span class="token key atrule">'400'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Invalid request
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                <span class="token key atrule">properties</span><span class="token punctuation">:</span>   
                  <span class="token key atrule">message</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> string<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="请求正文"><a href="#请求正文" class="headerlink" title="请求正文"></a>请求正文</h5><p>POST、PUT 和 PATCH 请求通常包含请求正文。请求正文是通过使用<code>requestBody</code>对象定义的。对于此 API，让我们为用户添加将艺术家发布到我们的数据库的功能。这将在<code>/artists</code>资源下。</p>
<p>API 现在将如下所示：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">openapi</span><span class="token punctuation">:</span> 3.0.0
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 1.0.0
  <span class="token key atrule">title</span><span class="token punctuation">:</span> Simple API
  <span class="token key atrule">description</span><span class="token punctuation">:</span> A simple API to illustrate OpenAPI concepts

<span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.io/v1

<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">securitySchemes</span><span class="token punctuation">:</span>
    <span class="token key atrule">BasicAuth</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> http
      <span class="token key atrule">scheme</span><span class="token punctuation">:</span> basic
<span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">BasicAuth</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/artists</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Returns a list of artists 
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> limit
          <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Limits the number of items on a page
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> offset
          <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Specifies the page number of the artists to be displayed
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successfully returned a list of artists
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> array
                <span class="token key atrule">items</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                  <span class="token key atrule">required</span><span class="token punctuation">:</span>
                    <span class="token punctuation">-</span> username
                  <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                    <span class="token key atrule">artist_name</span><span class="token punctuation">:</span>
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                    <span class="token key atrule">artist_genre</span><span class="token punctuation">:</span>
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                    <span class="token key atrule">albums_recorded</span><span class="token punctuation">:</span>
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
                    <span class="token key atrule">username</span><span class="token punctuation">:</span>
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token key atrule">'400'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Invalid request
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                <span class="token key atrule">properties</span><span class="token punctuation">:</span>   
                  <span class="token key atrule">message</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> string

    <span class="token comment" spellcheck="true">#  ----- Added lines  ----------------------------------------</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Lets a user post a new artist
      <span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">content</span><span class="token punctuation">:</span>
          <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token key atrule">type</span><span class="token punctuation">:</span> object 
              <span class="token key atrule">required</span><span class="token punctuation">:</span>
                <span class="token punctuation">-</span> username
              <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                <span class="token key atrule">artist_name</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                <span class="token key atrule">artist_genre</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                <span class="token key atrule">albums_recorded</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
                <span class="token key atrule">username</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string

      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successfully created a new artist

        <span class="token key atrule">'400'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Invalid request
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                <span class="token key atrule">properties</span><span class="token punctuation">:</span>   
                  <span class="token key atrule">message</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> string
    <span class="token comment" spellcheck="true">#  ---- /Added lines  ----------------------------------------</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="路径参数"><a href="#路径参数" class="headerlink" title="路径参数"></a>路径参数</h5><p>路径参数可用于隔离客户端正在使用的数据的特定组件，例如<code>https://example.io/v1/artists/{username}</code>。路径参数是 URL 分层组件的一部分，因此按顺序堆叠。</p>
<p>让我们创建一个新端点，它根据提供的用户名返回特定艺术家的信息。这里的路径参数将是<code>username</code>我们需要其信息的艺术家的。路径参数（<code>username</code>在这种情况下）必须<code>parameters</code>在方法下的对象中强制描述。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">openapi</span><span class="token punctuation">:</span> 3.0.0
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 1.0.0
  <span class="token key atrule">title</span><span class="token punctuation">:</span> Simple API
  <span class="token key atrule">description</span><span class="token punctuation">:</span> A simple API to illustrate OpenAPI concepts

<span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.io/v1

<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">securitySchemes</span><span class="token punctuation">:</span>
    <span class="token key atrule">BasicAuth</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> http
      <span class="token key atrule">scheme</span><span class="token punctuation">:</span> basic
<span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">BasicAuth</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/artists</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Returns a list of artists 
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> limit
          <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Limits the number of items on a page
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> offset
          <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Specifies the page number of the artists to be displayed
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successfully returned a list of artists
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> array
                <span class="token key atrule">items</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                  <span class="token key atrule">required</span><span class="token punctuation">:</span>
                    <span class="token punctuation">-</span> username
                  <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                    <span class="token key atrule">artist_name</span><span class="token punctuation">:</span>
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                    <span class="token key atrule">artist_genre</span><span class="token punctuation">:</span>
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                    <span class="token key atrule">albums_recorded</span><span class="token punctuation">:</span>
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
                    <span class="token key atrule">username</span><span class="token punctuation">:</span>
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token key atrule">'400'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Invalid request
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                <span class="token key atrule">properties</span><span class="token punctuation">:</span>   
                  <span class="token key atrule">message</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> string

    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Lets a user post a new artist
      <span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">content</span><span class="token punctuation">:</span>
          <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token key atrule">type</span><span class="token punctuation">:</span> object 
              <span class="token key atrule">required</span><span class="token punctuation">:</span>
                <span class="token punctuation">-</span> username
              <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                <span class="token key atrule">artist_name</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                <span class="token key atrule">artist_genre</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                <span class="token key atrule">albums_recorded</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
                <span class="token key atrule">username</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successfully created a new artist
        <span class="token key atrule">'400'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Invalid request
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                <span class="token key atrule">properties</span><span class="token punctuation">:</span>   
                  <span class="token key atrule">message</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> string

  <span class="token comment" spellcheck="true">#  ----- Added lines  ----------------------------------------</span>
  /artists/<span class="token punctuation">{</span>username<span class="token punctuation">}</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Obtain information about an artist from his or her unique username
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> username
          <span class="token key atrule">in</span><span class="token punctuation">:</span> path
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string

      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successfully returned an artist
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                  <span class="token key atrule">artist_name</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                  <span class="token key atrule">artist_genre</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                  <span class="token key atrule">albums_recorded</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> integer

        <span class="token key atrule">'400'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Invalid request
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> object 
                <span class="token key atrule">properties</span><span class="token punctuation">:</span>           
                  <span class="token key atrule">message</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> string
  <span class="token comment" spellcheck="true">#  ---- /Added lines  ----------------------------------------</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在这里，我们已将 指定<code>username</code>为路径参数。需要注意的是，路径参数必须将 true 属性设置为所需参数，以使规范有效。</p>
<p>如果你一直坚持到这里，那么恭喜你！您刚刚为唱片公司设计了一个简单的 API！</p>
<h3 id="可重用组件"><a href="#可重用组件" class="headerlink" title="可重用组件"></a>可重用组件</h3><p>我们刚刚描述的只是 2 个端点和 3 个动作。这是大约 130 行规范，随着 API 变大，规范只会变得更长。到目前为止，您可能会在规范中注意到的一件事是，我们有相同的艺术家模式（艺术家姓名、流派、用户名和发布的专辑），在各种 200 和 400 响应中重复。更大的 API 将涉及重写和重用许多相同的规范，因此编写更复杂的 API 将是一项乏味的任务。</p>
<p>OpenAPI 规范有一个解决方案——可重用组件，可在同一 API 中的多个端点之间使用。这些组件在全局<code>components</code>部分中定义，然后在各个端点中引用。该规范定义了各种类型的可重用组件：</p>
<ul>
<li>模式（数据模型）</li>
<li>参数</li>
<li>请求主体</li>
<li>回应</li>
<li>响应头</li>
<li>例子</li>
<li>链接</li>
<li>回调</li>
</ul>
<h4 id="模式"><a href="#模式" class="headerlink" title="模式"></a>模式</h4><p><code>schemas</code>全局<code>components</code>部分的子部分可以包含 API 使用和返回的各种数据模型。下面是我们如何<code>components</code>用来存储 HTTP 200 OK 响应的架构。我们的 API 定义已经有<code>components</code>包含的部分<code>securitySchemes</code>，现在我们移到<code>components</code>底部并添加了<code>schemas</code>小节。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">openapi</span><span class="token punctuation">:</span> 3.0.0
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 1.0.0
  <span class="token key atrule">title</span><span class="token punctuation">:</span> Simple API
  <span class="token key atrule">description</span><span class="token punctuation">:</span> A simple API to illustrate OpenAPI concepts

<span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.io/v1

<span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">BasicAuth</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/artists</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Returns a list of artists 
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> limit
          <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Limits the number of items on a page
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> offset
          <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Specifies the page number of the artists to be displayed
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successfully returned a list of artists
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> array
                <span class="token key atrule">items</span><span class="token punctuation">:</span>
                  <span class="token comment" spellcheck="true">#  ----- Added line  ----------------------------------------</span>
                  <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/Artist'</span>
                  <span class="token comment" spellcheck="true">#  ---- /Added line  ----------------------------------------</span>
        <span class="token key atrule">'400'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Invalid request
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                <span class="token key atrule">properties</span><span class="token punctuation">:</span>   
                  <span class="token key atrule">message</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> string

    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Lets a user post a new artist
      <span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">content</span><span class="token punctuation">:</span>
          <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token comment" spellcheck="true">#  ----- Added line  ----------------------------------------</span>
              <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/Artist'</span>
              <span class="token comment" spellcheck="true">#  ---- /Added line  ----------------------------------------</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successfully created a new artist
        <span class="token key atrule">'400'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Invalid request
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                <span class="token key atrule">properties</span><span class="token punctuation">:</span>   
                  <span class="token key atrule">message</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> string

  /artists/<span class="token punctuation">{</span>username<span class="token punctuation">}</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Obtain information about an artist from his or her unique username
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> username
          <span class="token key atrule">in</span><span class="token punctuation">:</span> path
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string

      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successfully returned an artist
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                  <span class="token key atrule">artist_name</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                  <span class="token key atrule">artist_genre</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                  <span class="token key atrule">albums_recorded</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> integer

        <span class="token key atrule">'400'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Invalid request
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> object 
                <span class="token key atrule">properties</span><span class="token punctuation">:</span>           
                  <span class="token key atrule">message</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> string

<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">securitySchemes</span><span class="token punctuation">:</span>
    <span class="token key atrule">BasicAuth</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> http
      <span class="token key atrule">scheme</span><span class="token punctuation">:</span> basic

  <span class="token comment" spellcheck="true">#  ----- Added lines  ----------------------------------------                </span>
  <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
    <span class="token key atrule">Artist</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> object
      <span class="token key atrule">required</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> username
      <span class="token key atrule">properties</span><span class="token punctuation">:</span>
        <span class="token key atrule">artist_name</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token key atrule">artist_genre</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token key atrule">albums_recorded</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
        <span class="token key atrule">username</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string
  <span class="token comment" spellcheck="true">#  ---- /Added lines  ----------------------------------------</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>规范不仅更短，而且在需要具有相同模式的新端点时，设计人员无需花时间编写该部分。有关更多信息，请参见<a href="https://swagger.io/docs/specification/components/" target="_blank" rel="noopener">此处</a><code>components</code>。</p>
<h4 id="参数和响应"><a href="#参数和响应" class="headerlink" title="参数和响应"></a>参数和响应</h4><p>该<code>components</code>部分还有用于存储可重用参数和响应的小节。在下面的规范，我们定义了可重复使用的查询参数<code>offset</code>和<code>limit</code>，然后在引用它们<code>/artists</code>的端点。我们还定义了一个可重用的<code>400Error</code>响应，然后我们从所有端点引用它。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">openapi</span><span class="token punctuation">:</span> 3.0.0
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 1.0.0
  <span class="token key atrule">title</span><span class="token punctuation">:</span> Simple API
  <span class="token key atrule">description</span><span class="token punctuation">:</span> A simple API to illustrate OpenAPI concepts

<span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.io/v1

<span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">BasicAuth</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/artists</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Returns a list of artists 
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token comment" spellcheck="true">#  ----- Added line  ------------------------------------------</span>
        <span class="token punctuation">-</span> <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/parameters/PageLimit'</span>
        <span class="token punctuation">-</span> <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/parameters/PageOffset'</span>
        <span class="token comment" spellcheck="true">#  ---- /Added line  ------------------------------------------</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successfully returned a list of artists
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> array
                <span class="token key atrule">items</span><span class="token punctuation">:</span>
                  <span class="token comment" spellcheck="true">#  ----- Added line  --------------------------------</span>
                  <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/Artist'</span>
                  <span class="token comment" spellcheck="true">#  ---- /Added line  --------------------------------</span>
        <span class="token key atrule">'400'</span><span class="token punctuation">:</span>
          <span class="token comment" spellcheck="true">#  ----- Added line  ----------------------------------------</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/responses/400Error'</span>
          <span class="token comment" spellcheck="true">#  ---- /Added line  ----------------------------------------</span>

    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Lets a user post a new artist
      <span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">content</span><span class="token punctuation">:</span>
          <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token comment" spellcheck="true">#  ----- Added line  ------------------------------------</span>
              <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/Artist'</span>
              <span class="token comment" spellcheck="true">#  ---- /Added line  ------------------------------------</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successfully created a new artist
        <span class="token key atrule">'400'</span><span class="token punctuation">:</span>
          <span class="token comment" spellcheck="true">#  ----- Added line  ----------------------------------------</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/responses/400Error'</span>
          <span class="token comment" spellcheck="true">#  ---- /Added line  ----------------------------------------    </span>

  /artists/<span class="token punctuation">{</span>username<span class="token punctuation">}</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Obtain information about an artist from his or her unique username
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> username
          <span class="token key atrule">in</span><span class="token punctuation">:</span> path
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string

      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successfully returned an artist
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                  <span class="token key atrule">artist_name</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                  <span class="token key atrule">artist_genre</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                  <span class="token key atrule">albums_recorded</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> integer

        <span class="token key atrule">'400'</span><span class="token punctuation">:</span>
          <span class="token comment" spellcheck="true">#  ----- Added line  ----------------------------------------</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/responses/400Error'</span>
          <span class="token comment" spellcheck="true">#  ---- /Added line  ----------------------------------------     </span>

<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">securitySchemes</span><span class="token punctuation">:</span>
    <span class="token key atrule">BasicAuth</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> http
      <span class="token key atrule">scheme</span><span class="token punctuation">:</span> basic

  <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
    <span class="token key atrule">Artist</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> object
      <span class="token key atrule">required</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> username
      <span class="token key atrule">properties</span><span class="token punctuation">:</span>
        <span class="token key atrule">artist_name</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token key atrule">artist_genre</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token key atrule">albums_recorded</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
        <span class="token key atrule">username</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string

  <span class="token comment" spellcheck="true">#  ----- Added lines  ----------------------------------------</span>
  <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
    <span class="token key atrule">PageLimit</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> limit
      <span class="token key atrule">in</span><span class="token punctuation">:</span> query
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Limits the number of items on a page
      <span class="token key atrule">schema</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> integer

    <span class="token key atrule">PageOffset</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> offset
      <span class="token key atrule">in</span><span class="token punctuation">:</span> query
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Specifies the page number of the artists to be displayed
      <span class="token key atrule">schema</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> integer

  <span class="token key atrule">responses</span><span class="token punctuation">:</span>
    <span class="token key atrule">400Error</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Invalid request
      <span class="token key atrule">content</span><span class="token punctuation">:</span>
        <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> object 
            <span class="token key atrule">properties</span><span class="token punctuation">:</span>
              <span class="token key atrule">message</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string
  <span class="token comment" spellcheck="true">#  ---- /Added lines  ----------------------------------------</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>要跳转到定义，只需单击<code>$ref</code>链接。</p>
<h2 id="Swagger-2-0"><a href="#Swagger-2-0" class="headerlink" title="Swagger 2.0"></a>Swagger 2.0</h2><h3 id="什么是-Swagger？-1"><a href="#什么是-Swagger？-1" class="headerlink" title="什么是 Swagger？"></a>什么是 Swagger？</h3><p>Swagger 是一个用于设计和描述 API 的开源框架。Swagger 的旅程始于 2010 年，当时它由 Reverb Technologies（以前称为 Wordnik）开发，用于解决保持 API 设计和文档同步的需求。快进 6 年，Swagger 已成为设计和描述 RESTful API 的事实上的标准，数以百万计的开发人员和组织使用这些 API 来开发他们的 API，无论是内部的还是面向客户端的。</p>
<p>在本教程中，我们将以<strong>Swagger 2.0</strong>格式（也称为<strong>OpenAPI 2.0</strong>）编写 API 定义。Swagger 可以使用 JSON 或 YAML 编写，但我们建议使用 YAML 编写，因为它更易于阅读和理解。</p>
<p>一个简单的 Swagger 定义如下所示：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">swagger</span><span class="token punctuation">:</span> <span class="token string">'2.0'</span>
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 1.0.0
  <span class="token key atrule">title</span><span class="token punctuation">:</span> Simple example API
  <span class="token key atrule">description</span><span class="token punctuation">:</span> An API to illustrate Swagger
<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/list</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Returns a list of stuff              
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">200</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successful response <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>一旦我们完成本演练，上面的语法就会有意义。</p>
<h3 id="为什么要Swagger？"><a href="#为什么要Swagger？" class="headerlink" title="为什么要Swagger？"></a>为什么要Swagger？</h3><p>有很多因素促使 Swagger 迅速采用构建 RESTful API。我们列出了为什么使用 Swagger 来设计 API 的最重要的一些：</p>
<ul>
<li>同时设计和记录 API，从而使蓝图和文档保持同步。</li>
<li>人类和机器可读，自动生成交互式 API 文档以查看 API 的运行情况。</li>
<li>围绕框架的大型综合工具生态系统，让您超越设计，从 SDK 生成到测试和调试。</li>
<li>强大的开源社区支持和引领该框架。</li>
</ul>
<h3 id="创建-API-1"><a href="#创建-API-1" class="headerlink" title="创建 API"></a>创建 API</h3><p>我们将为唱片公司设计一个 API。让我们假设唱片公司有一个包含以下信息的艺术家数据库：</p>
<ul>
<li>艺人姓名</li>
<li>艺术家类型</li>
<li>在该标签下发布的专辑数量</li>
<li>艺术家用户名</li>
</ul>
<p>该 API 将让消费者获取存储在数据库中的艺术家列表并将新艺术家添加到数据库中。</p>
<p>API 的 Swagger 定义可以分为 3 个不同的部分——</p>
<ul>
<li>元信息</li>
<li>路径项目：<ul>
<li>参数</li>
<li>回应</li>
</ul>
</li>
<li>可重用组件：<ul>
<li>定义</li>
<li>参数</li>
<li>回应</li>
</ul>
</li>
</ul>
<h4 id="元信息-1"><a href="#元信息-1" class="headerlink" title="元信息"></a>元信息</h4><p>元信息部分是您可以提供有关整体 API 的信息的地方。可以在本节中定义 API 的作用、API 的基本 URL 是什么以及它遵循什么基于 Web 的协议等信息。</p>
<p>所有 Swagger 定义的 API 都以<code>swagger: 2.0</code>声明开头。然后使用其他必需的元数据（如版本和标题）指定信息对象。描述是可选的。</p>
<p>基本 URL 是任何应用程序或最终用户为了使用 API 将调用的。在这种情况下，它是<code>https://example.io/v1</code>，它是由限定<code>schemes</code>，<code>host</code>和<code>basePath</code>分别对象。</p>
<p>我们还可以添加一个仅允许授权用户使用 API 的基本身份验证。如需更高级的安全性，请参见<a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md#securityDefinitionsObject" target="_blank" rel="noopener">此处</a>。</p>
<p>让我们从一个简单的元信息部分开始：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">swagger</span><span class="token punctuation">:</span> <span class="token string">'2.0'</span>
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 1.0.0
  <span class="token key atrule">title</span><span class="token punctuation">:</span> Simple Artist API
  <span class="token key atrule">description</span><span class="token punctuation">:</span> A simple API to understand the Swagger Specification in greater detail

<span class="token key atrule">schemes</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> https
<span class="token key atrule">host</span><span class="token punctuation">:</span> example.io
<span class="token key atrule">basePath</span><span class="token punctuation">:</span> /v1

<span class="token key atrule">securityDefinitions</span><span class="token punctuation">:</span>
  <span class="token key atrule">UserSecurity</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> basic

<span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">UserSecurity</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token key atrule">paths</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="路径项-1"><a href="#路径项-1" class="headerlink" title="路径项"></a>路径项</h4><p>路径项是您的 API 的端点，您可以在这些端点下指定 HTTP 动词以所需的方式操作资源。这些端点相对于基本 URL（在我们的例子中是 <code>http://example.io/v1</code>）。在此示例中，我们列出<code>/artists</code>了 GET 方法所在的端点。</p>
<p>因此，客户端将使用<strong>GET <a href="http://example.io/v1/artists" target="_blank" rel="noopener">http://example.io/v1/artists</a></strong>来获取艺术家列表。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">swagger</span><span class="token punctuation">:</span> <span class="token string">'2.0'</span>
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 0.0.0
  <span class="token key atrule">title</span><span class="token punctuation">:</span> Simple API
  <span class="token key atrule">description</span><span class="token punctuation">:</span> A simple API to understand the Swagger Specification in greater detail

<span class="token key atrule">schemes</span><span class="token punctuation">:</span> 
<span class="token punctuation">-</span> https
<span class="token key atrule">host</span><span class="token punctuation">:</span> example.io
<span class="token key atrule">basePath</span><span class="token punctuation">:</span> /v1

<span class="token key atrule">securityDefinitions</span><span class="token punctuation">:</span>
  <span class="token key atrule">UserSecurity</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> basic

<span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">UserSecurity</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> 

<span class="token comment" spellcheck="true">#  ----- Added lines  ----------------------------------------</span>
<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/artists</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
     <span class="token key atrule">description</span><span class="token punctuation">:</span> Returns a list of artists 
<span class="token comment" spellcheck="true">#  ---- /Added lines  ----------------------------------------</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="回应-1"><a href="#回应-1" class="headerlink" title="回应"></a>回应</h4><p><code>artists</code>端点下的 GET 方法让 API 的使用者可以从 <a href="http://example.io/v1" target="_blank" rel="noopener">http://example.io/v1</a> 数据库中获取艺术家列表的详细信息。</p>
<p>每个响应至少需要一个 HTTP 状态代码来描述消费者可能期望的响应类型。该描述详细说明了 API 的响应内容。在我们的示例代码中，我们指定了 200，这是一个成功的客户端请求，而 400 是一个不成功的请求。您可以<a href="http://www.restapitutorial.com/httpstatuscodes.html" target="_blank" rel="noopener">在此处</a>找到有关 HTTP 状态代码的更多信息。成功的响应将返回艺术家姓名、流派、用户名和录制的专辑。不成功的请求在 400 HTTP 代码下描述，并带有相应的错误消息，详细说明响应无效的原因。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">swagger</span><span class="token punctuation">:</span> <span class="token string">'2.0'</span>
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 1.0.0
  <span class="token key atrule">title</span><span class="token punctuation">:</span> Simple Artist API
  <span class="token key atrule">description</span><span class="token punctuation">:</span> A simple API to understand the Swagger Specification in greater detail

<span class="token key atrule">schemes</span><span class="token punctuation">:</span> 
<span class="token punctuation">-</span> https

<span class="token key atrule">host</span><span class="token punctuation">:</span> example.io
<span class="token key atrule">basePath</span><span class="token punctuation">:</span> /v1

<span class="token key atrule">securityDefinitions</span><span class="token punctuation">:</span>
  <span class="token key atrule">UserSecurity</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> basic

<span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">UserSecurity</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> 

<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/artists</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Returns a list of artists 
      <span class="token comment" spellcheck="true">#  ----- Added lines  ----------------------------------------</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">200</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successfully returned a list of artists 
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> array
            <span class="token key atrule">items</span><span class="token punctuation">:</span>
              <span class="token key atrule">type</span><span class="token punctuation">:</span> object
              <span class="token key atrule">required</span><span class="token punctuation">:</span>
               <span class="token punctuation">-</span> username
              <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                <span class="token key atrule">artist_name</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                <span class="token key atrule">artist_genre</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                <span class="token key atrule">albums_recorded</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
                <span class="token key atrule">username</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string

        <span class="token key atrule">400</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Invalid request 
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> object
            <span class="token key atrule">properties</span><span class="token punctuation">:</span>   
              <span class="token key atrule">message</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string
      <span class="token comment" spellcheck="true">#  ---- /Added lines  ----------------------------------------</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>有关响应的更多信息，请参见<a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md#responsesDefinitionsObject" target="_blank" rel="noopener">此处</a>。</p>
<h4 id="参数-1"><a href="#参数-1" class="headerlink" title="参数"></a>参数</h4><p>RESTful 参数指定用户使用的资源的可变部分。如果您想获得一些有关参数的高级信息，请阅读<a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md#parametersDefinitionsObject" target="_blank" rel="noopener">此处</a>。</p>
<h5 id="查询参数-1"><a href="#查询参数-1" class="headerlink" title="查询参数"></a>查询参数</h5><p><a href="https://en.wikipedia.org/wiki/Query_string" target="_blank" rel="noopener">查询参数</a>是最常见的参数类型。它们出现在 URL 末尾的问号后面。查询参数是可选的且非唯一的，因此可以在 URL 中多次指定它们。它是 URL 的非分层组件。</p>
<p>在我们的示例中，让客户端限制所需的信息而不是从数据库中返回整个艺术家列表是有意义的，这会导致服务器上不必要的负载。客户端可以描述页码（偏移量）和页面上的信息量（限制），例如：</p>
<pre><code>GET http://example.com/v1/artists?limit=20&amp;offset=3</code></pre><p>这些变量<code>parameters</code>在 Swagger 定义中的对象下定义。因此，定义现在看起来如下——</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">swagger</span><span class="token punctuation">:</span> <span class="token string">'2.0'</span>
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 1.0.0
  <span class="token key atrule">title</span><span class="token punctuation">:</span> Simple Artist API
  <span class="token key atrule">description</span><span class="token punctuation">:</span> A simple API to understand the Swagger Specification in greater detail
<span class="token key atrule">schemes</span><span class="token punctuation">:</span> 
<span class="token punctuation">-</span> https
<span class="token key atrule">host</span><span class="token punctuation">:</span> example.io
<span class="token key atrule">basePath</span><span class="token punctuation">:</span> /v1
<span class="token key atrule">securityDefinitions</span><span class="token punctuation">:</span>
  <span class="token key atrule">UserSecurity</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> basic
<span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">UserSecurity</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> 
<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/artists</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Returns a list of artists 
      <span class="token comment" spellcheck="true">#  ----- Added lines  ----------------------------------------</span>
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> limit
          <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Limits the number of items on a page
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> offset
          <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Specifies the page number of the artists to be displayed 
      <span class="token comment" spellcheck="true">#  ---- /Added lines  ----------------------------------------         </span>

      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">200</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successfully returned a list of artists 
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> array
            <span class="token key atrule">items</span><span class="token punctuation">:</span>
              <span class="token key atrule">type</span><span class="token punctuation">:</span> object
              <span class="token key atrule">required</span><span class="token punctuation">:</span>
               <span class="token punctuation">-</span> username
              <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                <span class="token key atrule">artist_name</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                <span class="token key atrule">artist_genre</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                <span class="token key atrule">albums_recorded</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
                <span class="token key atrule">username</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string

        <span class="token key atrule">400</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Invalid request 
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> object
            <span class="token key atrule">properties</span><span class="token punctuation">:</span>   
              <span class="token key atrule">message</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="机身参数"><a href="#机身参数" class="headerlink" title="机身参数"></a>机身参数</h5><p>正文参数在请求正文中说明。这种参数的一个关键原则是在消息体中发送资源。正文参数非常适合 POST 和 PUT 请求。不建议在 GET 和 DELETE 操作中使用这些参数。</p>
<p>对于此 API，让我们为用户添加将艺术家发布到我们的数据库的功能。这将在<code>/artists</code>资源下。请注意包含在来自<code>in:body</code>描述的请求正文中指定的参数。</p>
<p>API 现在将如下所示：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">swagger</span><span class="token punctuation">:</span> <span class="token string">'2.0'</span>
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 1.0.0
  <span class="token key atrule">title</span><span class="token punctuation">:</span> Simple Artist API
  <span class="token key atrule">description</span><span class="token punctuation">:</span> A simple API to understand the Swagger Specification in greater detail
<span class="token key atrule">schemes</span><span class="token punctuation">:</span> 
<span class="token punctuation">-</span> https
<span class="token key atrule">host</span><span class="token punctuation">:</span> example.io
<span class="token key atrule">basePath</span><span class="token punctuation">:</span> /v1
<span class="token key atrule">securityDefinitions</span><span class="token punctuation">:</span>
  <span class="token key atrule">UserSecurity</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> basic
<span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">UserSecurity</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> 
<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/artists</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Returns a list of artists 
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> limit
          <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Limits the number of items on a page
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> offset
          <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Specifies the page number of the artists to be displayed 


      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">200</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successfully returned a list of artists 
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> array
            <span class="token key atrule">items</span><span class="token punctuation">:</span>
              <span class="token key atrule">type</span><span class="token punctuation">:</span> object
              <span class="token key atrule">required</span><span class="token punctuation">:</span>
               <span class="token punctuation">-</span> username
              <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                <span class="token key atrule">artist_name</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                <span class="token key atrule">artist_genre</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                <span class="token key atrule">albums_recorded</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
                <span class="token key atrule">username</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string

        <span class="token key atrule">400</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Invalid request 
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> object
            <span class="token key atrule">properties</span><span class="token punctuation">:</span>   
              <span class="token key atrule">message</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string

    <span class="token comment" spellcheck="true">#  ----- Added lines  ----------------------------------------</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Lets a user post a new artist
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> artist
          <span class="token key atrule">in</span><span class="token punctuation">:</span> body
          <span class="token key atrule">description</span><span class="token punctuation">:</span> creates a new artist in our database
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> object 
            <span class="token key atrule">required</span><span class="token punctuation">:</span>
              <span class="token punctuation">-</span> username
            <span class="token key atrule">properties</span><span class="token punctuation">:</span>
              <span class="token key atrule">artist_name</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string
              <span class="token key atrule">artist_genre</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string
              <span class="token key atrule">albums_recorded</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
              <span class="token key atrule">username</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string

      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">200</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successfully created a new artist

        <span class="token key atrule">400</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Invalid request 
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> object
            <span class="token key atrule">properties</span><span class="token punctuation">:</span>   
              <span class="token key atrule">message</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string
    <span class="token comment" spellcheck="true">#  ---- /Added lines  ----------------------------------------</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="路径参数-1"><a href="#路径参数-1" class="headerlink" title="路径参数"></a>路径参数</h5><p>路径参数可用于隔离客户端正在使用的数据的特定组件，例如<code>http://example.io/v1/{userrole}</code>。路径参数是 URL 分层组件的一部分，因此按顺序堆叠。</p>
<p>让我们创建一个新端点，它根据提供的用户名返回特定艺术家的信息。这里的路径参数将是<code>username</code>我们需要其信息的艺术家的。路径参数（<code>username</code>在这种情况下）必须在方法下的参数对象中强制描述。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">swagger</span><span class="token punctuation">:</span> <span class="token string">'2.0'</span>
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 1.0.0
  <span class="token key atrule">title</span><span class="token punctuation">:</span> Simple Artist API
  <span class="token key atrule">description</span><span class="token punctuation">:</span> A simple API to understand the Swagger Specification in greater detail
<span class="token key atrule">schemes</span><span class="token punctuation">:</span> 
<span class="token punctuation">-</span> https
<span class="token key atrule">host</span><span class="token punctuation">:</span> example.io
<span class="token key atrule">basePath</span><span class="token punctuation">:</span> /v1
<span class="token key atrule">securityDefinitions</span><span class="token punctuation">:</span>
  <span class="token key atrule">UserSecurity</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> basic
<span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">UserSecurity</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> 
<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/artists</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Returns a list of artists 
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> limit
          <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Limits the number of items on a page
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> offset
          <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Specifies the page number of the artists to be displayed 


      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">200</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successfully returned a list of artists 
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> array
            <span class="token key atrule">items</span><span class="token punctuation">:</span>
              <span class="token key atrule">type</span><span class="token punctuation">:</span> object
              <span class="token key atrule">required</span><span class="token punctuation">:</span>
               <span class="token punctuation">-</span> username
              <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                <span class="token key atrule">artist_name</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                <span class="token key atrule">artist_genre</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                <span class="token key atrule">albums_recorded</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
                <span class="token key atrule">username</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string

        <span class="token key atrule">400</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Invalid request 
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> object
            <span class="token key atrule">properties</span><span class="token punctuation">:</span>   
              <span class="token key atrule">message</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string

    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Lets a user post a new artist
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> artist
          <span class="token key atrule">in</span><span class="token punctuation">:</span> body
          <span class="token key atrule">description</span><span class="token punctuation">:</span> creates a new artist in our database
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> object 
            <span class="token key atrule">required</span><span class="token punctuation">:</span>
              <span class="token punctuation">-</span> username
            <span class="token key atrule">properties</span><span class="token punctuation">:</span>
              <span class="token key atrule">artist_name</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string
              <span class="token key atrule">artist_genre</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string
              <span class="token key atrule">albums_recorded</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
              <span class="token key atrule">username</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string

      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">200</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successfully created a new artist

        <span class="token key atrule">400</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Invalid request 
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> object
            <span class="token key atrule">properties</span><span class="token punctuation">:</span>   
              <span class="token key atrule">message</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string
  <span class="token comment" spellcheck="true">#  ----- Added lines  ----------------------------------------</span>
  /artists/<span class="token punctuation">{</span>username<span class="token punctuation">}</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Obtain information about an artist from his or her unique username
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> username
          <span class="token key atrule">in</span><span class="token punctuation">:</span> path 
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true </span>

      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">200</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successfully returned an artist
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> object
            <span class="token key atrule">properties</span><span class="token punctuation">:</span>
              <span class="token key atrule">artist_name</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string
              <span class="token key atrule">artist_genre</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string
              <span class="token key atrule">albums_recorded</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> integer

        <span class="token key atrule">400</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Invalid request
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> object 
            <span class="token key atrule">properties</span><span class="token punctuation">:</span>           
              <span class="token key atrule">message</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string
  <span class="token comment" spellcheck="true">#  ---- /Added lines  ----------------------------------------</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在这里，我们已将 指定<code>username</code>为路径参数。需要注意的是，路径参数必须将 true 属性设置为所需参数，以使规范有效。</p>
<p>如果你一直坚持到这里，那么恭喜你！您刚刚为唱片公司设计了一个简单的 API！</p>
<h3 id="可重用组件-1"><a href="#可重用组件-1" class="headerlink" title="可重用组件"></a>可重用组件</h3><p>我们刚刚描述的只是 2 个端点和 3 个动作。这是 83 行 API 定义，规范只会随着 API 变大而变长。到目前为止，您可能会在规范中注意到的一件事是，我们有相同的艺术家模式（艺术家姓名、流派、用户名和发布的专辑），在各种 200 和 400 响应中重复。更大的 API 将涉及重写和重用许多相同的规范，因此编写更复杂的 API 将是一项乏味的任务。</p>
<p>Swagger 规范有一个解决方案——定义可重用的组件。这些组件可以在同一 API 中的多个端点、参数和响应之间重复使用。</p>
<p>API 定义中有 3 种不同类型的可重用组件：</p>
<ul>
<li>定义</li>
<li>回应</li>
<li>参数</li>
</ul>
<p>路径项也可以在 SwaggerHub 等应用程序的帮助下重用，这些应用程序存储可跨多个 API 引用的可重用组件。</p>
<h4 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h4><p>全局<code>definitions</code>部分可以包含 API 使用和返回的各种数据模型。以下是我们如何使用定义来存储 HTTP 200 OK 响应的架构：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">swagger</span><span class="token punctuation">:</span> <span class="token string">'2.0'</span>
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 1.0.0
  <span class="token key atrule">title</span><span class="token punctuation">:</span> Simple Artist API
  <span class="token key atrule">description</span><span class="token punctuation">:</span> A simple API to understand the Swagger Specification in greater detail
<span class="token key atrule">schemes</span><span class="token punctuation">:</span> 
<span class="token punctuation">-</span> https
<span class="token key atrule">host</span><span class="token punctuation">:</span> example.io
<span class="token key atrule">basePath</span><span class="token punctuation">:</span> /v1
<span class="token key atrule">securityDefinitions</span><span class="token punctuation">:</span>
  <span class="token key atrule">UserSecurity</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> basic
<span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">UserSecurity</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> 
<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/artists</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Returns a list of artists 
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> limit
          <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Limits the number of items on a page
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> offset
          <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Specifies the page number of the artists to be displayed 


      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">200</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successfully returned a list of artists 
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> array
            <span class="token key atrule">items</span><span class="token punctuation">:</span>
              <span class="token comment" spellcheck="true">#  ----- Added line  ----------------------------------------</span>
              <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/definitions/Artist'</span>
              <span class="token comment" spellcheck="true">#  ---- /Added line  ----------------------------------------</span>

        <span class="token key atrule">400</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Invalid request 
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> object
            <span class="token key atrule">properties</span><span class="token punctuation">:</span>   
              <span class="token key atrule">message</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string

    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Lets a user post a new artist
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> artist
          <span class="token key atrule">in</span><span class="token punctuation">:</span> body
          <span class="token key atrule">description</span><span class="token punctuation">:</span> creates a new artist in our database
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token comment" spellcheck="true">#  ----- Added line  ----------------------------------------</span>
            <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/definitions/Artist'</span>
            <span class="token comment" spellcheck="true">#  ---- /Added line  ----------------------------------------</span>

      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">200</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successfully created a new artist

        <span class="token key atrule">400</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Invalid request 
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> object
            <span class="token key atrule">properties</span><span class="token punctuation">:</span>   
              <span class="token key atrule">message</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string

  /artists/<span class="token punctuation">{</span>username<span class="token punctuation">}</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Obtain information about an artist from his or her unique username
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> username
          <span class="token key atrule">in</span><span class="token punctuation">:</span> path 
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true </span>

      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">200</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successfully returned an artist
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> object
            <span class="token key atrule">properties</span><span class="token punctuation">:</span>
              <span class="token key atrule">artist_name</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string
              <span class="token key atrule">artist_genre</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string
              <span class="token key atrule">albums_recorded</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> integer

        <span class="token key atrule">400</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Invalid request
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> object 
            <span class="token key atrule">properties</span><span class="token punctuation">:</span>           
              <span class="token key atrule">message</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string

<span class="token comment" spellcheck="true">#  ----- Added lines  ----------------------------------------                </span>
<span class="token key atrule">definitions</span><span class="token punctuation">:</span>
  <span class="token key atrule">Artist</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> object
    <span class="token key atrule">required</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> username
    <span class="token key atrule">properties</span><span class="token punctuation">:</span>
      <span class="token key atrule">artist_name</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
      <span class="token key atrule">artist_genre</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
      <span class="token key atrule">albums_recorded</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
      <span class="token key atrule">username</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
<span class="token comment" spellcheck="true">#  ---- /Added lines  ----------------------------------------</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>规范不仅更短，而且在需要具有相同模式的新端点时，设计人员无需花时间编写该部分。有关定义的更多信息，请参见<a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md#definitionsObject" target="_blank" rel="noopener">此处</a>。</p>
<p>要跳转到对象定义，只需单击<code>$ref</code>链接。</p>
<h4 id="参数和响应-1"><a href="#参数和响应-1" class="headerlink" title="参数和响应"></a>参数和响应</h4><p>我们还可以在可重用组件下定义一个单独的部分，用于存储可以在同一 API 中跨多个端点引用的参数和响应。</p>
<p>在下面的 API 定义中，我们在可重用参数下有<code>PageLimit</code>和<code>PageNumber</code>参数，它们定义了我们在<code>/artists</code>端点下使用的查询参数。它们在 /artists 端点下引用。</p>
<p>我们还<code>400Error</code>定义了一个可重用的响应，它指定了我们在所有端点下使用的 400 响应，然后适当地引用它们。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">swagger</span><span class="token punctuation">:</span> <span class="token string">'2.0'</span>
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 1.0.0
  <span class="token key atrule">title</span><span class="token punctuation">:</span> Simple Artist API
  <span class="token key atrule">description</span><span class="token punctuation">:</span> A simple API to understand the Swagger Specification in greater detail
<span class="token key atrule">schemes</span><span class="token punctuation">:</span> 
<span class="token punctuation">-</span> https
<span class="token key atrule">host</span><span class="token punctuation">:</span> example.io
<span class="token key atrule">basePath</span><span class="token punctuation">:</span> /v1
<span class="token key atrule">securityDefinitions</span><span class="token punctuation">:</span>
  <span class="token key atrule">UserSecurity</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> basic
<span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">UserSecurity</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> 
<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/artists</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Returns a list of artists 
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/parameters/PageLimit'</span>
        <span class="token punctuation">-</span> <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/parameters/PageNumber'</span>

      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">200</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successfully returned a list of artists 
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> array
            <span class="token key atrule">items</span><span class="token punctuation">:</span>
              <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/definitions/Artist'</span>

        <span class="token key atrule">400</span><span class="token punctuation">:</span>
          <span class="token comment" spellcheck="true">#  ----- Added line  ----------------------------------------</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/responses/400Error'</span>
          <span class="token comment" spellcheck="true">#  ---- /Added line  ----------------------------------------</span>

    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Lets a user post a new artist
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> artist
          <span class="token key atrule">in</span><span class="token punctuation">:</span> body
          <span class="token key atrule">description</span><span class="token punctuation">:</span> creates a new artist in our database
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/definitions/Artist'</span>

      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">200</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successfully created a new artist

        <span class="token key atrule">400</span><span class="token punctuation">:</span>
          <span class="token comment" spellcheck="true">#  ----- Added line  ----------------------------------------</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/responses/400Error'</span>
          <span class="token comment" spellcheck="true">#  ---- /Added line  ----------------------------------------</span>

  /artists/<span class="token punctuation">{</span>username<span class="token punctuation">}</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Obtain information about an artist from his or her unique username
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> username
          <span class="token key atrule">in</span><span class="token punctuation">:</span> path 
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true </span>

      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">200</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successfully returned an artist
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> object
            <span class="token key atrule">properties</span><span class="token punctuation">:</span>
              <span class="token key atrule">artist_name</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string
              <span class="token key atrule">artist_genre</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string
              <span class="token key atrule">albums_recorded</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> integer

        <span class="token key atrule">400</span><span class="token punctuation">:</span>
          <span class="token comment" spellcheck="true">#  ----- Added line  ----------------------------------------</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/responses/400Error'</span>
          <span class="token comment" spellcheck="true">#  ---- /Added line  ----------------------------------------                </span>

<span class="token key atrule">definitions</span><span class="token punctuation">:</span>
  <span class="token key atrule">Artist</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> object
    <span class="token key atrule">required</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> username
    <span class="token key atrule">properties</span><span class="token punctuation">:</span>
      <span class="token key atrule">artist_name</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
      <span class="token key atrule">artist_genre</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
      <span class="token key atrule">albums_recorded</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
      <span class="token key atrule">username</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
<span class="token comment" spellcheck="true">#  ----- Added lines  ----------------------------------------</span>
<span class="token key atrule">parameters</span><span class="token punctuation">:</span>
  <span class="token key atrule">PageLimit</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> limit
    <span class="token key atrule">in</span><span class="token punctuation">:</span> query
    <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
    <span class="token key atrule">description</span><span class="token punctuation">:</span> Limits the number of items on a page

  <span class="token key atrule">PageNumber</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> offset
    <span class="token key atrule">in</span><span class="token punctuation">:</span> query
    <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
    <span class="token key atrule">description</span><span class="token punctuation">:</span> Specifies the page number of the artists to be displayed
<span class="token key atrule">responses</span><span class="token punctuation">:</span>
  <span class="token key atrule">400Error</span><span class="token punctuation">:</span>
    <span class="token key atrule">description</span><span class="token punctuation">:</span> Invalid request
    <span class="token key atrule">schema</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> object 
      <span class="token key atrule">properties</span><span class="token punctuation">:</span>
        <span class="token key atrule">message</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
<span class="token comment" spellcheck="true">#  ---- /Added lines  ----------------------------------------</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="SwaggerHub-UI"><a href="#SwaggerHub-UI" class="headerlink" title="SwaggerHub UI"></a>SwaggerHub UI</h1><h2 id="SwaggerHub-用户界面概述-1"><a href="#SwaggerHub-用户界面概述-1" class="headerlink" title="SwaggerHub 用户界面概述"></a>SwaggerHub 用户界面概述</h2><p>SwaggerHub 允许您创建、编辑和托管 OpenAPI 定义，与您的团队协作处理它们并将它们与第三方服务集成。</p>
<p>匿名用户可以浏览和搜索公共 API 目录。登录用户还可以查看私有 API 以及创建和编辑 API 定义。</p>
<h3 id="SwaggerHub-API-浏览器"><a href="#SwaggerHub-API-浏览器" class="headerlink" title="SwaggerHub API 浏览器"></a>SwaggerHub API 浏览器</h3><p>当您登录 SwaggerHub 时，您会看到您有权访问的所有 API——公共和私有的、由您创建并与您共享。如果您是 SwaggerHub 的新手并且还没有 API，则该列表将为空，但一旦您开始创建 API，它就会发生变化。</p>
<p><img src="/images/loading.gif" data-original="../images/development/swaggerhub-api-explore-page-163993005987028.png" alt=""></p>
<h4 id="API-和域"><a href="#API-和域" class="headerlink" title="API 和域"></a>API 和域</h4><p>SwaggerHub 上有两种类型的定义——API 和域。<a href="https://support.smartbear.com/swaggerhub/docs/domains/index.html" target="_blank" rel="noopener">域</a>是共享部件，例如，可以在不同的API使用模型定义和操作参数的集合。API 和域在列表中具有相应的标签。</p>
<h4 id="公开、私有、已发布和未发布"><a href="#公开、私有、已发布和未发布" class="headerlink" title="公开、私有、已发布和未发布"></a>公开、私有、已发布和未发布</h4><p>所有定义都标记为<em>Public</em>或<em>Private</em>，以及<em>Published</em>或<em>Unpublished</em>。这些术语的含义不同：</p>
<ul>
<li><em>Public</em>和<em>Private</em>表示<strong>可见性</strong>。任何人都可以看到公开定义，私有定义仅对选定的合作者可见。请参阅<a href="https://support.smartbear.com/swaggerhub/docs/apis/public-and-private-apis.html" target="_blank" rel="noopener">公共和私有 API</a>。</li>
<li><em>已发布</em>和<em>未发布</em>表示<strong>成熟度</strong>或完整性。未发布的定义正在进行中，已发布的定义不应更改并已准备好使用。请参阅<a href="https://support.smartbear.com/swaggerhub/docs/apis/publishing-api.html" target="_blank" rel="noopener">发布 API</a>。</li>
</ul>
<h4 id="侧边栏"><a href="#侧边栏" class="headerlink" title="侧边栏"></a>侧边栏</h4><p>左侧的边栏允许您更改显示项目的范围：</p>
<p> <strong>我的中心</strong> – 显示您有权访问的所有公共和私人定义，无论是由您创建还是与您共享。</p>
<p> <strong>搜索</strong> – 在 SwaggerHub 上<a href="https://support.smartbear.com/swaggerhub/docs/ui/searching.html" target="_blank" rel="noopener">搜索</a>所有定义。搜索包括您有权访问的公共定义和私有定义。</p>
<p>侧边栏还列出了您所属的所有<a href="https://support.smartbear.com/swaggerhub/docs/organizations/index.html" target="_blank" rel="noopener">组织</a>和<a href="https://support.smartbear.com/swaggerhub/docs/organizations/projects/index.html" target="_blank" rel="noopener">项目</a>。选择一个组织或项目以查看其定义。</p>
<p>为方便起见，侧边栏可以展开或折叠。</p>
<p><img src="/images/loading.gif" data-original="../images/development/sidebar.png" alt=""></p>
<h4 id="与API列表交互"><a href="#与API列表交互" class="headerlink" title="与API列表交互"></a>与API列表交互</h4><ul>
<li>单击 API 或域标题将其打开。</li>
<li>单击所有者名称（在最左侧的列中）以按该所有者过滤定义。</li>
<li>对显示的定义进行排序和过滤，或使用相应的<a href="https://support.smartbear.com/swaggerhub/docs/ui/searching.html#keywords" target="_blank" rel="noopener">搜索过滤器</a>。</li>
<li>单击<img src="/images/loading.gif" data-original="../images/development/share.png" alt=""> 以复制指向 API 或域的链接。如果您是所有者，则显示的对话框还允许您邀请<a href="https://support.smartbear.com/swaggerhub/docs/collaboration/collaborators.html" target="_blank" rel="noopener">协作者</a>加入此 API 或域。</li>
<li>单击行上的任意位置以打开“详细信息”窗格。详细信息包括完整说明、创建日期和上次更新日期。</li>
</ul>
<p><img src="/images/loading.gif" data-original="../images/development/details-pane.png" alt=""></p>
<h3 id="创建-API-2"><a href="#创建-API-2" class="headerlink" title="创建 API"></a>创建 API</h3><p>使用 <strong>创建新</strong>菜单以创建新的 API、域和组织。</p>
<h3 id="组织"><a href="#组织" class="headerlink" title="组织"></a>组织</h3><p>边栏中的<strong>组织</strong>部分列出了您创建或加入的所有<a href="https://support.smartbear.com/swaggerhub/docs/organizations/index.html" target="_blank" rel="noopener">组织</a>。组织是一起处理 API 定义的用户组。一个用户可以是多个组织的成员。</p>
<p>单击一个组织以查看您有权访问的所有 API 和域。如果您是组织所有者，则可以通过单击访问组织设置 在侧边栏中的组织名称旁边。</p>
<h3 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h3><p>您通过单击访问的<a href="https://app.swaggerhub.com/search" target="_blank" rel="noopener">搜索页面</a>左侧边栏中的 可让您在 SwaggerHub 上的数千个 API 和域中进行搜索。在<strong>我的枢纽</strong>和组织的网页也有一个搜索栏，你必须与组织的定义中访问的定义中进行搜索，分别。</p>
<h3 id="设置"><a href="#设置" class="headerlink" title="设置"></a>设置</h3><p>您用户名下的菜单可让您访问您的帐户设置。您可以使用它来更改您的电子邮件或密码、查看或更改您的计划、重命名您的帐户、管理您的组织等。</p>
<p><img src="/images/loading.gif" data-original="../images/development/settings-menu.png" alt=""></p>
<h2 id="SwaggerHub-Editor"><a href="#SwaggerHub-Editor" class="headerlink" title="SwaggerHub Editor"></a>SwaggerHub Editor</h2><p>SwaggerHub 允许您直接在浏览器中编写 API 定义并实时预览生成的 API 文档。</p>
<p>此外，您可以使用 Visual Studio Code 的 SwaggerHub 扩展，您可以在其中创建、编辑和验证 API 定义和域。该扩展与 SwaggerHub 同步，您所做的所有更改都会自动推送到它。在<a href="https://marketplace.visualstudio.com/items?itemName=SmartBearSoftware.vscode-swaggerhub" target="_blank" rel="noopener">Visual Studio Marketplace 中</a>了解有关 SwaggerHub 扩展的更多信息。</p>
<p>SwaggerHub 支持<strong>OpenAPI 2.0</strong>和<strong>OpenAPI 3.0</strong>（有一些<a href="https://support.smartbear.com/swaggerhub/docs/openapi-3-support.html" target="_blank" rel="noopener">限制</a>）。API 定义以<strong>YAML</strong>格式存储。您可以导入或粘贴 JSON，它将被转换为 YAML。请注意，您可以<a href="https://support.smartbear.com/swaggerhub/docs/apis/downloading-swagger-definition.html" target="_blank" rel="noopener">下载</a>YAML 和 JSON 两种格式的<a href="https://support.smartbear.com/swaggerhub/docs/apis/downloading-swagger-definition.html" target="_blank" rel="noopener">OpenAPI 定义</a>。</p>
<h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>SwaggerHub 编辑器是一个拆分视图，左侧是编辑器，右侧是<a href="https://support.smartbear.com/swaggerhub/docs/ui/interactive-documentation.html" target="_blank" rel="noopener">交互式 API 文档</a>。编辑器有两种模式：</p>
<ul>
<li><strong>代码编辑器</strong>可让您编辑 API 定义的 YAML 代码。该编辑器支持 OpenAPI 关键字的自动补全、语法高亮、搜索和替换操作、代码折叠和<a href="https://support.smartbear.com/swaggerhub/docs/ui/editor.html#shortcuts" target="_blank" rel="noopener">键盘快捷键</a>。</li>
<li><img src="/images/loading.gif" data-original="../images/development/show-visual-editor.png" alt=""> <a href="https://support.smartbear.com/swaggerhub/docs/ui/visual-editor.html" target="_blank" rel="noopener"><strong>可视化编辑器</strong></a>让您无需了解 OpenAPI 语法即可编辑 API 元数据和操作元数据。</li>
</ul>
<p>您可以使用左侧边栏中的按钮在代码编辑器和可视化编辑器之间切换。编辑器每 2 分钟自动保存一次草稿，您也可以随时手动保存进度。</p>
<p><strong>交互式 API 文档</strong>根据您的 API 定义生成并基于 Swagger UI。API 文档会在您键入时自动更新，帮助您可视化您正在创建的 API。在这里，您还<a href="https://support.smartbear.com/swaggerhub/docs/ui/interactive-documentation.html#try-it-out" target="_blank" rel="noopener">可以</a>直接在浏览器中<a href="https://support.smartbear.com/swaggerhub/docs/ui/interactive-documentation.html#try-it-out" target="_blank" rel="noopener">进行 API 调用</a>。</p>
<p>左侧的<strong>导航</strong>面板显示 API 中定义的操作和模型列表。您可以通过路径、HTTP 动词和模型名称进行搜索和过滤，并快速导航到 YAML 代码中的相应位置。</p>
<p>您可以使用左侧的按钮隐藏或显示单个面板。</p>
<p><img src="/images/loading.gif" data-original="../images/development/hide-buttons.png" alt=""></p>
<p>要撤消编辑器中任何未保存的更改，请使用“<strong>恢复到上次保存”</strong>命令。</p>
<p><img src="/images/loading.gif" data-original="../images/development/revert-to-last-saved-command.png" alt=""></p>
<h3 id="语法验证"><a href="#语法验证" class="headerlink" title="语法验证"></a>语法验证</h3><p>在您键入时，SwaggerHub 会自动验证您的 API 定义并显示可能发生的任何错误或警告，例如语法错误、未解析的引用或未使用的定义。要查看错误列表，请展开编辑器底部的验证栏。单击错误消息可跳转到触发此错误的行。</p>
<p>如果您的组织使用<a href="https://support.smartbear.com/swaggerhub/docs/organizations/api-standardization.html" target="_blank" rel="noopener">API 标准化</a>，API 编辑人员可以在此处查看当前 API 中发现的样式违规。</p>
<p><img src="/images/loading.gif" data-original="../images/development/editor-validation.png" alt=""></p>
<h3 id="信息面板：管理-API-和集成"><a href="#信息面板：管理-API-和集成" class="headerlink" title="信息面板：管理 API 和集成"></a>信息面板：管理 API 和集成</h3><p>单击标题区域中的 API 名称以打开 API 信息面板，您可以在其中重命名、比较或传输 API。<strong>注意：</strong>可用的命令取决于您是 API 所有者还是<a href="https://support.smartbear.com/swaggerhub/docs/collaboration/collaborators.html" target="_blank" rel="noopener">合作者</a>。</p>
<p><img src="/images/loading.gif" data-original="../images/development/info-panel.png" alt=""></p>
<p>在信息面板的<strong>集成</strong>选项卡上，您可以为 API配置<a href="https://support.smartbear.com/swaggerhub/docs/integrations/index.html" target="_blank" rel="noopener">集成</a>。</p>
<p><img src="/images/loading.gif" data-original="../images/development/info-panel-integrations.png" alt=""></p>
<p>在面板底部，您可以看到此 API 版本的创建者、创建时间、API 的所有者以及上次保存的日期和时间。</p>
<p><img src="/images/loading.gif" data-original="../images/development/api-info.png" alt=""></p>
<h3 id="版本选择器"><a href="#版本选择器" class="headerlink" title="版本选择器"></a>版本选择器</h3><p>如果您的 API 有多个<a href="https://support.smartbear.com/swaggerhub/docs/apis/versioning.html" target="_blank" rel="noopener">版本</a>，您可以使用版本号旁边的下拉菜单在版本之间快速切换。</p>
<p><img src="/images/loading.gif" data-original="../images/development/selecting-api-version.png" alt=""></p>
<h3 id="编辑器选项"><a href="#编辑器选项" class="headerlink" title="编辑器选项"></a>编辑器选项</h3><p>您可以更改编辑器字体大小并在深色和浅色语法高亮主题之间切换。编辑器选项在当前浏览器的会话中持续存在。</p>
<p><img src="/images/loading.gif" data-original="../images/development/editor-options.png" alt=""></p>
<h3 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h3><p>API 定义可以包括<code>$ref</code>对当前定义中的<a href="https://support.smartbear.com/swaggerhub/docs/domains/index.html" target="_blank" rel="noopener">域</a>或组件的引用。要导航到引用的资源，请将鼠标悬停在该<code>$ref</code>值上并单击<strong>Jump To</strong>。外部链接在新的浏览器选项卡中打开。</p>
<p><img src="/images/loading.gif" data-original="../images/development/jump-to-link.png" alt=""></p>
<h3 id="各种各样的"><a href="#各种各样的" class="headerlink" title="各种各样的"></a>各种各样的</h3><p>编辑器的工具栏还包含以下项目：</p>
<h6 id="同步管理"><a href="#同步管理" class="headerlink" title=" 同步管理"></a><img src="/images/loading.gif" data-original="../images/development/sync.png" alt=""> 同步管理</h6><p>如果为当前 API 配置了源代码控制集成，请单击此按钮生成代码并将其推送到连接的存储库分支。</p>
<h6 id="查看文档"><a href="#查看文档" class="headerlink" title=" 查看文档"></a><img src="/images/loading.gif" data-original="../images/development/view-documentation.png" alt=""> 查看文档</h6><p>单击以在新的浏览器选项卡中查看此 API 或域的<a href="https://support.smartbear.com/swaggerhub/docs/ui/interactive-documentation.html" target="_blank" rel="noopener">交互式文档</a>。</p>
<h6 id="API-域选项"><a href="#API-域选项" class="headerlink" title=" API/域选项"></a><img src="/images/loading.gif" data-original="../images/development/settings-163993079796446.png" alt=""> API/域选项</h6><ul>
<li><strong>编辑 GitHub 推送</strong> – 旧版 GitHub 集成。请改用<a href="https://support.smartbear.com/swaggerhub/docs/integrations/github-sync.html" target="_blank" rel="noopener">GitHub 同步</a>。</li>
<li><strong>重置更改</strong> - 撤消编辑器中所有未保存的更改。</li>
</ul>
<h6 id="启用-禁用通知"><a href="#启用-禁用通知" class="headerlink" title=" 启用/禁用通知"></a><img src="/images/loading.gif" data-original="../images/development/notifications.png" alt=""> 启用/禁用通知</h6><p>单击以订阅或取消订阅有关此 API 或域更改的<a href="https://support.smartbear.com/swaggerhub/docs/email-notifications.html" target="_blank" rel="noopener">电子邮件通知</a>。</p>
<h6 id="分享与合作"><a href="#分享与合作" class="headerlink" title=" 分享与合作"></a><img src="/images/loading.gif" data-original="../images/development/share-163993079796449.png" alt=""> 分享与合作</h6><p>单击以邀请其他用户在此 API 上进行<a href="https://support.smartbear.com/swaggerhub/docs/collaboration/index.html" target="_blank" rel="noopener">协作</a>。</p>
<h6 id="出口"><a href="#出口" class="headerlink" title="出口"></a>出口</h6><ul>
<li><a href="https://support.smartbear.com/swaggerhub/docs/apis/generating-code/options.html" target="_blank" rel="noopener">代码生成</a><strong>选项</strong> – 在这里，您可以更改服务器存根和客户端 SDK的<a href="https://support.smartbear.com/swaggerhub/docs/apis/generating-code/options.html" target="_blank" rel="noopener">代码生成选项</a>。</li>
<li><strong>客户端 SDK</strong> –使用所选语言为此 API生成<a href="https://support.smartbear.com/swaggerhub/docs/apis/generating-code/client-sdk.html" target="_blank" rel="noopener">客户端 SDK</a>。</li>
<li><strong>服务器存根</strong> -使用所选语言为此 API生成<a href="https://support.smartbear.com/swaggerhub/docs/apis/generating-code/server-stub.html" target="_blank" rel="noopener">服务器存根</a>。</li>
<li><strong>文档</strong> - 以所选格式为此 API 生成文档。</li>
<li><strong>下载 API</strong>或<strong>下载域</strong> – 让您以 YAML 或 JSON 格式下载 API 或域定义。</li>
</ul>
<h3 id="键盘快捷键"><a href="#键盘快捷键" class="headerlink" title="键盘快捷键"></a>键盘快捷键</h3><p>SwaggerHub 编辑器支持键盘快捷键以加快编辑速度。</p>
<h4 id="查找-替换"><a href="#查找-替换" class="headerlink" title="查找/替换"></a>查找/替换</h4><table>
<thead>
<tr>
<th align="left">行动</th>
<th align="left">视窗/Linux</th>
<th align="left">苹果电脑</th>
</tr>
</thead>
<tbody><tr>
<td align="left">查找对话框</td>
<td align="left">Ctrl + F</td>
<td align="left">命令 + F</td>
</tr>
<tr>
<td align="left">替换对话框</td>
<td align="left">Ctrl + H</td>
<td align="left">命令 + 选项 + F</td>
</tr>
<tr>
<td align="left">找下一个</td>
<td align="left">Ctrl + K</td>
<td align="left">命令 + G</td>
</tr>
<tr>
<td align="left">查找上一个</td>
<td align="left">Ctrl + Shift + K</td>
<td align="left">命令 + Shift + G</td>
</tr>
<tr>
<td align="left">查找光标下单词的所有实例（不区分大小写）</td>
<td align="left">Ctrl + Alt + K</td>
<td align="left">Ctrl + 选项 + G</td>
</tr>
</tbody></table>
<h4 id="编辑"><a href="#编辑" class="headerlink" title="编辑"></a>编辑</h4><table>
<thead>
<tr>
<th align="left">行动</th>
<th align="left">视窗/Linux</th>
<th align="left">苹果电脑</th>
</tr>
</thead>
<tbody><tr>
<td align="left">显示自动完成列表</td>
<td align="left">Ctrl + 空格</td>
<td align="left">选项 + 空格</td>
</tr>
<tr>
<td align="left">注释或取消注释当前行</td>
<td align="left">Ctrl + /</td>
<td align="left">命令 + /</td>
</tr>
<tr>
<td align="left">删除当前行</td>
<td align="left">Ctrl + D</td>
<td align="left">命令 + D</td>
</tr>
<tr>
<td align="left">撤消</td>
<td align="left">Ctrl + Z</td>
<td align="left">命令 + Z</td>
</tr>
<tr>
<td align="left">重做</td>
<td align="left">Ctrl + Y、Ctrl + Shift + Z</td>
<td align="left">命令 + Y，命令 + Shift + Z</td>
</tr>
<tr>
<td align="left">缩进选择</td>
<td align="left">标签</td>
<td align="left">标签</td>
</tr>
<tr>
<td align="left">缩进选择</td>
<td align="left">Shift + Tab</td>
<td align="left">Shift + Tab</td>
</tr>
<tr>
<td align="left">全选</td>
<td align="left">Ctrl + A</td>
<td align="left">命令 + A</td>
</tr>
</tbody></table>
<h4 id="导航"><a href="#导航" class="headerlink" title="导航"></a>导航</h4><table>
<thead>
<tr>
<th align="left">行动</th>
<th align="left">视窗/Linux</th>
<th align="left">苹果电脑</th>
</tr>
</thead>
<tbody><tr>
<td align="left">转到行号</td>
<td align="left">Ctrl + L</td>
<td align="left">命令 + L</td>
</tr>
<tr>
<td align="left">转到下一个错误</td>
<td align="left">Alt + E</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">转到上一个错误</td>
<td align="left">Alt + Shift + E</td>
<td align="left"></td>
</tr>
</tbody></table>
<h4 id="代码折叠"><a href="#代码折叠" class="headerlink" title="代码折叠"></a>代码折叠</h4><table>
<thead>
<tr>
<th align="left">行动</th>
<th align="left">视窗/Linux</th>
<th align="left">苹果电脑</th>
</tr>
</thead>
<tbody><tr>
<td align="left">全部折叠</td>
<td align="left">Alt + 0</td>
<td align="left">命令 + 选项 + 0</td>
</tr>
<tr>
<td align="left">展开全部</td>
<td align="left">Alt + Shift + 0</td>
<td align="left">命令 + 选项 + Shift + 0</td>
</tr>
<tr>
<td align="left">折叠选择</td>
<td align="left">Alt + L、Ctrl + F1</td>
<td align="left">命令 + 选项 + L，命令 + F1</td>
</tr>
<tr>
<td align="left">展开选择</td>
<td align="left">Alt + Shift + L、Ctrl + Shift + F1</td>
<td align="left">Command + Option + Shift + L、Command + Shift + F1</td>
</tr>
<tr>
<td align="left">切换折叠</td>
<td align="left">F2</td>
<td align="left">F2</td>
</tr>
</tbody></table>
<h2 id="OpenAPI-定义的可视化编辑器"><a href="#OpenAPI-定义的可视化编辑器" class="headerlink" title="OpenAPI 定义的可视化编辑器"></a>OpenAPI 定义的可视化编辑器</h2><h3 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h3><p>使用可视化编辑器，您可以：</p>
<ul>
<li>编辑 API 信息：标题、描述、许可、联系信息、外部文档链接。</li>
<li>编辑操作元数据：摘要、描述、标签。</li>
<li>在 OpenAPI 3.0 定义中编辑服务器和服务器变量。</li>
<li>删除操作。</li>
<li>管理标签和编辑标签元数据。</li>
<li>添加和删除模型。</li>
<li>编辑模型描述（仅适用于<code>definitions</code>和<code>components/schemas</code>部分中的模型）。</li>
</ul>
<p>目前不支持域编辑和上面未列出的其他功能。</p>
<h3 id="打开可视化编辑器"><a href="#打开可视化编辑器" class="headerlink" title="打开可视化编辑器"></a>打开可视化编辑器</h3><p>要切换到可视化编辑器，请单击SwaggerHub 编辑器侧栏中的<img src="/images/loading.gif" data-original="../images/development/show-visual-editor-163993088772951.png" alt=""> <strong>显示可视化编辑</strong>器。如果光标位于 YAML 代码中的特定操作或模型内，则可视化编辑器将为该操作或模型打开。</p>
<p><img src="/images/loading.gif" data-original="../images/development/open-visual-editor.png" alt=""></p>
<p>如果定义包含 YAML 错误，则无法切换到可视化编辑器。使用 代码编辑器修复错误，然后重试。</p>
<h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h3><p>要选择要编辑的项目：</p>
<ul>
<li>在左侧的<strong>导航</strong>面板中选择一个项目。如果导航面板<img src="/images/loading.gif" data-original="../images/development/show-navigation.png" alt="img">处于隐藏状态，请单击侧边栏中的以显示它。</li>
</ul>
<p>- 或者 -</p>
<ul>
<li><p>点击  操作预览或模型预览中的箭头。</p>
<p><img src="/images/loading.gif" data-original="../images/development/jump-to.png" alt="img"></p>
</li>
</ul>
<p>当您进行更改时，API 文档预览会自动更新以反映更改。编辑器每 2 分钟自动保存一次草稿，您也可以随时手动保存进度。已修改和未保存的项目在导航面板中用点 ( • ) 表示。</p>
<p>要撤消编辑器中任何未保存的更改，请使用“<strong>恢复到上次保存”</strong>命令。</p>
<p><img src="/images/loading.gif" data-original="../images/development/revert-to-last-saved-command-163993095337057.png" alt="“恢复到上次保存”命令"></p>
<h3 id="编辑API信息"><a href="#编辑API信息" class="headerlink" title="编辑API信息"></a>编辑API信息</h3><p>点击<strong>信息</strong>中的<strong>导航</strong>面板编辑API<code>info</code>部分，包括：</p>
<ul>
<li>一般信息：API 标题、描述和服务条款 URL<ul>
<li>该<strong>版本</strong>字段是只读的。要更改 API 版本，请使用版本列表中的<strong>添加新版本</strong>命令。有关详细信息，请参阅<a href="https://support.smartbear.com/swaggerhub/docs/apis/versioning.html" target="_blank" rel="noopener">版本控制</a></li>
</ul>
</li>
<li>联系信息：联系人姓名、电子邮件和 URL</li>
<li>许可证信息：许可证名称和 URL</li>
<li>外部文档的 URL 和描述</li>
</ul>
<p><img src="/images/loading.gif" data-original="../images/development/visual-editor-api-info.png" alt=""></p>
<h3 id="编辑操作元数据"><a href="#编辑操作元数据" class="headerlink" title="编辑操作元数据"></a>编辑操作元数据</h3><p>使用可视化编辑器快速编辑摘要、描述并将<a href="https://support.smartbear.com/swaggerhub/docs/ui/visual-editor.html#tags" target="_blank" rel="noopener">标签</a>添加到 API 中的现有操作。</p>
<p><img src="/images/loading.gif" data-original="../images/development/visual-editor-operation.png" alt=""></p>
<h3 id="编辑模型描述"><a href="#编辑模型描述" class="headerlink" title="编辑模型描述"></a>编辑模型描述</h3><p>在<strong>导航</strong>面板中选择一个模型（模式）以编辑模型描述。模型描述支持富文本格式。</p>
<h3 id="管理标签"><a href="#管理标签" class="headerlink" title="管理标签"></a>管理标签</h3><p>标签用于将操作分组到 API 文档中的类别中。您可以直接将标签添加到操作中，而无需使用标签编辑器。但是，如果要为标签添加描述和文档链接，则必须在标签编辑器中明确定义这些标签。标签编辑器对应于 OpenAPI 定义中的全局<a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.3.md#user-content-oastags" target="_blank" rel="noopener">标签</a>部分。</p>
<p>点击<strong>标签</strong>在<strong>导航</strong>面板访问标记编辑器。</p>
<p><img src="/images/loading.gif" data-original="../images/development/visual-editor-tags.png" alt=""></p>
<p>OpenAPI 允许您直接在操作中定义标签。这些标签出现在 API 文档中，但不会出现在标签编辑器中，除非您直接创建它们。</p>
<p>要创建新标签，请单击 +.</p>
<p>要编辑标签元数据，请将鼠标悬停在标签上并单击 🖊.</p>
<p>要重新排列标签，请单击并拖动<img src="/images/loading.gif" data-original="../images/development/grip.gif" alt="">图标。这将更改 API 文档中的标签显示顺序。</p>
<p>要删除全局标签定义，请将鼠标悬停在标签上并单击 垃圾箱图标.</p>
<h2 id="交互式-API-文档"><a href="#交互式-API-文档" class="headerlink" title="交互式 API 文档"></a>交互式 API 文档</h2><p>SwaggerHub 为您的 OpenAPI 定义生成交互式 API 文档。使用它来探索 API 端点、参数、响应和数据模型，并直接在浏览器中测试 API 调用。</p>
<h3 id="仅文档视图"><a href="#仅文档视图" class="headerlink" title="仅文档视图"></a>仅文档视图</h3><p>单击<img src="/images/loading.gif" data-original="../images/development/view-documentation-163996627814263.png" alt=""> SwaggerHub 工具栏可仅查看 API 文档（或域文档)而无需编辑器。</p>
<p><img src="/images/loading.gif" data-original="../images/development/preview-docs.png" alt=""></p>
<p>复制生成的文档链接并与需要访问您的 API 文档的 API 使用者共享。</p>
<p>API 文档页面遵循与 API 和域页面相同的命名格式，但在地址中<code>-docs</code>添加<code>/apis</code>(或<code>/domains</code>)后缀：</p>
<pre><code>https://app.swaggerhub.com/apis-docs/{owner}/{name}/{version}
                                 ^
https://app.swaggerhub.com/domains-docs/{owner}/{name}/{version}
                                    ^</code></pre><p>如果省略版本号，文档页面将显示<a href="https://support.smartbear.com/swaggerhub/docs/apis/versioning.html#default" target="_blank" rel="noopener">默认版本</a>：</p>
<pre><code>https://app.swaggerhub.com/apis-docs/swagger-hub/registry-api</code></pre><h3 id="定制品牌"><a href="#定制品牌" class="headerlink" title="定制品牌"></a>定制品牌</h3><p><em>此信息仅适用于 SwaggerHub SaaS。</em></p>
<p>组织可以在其 API 文档中添加自定义徽标，以维护公司的品牌知名度。该徽标将显示在面向消费者的所有组织 API 和域的文档中。有关详细信息，请参阅<a href="https://support.smartbear.com/swaggerhub/docs/apis/docs-branding.html" target="_blank" rel="noopener">文档品牌化</a>。</p>
<p><img src="/images/loading.gif" data-original="../images/development/custom-branding.png" alt=""></p>
<h3 id="“试试看”"><a href="#“试试看”" class="headerlink" title="“试试看”"></a>“试试看”</h3><p>交互式文档让您可以使用<strong>Try it out</strong>按钮直接从浏览器测试 API 调用。SwaggerHub 将显示响应标头和正文、请求持续时间以及可用于从命令行发送相同请求的 cURL 命令。</p>
<p><img src="/images/loading.gif" data-original="../images/development/try-it-out.gif" alt=""></p>
<h3 id="请求的目标服务器"><a href="#请求的目标服务器" class="headerlink" title="请求的目标服务器"></a>请求的目标服务器</h3><p>为了“试用”工作，您的 API 定义必须指定<a href="https://swagger.io/docs/specification/2-0/api-host-and-base-path/" target="_blank" rel="noopener"><code>host</code></a>（在 OpenAPI 2.0 中）或<a href="https://swagger.io/docs/specification/api-host-and-base-path/" target="_blank" rel="noopener"><code>servers</code></a>（在 OpenAPI 3.0 中），以便 SwaggerHub 知道将请求发送到哪里：</p>
<pre><code>swagger: '2.0'
host: myapi.com
schemes:
  - https
basePath: /v2

# or

openapi: 3.0.0
servers:
  - url: 'https://myapi.com/v2'</code></pre><p>如果您不想使用生产服务器，或者您还没有，您可以使用 SwaggerHub 的<a href="https://support.smartbear.com/swaggerhub/docs/integrations/api-auto-mocking.html" target="_blank" rel="noopener">模拟服务器</a>。模拟服务器将根据 API 定义中指定的响应模式和示例生成响应。</p>
<h3 id="路由请求"><a href="#路由请求" class="headerlink" title="路由请求"></a>路由请求</h3><p>SwaggerHub 允许您直接从浏览器向目标服务器发送“试用”请求，或通过 SwaggerHub 服务器代理请求。根据经验，<strong>使用浏览器访问本地 API，并使用代理访问面向 Internet 的 API。</strong></p>
<p>您可以在文档底部更改路由模式。所选选项保存在浏览器中，<code>localStorage</code>并适用于您从该浏览器测试的所有 API。</p>
<p><img src="/images/loading.gif" data-original="../images/development/routing-requests.png" alt=""></p>
<h4 id="通过-SwaggerHub-代理路由请求（默认）"><a href="#通过-SwaggerHub-代理路由请求（默认）" class="headerlink" title="通过 SwaggerHub 代理路由请求（默认）"></a>通过 SwaggerHub 代理路由请求（默认）</h4><p>这是面向 Internet 的 API 的首选模式。来自浏览器的“试用”请求首先发送到 SwaggerHub 服务器，后者将请求转发到目标 API 服务器。来自 API 服务器的响应被发送回 SwaggerHub 服务器，然后发送到您的浏览器。这种方法避免了浏览器对跨域 HTTP 请求的限制。</p>
<p><img src="/images/loading.gif" data-original="../images/development/route-via-proxy.png" alt=""></p>
<p><strong>好处：</strong></p>
<ul>
<li>API 服务器上不需要 CORS 支持。</li>
<li>支持<code>Cookie</code>标题中的用户定义参数。</li>
</ul>
<p><strong>要求：</strong></p>
<ul>
<li>如果您使用 SwaggerHub SaaS，则 API 服务器必须位于公共 Internet 上并允许来自<a href="https://support.smartbear.com/swaggerhub/docs/ip-addresses.html" target="_blank" rel="noopener">我们 IP 地址的</a>连接。SwaggerHub On-Premise 支持面向 Internet 的服务器和本地服务器（除了<code>localhost</code>、<code>127.*.*.*</code>和<code>172.18.*.*</code>）。</li>
</ul>
<p><strong>限制：</strong></p>
<ul>
<li>请求超时不可配置，设置为：<ul>
<li>SwaggerHub SaaS 中的 30 秒</li>
<li>SwaggerHub On-Premise 1.21.0 及更高版本中的 30 秒</li>
<li>在早期版本的 SwaggerHub On-Premise 中为 10 秒</li>
</ul>
</li>
<li>使用 SwaggerHub SaaS 时，“试用”请求通过 SwaggerHub 云服务器进行代理。如果担心基础设施的隐私或所有权，请改用通过浏览器的路由，或考虑使用托管在您自己的基础设施上的 SwaggerHub On-Premise。</li>
<li>在 SwaggerHub On-Premise 中，请求不能发送到<code>localhost</code>、<code>127.*.*.*</code>和<code>172.18.*.*</code>。</li>
</ul>
<h4 id="通过浏览器路由请求"><a href="#通过浏览器路由请求" class="headerlink" title="通过浏览器路由请求"></a>通过浏览器路由请求</h4><p><em>在 SwaggerHub SaaS 和 SwaggerHub On-Premise 1.18.7 及更高版本中受支持。</em></p>
<p>在这种模式下，“试用”请求通过使用 JavaScript 从网页直接发送到 API 服务器。</p>
<p><img src="/images/loading.gif" data-original="../images/development/route-via-browser.png" alt=""></p>
<p><strong>好处：</strong></p>
<ul>
<li>支持面向 Internet 的服务器和本地服务器。</li>
<li>请求直接从您的浏览器发送到 API 服务器，无需通过任何中间基础设施。</li>
<li>请求与浏览器 cookie 一起发送（但不使用用户定义的 cookie 参数）。</li>
</ul>
<p><strong>要求：</strong></p>
<ul>
<li>API 服务器必须支持<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS" target="_blank" rel="noopener">CORS</a>并在响应中返回正确的<a href="https://fetch.spec.whatwg.org/#http-responses" target="_blank" rel="noopener">CORS 标头</a>。有关更多信息，请参阅<a href="https://support.smartbear.com/swaggerhub/docs/ui/cors.html" target="_blank" rel="noopener">“试用”的 CORS 要求</a>。</li>
</ul>
<p><strong>限制：</strong></p>
<ul>
<li>无法从托管在 HTTPS 上的 SwaggerHub SaaS 和 SwaggerHub On-Premise 向 HTTP（非安全）服务器发送请求，因为浏览器会阻止从安全网页访问不安全的内容。</li>
<li>无法在<code>Cookie</code>标头和其他<a href="https://fetch.spec.whatwg.org/#forbidden-header-name" target="_blank" rel="noopener">禁止的请求标头中</a>发送用户定义的值。</li>
<li>“试用”后显示的<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Expose-Headers" target="_blank" rel="noopener"><code>Access-Control-Expose-Headers</code></a>响应头受响应头限制。如果缺少此标头，则仅显示<a href="https://developer.mozilla.org/en-US/docs/Glossary/Simple_response_header" target="_blank" rel="noopener">简单的响应标头</a>。</li>
<li>该<code>Set-Cookie</code>响应头不显示，由于浏览器的安全限制。</li>
</ul>
<h3 id="对“试用”请求进行故障排除"><a href="#对“试用”请求进行故障排除" class="headerlink" title="对“试用”请求进行故障排除"></a>对“试用”请求进行故障排除</h3><p><strong>类型错误：无法获取</strong></p>
<p>通过浏览器路由请求时，在以下情况下会发生此错误：</p>
<ul>
<li>API 服务器不支持 CORS</li>
<li>请求从<code>https://</code>网页发送到<code>http://</code>（非安全）服务器。</li>
</ul>
<p>为避免此问题，请将路由模式更改为<em>Use proxy</em>。</p>
<h3 id="OpenAPI-3-0-细节"><a href="#OpenAPI-3-0-细节" class="headerlink" title="OpenAPI 3.0 细节"></a>OpenAPI 3.0 细节</h3><p>交互式文档目前不支持 OpenAPI 3.0 的某些功能。<a href="https://support.smartbear.com/swaggerhub/docs/openapi-3-support.html" target="_blank" rel="noopener">请参阅此处</a>了解已知限制。</p>
<h3 id="延迟加载"><a href="#延迟加载" class="headerlink" title="延迟加载"></a>延迟加载</h3><p>SwaggerHub 通过仅在渲染需要时加载外部引用来减少文档加载时间。请参阅<a href="https://support.smartbear.com/swaggerhub/docs/ui/lazy-loading.html" target="_blank" rel="noopener">延迟加载</a>以了解更多信息。</p>
<h3 id="永久链接"><a href="#永久链接" class="headerlink" title="永久链接"></a>永久链接</h3><p>API 和域文档支持单个操作、标签、模型和域组件的永久链接。要获得特定项目的永久链接，请展开该项目，然后从浏览器地址栏中复制完整链接：</p>
<p><img src="/images/loading.gif" data-original="../images/development/permalink.png" alt=""></p>
<p>当用户导航到固定链接时，页面会自动滚动到目标项目并展开它。自己试试：</p>
<p><a href="https://app.swaggerhub.com/apis-docs/swagger-hub/registry-api/1.0.47#/APIs/searchApisAndDomains" target="_blank" rel="noopener">https://app.swaggerhub.com/apis-docs/swagger-hub/registry-api/1.0.47#/APIs/searchApisAndDomains</a></p>
<p>永久链接具有以下语法：</p>
<ul>
<li><p>对于标签和操作：</p>
<pre><code>...#/TagName
...#/TagName/operationId</code></pre></li>
<li><p>对于其他项目：</p>
<pre><code>...#/ItemType
...#/ItemType/ItemName</code></pre></li>
</ul>
<p>看看下面的一些例子：</p>
<table>
<thead>
<tr>
<th align="left">例子</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>...#/pet</code></td>
<td align="left">链接到<code>pet</code>标签。</td>
</tr>
<tr>
<td align="left"><code>...#/pet/updatePet</code></td>
<td align="left">链接到标签<code>updatePet</code>内带有 ID 的操作<code>pet</code>。</td>
</tr>
<tr>
<td align="left"><code>...#/models/Order</code></td>
<td align="left">链接到<code>Order</code>模型。</td>
</tr>
<tr>
<td align="left"><code>...#/parameters/limitParam</code></td>
<td align="left">链接到<code>limitParam</code>OpenAPI 2.0 域中的参数定义。</td>
</tr>
<tr>
<td align="left"><code>...#/components/parameters/limitParam</code></td>
<td align="left">链接到<code>limitParam</code>OpenAPI 3.0 域中的参数定义。</td>
</tr>
</tbody></table>
<h2 id="Searching-SwaggerHub"><a href="#Searching-SwaggerHub" class="headerlink" title="Searching SwaggerHub"></a>Searching SwaggerHub</h2><p>使用<a href="https://app.swaggerhub.com/search" target="_blank" rel="noopener">SwaggerHub 搜索</a>按名称、内容、状态或其他属性查找 API 和<a href="https://support.smartbear.com/swaggerhub/docs/domains/index.html" target="_blank" rel="noopener">域</a>。匿名用户可以在所有公共定义中进行搜索。登录用户还可以在他们有权访问的<a href="https://support.smartbear.com/swaggerhub/docs/apis/public-and-private-apis.html" target="_blank" rel="noopener">私有</a>定义中进行搜索。</p>
<p><strong>我的中心</strong>，组织页面和<a href="https://support.smartbear.com/swaggerhub/docs/organizations/projects/index.html" target="_blank" rel="noopener">项目</a>页面也有一个搜索栏，搜索范围相应地受到限制。</p>
<p><img src="/images/loading.gif" data-original="../images/development/search.png" alt=""></p>
<h3 id="文字搜索"><a href="#文字搜索" class="headerlink" title="文字搜索"></a>文字搜索</h3><ul>
<li><a href="https://support.smartbear.com/swaggerhub/docs/ui/searching.html#IDCKHLZZCMGYSRKYT144C134PYUDSIRGMTAIKPESMXSNBI5AQ4JI2C" target="_blank" rel="noopener">SwaggerHub SaaS</a></li>
<li><a href="https://support.smartbear.com/swaggerhub/docs/ui/searching.html#IDFFGRGYZTP3NSKK0BIEVREJID5NCQWAO250Q0UOKOU3NR2RAKSNCB" target="_blank" rel="noopener">本地 1.27 及更高版本</a></li>
<li><a href="https://support.smartbear.com/swaggerhub/docs/ui/searching.html#IDEUNA2FBHDEQDMNANBX3TJOGNZJJHAFIVJ1VR5IBIZYP1X0Y5HHLL" target="_blank" rel="noopener">本地 1.26 及更早版本</a></li>
</ul>
<p>搜索词<strong>不区分大小写</strong>并匹配：</p>
<ul>
<li>API 定义和域的 YAML 内容，</li>
<li><code>info.title</code>而<code>info.description</code>在定义上，</li>
<li>API和域名，</li>
<li>所有者名称。</li>
</ul>
<p>SwaggerHub 使用<strong>全文搜索</strong>。搜索查询的工作方式如下：</p>
<ul>
<li>包含多个术语的查询，例如在<code>pet store</code>定义的任何位置查找包含所有这些术语的定义。这等效于使用布尔 AND 运算符：<code>pet AND store</code>。</li>
<li>每个术语都作为子字符串匹配。例如，<code>book</code>会查找<em>book</em>、<em>eBook</em>、<em>bookstore</em>、<em>booking</em>等。</li>
<li><a href="https://support.smartbear.com/swaggerhub/docs/ui/searching.html#stop-words" target="_blank" rel="noopener">停用词</a>和长度少于 3 个字符的词将被忽略。例如，搜索字符串<code>get a report</code>转换为<code>report</code>：单词“get”作为停用词被忽略，而“a”由于其长度而被忽略。</li>
<li>字符<code>+ - |</code>被剥离——在索引期间和搜索时。所有其他字符都是可搜索的。例如：<ul>
<li><code>111222</code>, <code>111-222</code>, <code>11+12+22</code>,<code>11122|2</code>被认为是同一个字符串。这些搜索字符串中的任何一个都可以找到所有这些字符串。</li>
<li>搜索字符串<code>/users/{id}</code>将找到此文字字符串。</li>
</ul>
</li>
<li>不支持使用引号的短语搜索（例如“酒店预订”）。引号没有特殊含义，被视为常规单词字符。</li>
<li>括号 ( ) 不影响布尔表达式的优先级。括号被视为常规单词字符。</li>
</ul>
<p><strong>布尔运算符</strong></p>
<p>您可以使用布尔运算符组合搜索词来扩大或缩小搜索范围。这些运算符<strong>必须是大写的</strong>。</p>
<p><strong>AND</strong>（默认）</p>
<p>在任何地方查找包含这两个术语的定义。</p>
<p><strong>或者</strong></p>
<p>查找包含任一术语的定义。</p>
<p><strong>不是</strong></p>
<p>排除包含 NOT 之后的术语的定义。</p>
<p>例子：</p>
<ul>
<li>[<strong>order AND checkout</strong>](<a href="https://app.swaggerhub.com/search?query=order" target="_blank" rel="noopener">https://app.swaggerhub.com/search?query=order</a> AND checkout)匹配包含这两个词的定义。</li>
<li>[<strong>order checkout</strong>](<a href="https://app.swaggerhub.com/search?query=order" target="_blank" rel="noopener">https://app.swaggerhub.com/search?query=order</a> AND checkout)与上述相同。</li>
<li>[<strong>order OR checkout</strong>](<a href="https://app.swaggerhub.com/search?query=order" target="_blank" rel="noopener">https://app.swaggerhub.com/search?query=order</a> OR checkout)匹配包含任一单词的定义。</li>
<li>[<strong>order NOT checkout</strong>](<a href="https://app.swaggerhub.com/search?query=order" target="_blank" rel="noopener">https://app.swaggerhub.com/search?query=order</a> NOT checkout)匹配包含<em>order</em>但不<em>checkout 的</em>定义。</li>
</ul>
<h3 id="过滤关键字"><a href="#过滤关键字" class="headerlink" title="过滤关键字"></a>过滤关键字</h3><p>搜索查询可以包含以下关键字来过滤搜索结果。</p>
<p><strong>类型：api</strong></p>
<p>仅查找 API。</p>
<p><strong>类型：域</strong></p>
<p>仅查找<a href="https://support.smartbear.com/swaggerhub/docs/domains/index.html" target="_blank" rel="noopener">域</a>。</p>
<p><strong>规格：openapi3.0</strong></p>
<p>查找 OpenAPI 3.0 定义。</p>
<p><strong>规格：swagger2.0</strong></p>
<p>查找 OpenAPI 2.0 定义。</p>
<p><strong>所有者：姓名</strong></p>
<p>查找指定用户或组织拥有的 API 和域。所有者名称区分大小写。</p>
<p><strong>可见性：公开</strong></p>
<p>查找公共 API 和域。</p>
<p><strong>可见性：私人</strong></p>
<p>查找您拥有或与您共享的<a href="https://support.smartbear.com/swaggerhub/docs/apis/public-and-private-apis.html" target="_blank" rel="noopener">私人</a>定义。您必须登录才能使用此选项。</p>
<p><strong>状态：已发布</strong></p>
<p>仅查找<a href="https://support.smartbear.com/swaggerhub/docs/apis/publishing-api.html" target="_blank" rel="noopener">已发布的</a>定义。</p>
<p><strong>状态：未发表</strong></p>
<p>仅查找未发布的定义。</p>
<p><strong>标准化：失败</strong></p>
<p>查找带有<a href="https://support.smartbear.com/swaggerhub/docs/organizations/api-standardization.html" target="_blank" rel="noopener">标准化</a>错误或警告的API 。</p>
<p><strong>标准化：关键</strong></p>
<p>查找存在标准化错误的 API。</p>
<p><strong>标准化：警告</strong></p>
<p>查找带有标准化警告的 API。</p>
<p><strong>注意SwaggerHub内部部署用户：</strong> <code>standardization:critical</code>而<code>standardization:warning</code>因为V 1.23支持。</p>
<h4 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h4><ul>
<li><strong><a href="https://app.swaggerhub.com/search?owner=fehguy&amp;query=petstore&amp;type=API" target="_blank" rel="noopener">petstore type:api owner:fehguy</a></strong>查找 fehguy 拥有的 petstore API。</li>
<li><strong><a href="https://app.swaggerhub.com/search?owner=fehguy&amp;state=PUBLISHED" target="_blank" rel="noopener">owner:fehguy state:published</a></strong>查找 fehguy 的已发布定义。</li>
<li><strong><a href="https://app.swaggerhub.com/search?type=API&amp;spec=OPENAPI3.0" target="_blank" rel="noopener">type:api spec:openapi3.0</a></strong>查找所有 OpenAPI 3.0 API 定义。</li>
<li><strong><a href="https://app.swaggerhub.com/search?type=DOMAIN&amp;visibility=PUBLIC" target="_blank" rel="noopener">类型：域可见性：公共</a></strong>查找所有公共域。</li>
</ul>
<p>笔记：</p>
<ul>
<li>前缀后不能有空格：<code>owner:fehguy</code>有效，<code>owner: fehguy</code>无效。</li>
<li><code>owner:fehguy owner:kesh92</code>不支持具有相同前缀的多个关键字，例如。将使用最后一个。</li>
</ul>
<h3 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h3><p>可以对搜索结果进行排序以按特定顺序显示它们。排序选项是：</p>
<ul>
<li>最佳匹配（相关性），</li>
<li>更新日期，</li>
<li>创立日期，</li>
<li>API或域名，</li>
<li>API 或域名 ( <code>info.title</code>),</li>
<li>所有者姓名。</li>
</ul>
<p><img src="/images/loading.gif" data-original="../images/development/sorting.png" alt=""></p>
<p>在 SwaggerHub SaaS 和 SwaggerHub On-Premise 1.27 中，默认排序顺序是<strong>最佳匹配</strong>，它根据搜索词在定义中出现的位置对结果进行排名。优先级如下：</p>
<ol>
<li>该术语出现在定义名称中。</li>
<li>该术语出现在<code>info.title</code>.</li>
<li>该术语出现在<code>info.description</code>.</li>
<li>该术语出现在 YAML 内容的其他地方。</li>
</ol>
<h3 id="停用词"><a href="#停用词" class="headerlink" title="停用词"></a>停用词</h3><p><em>此信息适用于 SwaggerHub SaaS 和 SwaggerHub On-Premise 1.27。</em></p>
<p>停用词是文本中经常出现的常用词，因此会返回许多不相关的结果。例如，所有的OpenAPI定义包含<code>info</code>，<code>title</code>，<code>version</code>和其他标准的关键字，所以这句话本身不是搜索有用的。搜索时，会忽略停用词以提高搜索性能。</p>
<p>以下 OpenAPI 关键字被视为停用词且不可搜索：</p>
<pre><code>$method, $ref, $request, $response, $statusCode, $url, additionalProperties, allOf, allowEmptyValue, allowReserved, anyOf, apiKey, array, attribute, authorizationCode, authorizationUrl, basePath, basic, bearer, bearerFormat, binary, body, boolean, byte, callbacks, clientCredentials, collectionFormat, components, consumes, contact, content, contentType, cookie, csv, date, date-time, deepObject, default, definitions, delete, deprecated, description, discriminator, double, email, encoding, enum, example, examples, exclusiveMaximum, exclusiveMinimum, explode, externalDocs, externalValue, false, float, flow, flows, form, format, formData, get, head, header, headers, host, http, https, implicit, in, info, int32, int64, integer, items, label, license, links, mapping, matrix, maximum, maxItems, maxLength, maxProperties, minimum, minItems, minLength, minProperties, multi, multipleOf, name, namespace, not, null, nullable, number, oauth2, object, oneOf, openIdConnect, openIdConnectUrl, openapi, operationId, operationRef, options, parameters, password, patch, path, pathitems, paths, pattern, pipeDelimited, pipes, post, prefix, produces, properties, propertyName, put, query, readOnly, refreshUrl, requestBodies, requestBody, required, responses, schema, scheme, schemes, scopes, security, securityDefinitions, securitySchemes, server, servers, simple, spaceDelimited, ssv, string, style, summary, swagger, tags, termsOfService, title, tokenUrl, trace, true, tsv, type, uniqueItems, url, value, variables, version, wrapped, writeOnly, xml</code></pre><h2 id="CORS-Requirements-for-“Try-It-Out”"><a href="#CORS-Requirements-for-“Try-It-Out”" class="headerlink" title="CORS Requirements for “Try It Out”"></a>CORS Requirements for “Try It Out”</h2><p><em>此信息适用于 SwaggerHub SaaS 和 SwaggerHub On-Premise 1.18.7 及更高版本。</em></p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS" target="_blank" rel="noopener"><strong>跨域资源共享 (CORS)</strong></a>是一种安全机制，允许来自一个域的网页访问来自另一个域的资源。</p>
<p>在 REST API 的上下文中，CORS 允许从远程网页上的 JavaScript 调用 API，例如从SwaggerHub 上托管的<a href="https://support.smartbear.com/swaggerhub/docs/ui/interactive-documentation.html" target="_blank" rel="noopener">交互式文档</a>。换句话说，您的 API 服务器必须支持 CORS 才能使“试用”请求起作用。</p>
<p> <strong>笔记：</strong>  CORS 仅用于<em>通过浏览器</em>模式的<em>路由请求</em>。通过 SwaggerHub 代理路由请求时不使用 CORS。 </p>
<h3 id="启用-CORS"><a href="#启用-CORS" class="headerlink" title="启用 CORS"></a>启用 CORS</h3><p>CORS 是服务器配置。要在您的 API 服务器上支持 CORS，您需要以下内容：</p>
<ol>
<li>API 响应必须包含 CORS 标头（见下文）。</li>
<li>API 端点必须支持<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS#Preflighted_requests" target="_blank" rel="noopener">CORS 预检请求</a>的 OPTIONS 方法。OPTIONS 必须不需要身份验证，并且应该返回带有正确 CORS 标头的 200 响应。</li>
</ol>
<p>这些要求适用于所有 API 端点，包括 OAuth 端点。</p>
<h3 id="必需的-CORS-标头"><a href="#必需的-CORS-标头" class="headerlink" title="必需的 CORS 标头"></a>必需的 CORS 标头</h3><p>CORS 使用<a href="https://fetch.spec.whatwg.org/#http-responses" target="_blank" rel="noopener">特殊的 HTTP 标</a>头来允许跨域请求。“试用”功能需要 API 响应中的以下标头：</p>
<pre><code>Access-Control-Allow-Origin: https://host.from.which.the.request.came
Vary: Origin
Access-Control-Allow-Credentials: true
Access-Control-Expose-Headers: ResponseHeader1, ResponseHeader2, ...</code></pre><p><strong>访问控制允许来源</strong></p>
<p>允许从指定的请求源主机访问资源。此标头的值必须设置如下：</p>
<ul>
<li><p>如果请求包含非空<code>Origin</code>标头（如从浏览器发送的请求，例如“试用”请求），则返回此来源以及<code>Vary: Origin</code>标头：</p>
<pre><code>Access-Control-Allow-Origin: https://host.from.which.the.request.came
Vary: Origin</code></pre></li>
<li><p>如果请求没有<code>Origin</code>，则返回<code>*</code>通配符：</p>
<p>访问控制允许来源：*</p>
</li>
</ul>
<p><strong>访问控制允许凭据：true</strong></p>
<p>SwaggerHub 使用客户端凭据（浏览器 cookie、TLS 客户端证书、存储的<code>Authorization</code>条目）发送“试用”请求。此标头是此类请求从浏览器正常工作所必需的。</p>
<p><strong>访问控制公开标题</strong></p>
<p>允许浏览器访问并向用户显示的以逗号分隔的响应标头列表。例如：</p>
<p>Access-Control-Expose-Headers: Content-Length, ETag, Link, X-RateLimit-Limit, X-RateLimit-Remaining</p>
<p>如果缺少此标头，“试用”将仅显示<a href="https://developer.mozilla.org/en-US/docs/Glossary/Simple_response_header" target="_blank" rel="noopener">简单的响应标头</a>。</p>
<p><strong>访问控制允许标题</strong></p>
<p>如果您的 API 使用 OAuth 2.0，我们建议来自 OAuth 令牌端点（由 指定<code>tokenUrl</code>）的 OPTIONS 响应包括<code>Access-Control-Allow-Headers</code>包含该<code>X-Requested-With</code>值的响应标头。这将防止浏览器身份验证对话框在不正确<code>cliend_id</code>或<code>client_secret</code>指定时出现。</p>
<p>Access-Control-Allow-Headers: X-Requested-With, &lt;其他允许的请求头…&gt;</p>
<h2 id="Lazy-Loading"><a href="#Lazy-Loading" class="headerlink" title="Lazy Loading"></a>Lazy Loading</h2><p><em>此信息适用于 SwaggerHub SaaS 和 SwaggerHub On-Premise 1.20.0 及更高版本。</em></p>
<p>SwaggerHub <a href="https://support.smartbear.com/swaggerhub/docs/ui/editor.html" target="_blank" rel="noopener">编辑器</a>和<a href="https://support.smartbear.com/swaggerhub/docs/ui/interactive-documentation.html" target="_blank" rel="noopener">交互式 API 文档</a>使用一种称为<strong>延迟加载</strong>的技术来优化外部<code>$ref</code>引用的加载，例如<a href="https://support.smartbear.com/swaggerhub/docs/domains/index.html" target="_blank" rel="noopener">域引用</a>。使用延迟加载，外部 $refs 仅在需要显示特定操作时才会解析和加载。</p>
<h3 id="启用或禁用延迟加载（SwaggerHub-On-Premise）"><a href="#启用或禁用延迟加载（SwaggerHub-On-Premise）" class="headerlink" title="启用或禁用延迟加载（SwaggerHub On-Premise）"></a>启用或禁用延迟加载（SwaggerHub On-Premise）</h3><p>在 SwaggerHub On-Premise 中，默认情况下禁用延迟加载，但管理员可以根据需要启用它。</p>
<ol>
<li>打开<a href="https://support.smartbear.com/swaggerhub/docs/enterprise/config/admin-ui.html" target="_blank" rel="noopener">管理中心</a>。</li>
<li>选择左侧的<strong>设置</strong>。</li>
<li>选择或取消选择<strong>启用延迟加载</strong>。</li>
<li>单击<strong>保存更改并重新启动</strong>。等待几分钟，让系统完全重新启动。</li>
</ol>
<h3 id="延迟加载的工作原理"><a href="#延迟加载的工作原理" class="headerlink" title="延迟加载的工作原理"></a>延迟加载的工作原理</h3><p>API 文档最初与折叠条目一起显示。初始渲染仅处理 API 定义，因此 API 页面加载速度快。稍后将在用户展开包含域引用的操作时加载引用的域。请注意，操作扩展将仅加载显示该特定操作所需的域。如果文档中没有展开相应的操作，则某些域可能根本无法加载。这有助于减少 API 文档加载时间并提高性能，这对于具有许多域引用的大型 API 尤其有用。</p>
<h3 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h3><p>延迟加载会影响编辑器中报告验证错误的方式。默认情况下，编辑器仅分析当前定义，而不分析引用的域。只有在这些域被延迟加载后，域错误才会出现在编辑器中。在验证您的 API 和域时请记住这一点。</p>
<p>这意味着您最初可能不会在编辑器中看到任何错误：</p>
<p><img src="/images/loading.gif" data-original="../images/development/before-doc-expansion.png" alt=""></p>
<p>但是在交互式文档中展开操作时会出现错误：</p>
<p><img src="/images/loading.gif" data-original="../images/development/after-doc-expansion.png" alt=""></p>
<p>一旦一个域被延迟加载，它就不会再次加载，并且在该域中发现的任何错误都将保留在 API 的错误列表中。要获取域更改，您需要在浏览器中刷新 API 页面并展开会触发该域加载的操作。</p>
<h3 id="故障排除"><a href="#故障排除" class="headerlink" title="故障排除"></a>故障排除</h3><h4 id="验证整个-API"><a href="#验证整个-API" class="headerlink" title="验证整个 API"></a>验证整个 API</h4><p>作为快速验证检查，尝试使用编辑器中的<strong>导出 &gt; 下载 API &gt; 解析的 YAML</strong>命令下载解析的 API 定义。如果命令成功，则表示该 API 和引用的域有效。</p>
<p>如果您看到如下所示的错误，则表示 API 或引用域中的某处存在语法错误。</p>
<p><img src="/images/loading.gif" data-original="../images/development/export-error.png" alt=""></p>
<p>但是，此方法只会告诉您<strong>是否</strong>有错误，而不会告诉您这些错误在<strong>哪里</strong>。要查看哪些域包含错误，请使用下面描述的方法。</p>
<h4 id="查找并修复错误"><a href="#查找并修复错误" class="headerlink" title="查找并修复错误"></a>查找并修复错误</h4><p>要查看错误和包含这些错误的域的完整列表，请展开交互式文档中的所有内容以触发域验证。</p>
<ol>
<li><p>在编辑器中打开 API。</p>
</li>
<li><p>如果 UI 面板被隐藏，请单击左侧边栏中的<img src="/images/loading.gif" data-original="../images/development/view-documentation-163996689889877.png" alt=""> <strong>查看 UI 文档</strong>以显示它。</p>
</li>
<li><p>将所有操作一一展开，在编辑器中观察验证状态。</p>
</li>
<li><p>如果操作扩展触发错误：</p>
<ul>
<li><p>点击 在操作信息中跳转到 YAML 代码。</p>
<p><img src="/images/loading.gif" data-original="../images/development/jump-to-163996689889879.png" alt=""></p>
</li>
<li><p>在操作定义中查找域引用。</p>
<p>$ref: ‘<a href="https://api.swaggerhub.com/domains/...'" target="_blank" rel="noopener">https://api.swaggerhub.com/domains/...'</a></p>
</li>
<li><p>跳转到这些域。</p>
<p><img src="/images/loading.gif" data-original="../images/development/jump-to-domain.png" alt=""></p>
</li>
<li><p>查看域是否有语法错误并修复错误。确保保存更改。</p>
</li>
<li><p>如果一个域包含对其他域的引用，也使用相同的方法（文档扩展）来验证其他域。</p>
</li>
</ul>
</li>
<li><p>返回 API 并在浏览器中刷新页面。再次展开有问题的操作以获取更新的域，并确保这次没有验证错误。</p>
</li>
<li><p>继续扩展其他操作，直到您验证所有这些操作。</p>
</li>
</ol>
<p>如果您需要语法验证方面的帮助，<a href="https://community.smartbear.com/t5/SwaggerHub/ct-p/SwaggerHub" target="_blank" rel="noopener">请询问社区</a>、使用应用内支持聊天或<a href="https://support.smartbear.com/swaggerhub/message/" target="_blank" rel="noopener">打开支持票</a>。</p>
<h3 id="内部-refs-的性能提示"><a href="#内部-refs-的性能提示" class="headerlink" title="内部 $refs 的性能提示"></a>内部 $refs 的性能提示</h3><p>延迟加载仅对外部 $refs 提供性能提升，但不会影响内部 $refs ( <code>$ref: '#/...'</code>)。如果您的 API 具有许多内部 $ref，并且加载缓慢，我们建议您将引用的定义移动到<a href="https://support.smartbear.com/swaggerhub/docs/domains/index.html" target="_blank" rel="noopener">域中</a>，并将内部 $ref 替换为域引用。延迟加载将发挥作用，以更有效地加载 API。</p>
<h1 id="APIs"><a href="#APIs" class="headerlink" title="APIs"></a>APIs</h1><h2 id="Creating-a-New-API"><a href="#Creating-a-New-API" class="headerlink" title="Creating a New API"></a>Creating a New API</h2><p>您可以通过多种方式在 SwaggerHub 中创建 API：</p>
<ul>
<li>从头开始创建 API（在本主题中解释）。</li>
<li>从 URL<a href="https://support.smartbear.com/swaggerhub/docs/apis/importing-api.html" target="_blank" rel="noopener">导入 OpenAPI 定义</a>。</li>
<li>在 SwaggerHub 上分叉<a href="https://support.smartbear.com/swaggerhub/docs/apis/forking-api.html" target="_blank" rel="noopener">现有的 API</a>。</li>
<li>通过以<a href="https://support.smartbear.com/swaggerhub/docs/apis/saving-as-new.html" target="_blank" rel="noopener">另一个名称</a>保存 API 定义来克隆它。</li>
</ul>
<p>您可以在您的个人帐户中或代表您创建的任何<a href="https://support.smartbear.com/swaggerhub/docs/organizations/index.html" target="_blank" rel="noopener">组织</a>创建 API 。</p>
<h3 id="在-SwaggerHub-中创建-API"><a href="#在-SwaggerHub-中创建-API" class="headerlink" title="在 SwaggerHub 中创建 API"></a>在 SwaggerHub 中创建 API</h3><p><img src="/images/loading.gif" data-original="../images/development/add-new-api.png" alt=""></p>
<ol>
<li><ul>
<li><p><strong>OpenAPI 版本</strong> – 选择 API 格式：OpenAPI 2.0 或 3.0。<strong>注意：</strong>OpenAPI 3.0 支持有<a href="https://support.smartbear.com/swaggerhub/docs/openapi-3-support.html" target="_blank" rel="noopener">一些限制</a>。</p>
</li>
<li><p><strong>模板</strong> – 选择一个示例 API 开始，例如<em>Petstore</em>或<em>IOT</em>（物联网），或者选择<em>无</em>以开始一个空白 API。</p>
</li>
<li><p><strong>名称</strong> - API名称是其唯一的ID，是其对SwaggerHub路径的一部分，如<em><a href="https://app.swaggerhub.com/api/{owner}/" target="_blank" rel="noopener">https://app.swaggerhub.com/api/{owner}/</a>*</em>的PetStore** /1.0*。要求：</p>
<ul>
<li>3 到 60 个字符长</li>
<li>允许的字符： <code>A..Z a..z 0..9 - _ .</code></li>
<li>必须以字母或数字开头和结尾</li>
</ul>
<p>请注意，API 名称区分大小写，因此<em>petstore</em>和<em>PetStore</em>是两个不同的 API。</p>
</li>
<li><p><strong>所有者</strong> – 选择是在您的个人帐户还是<a href="https://support.smartbear.com/swaggerhub/docs/organizations/index.html" target="_blank" rel="noopener">组织</a>帐户中创建 API （如果您是 SwaggerHub 上组织的成员）。该API所有者是在SwaggerHub的API路径的一部分：<em><a href="https://app.swaggerhub.com/apis/" target="_blank" rel="noopener">https://app.swaggerhub.com/apis/</a>*</em>所有者*<em>/api-name/1.0</em>。组织拥有的 API 计入组织的限制而不是您的限制。</p>
<p><strong>笔记：</strong> 组织所有者始终可以在该组织中创建 API。如果组织配置了<a href="https://support.smartbear.com/swaggerhub/docs/organizations/working-with/preferences.html" target="_blank" rel="noopener"><em>“组织”</em></a>选项<a href="https://support.smartbear.com/swaggerhub/docs/organizations/working-with/preferences.html" target="_blank" rel="noopener"><em>下的</em></a>“<a href="https://support.smartbear.com/swaggerhub/docs/organizations/working-with/preferences.html" target="_blank" rel="noopener"><em>允许设计者创建 API</em></a> ”，则具有<a href="https://support.smartbear.com/swaggerhub/docs/organizations/working-with/permissions.html" target="_blank" rel="noopener">设计者</a>角色的成员具有“创建”权限。 </p>
</li>
<li><p><strong>项目</strong> – 如果选择一个组织作为<strong>Owner</strong>，您可以选择一个<a href="https://support.smartbear.com/swaggerhub/docs/organizations/projects/index.html" target="_blank" rel="noopener">项目</a>来添加这个 API。该列表包含您可以使用的现有项目。</p>
<table>
<thead>
<tr>
<th><strong>SwaggerHub 内部部署说明：</strong></th>
<th>此选项是在 v. 1.23 中添加的。</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
</tr>
</tbody></table>
</li>
<li><p><strong>可见性</strong> – 选择是将 API 设为<a href="https://support.smartbear.com/swaggerhub/docs/apis/public-and-private-apis.html" target="_blank" rel="noopener">公开还是私有</a>。任何人都可以看到公共 API，甚至没有 SwaggerHub 帐户的人也可以看到。私有 API 只能由您和您添加为<a href="https://support.smartbear.com/swaggerhub/docs/collaboration/collaborators.html" target="_blank" rel="noopener">协作者</a>的人员访问）。如果需要，您可以稍后更改 API 可见性。</p>
</li>
<li><p><strong>Auto Mock API</strong> – 如果选中，SwaggerHub 将使用基本路径 <a href="https://virtserver.swaggerhub.com/{owner}/{api}/{version}" target="_blank" rel="noopener">https://virtserver.swaggerhub.com/{owner}/{api}/{version}</a> 自动创建 API 模拟。这将使您在设计 API 时对其进行测试，并使开发人员无需等到 API 功能实现即可开始处理客户端应用程序。SwaggerHub 还将为您的新 API创建<a href="https://support.smartbear.com/swaggerhub/docs/integrations/api-auto-mocking.html" target="_blank" rel="noopener">API Auto Mocking</a>集成，该集成将在您每次保存 API 时自动更新模拟。有关使用模拟的更多信息，请参阅<a href="https://support.smartbear.com/swaggerhub/docs/integrations/api-auto-mocking.html" target="_blank" rel="noopener">API 自动模拟</a>。</p>
</li>
</ul>
<p>创建空白API（无模板）时，还需要指定以下字段：</p>
<ul>
<li><strong>版本</strong> – API 版本。例如，<em>1.0</em>、<em>1.0.0</em>、<em>1.0b5</em>、<em>beta</em>。请参阅<a href="https://support.smartbear.com/swaggerhub/docs/apis/versioning.html#format" target="_blank" rel="noopener">版本格式</a>。</li>
<li><strong>标题</strong> – 将显示在交互式 API 文档中的 API 标题。例如，<em>宠物商店 API</em>。</li>
<li><strong>描述</strong> – 您的 API 用途的概述。该描述将包含在 API 定义中，也会显示在 SwaggerHub 的搜索结果中。您可以稍后更改说明。</li>
</ul>
</li>
<li><p>单击<strong>创建 API</strong>。</p>
</li>
</ol>
<p>创建 API 后，<a href="https://support.smartbear.com/swaggerhub/docs/ui/editor.html" target="_blank" rel="noopener">SwaggerHub 编辑器</a>将打开，您可以在其中编写 API 定义。</p>
<h2 id="导入-OpenAPI-定义"><a href="#导入-OpenAPI-定义" class="headerlink" title="导入 OpenAPI 定义"></a>导入 OpenAPI 定义</h2><p>您可以将现有的 OpenAPI 3.0 和 OpenAPI 2.0 定义导入 SwaggerHub。JSON 和 YAML 定义都可以导入，有效的 JSON 定义会自动转换为 YAML。</p>
<p>对于 YAML，导入文件的大小限制为 10 MB。导入 JSON 定义时，等效 YAML 定义的最大大小为 10 MB。</p>
<h3 id="导入-API"><a href="#导入-API" class="headerlink" title="导入 API"></a>导入 API</h3><ol>
<li>在左侧边栏中，单击 并选择<strong>导入和文档 API</strong>。</li>
</ol>
<p><img src="/images/loading.gif" data-original="../images/development/import-api-command.png" alt=""></p>
<ol start="2">
<li>将出现以下对话框：</li>
</ol>
<p><img src="/images/loading.gif" data-original="https://support.smartbear.com/swaggerhub/docs/_images/api/importing-api-step-1.png" alt=""></p>
<ol start="3">
<li>填写字段：</li>
</ol>
<ul>
<li><p><strong>路径或 URL</strong> – 要导入的 API 定义的 URL 或本地路径。例如，<em><a href="http://petstore.swagger.io/v2/swagger.json" target="_blank" rel="noopener">http://petstore.swagger.io/v2/swagger.json</a></em>或<em>C:\Work\petstore.json</em>。要从您的计算机上传文件，请单击<strong>浏览</strong>。</p>
<table>
<thead>
<tr>
<th><strong>笔记：</strong></th>
<th>有关从 Swagger UI、GitHub 和其他网站导入定义的提示，请参阅以下<a href="https://support.smartbear.com/swaggerhub/docs/apis/importing-api.html#tips" target="_blank" rel="noopener">示例</a>。</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
</tr>
</tbody></table>
</li>
<li><p><strong>所有者</strong> – 选择是在您的个人帐户还是<a href="https://support.smartbear.com/swaggerhub/docs/organizations/index.html" target="_blank" rel="noopener">组织</a>帐户中创建 API （如果您是 SwaggerHub 上组织的成员）。该API所有者是在SwaggerHub的API路径的一部分：<em><a href="https://app.swaggerhub.com/apis/" target="_blank" rel="noopener">https://app.swaggerhub.com/apis/</a>*</em>所有者*<em>/api-name/1.0</em>。组织拥有的 API 计入组织的限制而不是您的限制。</p>
<table>
<thead>
<tr>
<th><strong>笔记：</strong></th>
<th>组织所有者始终可以在该组织中创建 API。如果组织配置了<a href="https://support.smartbear.com/swaggerhub/docs/organizations/working-with/preferences.html" target="_blank" rel="noopener"><em>“组织”</em></a>选项<a href="https://support.smartbear.com/swaggerhub/docs/organizations/working-with/preferences.html" target="_blank" rel="noopener"><em>下的</em></a>“<a href="https://support.smartbear.com/swaggerhub/docs/organizations/working-with/preferences.html" target="_blank" rel="noopener"><em>允许设计者创建 API</em></a> ”，则具有<a href="https://support.smartbear.com/swaggerhub/docs/organizations/working-with/permissions.html" target="_blank" rel="noopener">设计者</a>角色的成员具有“创建”权限。</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
</tr>
</tbody></table>
</li>
<li><p><strong>项目</strong> – 如果选择一个组织作为<strong>Owner</strong>，您可以选择一个<a href="https://support.smartbear.com/swaggerhub/docs/organizations/projects/index.html" target="_blank" rel="noopener">项目</a>来添加这个 API。该列表包含您可以使用的现有项目。</p>
<table>
<thead>
<tr>
<th><strong>SwaggerHub 内部部署说明：</strong></th>
<th>此选项是在 v. 1.23 中添加的。</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
</tr>
</tbody></table>
</li>
<li><p><strong>可见性</strong> – 选择是将 API 设为<a href="https://support.smartbear.com/swaggerhub/docs/apis/public-and-private-apis.html" target="_blank" rel="noopener">公开还是私有</a>。任何人都可以看到公共 API，甚至没有 SwaggerHub 帐户的人也可以看到。私有 API 只能由您和您添加为<a href="https://support.smartbear.com/swaggerhub/docs/collaboration/collaborators.html" target="_blank" rel="noopener">协作者</a>的人员访问）。如果需要，您可以稍后更改 API 可见性。</p>
</li>
</ul>
<ol>
<li><p>单击<strong>导入</strong>。</p>
</li>
<li><p>在下一页上，指定导入 API 的名称和版本：</p>
<p><img src="/images/loading.gif" data-original="https://support.smartbear.com/swaggerhub/docs/_images/api/importing-api-step-2.png" alt=""></p>
<ul>
<li><p><strong>名称</strong> - API名称是其唯一的ID，是其对SwaggerHub路径的一部分，如<em><a href="https://app.swaggerhub.com/api/{owner}/" target="_blank" rel="noopener">https://app.swaggerhub.com/api/{owner}/</a>*</em>的PetStore** /1.0*。要求：</p>
<ul>
<li>3 到 60 个字符长</li>
<li>允许的字符： <code>A..Z a..z 0..9 - _ .</code></li>
<li>必须以字母或数字开头和结尾</li>
</ul>
<p>请注意，API 名称区分大小写，因此<em>petstore</em>和<em>PetStore</em>是两个不同的 API。</p>
<table>
<thead>
<tr>
<th><strong>小费：</strong></th>
<th>要将定义作为现有 API 的新版本导入，请输入现有 API 的名称。</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
</tr>
</tbody></table>
</li>
<li><p><strong>版本</strong> – 导入的 API 的版本。它在定义<code>info.version</code>域中定义。</p>
</li>
</ul>
</li>
<li><p>单击<strong>导入</strong>完成导入。</p>
</li>
</ol>
<p>导入 API 后，<a href="https://support.smartbear.com/swaggerhub/docs/ui/editor.html" target="_blank" rel="noopener">SwaggerHub 编辑器</a>将打开，您可以在其中编辑导入的 API 定义。</p>
<h3 id="作为现有-API-的一个版本导入"><a href="#作为现有-API-的一个版本导入" class="headerlink" title="作为现有 API 的一个版本导入"></a>作为现有 API 的一个版本导入</h3><p>您可以使用导入功能将 OpenAPI 定义导入为现有 API 的新版本。为此，请在导入参数中指定现有 API 的名称 (ID)。</p>
<p>如果 API 已经具有与<code>info.version</code>您正在导入的 OpenAPI 文件字段中指定的版本号相同的版本号，则该版本将被导入的定义覆盖（除非该版本已<a href="https://support.smartbear.com/swaggerhub/docs/apis/publishing-api.html" target="_blank" rel="noopener">发布</a> - 在这种情况下，导入将被拒绝） .</p>
<h3 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h3><h4 id="从-Swagger-UI-导入"><a href="#从-Swagger-UI-导入" class="headerlink" title="从 Swagger UI 导入"></a>从 Swagger UI 导入</h4><p>在 Swagger UI 中，API 定义文件的链接通常显示在标题中和 API 标题下方。这是您需要导入到 SwaggerHub 的链接。</p>
<p><img src="/images/loading.gif" data-original="../images/development/swagger-ui-definition-link.png" alt=""></p>
<p>单击图像放大。</p>
<p>更多信息：<a href="https://stackoverflow.com/questions/48525546/how-to-export-a-swagger-json-yaml-file-from-swagger-ui" target="_blank" rel="noopener">如何从 Swagger UI 导出 OpenAPI JSON/YAML 文件？</a></p>
<h4 id="从-GitHub-导入"><a href="#从-GitHub-导入" class="headerlink" title="从 GitHub 导入"></a>从 GitHub 导入</h4><p>在 GitHub 上浏览到您的 API 定义，然后单击<strong>Raw</strong>以获取指向实际文件的链接。这个链接看起来像<code>https://raw.githubusercontent.com/...</code>。使用此链接将您的 API 定义导入 SwaggerHub。</p>
<p>如果存储库是私有的，GitHub 将自动向链接添加访问令牌。</p>
<p><img src="/images/loading.gif" data-original="../images/development/github-raw-link.png" alt="获取 GitHub 上文件的原始链接"></p>
<p>单击图像放大。</p>
<h4 id="从-Bitbucket-导入"><a href="#从-Bitbucket-导入" class="headerlink" title="从 Bitbucket 导入"></a>从 Bitbucket 导入</h4><p>在 Bitbucket 上浏览到您的 API 定义，然后单击省略号按钮 ( <strong>…</strong> ) 并选择<strong>Open raw</strong>。使用生成的链接将您的定义导入 SwaggerHub。</p>
<p><img src="/images/loading.gif" data-original="../images/development/bitbucket-raw-link.png" alt=""></p>
<table>
<thead>
<tr>
<th><strong>笔记：</strong></th>
<th>这种方法只能用于从公共存储库导入。</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<h4 id="从-GitLab-导入"><a href="#从-GitLab-导入" class="headerlink" title="从 GitLab 导入"></a>从 GitLab 导入</h4><p>在 GitLab 上浏览到您的 API 定义，然后单击<strong>打开原始</strong>按钮以获取指向实际文件的链接。使用此链接将您的定义导入 SwaggerHub。</p>
<p><img src="/images/loading.gif" data-original="../images/development/gitlab-raw-link.png" alt=""></p>
<p>如果存储库是私有的，您还需要生成访问令牌并将其包含在链接中：</p>
<ol>
<li><p>如果您使用 GitLab.com，请访问<a href="https://gitlab.com/profile/personal_access_tokens。如果您使用自托管" target="_blank" rel="noopener">https://gitlab.com/profile/personal_access_tokens。如果您使用自托管</a> GitLab，请单击您的用户个人资料图片并选择<strong>Settings</strong>，然后选择<strong>Access Tokens</strong>。</p>
</li>
<li><p>创建具有<code>read_repository</code>or<code>api</code>范围的令牌。</p>
</li>
<li><p><code>?private_token=YOUR_TOKEN</code>在原始链接的末尾添加：</p>
<p><a href="https://gitlab.com/MyCompany/MyProject/raw/main/openapi.yaml?private_token=YOUR_TOKEN" target="_blank" rel="noopener">https://gitlab.com/MyCompany/MyProject/raw/main/openapi.yaml?private_token=YOUR_TOKEN</a></p>
</li>
</ol>
<p>在 SwaggerHub 导入对话框中指定生成的链接。</p>
<h2 id="Forking-an-API"><a href="#Forking-an-API" class="headerlink" title="Forking an API"></a>Forking an API</h2><p>Forking在您的帐户中创建API特定<a href="https://support.smartbear.com/swaggerhub/docs/apis/versioning.html" target="_blank" rel="noopener">版本</a>的副本。例如，您可以 fork 其他人的 API 作为您自己的 API 的起点。或者，您可以创建自己的 API 的分支，以在不影响原始 API 定义的情况下试验更改。</p>
<p>您可以分叉到您的个人帐户或您创建的任何<a href="https://support.smartbear.com/swaggerhub/docs/organizations/index.html" target="_blank" rel="noopener">组织</a>。</p>
<p>Fork 没有以任何方式链接到原始 API，因此原始 API 的更改不会影响 fork。</p>
<h3 id="公共与私有-API"><a href="#公共与私有-API" class="headerlink" title="公共与私有 API"></a>公共与私有 API</h3><p>任何登录的 SwaggerHub 用户都可以分叉公共 API。<a href="https://support.smartbear.com/swaggerhub/docs/apis/public-and-private-apis.html" target="_blank" rel="noopener">私有 API</a>只能由 API 所有者和该 API 的<a href="https://support.smartbear.com/swaggerhub/docs/collaboration/collaborators.html" target="_blank" rel="noopener">协作者</a>进行分叉。</p>
<h3 id="如何分叉-API"><a href="#如何分叉-API" class="headerlink" title="如何分叉 API"></a>如何分叉 API</h3><ol>
<li><p>在 SwaggerHub 中打开 API 页面。</p>
</li>
<li><p>如果 API 有多个版本，请选择要分叉的版本。</p>
<p><img src="/images/loading.gif" data-original="../images/development/selecting-api-version-163996777342789.png" alt=""></p>
</li>
<li><p>单击 API 名称。这将打开 API 信息面板。</p>
<p><img src="/images/loading.gif" data-original="../images/development/open-api-info-panel.png" alt=""></p>
</li>
<li><p><img src="/images/loading.gif" data-original="../images/development/fork.png" alt="叉"> 在 API 信息面板中单击。</p>
<p><img src="/images/loading.gif" data-original="../images/development/fork-163996777342588.png" alt=""></p>
</li>
<li><p>输入叉的名称并指定其他详细信息。</p>
<p><img src="/images/loading.gif" data-original="../images/development/forking-api.png" alt=""></p>
<ul>
<li><p><strong>API名称</strong> -您的API的ID，这将是SwaggerHub的API URL的一部分，如<em><a href="https://app.swaggerhub.com/api/{owner}/" target="_blank" rel="noopener">https://app.swaggerhub.com/api/{owner}/</a>*</em>的PetStore** /1.0*。</p>
<p>ID 的长度必须至少为 3 个字符，并且必须以字母或数字开头和结尾。您可以使用英文字母 (A..Z, a..z)、数字 (0..9)、点 (.)、连字符 (-) 和下划线 (_)。ID 区分大小写，因此<em>petstore</em>和<em>PetStore</em>是两个不同的 API。</p>
</li>
<li><p><strong>API 版本</strong> – API 版本。例如，<em>1.0</em>、<em>1.0.0</em>、<em>1.0b5</em>、<em>beta</em>（请参阅<a href="https://support.smartbear.com/swaggerhub/docs/apis/versioning.html#format" target="_blank" rel="noopener">版本格式</a>）。它不一定需要匹配您正在分叉的 API 版本，因为分叉将是一个完全不同的 API。</p>
</li>
<li><p><strong>所有者</strong> – 选择是在您的个人帐户还是<a href="https://support.smartbear.com/swaggerhub/docs/organizations/index.html" target="_blank" rel="noopener">组织</a>帐户中创建 API （如果您是 SwaggerHub 上组织的成员）。该API所有者是在SwaggerHub的API路径的一部分：<em><a href="https://app.swaggerhub.com/apis/" target="_blank" rel="noopener">https://app.swaggerhub.com/apis/</a>*</em>所有者*<em>/api-name/1.0</em>。组织拥有的 API 计入组织的限制而不是您的限制。</p>
<table>
<thead>
<tr>
<th><strong>笔记：</strong></th>
<th>组织所有者始终可以在该组织中创建 API。如果组织配置了<a href="https://support.smartbear.com/swaggerhub/docs/organizations/working-with/preferences.html" target="_blank" rel="noopener"><em>“组织”</em></a>选项<a href="https://support.smartbear.com/swaggerhub/docs/organizations/working-with/preferences.html" target="_blank" rel="noopener"><em>下的</em></a>“<a href="https://support.smartbear.com/swaggerhub/docs/organizations/working-with/preferences.html" target="_blank" rel="noopener"><em>允许设计者创建 API</em></a> ”，则具有<a href="https://support.smartbear.com/swaggerhub/docs/organizations/working-with/permissions.html" target="_blank" rel="noopener">设计者</a>角色的成员具有“创建”权限。</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
</tr>
</tbody></table>
</li>
<li><p><strong>项目</strong> – 如果选择一个组织作为<strong>Owner</strong>，您可以选择一个<a href="https://support.smartbear.com/swaggerhub/docs/organizations/projects/index.html" target="_blank" rel="noopener">项目</a>来添加这个 API。该列表包含您可以使用的现有项目。</p>
<table>
<thead>
<tr>
<th><strong>SwaggerHub 内部部署说明：</strong></th>
<th>此选项是在 v. 1.23 中添加的。</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
</tr>
</tbody></table>
</li>
<li><p><strong>可见性</strong> – 选择是将 API 设为<a href="https://support.smartbear.com/swaggerhub/docs/apis/public-and-private-apis.html" target="_blank" rel="noopener">公开还是私有</a>。任何人都可以看到公共 API，甚至没有 SwaggerHub 帐户的人也可以看到。私有 API 只能由您和您添加为<a href="https://support.smartbear.com/swaggerhub/docs/collaboration/collaborators.html" target="_blank" rel="noopener">协作者</a>的人员访问）。如果需要，您可以稍后更改 API 可见性。</p>
</li>
</ul>
</li>
<li><p>单击<strong>Fork API</strong>。</p>
</li>
</ol>
<p>SwaggerHub 会将 API 复制到指定的所有者帐户，并将在<a href="https://support.smartbear.com/swaggerhub/docs/ui/editor.html" target="_blank" rel="noopener">SwaggerHub 编辑器</a>中打开 API 定义，您可以在其中进行编辑。</p>
<h3 id="笔记"><a href="#笔记" class="headerlink" title="笔记"></a>笔记</h3><ul>
<li>Forking 不会复制原始 API 中存在的<a href="https://support.smartbear.com/swaggerhub/docs/integrations/index.html" target="_blank" rel="noopener">集成</a>和<a href="https://support.smartbear.com/swaggerhub/docs/collaboration/comments.html" target="_blank" rel="noopener">注释</a>。这是为了保护原始 API 的完整性而设计的。</li>
<li>在<a href="https://support.smartbear.com/swaggerhub/docs/apis/saving-as-new.html" target="_blank" rel="noopener">“另存为新的”</a>命令是另一种方式，以现有的规范复制到一个新的API规范。此命令仅适用于您可以在 SwaggerHub 中编辑的 API。Forking 可用于任何可访问的 API 规范。</li>
</ul>
<h2 id="Saving-an-API-as-a-New-API"><a href="#Saving-an-API-as-a-New-API" class="headerlink" title="Saving an API as a New API"></a>Saving an API as a New API</h2><p>您可以通过从 SwaggerHub 中存在的另一个 API 复制它来创建 API。您可以使用此功能将某些现有规范用作 API 规范的起点，或者您可以创建副本以试验更改而不影响原始规范。</p>
<p>要使用此功能，您必须是原始 API的所有者，或者您<strong>必须拥有</strong>它的<strong><a href="https://support.smartbear.com/swaggerhub/docs/collaboration/collaborators.html" target="_blank" rel="noopener">编辑权限</a></strong>。</p>
<p>新 API 可以属于您的个人帐户或您创建的任何<a href="https://support.smartbear.com/swaggerhub/docs/organizations/index.html" target="_blank" rel="noopener">组织</a>。</p>
<h3 id="怎么运行的"><a href="#怎么运行的" class="headerlink" title="怎么运行的"></a>怎么运行的</h3><ol>
<li><p>打开您的 API 规范之一进行编辑。</p>
<p>选择需要的版本：</p>
<p><img src="/images/loading.gif" data-original="../images/development/selecting-api-version-163996782460295.png" alt=""></p>
<p>如果需要，对规范进行更改。</p>
</li>
<li><p>选择<strong>另存为新</strong>命令：</p>
<p><img src="/images/loading.gif" data-original="../images/development/save-as-new-command.png" alt=""></p>
<p>这将打开以下对话框：</p>
<p><img src="/images/loading.gif" data-original="../images/development/save-as-new-dialog.png" alt=""></p>
</li>
<li><p>在对话框中，输入以下数据：</p>
<ul>
<li><p><strong>API名称</strong> - API名称是其唯一的ID，是其对SwaggerHub路径的一部分，如<em><a href="https://app.swaggerhub.com/api/{owner}/" target="_blank" rel="noopener">https://app.swaggerhub.com/api/{owner}/</a>*</em>的PetStore** /1.0*。要求：</p>
<ul>
<li>3 到 60 个字符长</li>
<li>允许的字符： <code>A..Z a..z 0..9 - _ .</code></li>
<li>必须以字母或数字开头和结尾</li>
</ul>
<p>请注意，API 名称区分大小写，因此<em>petstore</em>和<em>PetStore</em>是两个不同的 API。</p>
</li>
<li><p><strong>API 版本</strong> – 新 API 的初始版本。例如，<em>1.0</em>、<em>1.0.0</em>、<em>1.0b</em>等。请参阅<a href="https://support.smartbear.com/swaggerhub/docs/apis/versioning.html#format" target="_blank" rel="noopener">版本格式</a>。</p>
</li>
<li><p><strong>所有者</strong> – 选择是在您的个人帐户还是<a href="https://support.smartbear.com/swaggerhub/docs/organizations/index.html" target="_blank" rel="noopener">组织</a>帐户中创建 API （如果您是 SwaggerHub 上组织的成员）。该API所有者是在SwaggerHub的API路径的一部分：<em><a href="https://app.swaggerhub.com/apis/" target="_blank" rel="noopener">https://app.swaggerhub.com/apis/</a>*</em>所有者*<em>/api-name/1.0</em>。组织拥有的 API 计入组织的限制而不是您的限制。</p>
<table>
<thead>
<tr>
<th><strong>笔记：</strong></th>
<th>组织所有者始终可以在该组织中创建 API。如果组织配置了<a href="https://support.smartbear.com/swaggerhub/docs/organizations/working-with/preferences.html" target="_blank" rel="noopener"><em>“组织”</em></a>选项<a href="https://support.smartbear.com/swaggerhub/docs/organizations/working-with/preferences.html" target="_blank" rel="noopener"><em>下的</em></a>“<a href="https://support.smartbear.com/swaggerhub/docs/organizations/working-with/preferences.html" target="_blank" rel="noopener"><em>允许设计者创建 API</em></a> ”，则具有<a href="https://support.smartbear.com/swaggerhub/docs/organizations/working-with/permissions.html" target="_blank" rel="noopener">设计者</a>角色的成员具有“创建”权限。</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
</tr>
</tbody></table>
</li>
<li><p><strong>项目</strong> – 如果选择一个组织作为<strong>Owner</strong>，您可以选择一个<a href="https://support.smartbear.com/swaggerhub/docs/organizations/projects/index.html" target="_blank" rel="noopener">项目</a>来添加这个 API。该列表包含您可以使用的现有项目。</p>
<table>
<thead>
<tr>
<th><strong>SwaggerHub 内部部署说明：</strong></th>
<th>此选项是在 v. 1.23 中添加的。</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
</tr>
</tbody></table>
</li>
<li><p><strong>可见性</strong> – 选择是将 API 设为<a href="https://support.smartbear.com/swaggerhub/docs/apis/public-and-private-apis.html" target="_blank" rel="noopener">公开还是私有</a>。任何人都可以看到公共 API，甚至没有 SwaggerHub 帐户的人也可以看到。私有 API 只能由您和您添加为<a href="https://support.smartbear.com/swaggerhub/docs/collaboration/collaborators.html" target="_blank" rel="noopener">协作者</a>的人员访问）。如果需要，您可以稍后更改 API 可见性。</p>
</li>
</ul>
</li>
<li><p>点击<strong>保存</strong>。</p>
</li>
</ol>
<h2 id="Publishing-an-API"><a href="#Publishing-an-API" class="headerlink" title="Publishing an API"></a>Publishing an API</h2><p>当您觉得您的 API 定义已准备好用于生产时，您可以发布它。发布是一种表明 API 处于稳定状态并且可以从其他应用程序可靠地调用其端点的方式。</p>
<p>发布使 API 定义为只读，因此您在此之后所做的任何更改都应保存为API的<a href="https://support.smartbear.com/swaggerhub/docs/apis/versioning.html" target="_blank" rel="noopener">新版本</a>。 <a href="https://support.smartbear.com/swaggerhub/docs/collaboration/collaborators.html" target="_blank" rel="noopener">协作者</a>也无法编辑已发布的版本。</p>
<h3 id="已发布和未发布的-API-之间的区别"><a href="#已发布和未发布的-API-之间的区别" class="headerlink" title="已发布和未发布的 API 之间的区别"></a>已发布和未发布的 API 之间的区别</h3><p>区别主要在于语义：</p>
<ul>
<li>一个<em>未公开的</em>API定义是一个草案，在正在进行的工作。SwaggerHub 中的每个 API 一开始都未发布。尽管未发布的 API 列在 SwaggerHub 注册表中，但它们尚未准备好供 API 使用者使用。</li>
<li>一<em>公布的</em>API定义是一个稳定版本准备好从客户端应用程序消耗。它不应被更改，任何更改都将作为 API 的新版本引入。</li>
</ul>
<p>从技术上讲，区别在于发布的 API 版本无法编辑（除非您取消发布它们）。如果您想更改某些内容，您应该创建一个新版本的 API 并在其中进行更改。</p>
<p>SwaggerHub 在已<strong>发布的</strong>API 和域旁边显示已<strong>发布</strong>标签。搜索 SwaggerHub 的人还可以过滤列表以仅显示已发布的 API。</p>
<p><img src="/images/loading.gif" data-original="../images/development/published-apis.png" alt=""></p>
<h3 id="已发布-未发布与公共-私人"><a href="#已发布-未发布与公共-私人" class="headerlink" title="已发布/未发布与公共/私人"></a>已发布/未发布与公共/私人</h3><p>已发布和未发布与<a href="https://support.smartbear.com/swaggerhub/docs/apis/public-and-private-apis.html" target="_blank" rel="noopener">public 和 private 不同</a>。公共和私有表示谁可以在 SwaggerHub 中看到 API——每个人或只是选定的合作者。已发布和未发布表示生产准备就绪——API 是否已准备好供使用。</p>
<h3 id="发布-API-版本"><a href="#发布-API-版本" class="headerlink" title="发布 API 版本"></a>发布 API 版本</h3><p>API 所有者和具有<em>编辑器</em>角色的协作者可以发布 API 版本。</p>
<ol>
<li><p>转到 SwaggerHub 中的 API 页面。</p>
</li>
<li><p>如果 API 有多个版本，请选择您要发布的版本。</p>
<p><img src="/images/loading.gif" data-original="../images/development/selecting-api-version-1639967928898100.png" alt=""></p>
</li>
<li><p>打开版本列表并单击<img src="/images/loading.gif" data-original="../images/development/publish-1639967928898102.png" alt=""> <strong>发布版本</strong>。</p>
</li>
<li><p>（可选。）选择<strong>设置为默认版本</strong>以使该版本成为您的 API的<a href="https://support.smartbear.com/swaggerhub/docs/apis/versioning.html#default" target="_blank" rel="noopener">默认版本</a>。</p>
<p><img src="/images/loading.gif" data-original="../images/development/publish-api-version.png" alt=""></p>
</li>
<li><p>单击<strong>发布版本</strong>。</p>
</li>
</ol>
<p>发布后，API 版本<strong>将变为只读</strong>且无法编辑。如果您需要添加新端点、更改参数等，您应该创建 API 的新版本并在那里进行更改。但是，如果您需要对已发布的 API 进行一些重要更改，您可以暂时<a href="https://support.smartbear.com/swaggerhub/docs/apis/publishing-api.html#unpublish" target="_blank" rel="noopener">取消发布它</a>。</p>
<table>
<thead>
<tr>
<th><strong>笔记：</strong></th>
<th>当 API 发布或取消发布时，所有<a href="https://support.smartbear.com/swaggerhub/docs/collaboration/collaborators.html" target="_blank" rel="noopener">协作者都会</a>收到电子邮件通知。</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id="取消发布-API-版本"><a href="#取消发布-API-版本" class="headerlink" title="取消发布 API 版本"></a>取消发布 API 版本</h3><p>如果您改变主意并希望拉回 API 定义以进行一些更改，您可以取消发布 API。为此，您必须是 API 所有者或具有<em>编辑者</em>角色的协作者。</p>
<ol>
<li><p>在 SwaggerHub 编辑器中打开 API。</p>
</li>
<li><p>如果 API 有多个版本，请切换到您要取消发布的版本。</p>
<p><img src="/images/loading.gif" data-original="../images/development/selecting-api-version-1639967928898100.png" alt=""></p>
</li>
<li><p>打开版本列表，然后单击<img src="/images/loading.gif" data-original="../images/development/unpublish.png" alt=""> <strong>取消发布版本</strong>。</p>
</li>
<li><p>在对话框中，单击<strong>取消发布版本</strong>。</p>
</li>
</ol>
<p>现在可以再次编辑此 API 版本。</p>
<h3 id="通过-CLI-发布和取消发布"><a href="#通过-CLI-发布和取消发布" class="headerlink" title="通过 CLI 发布和取消发布"></a>通过 CLI 发布和取消发布</h3><p>使用<a href="https://github.com/SmartBear/swaggerhub-cli" target="_blank" rel="noopener">SwaggerHub CLI 从命令行</a>发布和<a href="https://github.com/SmartBear/swaggerhub-cli" target="_blank" rel="noopener">取消</a>发布您的 API。</p>
<p>发布：</p>
<p>swaggerhub api：发布所有者/API_NAME/VERSION</p>
<p>取消发布：</p>
<p>swaggerhub api：取消发布所有者/API_NAME/VERSION</p>
<p><code>api:create</code>并且<code>api:update</code>还可以<code>--published=publish|unpublish</code>选择：</p>
<p>swaggerhub api：更新所有者/API_NAME/VERSION –file myapi.yaml –published=publish</p>
<h2 id="版本控制"><a href="#版本控制" class="headerlink" title="版本控制"></a>版本控制</h2><p>SwaggerHub 允许您管理 API 或<a href="https://support.smartbear.com/swaggerhub/docs/domains/index.html" target="_blank" rel="noopener">域</a>定义的多个版本。当您需要添加新的 API 操作或参数、添加数据模型等时，您通常会启动一个新版本。一旦新版本准备好供客户端应用程序使用，您就可以<a href="https://support.smartbear.com/swaggerhub/docs/apis/publishing-api.html" target="_blank" rel="noopener">发布</a>它。通过这种方式，您可以不断增强 API，同时为 API 使用者提供干净的发布版本。</p>
<h3 id="版本列表"><a href="#版本列表" class="headerlink" title="版本列表"></a>版本列表</h3><p>所有版本都列在 API（域）名称旁边的下拉列表中，因此您只需单击几下即可在版本之间切换。</p>
<p><img src="/images/loading.gif" data-original="../images/development/versions.png" alt=""></p>
<p>API 版本也存储在<code>info.version</code>OpenAPI (Swagger) 定义中的密钥中：</p>
<pre><code>info:
  title: Petstore
  version: 1.0.0</code></pre><p>API 版本不相互依赖。它们可以有不同的 API 操作、参数、描述等。以下内容是特定于版本的，不会在版本之间共享：</p>
<ul>
<li>OpenAPI 定义的内容，</li>
<li>公共/私人和已发布/未发布状态，</li>
<li><a href="https://support.smartbear.com/swaggerhub/docs/integrations/index.html" target="_blank" rel="noopener">集成</a>（但您可以在创建新版本时<a href="https://support.smartbear.com/swaggerhub/docs/integrations/index.html" target="_blank" rel="noopener">继承一些集成</a>），</li>
<li><a href="https://support.smartbear.com/swaggerhub/docs/apis/generating-code/options.html" target="_blank" rel="noopener">代码生成选项</a>，</li>
<li><a href="https://support.smartbear.com/swaggerhub/docs/collaboration/comments.html" target="_blank" rel="noopener">评论</a>。</li>
</ul>
<h3 id="版本格式"><a href="#版本格式" class="headerlink" title="版本格式"></a>版本格式</h3><p>通常，版本号看起来像 1.0.0，但它们实际上可以包含以下任何字符：</p>
<pre><code>0-9 A-Z a-z . _ -</code></pre><p><strong>注意：</strong>版本号必须以数字或字母开头和结尾。</p>
<p>以下是有效版本号的示例：</p>
<pre><code>1
1.0
0.0.1
1.2.3.4
2.4_15
1.0b5
1.2.0-rc3
v1
beta
2016-04-15</code></pre><p>您可以选择任何版本控制方案，但我们建议使用<a href="http://semver.org/" target="_blank" rel="noopener">语义版本控制</a>，它使用格式为<code>major.minor.patch</code>.</p>
<h3 id="添加新版本-1"><a href="#添加新版本-1" class="headerlink" title="添加新版本"></a>添加新版本</h3><p>任何对 API 具有编辑权限的人都可以创建和删除版本。这包括 API 所有者和具有<em>编辑器</em>角色的<a href="https://support.smartbear.com/swaggerhub/docs/collaboration/collaborators.html" target="_blank" rel="noopener">协作者</a>。</p>
<p>有多种方法可以将新版本添加到 API 或域。</p>
<table>
<thead>
<tr>
<th><strong>笔记：</strong></th>
<th>当您创建新的 API 版本时，您还可以<a href="https://support.smartbear.com/swaggerhub/docs/integrations/copying.html" target="_blank" rel="noopener">将一些现有的集成</a>转移到新版本中。</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<h4 id="选项1"><a href="#选项1" class="headerlink" title="选项1"></a>选项1</h4><p>打开版本号旁边的下拉菜单，选择<strong>Create New Version</strong>，然后输入新版本号。新版本将包含与当前版本相同的内容。</p>
<p><img src="/images/loading.gif" data-original="../images/development/create-new-version-1639968072440107.png" alt=""></p>
<h4 id="选项-2"><a href="#选项-2" class="headerlink" title="选项 2"></a>选项 2</h4><p>您可以<code>version</code>在<code>info</code>API 或域的部分中更改。如果执行此操作，“<strong>保存”</strong>按钮将更改为“<strong>创建新版本”</strong>。单击它可将内容另存为新版本。</p>
<p><strong>注意：</strong>这仅适用于未发布的 API 和域，因为已发布的 API 是只读的且无法编辑。</p>
<p><img src="/images/loading.gif" data-original="../images/development/create-version-2.png" alt=""></p>
<h3 id="版本排序"><a href="#版本排序" class="headerlink" title="版本排序"></a>版本排序</h3><p>如果 API 或域使用语义版本控制 ( <code>major.minor.patch</code>)，则 SwaggerHub 编辑器按降序显示版本，最新版本在顶部。其他格式的版本号按创建顺序显示。</p>
<h3 id="设置默认版本"><a href="#设置默认版本" class="headerlink" title="设置默认版本"></a>设置默认版本</h3><p>默认版本是在 SwaggerHub 的搜索结果中显示的版本，或者当有人在没有特定版本号的情况下直接导航到您的 API 或域定义时显示的版本，例如<a href="https://app.swaggerhub.com/api/swagger-hub/registry-api/" target="_blank" rel="noopener">https://app.swaggerhub.com/api/swagger-hub/registry- api/</a> . 在编辑器中，默认版本标有 图标。</p>
<p><img src="/images/loading.gif" data-original="../images/development/default-version.png" alt=""></p>
<p>要更改默认版本，请单击该版本旁边的<img src="/images/loading.gif" data-original="../images/development/default.png" alt="img"> <strong>设置为默认值</strong>：</p>
<p><img src="/images/loading.gif" data-original="../images/development/change-default-version.png" alt=""></p>
<p>此外，当您创建新版本或发布版本时，您可以将此版本设置为默认版本：</p>
<p><img src="/images/loading.gif" data-original="../images/development/set-as-default-version.png" alt=""></p>
<h3 id="查看谁创建了版本"><a href="#查看谁创建了版本" class="headerlink" title="查看谁创建了版本"></a>查看谁创建了版本</h3><p>您可以在“信息”面板底部看到谁创建了 API 或域版本：</p>
<p><img src="/images/loading.gif" data-original="../images/development/created-by.png" alt=""></p>
<p><strong>注：</strong>在<strong>创建</strong>信息仅适用于人的API和域的版本：</p>
<ul>
<li>2019 年 11 月 26 日之后在 SwaggerHub SaaS 中创建，</li>
<li>在 SwaggerHub On-Premise 1.23 及更高版本中创建。</li>
</ul>
<p>可以在历史<a href="https://support.smartbear.com/swaggerhub/docs/organizations/audit-log.html" target="_blank" rel="noopener">审计日志中</a>找到有关早期版本的信息。</p>
<h3 id="重命名版本"><a href="#重命名版本" class="headerlink" title="重命名版本"></a>重命名版本</h3><p>没有直接的方法来重命名版本，但您可以使用以下解决方法：</p>
<ol>
<li>切换到要重命名的版本。</li>
<li><a href="https://support.smartbear.com/swaggerhub/docs/apis/versioning.html#add" target="_blank" rel="noopener">创建</a>具有所需版本号<a href="https://support.smartbear.com/swaggerhub/docs/apis/versioning.html#add" target="_blank" rel="noopener">的新版本</a>。</li>
<li>删除旧版本。</li>
</ol>
<h3 id="比较版本"><a href="#比较版本" class="headerlink" title="比较版本"></a>比较版本</h3><p>您可以比较两个 API 版本以了解它们的不同之处。要做到这一点：</p>
<ol>
<li><p>打开您的 API 并选择您要比较的版本之一。</p>
</li>
<li><p>在版本列表中，单击 在要比较的版本旁边。</p>
<p><img src="/images/loading.gif" data-original="../images/development/compare-apis.png" alt=""></p>
</li>
</ol>
<p>这将打开<a href="https://support.smartbear.com/swaggerhub/docs/apis/compare-and-merge.html#diff-window" target="_blank" rel="noopener">差异视图</a>，您可以在其中查看版本之间的差异。</p>
<p>您还可以比较不同 API 的版本，如<a href="https://support.smartbear.com/swaggerhub/docs/apis/compare-and-merge.html" target="_blank" rel="noopener">比较和合并 API 版本中所述</a>。</p>
<h3 id="删除版本"><a href="#删除版本" class="headerlink" title="删除版本"></a>删除版本</h3><p>如果您的 API 有两个或更多版本，您可以删除不再需要的旧版本。<strong>此操作无法撤消。</strong>请注意，如果 API 只有一个版本，您可以<a href="https://support.smartbear.com/swaggerhub/docs/apis/deleting-api.html" target="_blank" rel="noopener">删除该 API</a>。</p>
<table>
<thead>
<tr>
<th><strong>笔记：</strong></th>
<th>您只能删除未发布的版本。如果发布了版本，需要先取消发布：选择该版本，点击<img src="/images/loading.gif" data-original="../images/development/unpublish-1639968072441116.png" alt="img">。</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>要删除版本，请单击 在版本列表中该版本旁边：</p>
<p><img src="/images/loading.gif" data-original="../images/development/delete-version.png" alt=""></p>
<h2 id="API-文档的自定义品牌"><a href="#API-文档的自定义品牌" class="headerlink" title="API 文档的自定义品牌"></a>API 文档的自定义品牌</h2><p><strong>*注意：</strong>在 SwaggerHub SaaS、SwaggerHub On-Premise 1.20.0 及更高版本中可用。*</p>
<p>组织可以将自定义品牌添加到 SwaggerHub 上的 API 文档中。品牌选项包括自定义徽标和标题颜色，它们将显示在API 和域<a href="https://support.smartbear.com/swaggerhub/docs/ui/interactive-documentation.html" target="_blank" rel="noopener">的面向消费者的文档</a>中。</p>
<p><img src="/images/loading.gif" data-original="../images/development/custom-branding-1639968200700120.png" alt="SwaggerHub 上的自定义文档品牌"></p>
<h3 id="计划"><a href="#计划" class="headerlink" title="计划"></a>计划</h3><p>Docs Branding 适用于使用 Team 和 Enterprise 计划的组织。团队计划将在自定义徽标下显示额外的“由 SwaggerHub 提供支持”徽章。</p>
<h3 id="标志要求"><a href="#标志要求" class="headerlink" title="标志要求"></a>标志要求</h3><ul>
<li>PNG 或 JPG</li>
<li>小于 2 MB</li>
</ul>
<p>为获得最佳效果，请使用：</p>
<ul>
<li>具有透明背景的 PNG 图像</li>
<li>尺寸最大为 230×55 像素的图像（较大的图像将按比例缩小以适应此尺寸）</li>
</ul>
<h3 id="应用品牌"><a href="#应用品牌" class="headerlink" title="应用品牌"></a>应用品牌</h3><p>组织所有者可以在组织设置的<strong>Docs Branding</strong>页面上配置品牌选项：</p>
<ol>
<li><p>单击您的用户名并选择<strong>Settings</strong>。</p>
</li>
<li><p>切换到<strong>我的组织</strong>选项卡。</p>
</li>
<li><p>单击<img src="/images/loading.gif" data-original="../images/development/details.png" alt=""> 组织名称旁边的。</p>
</li>
<li><p>在左侧边栏中选择<strong>Docs Branding</strong>。</p>
<p><img src="/images/loading.gif" data-original="../images/development/settings-1639968200700119.png" alt=""></p>
</li>
<li><p>指定品牌选项：</p>
<ul>
<li><p><strong>上传标志</strong> – 将您的图像拖放到上传区域，或单击上传区域手动选择图像。确保徽标图像符合<a href="https://support.smartbear.com/swaggerhub/docs/apis/docs-branding.html#logo" target="_blank" rel="noopener">要求</a>。</p>
<table>
<thead>
<tr>
<th><strong>小费：</strong></th>
<th>要裁剪或调整徽标大小，请单击 <strong>编辑</strong>和使用图像编辑器（见<a href="https://support.smartbear.com/swaggerhub/docs/apis/docs-branding.html#edit-logo" target="_blank" rel="noopener">下文</a>）。</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
</tr>
</tbody></table>
</li>
<li><p><strong>替代文本</strong> – HTML 代码中<code>alt</code>徽标<code>&lt;img&gt;</code>标签属性的文本。例如，<em>YourCompanyName</em>。</p>
</li>
<li><p><strong>标题样式</strong> – 文档标题颜色为十六进制 HTML 颜色代码，<code>#xxxxxx</code>. 您可以使用[Google 颜色选择器](<a href="https://www.google.com/search?q=color" target="_blank" rel="noopener">https://www.google.com/search?q=color</a> picker)来查找十六进制颜色值。</p>
</li>
</ul>
</li>
<li><p>单击<strong>保存草稿</strong>。此时，品牌设置已保存，但尚未应用。</p>
</li>
<li><p>单击<strong>预览</strong>以查看您的品牌在示例 API 中的外观。</p>
</li>
<li><p>最后，点击<strong>去住</strong>以应用自定义品牌。</p>
<p><img src="/images/loading.gif" data-original="../images/development/go-live.png" alt=""></p>
</li>
</ol>
<p>您组织的 API 和域的文档页面现在将显示您的自定义徽标。</p>
<h3 id="裁剪或调整徽标大小"><a href="#裁剪或调整徽标大小" class="headerlink" title="裁剪或调整徽标大小"></a>裁剪或调整徽标大小</h3><p>您可以根据需要裁剪上传的徽标并调整其大小。为此，请单击 在徽标下<strong>编辑</strong>并使用徽标编辑器工具。</p>
<p><img src="/images/loading.gif" data-original="../images/development/edit-logo.png" alt=""></p>
<p>要裁剪徽标，请单击 <strong>裁剪</strong>，然后绘制裁剪区域的边缘，或手动输入<strong>新尺寸</strong>。您还可以单击裁剪区域并将其拖动到其他位置。准备好后，单击<strong>应用</strong>。</p>
<p><img src="/images/loading.gif" data-original="../images/development/crop-logo.gif" alt=""></p>
<p>要调整徽标大小，请单击<img src="/images/loading.gif" data-original="../images/development/resize.png" alt=""> <strong>缩放</strong>，然后拖动角以调整徽标大小，或手动输入<strong>新尺寸</strong>。准备好后，单击<strong>应用</strong>。<strong>注意：</strong>徽标的最大尺寸为 230×50 像素。</p>
<p>这 <strong>撤消</strong>按钮可让您撤消上一个操作。</p>
<p>对新徽标大小感到满意后，请关闭徽标编辑器，然后单击“<strong>保存草稿</strong>并上线<strong>”</strong>。</p>
<h3 id="更换标志"><a href="#更换标志" class="headerlink" title="更换标志"></a>更换标志</h3><ol>
<li>打开组织设置的<strong>Docs Branding</strong>页面。</li>
<li>将新徽标拖放到徽标区域，或单击徽标手动选择新文件。</li>
<li>单击“<strong>保存草稿”</strong>，然后单击<strong>“上线”</strong>。</li>
</ol>
<h3 id="恢复默认样式"><a href="#恢复默认样式" class="headerlink" title="恢复默认样式"></a>恢复默认样式</h3><p>要恢复 API 文档中的默认 SwaggerHub 徽标和标题颜色：</p>
<ol>
<li>打开组织设置的<strong>Docs Branding</strong>页面。</li>
<li>通过单击删除徽标 <strong>删除</strong>。</li>
<li>删除<strong>替代文本</strong>和<strong>标题样式</strong>值。</li>
<li>单击“<strong>保存草稿”</strong>，然后单击<strong>“上线”</strong>。</li>
</ol>
<h2 id="比较和合并-API-版本"><a href="#比较和合并-API-版本" class="headerlink" title="比较和合并 API 版本"></a>比较和合并 API 版本</h2><p>SwaggerHub 有一个内置的差异工具，可让您比较和合并 API 定义。你可以：</p>
<ul>
<li>比较相同 API 的<a href="https://support.smartbear.com/swaggerhub/docs/apis/versioning.html" target="_blank" rel="noopener">版本</a>。</li>
<li>将 API 定义与 SwaggerHub 上的另一个 API 或外部 API 定义进行比较。</li>
</ul>
<h3 id="要求"><a href="#要求" class="headerlink" title="要求"></a>要求</h3><ul>
<li>被比较的 API 定义必须是有效的 YAML。</li>
<li>要使用“比较和合并”工具，您必须在当前 API 中具有<a href="https://support.smartbear.com/swaggerhub/docs/organizations/working-with/permissions.html" target="_blank" rel="noopener">编辑</a>权限。</li>
</ul>
<h3 id="比较相同-API-的版本"><a href="#比较相同-API-的版本" class="headerlink" title="比较相同 API 的版本"></a>比较相同 API 的版本</h3><ol>
<li><p>在 SwaggerHub 编辑器中打开 API。</p>
</li>
<li><p>切换到要比较的版本之一。</p>
</li>
<li><p>点击 在要比较的版本旁边。</p>
<p><img src="/images/loading.gif" data-original="../images/development/compare-apis-1639968287731128.png" alt=""></p>
</li>
</ol>
<h3 id="与-SwaggerHub-上的另一个-API-进行比较"><a href="#与-SwaggerHub-上的另一个-API-进行比较" class="headerlink" title="与 SwaggerHub 上的另一个 API 进行比较"></a>与 SwaggerHub 上的另一个 API 进行比较</h3><ol>
<li><p>在 SwaggerHub 编辑器中打开您的 API。</p>
</li>
<li><p>如果您的 API 有多个版本，请切换到您要比较的版本。</p>
</li>
<li><p>单击 API 名称。这将打开 API 信息面板。</p>
<p><img src="/images/loading.gif" data-original="../images/development/open-api-info-panel-1639968287731130.png" alt=""></p>
</li>
<li><p><img src="/images/loading.gif" data-original="../images/development/compare-2.png" alt=""> 在 API 信息面板中单击。</p>
<p><img src="/images/loading.gif" data-original="../images/development/compare-and-merge.png" alt=""></p>
</li>
<li><p><strong>在 SwaggerHub 上</strong>选择<strong>与 API 比较</strong>。</p>
<p><img src="/images/loading.gif" data-original="../images/development/compare-with-spec-in-swaggerhub.png" alt=""></p>
</li>
<li><p>指定要与之进行比较的 API 的所有者、名称和版本。</p>
<p><img src="/images/loading.gif" data-original="../images/development/compare-with-spec-in-swaggerhub-2.png" alt=""></p>
</li>
<li><p>单击<strong>下一步</strong>继续<a href="https://support.smartbear.com/swaggerhub/docs/apis/compare-and-merge.html#diff-window" target="_blank" rel="noopener">差异视图</a>。</p>
</li>
</ol>
<h3 id="与外部-API-定义进行比较"><a href="#与外部-API-定义进行比较" class="headerlink" title="与外部 API 定义进行比较"></a>与外部 API 定义进行比较</h3><ol>
<li><p>在 SwaggerHub 编辑器中打开您的 API。</p>
</li>
<li><p>如果您的 API 有多个版本，请切换到您要比较的版本。</p>
</li>
<li><p>单击 API 名称。这将打开 API 信息面板。</p>
<p><img src="/images/loading.gif" data-original="../images/development/open-api-info-panel-1639968287731130.png" alt=""></p>
</li>
<li><p><img src="/images/loading.gif" data-original="../images/development/compare-2.png" alt=""> 在 API 信息面板中单击。</p>
<p><img src="/images/loading.gif" data-original="../images/development/compare-and-merge.png" alt=""></p>
</li>
<li><p>选择<strong>与外部 API 比较</strong>。</p>
<p><img src="/images/loading.gif" data-original="../images/development/compare-with-spec-in-file.png" alt=""></p>
</li>
<li><p>指定要与之进行比较的 YAML 或 JSON 定义的 URL。要从您的计算机上传文件，请单击<strong>浏览</strong>。</p>
<p><img src="/images/loading.gif" data-original="../images/development/compare-with-spec-in-file-2.png" alt=""></p>
</li>
<li><p>单击“<strong>获取”</strong>以继续。</p>
</li>
</ol>
<h3 id="差异视图"><a href="#差异视图" class="headerlink" title="差异视图"></a>差异视图</h3><p>diff 视图如下所示，右侧是当前 API 版本，左侧是其他版本。添加的行以绿色突出显示，修改的行 - 蓝色，删除的行 - 红色。</p>
<p><img src="/images/loading.gif" data-original="../images/development/difference-window.png" alt=""></p>
<p>底部的<strong>比较类型</strong>选项控制要比较的内容：</p>
<table>
<thead>
<tr>
<th align="left">比较类型</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>设计 + 元数据</strong></td>
<td align="left">比较 OpenAPI 密钥和密钥值。</td>
</tr>
<tr>
<td align="left"><strong>仅设计</strong></td>
<td align="left">仅检查结构，例如新的或删除的 OpenAPI 密钥。键值的差异被忽略。</td>
</tr>
</tbody></table>
<p>定义中的键顺序不被视为差异，除非您更改了键值或添加或删除了某些键。</p>
<h3 id="（可选）合并差异"><a href="#（可选）合并差异" class="headerlink" title="（可选）合并差异"></a>（可选）合并差异</h3><ol>
<li>单击窗口右侧或左侧部分突出显示的差异线（或块）。SwaggerHub 会将块从窗口左侧复制到右侧（即，复制到您的 API）并将删除突出显示。它还将增加<strong>撤消</strong>按钮中的计数器。</li>
<li>如果需要，单击<strong>撤消</strong>以恢复最近的批准。要恢复多次批准，请多次单击“<strong>撤消”</strong>。</li>
<li>合并所有需要的差异后，单击<strong>保存更改</strong>以保存更改。这将使用选定的更改<strong>更新当前版本</strong>。</li>
</ol>
<h2 id="从-SwaggerHub-下载-OpenAPI-定义"><a href="#从-SwaggerHub-下载-OpenAPI-定义" class="headerlink" title="从 SwaggerHub 下载 OpenAPI 定义"></a>从 SwaggerHub 下载 OpenAPI 定义</h2><p>SwaggerHub 允许您以 YAML 或 JSON 格式下载任何 API 或<a href="https://support.smartbear.com/swaggerhub/docs/domains/index.html" target="_blank" rel="noopener">域</a>的 OpenAPI (Swagger) 定义。</p>
<h3 id="从-SwaggerHub-编辑器下载"><a href="#从-SwaggerHub-编辑器下载" class="headerlink" title="从 SwaggerHub 编辑器下载"></a>从 SwaggerHub 编辑器下载</h3><ol>
<li><p>在 SwaggerHub 编辑器中打开 API。</p>
</li>
<li><p>如果 API 有多个版本，请选择您要下载的版本。</p>
<p><img src="/images/loading.gif" data-original="../images/development/selecting-api-version-1639968462067139.png" alt=""></p>
</li>
<li><p>从“<strong>导出”</strong>菜单中，选择“<strong>下载 API”</strong>，然后选择所需的格式 - YAML 或 JSON。</p>
<p><img src="/images/loading.gif" data-original="../images/development/download-swagger-definition-1.png" alt=""></p>
</li>
</ol>
<p>可以选择下载已<em>解析</em>或未<em>解析的</em>定义。如果您的定义包含外部<a href="https://swagger.io/docs/specification/using-ref/" target="_blank" rel="noopener">$ref 链接</a>，例如到<a href="https://support.smartbear.com/swaggerhub/docs/domains/index.html" target="_blank" rel="noopener">域的</a><a href="https://swagger.io/docs/specification/using-ref/" target="_blank" rel="noopener">链接</a>，这会有所不同。</p>
<ul>
<li><strong>未解析</strong>意味着不会<strong>解析</strong>外部链接，生成的文件将包含<code>$ref</code>在编辑器中出现的链接。</li>
<li><strong>Resolved</strong>意味着外部链接将被解析，即外部文件的内容将包含在结果定义中。</li>
</ul>
<h3 id="通过-URL-下载"><a href="#通过-URL-下载" class="headerlink" title="通过 URL 下载"></a>通过 URL 下载</h3><h4 id="公共-API"><a href="#公共-API" class="headerlink" title="公共 API"></a>公共 API</h4><p>一个快速的方法来下载OpenAPI的定义从SwaggerHub是取代<code>app</code>与<code>api</code>在地址栏，如下图所示。如果 URL 以指向标记或操作的<a href="https://support.smartbear.com/swaggerhub/docs/ui/interactive-documentation.html#permalinks" target="_blank" rel="noopener">永久链接</a>结尾，例如<code>#/pets</code>，请删除该部分。</p>
<p><img src="/images/loading.gif" data-original="../images/development/download-swagger-definition-2.png" alt=""></p>
<p>在 SwaggerHub On-Premise 中，<code>/v1</code>改为在主机名后添加：</p>
<p><img src="/images/loading.gif" data-original="../images/development/download-definition-onprem.png" alt=""></p>
<p>下载 URL 格式如下：</p>
<pre><code>https://api.swaggerhub.com/apis/{owner}/{api}/{version}         # SwaggerHub SaaS
http(s)://{swaggerhub-host}/v1/apis/{owner}/{api}/{version}     # SwaggerHub On-Premise</code></pre><p>您还可以使用 cURL 等工具从 SwaggerHub 下载定义：</p>
<pre><code>curl https://api.swaggerhub.com/apis/swagger-tutorials/petstore/1.0.0</code></pre><p>这会将 API 定义下载为 JSON。如果您需要 YAML，请在末尾附加<code>/swagger.yaml</code>，或使用<code>Accept: application/yaml</code>标头：</p>
<pre><code>curl https://api.swaggerhub.com/apis/swagger-tutorials/petstore/1.0.0/swagger.yaml
curl -H "Accept: application/yaml" https://api.swaggerhub.com/apis/swagger-tutorials/petstore/1.0.0</code></pre><h4 id="已解析的-YAML-JSON"><a href="#已解析的-YAML-JSON" class="headerlink" title="已解析的 YAML/JSON"></a>已解析的 YAML/JSON</h4><p><em>此信息适用于 SwaggerHub SaaS、SwaggerHub On-Premise 1.25.0 及更高版本。</em></p>
<p>要获取<a href="https://support.smartbear.com/swaggerhub/docs/apis/downloading-swagger-definition.html#resolved" target="_blank" rel="noopener">解析的</a>API 定义，请附加<code>?resolved=true</code>到下载 URL。</p>
<p>已解决的 YAML：</p>
<pre><code>https://api.swaggerhub.com/apis/{owner}/{api}/{version}/swagger.yaml?resolved=true</code></pre><p>解析的 JSON：</p>
<pre><code>https://api.swaggerhub.com/apis/{owner}/{api}/{version}?resolved=true</code></pre><p>在内部部署的 SwaggerHub 中：</p>
<pre><code>http(s)://{swaggerhub-host}/v1/apis/{owner}/{api}/{version}/swagger.yaml?resolved=true
http(s)://{swaggerhub-host}/v1/apis/{owner}/{api}/{version}?resolved=true</code></pre><h4 id="私有-API"><a href="#私有-API" class="headerlink" title="私有 API"></a>私有 API</h4><p>如果 API 定义是私有的，请添加<code>Authorization: API_KEY</code>包含您的 SwaggerHub <a href="https://app.swaggerhub.com/settings/apiKey" target="_blank" rel="noopener">API 密钥</a>的标头 ：</p>
<pre><code>curl -H "Authorization: API_KEY" https://api.swaggerhub.com/apis/{owner}/{api}/{version}</code></pre><h3 id="Maven-和-Gradle-插件"><a href="#Maven-和-Gradle-插件" class="headerlink" title="Maven 和 Gradle 插件"></a>Maven 和 Gradle 插件</h3><p>SwaggerHub 具有<a href="https://github.com/swagger-api/swaggerhub-maven-plugin" target="_blank" rel="noopener">Maven</a>和<a href="https://github.com/swagger-api/swaggerhub-gradle-plugin" target="_blank" rel="noopener">Gradle</a>插件，允许您下载 API 定义作为 CI/CD 管道的一部分。</p>
<h2 id="转让-API-所有权"><a href="#转让-API-所有权" class="headerlink" title="转让 API 所有权"></a>转让 API 所有权</h2><p>您可以在 SwaggerHub 中将 API 传输给其他用户或组织。除非新所有者具有将所有权归还给前所有者的良好意愿，否则<strong>此操作无法撤消</strong>。</p>
<p>当个人 API 转移给新的所有者时，之前的所有者将被添加为具有编辑权限的<a href="https://support.smartbear.com/swaggerhub/docs/collaboration/collaborators.html" target="_blank" rel="noopener">协作者</a>。</p>
<h3 id="转让所有权所需的权限"><a href="#转让所有权所需的权限" class="headerlink" title="转让所有权所需的权限"></a>转让所有权所需的权限</h3><p>在 SwaggerHub SaaS 和 SwaggerHub On-Premise v. 1.23 及更高版本中，具有以下权限的用户可以传输 API：</p>
<table>
<thead>
<tr>
<th align="left">转移方向</th>
<th align="left">需要权限</th>
</tr>
</thead>
<tbody><tr>
<td align="left">从个人账户</td>
<td align="left">所有者</td>
</tr>
<tr>
<td align="left">从一个组织</td>
<td align="left">对该 API 具有编辑权限的组织所有者或设计者</td>
</tr>
<tr>
<td align="left">给一个组织</td>
<td align="left">具有<a href="https://support.smartbear.com/swaggerhub/docs/organizations/working-with/preferences.html" target="_blank" rel="noopener">创建</a>权限的组织所有者或设计者</td>
</tr>
</tbody></table>
<p>在早期的 SwaggerHub 内部部署版本中，只有所有者可以转让所有权。</p>
<h3 id="所有权转让"><a href="#所有权转让" class="headerlink" title="所有权转让"></a>所有权转让</h3><h4 id="SwaggerHub-SaaS、SwaggerHub-On-Premise-v-1-23-及更高版本"><a href="#SwaggerHub-SaaS、SwaggerHub-On-Premise-v-1-23-及更高版本" class="headerlink" title="SwaggerHub SaaS、SwaggerHub On-Premise v. 1.23 及更高版本"></a>SwaggerHub SaaS、SwaggerHub On-Premise v. 1.23 及更高版本</h4><ol>
<li><p>在<a href="https://support.smartbear.com/swaggerhub/docs/ui/editor.html" target="_blank" rel="noopener">SwaggerHub 编辑器中</a>打开 API 。</p>
</li>
<li><p>单击 API 名称。这将打开 API 信息面板。</p>
<p><img src="/images/loading.gif" data-original="../images/development/open-api-info-panel-1639968524382144.png" alt=""></p>
</li>
<li><p>单击<img src="/images/loading.gif" data-original="../images/development/manage-owner.png" alt=""> <strong>管理所有者和项目</strong>。</p>
<p><img src="/images/loading.gif" data-original="../images/development/manage-owner-and-project.png" alt=""></p>
</li>
<li><p>选择要将 API 传输到的组织。</p>
<p><img src="/images/loading.gif" data-original="../images/development/manage-owner-and-project-dialog.png" alt=""></p>
</li>
<li><p>如果 API 已配置<a href="https://support.smartbear.com/swaggerhub/docs/integrations/index.html" target="_blank" rel="noopener">集成</a>，您可以选中<strong>传输集成</strong>复选框以随集成传输 API。<strong>注意：</strong>这将使新所有者可以访问集成设置，包括访问令牌。</p>
</li>
<li><p>（可选。）选择要添加此 API的<a href="https://support.smartbear.com/swaggerhub/docs/organizations/projects/index.html" target="_blank" rel="noopener">项目</a>。该列表包含您所属的现有项目。</p>
</li>
<li><p>选择<strong>是，我要继续</strong>复选框。</p>
</li>
<li><p>点击<strong>保存</strong>。</p>
</li>
</ol>
<h4 id="SwaggerHub-On-Premise-v-1-22-及更早版本"><a href="#SwaggerHub-On-Premise-v-1-22-及更早版本" class="headerlink" title="SwaggerHub On-Premise v. 1.22 及更早版本"></a>SwaggerHub On-Premise v. 1.22 及更早版本</h4><ol>
<li><p>在 SwaggerHub 编辑器中打开 API。</p>
</li>
<li><p>单击 API 名称。这将打开 API 信息面板。</p>
<p><img src="/images/loading.gif" data-original="../images/development/open-api-info-panel-1639968524382144.png" alt=""></p>
</li>
<li><p><img src="/images/loading.gif" data-original="../images/development/transfer-ownership.png" alt=""> 在 API 信息面板中单击。</p>
<p><img src="/images/loading.gif" data-original="../images/development/transfer-ownership-onprem.png" alt=""></p>
</li>
<li><p>输入要将 API 传输到的组织或用户的名称：</p>
<p><img src="/images/loading.gif" data-original="../images/development/transfer-ownership-dialog-onprem.png" alt=""></p>
</li>
<li><p>输入 API 名称以确认传输：</p>
<p><img src="/images/loading.gif" data-original="../images/development/transfer-ownership-confirmation-onprem.png" alt=""></p>
</li>
<li><p>（可选。）选中<strong>Transfer Integrations</strong>复选框以授予新所有者访问<a href="https://support.smartbear.com/swaggerhub/docs/integrations/index.html" target="_blank" rel="noopener">集成</a>设置和令牌的权限。</p>
</li>
<li><p>单击<strong>传输 API</strong>。</p>
</li>
</ol>
<h2 id="生成代码"><a href="#生成代码" class="headerlink" title="生成代码"></a>生成代码</h2><p>SwaggerHub 允许您根据 API 定义生成服务器和客户端代码，以帮助您快速启动并运行 API 服务器和客户端。您还可以配置<a href="https://support.smartbear.com/swaggerhub/docs/integrations/index.html" target="_blank" rel="noopener">集成</a> 以自动将生成的代码推送到 GitHub、GitLab、Bitbucket 或 Azure DevOps 上的存储库。</p>
<p>OpenAPI 2.0 和 3.0 都支持代码生成。</p>
<h3 id="生成服务器存根"><a href="#生成服务器存根" class="headerlink" title="生成服务器存根"></a>生成服务器存根</h3><p>使用 SwaggerHub，您可以轻松地为 Node.js、ASP.NET、JAX-RS 和其他服务器和框架生成服务器存根（API 实现存根）。服务器存根是实现 API 的良好起点——您可以在本地运行和测试它，实现 API 的业务逻辑，然后将其部署到您的服务器。</p>
<p>任何人都可以为 SwaggerHub 中的任何 API 生成服务器存根，除非 API 所有者在<a href="https://support.smartbear.com/swaggerhub/docs/apis/generating-code/options.html" target="_blank" rel="noopener">代码生成选项中</a>禁用了服务器生成。</p>
<h4 id="下载服务器存根"><a href="#下载服务器存根" class="headerlink" title="下载服务器存根"></a>下载服务器存根</h4><ol>
<li><p>在 SwaggerHub 中打开 API 页面。</p>
</li>
<li><p>如果 API 有多个版本，请选择要为其生成代码的版本。</p>
<p><img src="/images/loading.gif" data-original="../images/development/selecting-api-version-1639968656057153.png" alt=""></p>
</li>
<li><p>从“<strong>导出”</strong>菜单中，选择“<strong>服务器存根”</strong>，然后选择所需的语言或框架。</p>
<table>
<thead>
<tr>
<th><strong>笔记：</strong></th>
<th>标有星号 * 的语言使用 API 编辑器配置的自定义代码生成选项。</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<p><img src="/images/loading.gif" data-original="../images/development/generating-server-stub.png" alt=""></p>
</li>
<li><p>下载并解压服务器代码。</p>
</li>
</ol>
<h4 id="代码生成选项"><a href="#代码生成选项" class="headerlink" title="代码生成选项"></a>代码生成选项</h4><p>API 所有者可以为其 API自定义<a href="https://support.smartbear.com/swaggerhub/docs/apis/generating-code/options.html" target="_blank" rel="noopener">代码生成选项</a>。</p>
<h4 id="自定义服务器生成器"><a href="#自定义服务器生成器" class="headerlink" title="自定义服务器生成器"></a>自定义服务器生成器</h4><p>SwaggerHub On-Premise 允许公司创建和使用自定义代码生成器。要了解更多信息，请参阅<a href="https://support.smartbear.com/swaggerhub/docs/enterprise/config/codegen-templates.html" target="_blank" rel="noopener">使用自定义 Codegen 模板</a>。</p>
<h4 id="我已经下载了服务器存根。怎么办？"><a href="#我已经下载了服务器存根。怎么办？" class="headerlink" title="我已经下载了服务器存根。怎么办？"></a>我已经下载了服务器存根。怎么办？</h4><p>您可以在本地运行和测试生成的服务器。请注意，生成的 API 代码仅包含不包含任何实际编程逻辑的存根方法。您需要自己实现逻辑来处理 API 需要做的任何工作。实现准备就绪后，您可以在本地或服务器上部署 API。请参阅下载的存档中的 README.md 文件以开始使用。</p>
<h3 id="生成客户端-SDK"><a href="#生成客户端-SDK" class="headerlink" title="生成客户端 SDK"></a>生成客户端 SDK</h3><p>SwaggerHub 允许您为 JavaScript、Java、C#、Objective C、Swift、Android 和许多其他语言的 API 生成客户端 SDK（列表不断扩展）。客户端 SDK 包含包装类，您可以使用这些包装类从您的应用程序调用 API，而无需处理 HTTP 请求和响应。</p>
<p>任何人都可以为任何 API 生成 SDK - 您不需要 SwaggerHub 帐户或成为 API 所有者。</p>
<h4 id="下载客户端-SDK"><a href="#下载客户端-SDK" class="headerlink" title="下载客户端 SDK"></a>下载客户端 SDK</h4><ol>
<li><p>在 SwaggerHub 中打开 API 页面。</p>
</li>
<li><p>如果 API 有多个版本，请选择要为其生成代码的版本。</p>
<p><img src="/images/loading.gif" data-original="../images/development/selecting-api-version-1639968721264156.png" alt=""></p>
</li>
<li><p>从<strong>导出</strong>菜单中，选择<strong>Client SDK</strong>，然后选择所需的语言或框架。</p>
<table>
<thead>
<tr>
<th><strong>笔记：</strong></th>
<th>标有星号 * 的语言使用 API 编辑器配置的自定义代码生成选项。</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<p><img src="/images/loading.gif" data-original="../images/development/generating-client-sdk-1639968721265158.png" alt=""></p>
</li>
<li><p>下载并解压 SDK。</p>
</li>
</ol>
<h4 id="代码生成选项-1"><a href="#代码生成选项-1" class="headerlink" title="代码生成选项"></a>代码生成选项</h4><p>API 所有者可以为其 API自定义<a href="https://support.smartbear.com/swaggerhub/docs/apis/generating-code/options.html" target="_blank" rel="noopener">代码生成选项</a>。</p>
<h4 id="自定义客户端生成器"><a href="#自定义客户端生成器" class="headerlink" title="自定义客户端生成器"></a>自定义客户端生成器</h4><p>SwaggerHub On-Premise 允许公司创建和使用自定义代码生成器。要了解更多信息，请参阅<a href="https://support.smartbear.com/swaggerhub/docs/enterprise/config/codegen-templates.html" target="_blank" rel="noopener">使用自定义 Codegen 模板</a>。</p>
<h4 id="我已经下载了客户端-SDK。怎么办？"><a href="#我已经下载了客户端-SDK。怎么办？" class="headerlink" title="我已经下载了客户端 SDK。怎么办？"></a>我已经下载了客户端 SDK。怎么办？</h4><p>这取决于您使用的语言。通常，SDK 并非设计为独立工作——您需要创建一个应用程序，该应用程序将使用此 SDK 进行 API 调用。请参阅下载的存档中的 README.md 文件以开始使用。</p>
<h3 id="代码生成选项-2"><a href="#代码生成选项-2" class="headerlink" title="代码生成选项"></a>代码生成选项</h3><p>SwaggerHub 允许您为各个 API 的<a href="https://support.smartbear.com/swaggerhub/docs/apis/generating-code/server-stub.html" target="_blank" rel="noopener">服务器存根</a>和<a href="https://support.smartbear.com/swaggerhub/docs/apis/generating-code/client-sdk.html" target="_blank" rel="noopener">客户端 SDK</a>自定义代码生成选项。每种语言或框架都有其特定的选项，例如包名称、导入映射等。</p>
<p>您还可以从API 页面的<strong>导出</strong>菜单中隐藏特定语言，例如，如果您不希望 API 平台支持某些语言。</p>
<h4 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h4><ul>
<li>代码生成选项适用于通过<strong>导出</strong>菜单下载的代码，以及源代码控制<a href="https://support.smartbear.com/swaggerhub/docs/integrations/index.html" target="_blank" rel="noopener">集成</a>（GitHub、Bitbucket 等）生成的代码。</li>
<li>代码生成选项适用于特定的 API<a href="https://support.smartbear.com/swaggerhub/docs/apis/versioning.html" target="_blank" rel="noopener">版本</a>。它们不会在版本之间共享，也不会在您创建新版本或分叉 API 时复制。</li>
</ul>
<h4 id="更改代码生成选项"><a href="#更改代码生成选项" class="headerlink" title="更改代码生成选项"></a>更改代码生成选项</h4><p>要更改代码生成选项，您必须是 API 所有者或具有<em>编辑器</em>角色的<a href="https://support.smartbear.com/swaggerhub/docs/collaboration/collaborators.html" target="_blank" rel="noopener">协作者</a>。</p>
<ol>
<li><p>在 SwaggerHub 编辑器中打开您的 API。</p>
</li>
<li><p>如果 API 有多个版本，请选择要更改代码生成选项的版本。</p>
<p><img src="/images/loading.gif" data-original="../images/development/selecting-api-version-1639968776457160.png" alt=""></p>
</li>
<li><p>从“<strong>导出”</strong>菜单中，选择“<strong>代码生成选项”</strong>。</p>
</li>
</ol>
<p>该<strong>编辑代码生成选项</strong>对话框中列出了所有可用的语言和代码生成框架。选择一种语言以查看其选项。</p>
<p><img src="/images/loading.gif" data-original="../images/development/codegen-options.png" alt=""></p>
<p>按钮的工作方式如下：</p>
<ul>
<li><strong>隐藏选项</strong> - 从API 页面的<strong>下载</strong>菜单中隐藏所选语言。要再次添加语言，请单击<strong>显示选项</strong>。</li>
<li><strong>删除</strong> - 恢复所选语言的原始选项。如果语言被隐藏，它将再次显示。</li>
<li><strong>还原</strong> - 取消您在当前编辑会话期间所做的任何未保存的更改。这与<strong>Delete</strong>不同，后者会恢复所做的所有更改。</li>
</ul>
<h1 id="Domains"><a href="#Domains" class="headerlink" title="Domains"></a>Domains</h1><p><strong>域</strong>是常见组件库-如参数，响应和数据模型-跨多个API定义使用。可以使用 OpenAPI 2.0 或 OpenAPI 3.0 语法编写域。API 定义可以使用具有匹配 OpenAPI 版本的域。</p>
<iframe width="700" height="394" src="https://www.youtube.com/embed/QnDIGEfRmgY" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<h2 id="创建域"><a href="#创建域" class="headerlink" title="创建域"></a>创建域</h2><p>您可以从头开始创建一个新域，然后向其中添加内容，也可以像分叉 API 一样分叉<a href="https://support.smartbear.com/swaggerhub/docs/apis/forking-api.html" target="_blank" rel="noopener">现有域</a>。</p>
<p>要创建新域：</p>
<ol>
<li><p>在任何页面的左上角，单击 并选择<strong>创建新域</strong>。</p>
<p><img src="/images/loading.gif" data-original="../images/development/add-new-domain.png" alt=""></p>
</li>
<li><p>输入域信息：</p>
<p><img src="/images/loading.gif" data-original="../images/development/add-new-domain-dialog.png" alt=""></p>
<ul>
<li><p><strong>OpenAPI 版本</strong> – 选择域格式：OpenAPI 2.0 或 3.0。<strong>注意：</strong>OpenAPI 3.0 支持有<a href="https://support.smartbear.com/swaggerhub/docs/openapi-3-support.html" target="_blank" rel="noopener">一些限制</a>。</p>
</li>
<li><p><strong>名称</strong> -域名是其唯一的ID，是其对SwaggerHub URL的一部分，如<em><a href="https://app.swaggerhub.com/domains/{owner}/" target="_blank" rel="noopener">https://app.swaggerhub.com/domains/{owner}/</a>*</em>公共*<em>/1.0</em>。</p>
<p>要求：</p>
<ul>
<li>3 到 60 个字符长</li>
<li>允许的字符： <code>A..Z a..z 0..9 - _ .</code></li>
<li>必须以字母或数字开头和结尾</li>
</ul>
<table>
<thead>
<tr>
<th><strong>笔记：</strong></th>
<th>域名区分大小写，因此<em>commons</em>和<em>Commons</em>是两个不同的域。</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
</tr>
</tbody></table>
</li>
<li><p><strong>版本</strong> – 域的版本号。例如 1.0、1.0.0、1.0rc5、beta、2016-04-15 等。请参阅<a href="https://support.smartbear.com/swaggerhub/docs/apis/versioning.html" target="_blank" rel="noopener">版本格式</a>。</p>
</li>
<li><p><strong>所有者</strong> – 选择是在您的个人帐户还是<a href="https://support.smartbear.com/swaggerhub/docs/organizations/index.html" target="_blank" rel="noopener">组织</a>帐户中创建域（如果您是 SwaggerHub 上组织的成员）。域所有者是 SwaggerHub 中域路径的一部分：<em><a href="https://app.swaggerhub.com/domains/" target="_blank" rel="noopener">https://app.swaggerhub.com/domains/</a> *</em>companyname** /{domain-name}/1.0*。组织拥有的域计入组织的限制而不是您的限制。</p>
<table>
<thead>
<tr>
<th><strong>笔记：</strong></th>
<th>组织所有者始终可以在该组织中创建域。如果组织配置了<a href="https://support.smartbear.com/swaggerhub/docs/organizations/working-with/preferences.html" target="_blank" rel="noopener"><em>“组织”</em></a>选项<a href="https://support.smartbear.com/swaggerhub/docs/organizations/working-with/preferences.html" target="_blank" rel="noopener"><em>下的</em></a>“<a href="https://support.smartbear.com/swaggerhub/docs/organizations/working-with/preferences.html" target="_blank" rel="noopener"><em>允许设计者创建 API</em></a> ”，则具有<a href="https://support.smartbear.com/swaggerhub/docs/organizations/working-with/permissions.html" target="_blank" rel="noopener">设计者</a>角色的成员具有“创建”权限。</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
</tr>
</tbody></table>
</li>
<li><p><strong>项目</strong> – 如果选择一个组织作为<strong>所有者</strong>，您可以选择性地选择一个<a href="https://support.smartbear.com/swaggerhub/docs/organizations/projects/index.html" target="_blank" rel="noopener">项目</a>以将此域添加到。该列表包含您可以使用的现有项目。</p>
<table>
<thead>
<tr>
<th><strong>SwaggerHub 内部部署说明：</strong></th>
<th>此选项是在 v. 1.23 中添加的。</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
</tr>
</tbody></table>
</li>
<li><p><strong>可见性</strong> – 选择域是公开的（您公司中的任何人都可以看到）还是私有的（只能由您和与您共享域的<a href="https://support.smartbear.com/swaggerhub/docs/collaboration/collaborators.html" target="_blank" rel="noopener">合作者</a>访问）。有关详细信息，请参阅<a href="https://support.smartbear.com/swaggerhub/docs/apis/public-and-private-apis.html" target="_blank" rel="noopener">公共和私有 API</a>。</p>
</li>
</ul>
</li>
<li><p>单击<strong>创建域</strong>。</p>
</li>
</ol>
<h2 id="引用域"><a href="#引用域" class="headerlink" title="引用域"></a>引用域</h2><p>API 可以使用关键字从<a href="https://support.smartbear.com/swaggerhub/docs/domains/index.html" target="_blank" rel="noopener">域中</a>引用共享组件<code>$ref</code>。域引用具有以下格式：</p>
<pre><code># OpenAPI 2.0
$ref: https://api.swaggerhub.com/domains/OWNER/DOMAIN/VERSION#/TYPE/COMPONENT_NAME

# OpenAPI 3.0
$ref: https://api.swaggerhub.com/domains/OWNER/DOMAIN/VERSION#/components/TYPE/COMPONENT_NAME</code></pre><table>
<thead>
<tr>
<th><strong>笔记：</strong></th>
<th>域引用中的 SwaggerHub 主机名以 开头<code>api</code>，而不是以<code>app</code>.</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>在 SwaggerHub On-Premise 中，域引用需要<code>/v1</code>在主机名之后：</p>
<pre><code># OpenAPI 2.0
$ref: http(s)://SWAGGERHUB/v1/domains/OWNER/DOMAIN/VERSION#/TYPE/COMPONENT_NAME

# OpenAPI 3.0
$ref: http(s)://SWAGGERHUB/v1/domains/OWNER/DOMAIN/VERSION#/components/TYPE/COMPONENT_NAME</code></pre><p>例如，您将从域中引用<code>Order</code>架构<code>common-models</code>，如下所示：</p>
<pre><code>openapi: 3.0.0

paths:
  /orders:
    post:
      summary: Add a new order
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: 'https://api.swaggerhub.com/domains/acme/common-models/1.0#/components/schemas/Order'</code></pre><h3 id="自动完成"><a href="#自动完成" class="headerlink" title="自动完成"></a>自动完成</h3><p>插入域引用的最简单方法是使用自动完成：键入<code>$ref:</code>后跟一个空格，然后按CTRL+SPACE（在 Windows 上）或OPTION+SPACE（在 Mac 上）。SwaggerHub 编辑器将显示建议列表。从列表中选择一个项目，SwaggerHub 将插入一个完全限定的<code>$ref</code>.</p>
<p><img src="/images/loading.gif" data-original="../images/development/domain-autofill.png" alt=""></p>
<p>单击图像放大。</p>
<p>在 SwaggerHub SaaS 中，自动完成仅显示本地定义以及与 API 所有者相同所有者的域。但是，您也可以通过手动指定相应的值来引用任何其他<strong>公共或共享的私有</strong>域<code>$ref</code>。</p>
<p>在 SwaggerHub On-Premise 1.21.0 及更高版本中，自动完成还会显示当前用户有权访问的任何域，包括所有公共域、用户所属的所有组织的域以及用户是<a href="https://support.smartbear.com/swaggerhub/docs/collaboration/collaborators.html" target="_blank" rel="noopener">协作者的</a>所有域.</p>
<h3 id="引用规则"><a href="#引用规则" class="headerlink" title="引用规则"></a>引用规则</h3><ul>
<li>API 只能引用具有相同 OpenAPI 版本的域：<ul>
<li>OpenAPI 2.0 API 可以引用 OpenAPI 2.0 域。</li>
<li>OpenAPI 3.0 API 可以引用 OpenAPI 3.0 域（跨任何<code>openapi: 3.0.x</code>版本）</li>
</ul>
</li>
<li>域可以使用相同的规则引用其他域。</li>
<li>域引用根据当前用户的访问权限进行解析。用户至少需要对引用域的读取访问权限才能解析引用。</li>
</ul>
<h3 id="跳转到引用的域"><a href="#跳转到引用的域" class="headerlink" title="跳转到引用的域"></a>跳转到引用的域</h3><p>将鼠标悬停在编辑器中的域链接上，然后单击<strong>Jump To</strong>。SwaggerHub 将在新的浏览器选项卡中打开此域。</p>
<p><img src="/images/loading.gif" data-original="../images/development/jump-to-domain-1639969125939166.png" alt=""></p>
<h2 id="管理域"><a href="#管理域" class="headerlink" title="管理域"></a>管理域</h2><p>您可以像管理 API 定义一样管理<a href="https://support.smartbear.com/swaggerhub/docs/domains/index.html" target="_blank" rel="noopener">域</a>。例如，您可以：</p>
<ul>
<li>使域<a href="https://support.smartbear.com/swaggerhub/docs/apis/public-and-private-apis.html" target="_blank" rel="noopener">公共和私有</a>。（请注意，将域设为私有会影响所有引用该域的 API）。</li>
<li>创建域的<a href="https://support.smartbear.com/swaggerhub/docs/apis/versioning.html" target="_blank" rel="noopener">多个版本</a>。</li>
<li>设置将出现在搜索结果中的默认版本。</li>
<li><a href="https://support.smartbear.com/swaggerhub/docs/apis/publishing-api.html" target="_blank" rel="noopener">发布和取消发布</a>域。</li>
<li><a href="https://support.smartbear.com/swaggerhub/docs/apis/forking-api.html" target="_blank" rel="noopener">分叉</a>域（您自己的和其他人的）。</li>
<li>将<a href="https://support.smartbear.com/swaggerhub/docs/collaboration/collaborators.html" target="_blank" rel="noopener">协作者</a>添加到域。</li>
<li>协作者可以向域添加<a href="https://support.smartbear.com/swaggerhub/docs/collaboration/comments.html" target="_blank" rel="noopener">评论</a>。</li>
<li>以 YAML 或 JSON 格式<a href="https://support.smartbear.com/swaggerhub/docs/apis/downloading-swagger-definition.html" target="_blank" rel="noopener">下载</a>域<a href="https://support.smartbear.com/swaggerhub/docs/apis/downloading-swagger-definition.html" target="_blank" rel="noopener">的 OpenAPI 定义</a>。</li>
<li>为域启用<a href="https://support.smartbear.com/swaggerhub/docs/integrations/github-push.html" target="_blank" rel="noopener">GitHub Push</a>，这样每次保存域时，都会将其推送到GitHub上的指定存储库。</li>
<li><a href="https://support.smartbear.com/swaggerhub/docs/domains/renaming.html" target="_blank" rel="noopener">更改</a>域<a href="https://support.smartbear.com/swaggerhub/docs/domains/renaming.html" target="_blank" rel="noopener">的所有者</a>。</li>
<li><a href="https://support.smartbear.com/swaggerhub/docs/domains/renaming.html" target="_blank" rel="noopener">重命名域</a>。</li>
<li><a href="https://support.smartbear.com/swaggerhub/docs/apis/deleting-api.html" target="_blank" rel="noopener">删除</a>不再需要的域。</li>
</ul>
<h2 id="OpenAPI-3-0-Domain-Example"><a href="#OpenAPI-3-0-Domain-Example" class="headerlink" title="OpenAPI 3.0 Domain Example"></a>OpenAPI 3.0 Domain Example</h2><p>下面是一个 OpenAPI 3.0<a href="https://support.smartbear.com/swaggerhub/docs/domains/index.html" target="_blank" rel="noopener">域</a>定义示例，演示了各种类型的域组件。</p>
<p>另请参阅：<a href="https://support.smartbear.com/swaggerhub/docs/domains/oas2-domain-example.html" target="_blank" rel="noopener">OpenAPI 2.0 域示例</a></p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true"># OpenAPI version identifier - required for OpenAPI 3.0 domains</span>
<span class="token key atrule">openapi</span><span class="token punctuation">:</span> 3.0.0

<span class="token comment" spellcheck="true">#######################</span>
<span class="token comment" spellcheck="true"># Optional info section</span>
<span class="token comment" spellcheck="true">#######################</span>
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">title</span><span class="token punctuation">:</span> Acme Components
  <span class="token key atrule">description</span><span class="token punctuation">:</span> Common components for Acme REST APIs
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 1.0.0

<span class="token key atrule">components</span><span class="token punctuation">:</span>

  <span class="token comment" spellcheck="true">####################</span>
  <span class="token comment" spellcheck="true"># Common data models</span>
  <span class="token comment" spellcheck="true">####################</span>
  <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
    <span class="token key atrule">ErrorModel</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> object
      <span class="token key atrule">required</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> code
        <span class="token punctuation">-</span> message
      <span class="token key atrule">properties</span><span class="token punctuation">:</span>
        <span class="token key atrule">code</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
          <span class="token key atrule">format</span><span class="token punctuation">:</span> int32
        <span class="token key atrule">message</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string

  <span class="token comment" spellcheck="true">####################</span>
  <span class="token comment" spellcheck="true"># Common parameters</span>
  <span class="token comment" spellcheck="true">####################</span>
  <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
    <span class="token key atrule">offsetParam</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> offset
      <span class="token key atrule">in</span><span class="token punctuation">:</span> query
      <span class="token key atrule">schema</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
        <span class="token key atrule">minimum</span><span class="token punctuation">:</span> <span class="token number">0</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> The number of items to skip before returning the results
    <span class="token key atrule">limitParam</span><span class="token punctuation">:</span>
      <span class="token key atrule">in</span><span class="token punctuation">:</span> query
      <span class="token key atrule">name</span><span class="token punctuation">:</span> limit
      <span class="token key atrule">schema</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
        <span class="token key atrule">format</span><span class="token punctuation">:</span> int32
        <span class="token key atrule">minimum</span><span class="token punctuation">:</span> <span class="token number">1</span>
        <span class="token key atrule">maximum</span><span class="token punctuation">:</span> <span class="token number">100</span>
        <span class="token key atrule">default</span><span class="token punctuation">:</span> <span class="token number">20</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> The number of items to return

  <span class="token comment" spellcheck="true">#######################</span>
  <span class="token comment" spellcheck="true"># Common request bodies</span>
  <span class="token comment" spellcheck="true">#######################</span>
  <span class="token key atrule">requestBodies</span><span class="token punctuation">:</span>
    <span class="token key atrule">NewItem</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> A JSON object containing item data
      <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span>
        <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> object
          <span class="token key atrule">examples</span><span class="token punctuation">:</span>
            <span class="token key atrule">tshirt</span><span class="token punctuation">:</span>
              <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/examples/tshirt'</span>

  <span class="token comment" spellcheck="true">####################</span>
  <span class="token comment" spellcheck="true"># Common responses</span>
  <span class="token comment" spellcheck="true">####################</span>
  <span class="token key atrule">responses</span><span class="token punctuation">:</span>
    <span class="token key atrule">GeneralError</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> An error occurred
      <span class="token key atrule">content</span><span class="token punctuation">:</span>
        <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/ErrorModel'</span>
      <span class="token key atrule">headers</span><span class="token punctuation">:</span>
        <span class="token key atrule">X-RateLimit-Limit</span><span class="token punctuation">:</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/headers/X-RateLimit-Limit'</span>
        <span class="token key atrule">X-RateLimit-Remaining</span><span class="token punctuation">:</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/headers/X-RateLimit-Remaining'</span>

  <span class="token comment" spellcheck="true">#########################</span>
  <span class="token comment" spellcheck="true"># Common headers</span>
  <span class="token comment" spellcheck="true"># (except request headers - they are defined as parameters)</span>
  <span class="token comment" spellcheck="true">#########################</span>
  <span class="token key atrule">headers</span><span class="token punctuation">:</span>
    <span class="token key atrule">X-RateLimit-Limit</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Request limit per hour
      <span class="token key atrule">schema</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
      <span class="token key atrule">example</span><span class="token punctuation">:</span> <span class="token number">100</span>
    <span class="token key atrule">X-RateLimit-Remaining</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Remaining requests for the hour
      <span class="token key atrule">schema</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
      <span class="token key atrule">example</span><span class="token punctuation">:</span> <span class="token number">94</span>

  <span class="token comment" spellcheck="true">#######################</span>
  <span class="token comment" spellcheck="true"># Common path items</span>
  <span class="token comment" spellcheck="true">#######################</span>
  <span class="token key atrule">pathitems</span><span class="token punctuation">:</span>
    <span class="token key atrule">EntityOperations</span><span class="token punctuation">:</span>
      <span class="token key atrule">get</span><span class="token punctuation">:</span>
        <span class="token key atrule">summary</span><span class="token punctuation">:</span> Get all items
        <span class="token key atrule">description</span><span class="token punctuation">:</span> This operation supports pagination
        <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/parameters/offsetParam'</span>
          <span class="token punctuation">-</span> <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/parameters/limitParam'</span>
        <span class="token key atrule">responses</span><span class="token punctuation">:</span>
          <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
            <span class="token key atrule">description</span><span class="token punctuation">:</span> A list of items
            <span class="token key atrule">headers</span><span class="token punctuation">:</span>
              <span class="token key atrule">X-RateLimit-Limit</span><span class="token punctuation">:</span>
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/headers/X-RateLimit-Limit'</span>
              <span class="token key atrule">X-RateLimit-Remaining</span><span class="token punctuation">:</span>
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/headers/X-RateLimit-Remaining'</span>
          <span class="token key atrule">default</span><span class="token punctuation">:</span>
            <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/responses/GeneralError'</span>
      <span class="token key atrule">post</span><span class="token punctuation">:</span>
        <span class="token key atrule">summary</span><span class="token punctuation">:</span> Add a new item
        <span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/requestBodies/NewItem'</span>
        <span class="token key atrule">responses</span><span class="token punctuation">:</span>
          <span class="token key atrule">'201'</span><span class="token punctuation">:</span>
            <span class="token key atrule">description</span><span class="token punctuation">:</span> Created
            <span class="token key atrule">headers</span><span class="token punctuation">:</span>
              <span class="token key atrule">X-RateLimit-Limit</span><span class="token punctuation">:</span>
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/headers/X-RateLimit-Limit'</span>
              <span class="token key atrule">X-RateLimit-Remaining</span><span class="token punctuation">:</span>
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/headers/X-RateLimit-Remaining'</span>

  <span class="token comment" spellcheck="true">######################################</span>
  <span class="token comment" spellcheck="true"># Common examples of input/output data</span>
  <span class="token comment" spellcheck="true">######################################</span>
  <span class="token key atrule">examples</span><span class="token punctuation">:</span>
    <span class="token key atrule">tshirt</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Sample T<span class="token punctuation">-</span>shirt data
      <span class="token key atrule">value</span><span class="token punctuation">:</span>
        <span class="token comment" spellcheck="true"># Example value starts here</span>
        <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">17</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> T<span class="token punctuation">-</span>shirt
        <span class="token key atrule">description</span><span class="token punctuation">:</span> 100% cotton shirt
        <span class="token key atrule">categories</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>clothes<span class="token punctuation">]</span>

  <span class="token comment" spellcheck="true">#########################</span>
  <span class="token comment" spellcheck="true"># Common link definitions</span>
  <span class="token comment" spellcheck="true"># See: https://swagger.io/docs/specification/links/</span>
  <span class="token comment" spellcheck="true">#########################</span>
  <span class="token key atrule">links</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token comment" spellcheck="true">#########################</span>
  <span class="token comment" spellcheck="true"># Common callback definitions</span>
  <span class="token comment" spellcheck="true"># See: https://swagger.io/docs/specification/callbacks/</span>
  <span class="token comment" spellcheck="true">#########################</span>
  <span class="token key atrule">callbacks</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="OpenAPI-2-0-Domain-Example"><a href="#OpenAPI-2-0-Domain-Example" class="headerlink" title="OpenAPI 2.0 Domain Example"></a>OpenAPI 2.0 Domain Example</h2><p>下面是一个示例 OpenAPI 2.0<a href="https://support.smartbear.com/swaggerhub/docs/domains/index.html" target="_blank" rel="noopener">域</a>定义，演示了各种类型的域组件。</p>
<p>另请参阅：<a href="https://support.smartbear.com/swaggerhub/docs/domains/oas3-domain-example.html" target="_blank" rel="noopener">OpenAPI 3.0 域示例</a></p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true"># OpenAPI version identifier - optional for OpenAPI 2.0 domains</span>
<span class="token key atrule">swagger</span><span class="token punctuation">:</span> <span class="token string">'2.0'</span>

<span class="token comment" spellcheck="true">######################</span>
<span class="token comment" spellcheck="true"># Optional info section</span>
<span class="token comment" spellcheck="true">######################</span>
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">title</span><span class="token punctuation">:</span> Components
  <span class="token key atrule">description</span><span class="token punctuation">:</span> Common components for Acme REST APIs
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 1.0.0

<span class="token comment" spellcheck="true">####################</span>
<span class="token comment" spellcheck="true"># Common data models</span>
<span class="token comment" spellcheck="true">####################</span>
<span class="token key atrule">definitions</span><span class="token punctuation">:</span>
  <span class="token key atrule">ErrorModel</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> object
    <span class="token key atrule">required</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> code
      <span class="token punctuation">-</span> message
    <span class="token key atrule">properties</span><span class="token punctuation">:</span>
      <span class="token key atrule">code</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
        <span class="token key atrule">format</span><span class="token punctuation">:</span> int32
      <span class="token key atrule">message</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string

<span class="token comment" spellcheck="true">####################</span>
<span class="token comment" spellcheck="true"># Common parameters</span>
<span class="token comment" spellcheck="true">####################</span>
<span class="token key atrule">parameters</span><span class="token punctuation">:</span>
  <span class="token key atrule">offsetParam</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> offset
    <span class="token key atrule">in</span><span class="token punctuation">:</span> query
    <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
    <span class="token key atrule">minimum</span><span class="token punctuation">:</span> <span class="token number">0</span>
    <span class="token key atrule">description</span><span class="token punctuation">:</span> The number of items to skip before returning the results
  <span class="token key atrule">limitParam</span><span class="token punctuation">:</span>
    <span class="token key atrule">in</span><span class="token punctuation">:</span> query
    <span class="token key atrule">name</span><span class="token punctuation">:</span> limit
    <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
    <span class="token key atrule">format</span><span class="token punctuation">:</span> int32
    <span class="token key atrule">minimum</span><span class="token punctuation">:</span> <span class="token number">1</span>
    <span class="token key atrule">maximum</span><span class="token punctuation">:</span> <span class="token number">100</span>
    <span class="token key atrule">default</span><span class="token punctuation">:</span> <span class="token number">20</span>
    <span class="token key atrule">description</span><span class="token punctuation">:</span> The number of items to return

<span class="token comment" spellcheck="true">####################</span>
<span class="token comment" spellcheck="true"># Common responses</span>
<span class="token comment" spellcheck="true">####################</span>
<span class="token key atrule">responses</span><span class="token punctuation">:</span>
  <span class="token key atrule">GeneralError</span><span class="token punctuation">:</span>
    <span class="token key atrule">description</span><span class="token punctuation">:</span> An error occurred
    <span class="token key atrule">schema</span><span class="token punctuation">:</span>
      <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/definitions/ErrorModel'</span>

<span class="token comment" spellcheck="true">####################</span>
<span class="token comment" spellcheck="true"># Common path items</span>
<span class="token comment" spellcheck="true">####################</span>
<span class="token key atrule">pathitems</span><span class="token punctuation">:</span>
  <span class="token key atrule">EntityOperations</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># In domains, path item names do not have to be actual paths</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Get all items
      <span class="token key atrule">description</span><span class="token punctuation">:</span> This operation supports pagination
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/parameters/offsetParam'</span>
        <span class="token punctuation">-</span> <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/parameters/limitParam'</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">200</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> A list of items
        <span class="token key atrule">default</span><span class="token punctuation">:</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/responses/GeneralError'</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Add a new item
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> body
          <span class="token key atrule">name</span><span class="token punctuation">:</span> item
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> object
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">201</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Created<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="Open-Source-Tools"><a href="#Open-Source-Tools" class="headerlink" title="Open Source Tools"></a>Open Source Tools</h1><h2 id="Swagger-Editor"><a href="#Swagger-Editor" class="headerlink" title="Swagger Editor"></a>Swagger Editor</h2><p>Swagger Editor 是一个开源编辑器，用于在 Swagger 规范中设计、定义和记录 RESTful API。Swagger 编辑器的源代码可以在 GitHub 中找到。</p>
<p>GitHub: <a href="https://github.com/swagger-api/swagger-editor" target="_blank" rel="noopener">https://github.com/swagger-api/swagger-editor</a></p>
<h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><h4 id="在-Web-上使用编辑器"><a href="#在-Web-上使用编辑器" class="headerlink" title="在 Web 上使用编辑器"></a>在 Web 上使用编辑器</h4><p>编辑器可在任何 Web 浏览器中运行，并且可以在本地托管或从 Web 访问。</p>
<p><a href="https://editor.swagger.io/" target="_blank" rel="noopener">带我去网页版</a></p>
<h4 id="在本地机器上使用编辑器"><a href="#在本地机器上使用编辑器" class="headerlink" title="在本地机器上使用编辑器"></a>在本地机器上使用编辑器</h4><p>您也可以在您的机器上运行和使用 Swagger 编辑器。</p>
<h5 id="先决条件-1"><a href="#先决条件-1" class="headerlink" title="先决条件"></a>先决条件</h5><p>在下载和运行 Swagger 编辑器之前，需要在您的计算机上安装以下依赖项。</p>
<ul>
<li><a href="https://nodejs.org/en/" target="_blank" rel="noopener">nodejs</a></li>
</ul>
<p>成功安装 NodeJS 后，请使用以下命令安装所有 npm 依赖项</p>
<pre><code>npm install;</code></pre><h5 id="使用-GitHub-中的-http-server-模块进行设置"><a href="#使用-GitHub-中的-http-server-模块进行设置" class="headerlink" title="使用 GitHub 中的 http-server 模块进行设置"></a>使用 GitHub 中的 http-server 模块进行设置</h5><p>Swagger 编辑器可以<a href="https://github.com/swagger-api/swagger-editor" target="_blank" rel="noopener">在 GitHub 上的</a>这个 <a href="https://github.com/swagger-api/swagger-editor" target="_blank" rel="noopener">公共存储库中找到</a>。</p>
<p>请运行以下命令以使用来自 GitHub 的 http-server 模块运行编辑器。从 Github 下载最新版本后，您需要在终端上运行这些脚本。</p>
<pre><code>npm install -g http-server
wget https://github.com/swagger-api/swagger-editor/releases/download/v2.10.4/swagger-editor.zip
unzip swagger-editor.zip
http-server swagger-editor</code></pre><h5 id="从-Docker-设置"><a href="#从-Docker-设置" class="headerlink" title="从 Docker 设置"></a>从 Docker 设置</h5><p>Swagger 编辑器可以<a href="https://hub.docker.com/r/swaggerapi/swagger-editor/" target="_blank" rel="noopener">在 Docker 上的这个公共存储库中</a>找到 。</p>
<p>请运行以下命令以从 Docker 在本地机器上运行编辑器。</p>
<pre><code>docker pull swaggerapi/swagger-editor
docker run -p 80:8080 swaggerapi/swagger-editor</code></pre><h3 id="贡献"><a href="#贡献" class="headerlink" title="贡献"></a>贡献</h3><p>Swagger Editor 是 Apache 许可下的一个开源项目。您可以通过<a href="https://github.com/swagger-api/swagger-editor" target="_blank" rel="noopener">Swagger Editor GitHub 存储库</a>中的建议、想法、错误报告和拉取请求为项目做出贡献 。</p>
<p>请运行以下命令以查看编辑器的源代码并在您的本地机器上处理该项目。</p>
<pre><code>git clone https://github.com/swagger-api/swagger-editor.git
cd swagger-editor
npm install
npm run build
npm start</code></pre><h4 id="常见问题："><a href="#常见问题：" class="headerlink" title="常见问题："></a>常见问题：</h4><ul>
<li>如果 <code>npm start</code> 不起作用，请删除 <strong>node_modules</strong> 文件夹，然后运行 <code>npm install</code> 并 <code>npm start</code></li>
<li>如果 克隆后<strong>dist</strong>文件夹有问题 ，到root运行 <code>npm run build</code></li>
</ul>
<h2 id="Swagger-UI"><a href="#Swagger-UI" class="headerlink" title="Swagger UI"></a>Swagger UI</h2><h3 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h3><h3 id="发布渠道"><a href="#发布渠道" class="headerlink" title="发布渠道"></a>发布渠道</h3><h4 id="NPM-注册表"><a href="#NPM-注册表" class="headerlink" title="NPM 注册表"></a>NPM 注册表</h4><p>我们向 npm 发布了两个模块：<strong><code>swagger-ui</code></strong>和<strong><code>swagger-ui-dist</code></strong>.</p>
<p><strong><code>swagger-ui</code></strong>供包含模块打包器的 JavaScript Web 项目使用，例如 Webpack、Browserify 和 Rollup。它的主文件导出 Swagger UI 的主要功能，该模块还包括一个命名空间样式表，位于<code>swagger-ui/dist/swagger-ui.css</code>. 下面是一个例子：</p>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">import</span> SwaggerUI <span class="token keyword">from</span> <span class="token string">'swagger-ui'</span>
<span class="token comment" spellcheck="true">// or use require if you prefer</span>
<span class="token keyword">const</span> SwaggerUI <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'swagger-ui'</span><span class="token punctuation">)</span>
<span class="token function">SwaggerUI</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  dom_id<span class="token punctuation">:</span> <span class="token string">'#myDomId'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>有关详细信息，请参阅<a href="https://github.com/swagger-api/swagger-ui/blob/master/docs/samples/webpack-getting-started" target="_blank" rel="noopener">Webpack 入门</a>示例。</p>
<p>相比之下，<strong><code>swagger-ui-dist</code></strong>适用于需要资产为客户端服务的服务器端项目。该模块在导入时包含一个<code>absolutePath</code>辅助函数，该函数返回<code>swagger-ui-dist</code>模块安装位置的绝对文件系统路径。</p>
<p><em>注意：我们建议<code>swagger-ui</code>在您的工具允许时使用，因为这<code>swagger-ui-dist</code> 会导致更多的代码通过线路。</em></p>
<p>该模块的内容反映了<code>dist</code>您在 Git 存储库中看到的文件夹。最有用的文件是<code>swagger-ui-bundle.js</code>，它是 Swagger UI 的构建，其中包含在一个文件中运行所需的所有代码。该文件夹还有一个<code>index.html</code>资产，可以轻松地为 Swagger UI 提供服务，如下所示：</p>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> pathToSwaggerUi <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'swagger-ui-dist'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">absolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token keyword">static</span><span class="token punctuation">(</span>pathToSwaggerUi<span class="token punctuation">)</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>该模块还导出<code>SwaggerUIBundle</code>and <code>SwaggerUIStandalonePreset</code>，因此如果您在无法处理传统 npm 模块的 JavaScript 项目中，您可以执行以下操作：</p>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">var</span> SwaggerUIBundle <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'swagger-ui-dist'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>SwaggerUIBundle
<span class="token keyword">const</span> ui <span class="token operator">=</span> <span class="token function">SwaggerUIBundle</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token punctuation">:</span> <span class="token string">"https://petstore.swagger.io/v2/swagger.json"</span><span class="token punctuation">,</span>
    dom_id<span class="token punctuation">:</span> <span class="token string">'#swagger-ui'</span><span class="token punctuation">,</span>
    presets<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      SwaggerUIBundle<span class="token punctuation">.</span>presets<span class="token punctuation">.</span>apis<span class="token punctuation">,</span>
      SwaggerUIBundle<span class="token punctuation">.</span>SwaggerUIStandalonePreset
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    layout<span class="token punctuation">:</span> <span class="token string">"StandaloneLayout"</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>SwaggerUIBundle</code>相当于<code>SwaggerUI</code>。</p>
<h4 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h4><p>您可以直接从 Docker Hub 中提取 swagger-ui 的预构建 docker 镜像：</p>
<pre><code>docker pull swaggerapi/swagger-uidocker run -p 80:8080 swaggerapi/swagger-ui</code></pre><p>将在端口 80 上使用 Swagger UI 启动 nginx。</p>
<p>或者你可以在你的主机上提供你自己的 swagger.json</p>
<pre><code>docker run -p 80:8080 -e SWAGGER_JSON=/foo/swagger.json -v /bar:/foo swaggerapi/swagger-ui</code></pre><p>可以通过指定<code>BASE_URL</code>环境变量来更改 Web 应用程序的基本 URL ：</p>
<pre><code>docker run -p 80:8080 -e BASE_URL=/swagger -e SWAGGER_JSON=/foo/swagger.json -v /bar:/foo swaggerapi/swagger-ui</code></pre><p>这将在<code>/swagger</code>而不是<code>/</code>.</p>
<p>有关通过 Docker 映像控制 Swagger UI 的更多信息，请参阅<a href="https://github.com/swagger-api/swagger-ui/blob/master/configuration.md#docker" target="_blank" rel="noopener">配置文档</a>的 Docker 部分。</p>
<h4 id="解包"><a href="#解包" class="headerlink" title="解包"></a>解包</h4><p>您可以使用 unpkg 的界面将 Swagger UI 的代码直接嵌入到您的 HTML 中：</p>
<pre><code>&lt;script src="https://unpkg.com/swagger-ui-dist@3/swagger-ui-bundle.js" charset="UTF-8"&gt;&lt;/script&gt;
&lt;!-- `SwaggerUIBundle` is now available on the page --&gt;</code></pre><p>有关如何使用 unpkg 的更多信息，请参阅<a href="https://unpkg.com/" target="_blank" rel="noopener">unpkg 的主页</a>。</p>
<h4 id="没有-HTTP-或-HTML-的静态文件"><a href="#没有-HTTP-或-HTML-的静态文件" class="headerlink" title="没有 HTTP 或 HTML 的静态文件"></a>没有 HTTP 或 HTML 的静态文件</h4><p>一旦 swagger-ui 成功生成了<code>/dist</code>目录，您就可以将其复制到您自己的文件系统和主机。</p>
<h3 id="普通的旧-HTML-CSS-JS（独立）"><a href="#普通的旧-HTML-CSS-JS（独立）" class="headerlink" title="普通的旧 HTML/CSS/JS（独立）"></a>普通的旧 HTML/CSS/JS（独立）</h3><p>该文件夹<code>/dist</code>包含在静态网站或 CMS 上运行 SwaggerUI 所需的所有 HTML、CSS 和 JS 文件，无需 NPM。</p>
<ol>
<li>下载<a href="https://github.com/swagger-api/swagger-ui/releases/latest" target="_blank" rel="noopener">最新版本</a>。</li>
<li>将<code>/dist</code>文件夹的内容复制到您的服务器。</li>
<li><code>index.html</code>在您的 HTML 编辑器中打开并将“<a href="https://petstore.swagger.io/v2/swagger.json”替换为您的" target="_blank" rel="noopener">https://petstore.swagger.io/v2/swagger.json”替换为您的</a> OpenAPI 3.0 规范的 URL。</li>
</ol>
<h2 id="Swagger-Codegen-文档"><a href="#Swagger-Codegen-文档" class="headerlink" title="Swagger Codegen 文档"></a>Swagger Codegen 文档</h2><p>Swagger Codegen 是一个开源代码生成器，用于直接从 Swagger 定义的 RESTful API 构建服务器存根和客户端 SDK。Swagger Codegen 的源代码可以在 GitHub 中找到。</p>
<p>GitHub: <a href="https://github.com/swagger-api/swagger-codegen" target="_blank" rel="noopener">https://github.com/swagger-api/swagger-codegen</a></p>
<h3 id="兼容性"><a href="#兼容性" class="headerlink" title="兼容性"></a>兼容性</h3><table>
<thead>
<tr>
<th>Swagger Codegen 版本</th>
<th>发布日期</th>
<th>Swagger 规范兼容性</th>
<th>笔记</th>
</tr>
</thead>
<tbody><tr>
<td>2.3.0（即将发布的小版本）</td>
<td>待定</td>
<td>1.0, 1.1, 1.2, 2.0</td>
<td>具有重大更改的次要版本</td>
</tr>
<tr>
<td>2.2.2（即将发布补丁）</td>
<td>待定</td>
<td>1.0, 1.1, 1.2, 2.0</td>
<td>补丁发布（无中断更改）</td>
</tr>
<tr>
<td>2.2.1（电流稳定）</td>
<td>2016-08-07</td>
<td>1.0, 1.1, 1.2, 2.0</td>
<td>标签 v2.2.1</td>
</tr>
<tr>
<td>2.1.6</td>
<td>2016-04-06</td>
<td>1.0, 1.1, 1.2, 2.0</td>
<td>标签 v2.1.6</td>
</tr>
<tr>
<td>2.0.17</td>
<td>2014-08-22</td>
<td>1.1、1.2</td>
<td>标签 v2.0.17</td>
</tr>
<tr>
<td>1.0.4</td>
<td>2012-04-12</td>
<td>1.0、1.1</td>
<td>标签 v1.0.4</td>
</tr>
</tbody></table>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><h4 id="先决条件-2"><a href="#先决条件-2" class="headerlink" title="先决条件"></a>先决条件</h4><p>在下载和运行 Swagger Codegen 之前，需要在您的计算机上安装以下依赖项。</p>
<ul>
<li>Java，版本 7 或更高版本</li>
</ul>
<h4 id="使用-Homebrew-安装"><a href="#使用-Homebrew-安装" class="headerlink" title="使用 Homebrew 安装"></a>使用 Homebrew 安装</h4><p>如果您有 Mac 或 Linux 环境，那么您可以使用 Homebrew 安装 Swagger Codegen。</p>
<pre><code>brew install swagger-codegen</code></pre><h4 id="从-Maven-中心安装"><a href="#从-Maven-中心安装" class="headerlink" title="从 Maven 中心安装"></a>从 Maven 中心安装</h4><p>Swagger Codegen 项目的所有版本都可以在<a href="https://oss.sonatype.org/content/repositories/releases/io/swagger/" target="_blank" rel="noopener">Maven Central</a>上找到 。 <a href="https://oss.sonatype.org/content/repositories/releases/io/swagger/swagger-codegen-cli/" target="_blank" rel="noopener">访问 Maven 上的这个文件夹</a>，并选择合适的版本（我们推荐最新版本）。</p>
<p>您可以下载并运行可执行的 .jar 文件（例如， <a href="https://oss.sonatype.org/content/repositories/releases/io/swagger/swagger-codegen-cli/2.2.1/swagger-codegen-cli-2.2.1.jar" target="_blank" rel="noopener">swagger-codegen-cli-2.2.1.jar</a>）</p>
<p>或者，您也可以使用 wget 命令。</p>
<pre><code>wget {link address of the executable .jar file}</code></pre><p>例子：</p>
<pre><code>wget https://oss.sonatype.org/content/repositories/releases/io/swagger/swagger-codegen-cli/2.2.1/swagger-codegen-cli-2.2.1.jar</code></pre><h4 id="用法-1"><a href="#用法-1" class="headerlink" title="用法"></a>用法</h4><p>为简单起见，我们假设您已安装 <a href="https://oss.sonatype.org/content/repositories/releases/io/swagger/swagger-codegen-cli/2.2.1/swagger-codegen-cli-2.2.1.jar" target="_blank" rel="noopener">swagger-codegen-cli-2.2.1</a> 。请访问 Swagger Codegen 的安装部分，了解如何在您的机器上安装 Codegen。</p>
<h5 id="支持的语言列表"><a href="#支持的语言列表" class="headerlink" title="支持的语言列表"></a>支持的语言列表</h5><p>要获取 Swagger Codegen 支持的语言列表 -</p>
<p>如果您安装了 Homebrew：</p>
<pre><code>swagger-codegen</code></pre><p>否则，您可以使用：</p>
<pre><code>java -jar swagger-codegen-cli-2.2.1.jar</code></pre><h5 id="终端中的帮助选项"><a href="#终端中的帮助选项" class="headerlink" title="终端中的帮助选项"></a>终端中的帮助选项</h5><p>要查看 Swagger Codegen 的各种帮助部分选项 -</p>
<p>如果您安装了 Homebrew：</p>
<pre><code>swagger-codegen help</code></pre><p>否则，您可以使用：</p>
<pre><code>java -jar swagger-codegen-cli-2.2.1.jar help</code></pre><p>获得各种帮助部分选项后，您就可以了解特定主题。</p>
<p>如果您安装了 Homebrew：</p>
<pre><code>swagger-codegen help &lt;command&gt;</code></pre><p>例子：</p>
<pre><code>swagger-codegen help generate</code></pre><p>否则，您可以使用：</p>
<pre><code>java -jar swagger-codegen-cli-2.2.1.jar help &lt;command&gt;</code></pre><p>例子：</p>
<pre><code>java -jar swagger-codegen-cli-2.2.1.jar help generate</code></pre><p>要查看 Swagger Codegen 支持的特定语言的各种配置帮助部分选项 -</p>
<p>如果您安装了 Homebrew：</p>
<pre><code>swagger-codegen config-help -l &lt;language name&gt;</code></pre><p>例子：</p>
<pre><code>swagger-codegen config-help -l php</code></pre><p>否则，您可以使用：</p>
<pre><code>java -jar swagger-codegen-cli-2.2.1.jar config-help -l &lt;language name&gt;</code></pre><p>例子：</p>
<pre><code>java -jar swagger-codegen-cli-2.2.1.jar config-help -l php</code></pre><h5 id="生成代码-1"><a href="#生成代码-1" class="headerlink" title="生成代码"></a>生成代码</h5><p>从现有的 swagger 规范生成代码 -</p>
<p>如果您安装了 Homebrew：</p>
<pre><code>swagger-codegen generate -i &lt;path of your Swagger specification&gt; -l &lt;language&gt;</code></pre><p>例子：</p>
<pre><code>swagger-codegen generate -i http://petstore.swagger.io/v2/swagger.json -l csharp</code></pre><p>否则，您可以使用：</p>
<p><code>java -jar swagger-codegen-cli-2.2.1.jar generate -i &lt;path of your Swagger specification&gt; -l &lt;language&gt;</code> ` 示例：</p>
<pre><code>java -jar swagger-codegen-cli-2.2.1.jar generate -i http://petstore.swagger.io/v2/swagger.json -l csharp</code></pre><p>在上面的代码中，我们传递了两个参数 : <code>- i</code> 和 <code>-l</code>。 <code>-i</code> 用于指定 API 规范的路径。 <code>-l</code> 用于指定您要为您指定的 API 规范生成代码的语言</p>
<p>Codegen 创建一个 <strong>README</strong> 文件，其中包含运行和构建 API 的所有信息。每种语言都会创建不同的 README，因此请仔细阅读以了解如何构建 Swagger 定义的 API。</p>
<h1 id="OpenAPI-Guide"><a href="#OpenAPI-Guide" class="headerlink" title="OpenAPI Guide"></a>OpenAPI Guide</h1><h2 id="什么是-OpenAPI？-2"><a href="#什么是-OpenAPI？-2" class="headerlink" title="什么是 OpenAPI？"></a>什么是 OpenAPI？</h2><p><strong>OpenAPI 规范</strong>（以前称为 Swagger 规范）是 REST API 的 API 描述格式。OpenAPI 文件允许您描述整个 API，包括：</p>
<ul>
<li>可用端点 ( <code>/users</code>) 和每个端点上的操作 ( <code>GET /users</code>, <code>POST /users</code>)</li>
<li>操作参数 每个操作的输入和输出</li>
<li>认证方法</li>
<li>联系信息、许可、使用条款和其他信息。</li>
</ul>
<p>API 规范可以用 YAML 或 JSON 编写。这种格式对人和机器都易于学习和阅读。完整的 OpenAPI 规范可以在 GitHub 上找到：<a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.2.md" target="_blank" rel="noopener">OpenAPI 3.0 规范</a></p>
<h3 id="什么是-Swagger？-2"><a href="#什么是-Swagger？-2" class="headerlink" title="什么是 Swagger？"></a>什么是 Swagger？</h3><p><strong>Swagger</strong>是一组围绕 OpenAPI 规范构建的开源工具，可帮助您设计、构建、记录和使用 REST API。主要的 Swagger 工具包括：</p>
<ul>
<li><a href="http://editor.swagger.io/" target="_blank" rel="noopener">Swagger Editor</a> – 基于浏览器的编辑器，您可以在其中编写 OpenAPI 规范。</li>
<li><a href="https://swagger.io/swagger-ui/" target="_blank" rel="noopener">Swagger UI</a> – 将 OpenAPI 规范呈现为交互式 API 文档。</li>
<li><a href="https://github.com/swagger-api/swagger-codegen" target="_blank" rel="noopener">Swagger Codegen</a> – 根据 OpenAPI 规范生成服务器存根和客户端库。</li>
</ul>
<h3 id="为什么要使用-OpenAPI？"><a href="#为什么要使用-OpenAPI？" class="headerlink" title="为什么要使用 OpenAPI？"></a>为什么要使用 OpenAPI？</h3><p>API 描述其自身结构的能力是 OpenAPI 中所有令人敬畏的根源。编写完成后，OpenAPI 规范和 Swagger 工具可以通过多种方式进一步推动您的 API 开发：</p>
<ul>
<li>设计为先的用户：使用<a href="https://swagger.io/swagger-codegen/" target="_blank" rel="noopener">扬鞭代码生成</a>到<strong>生成服务器存根</strong>为你的API。唯一剩下的就是实现服务器逻辑——您的 API 已经准备好上线了！</li>
<li>使用<a href="https://swagger.io/swagger-codegen/" target="_blank" rel="noopener">扬鞭代码生成</a>，以<strong>生成客户端库</strong>为您的API超过40种语言。</li>
<li>使用<a href="https://swagger.io/swagger-ui/" target="_blank" rel="noopener">Swagger UI</a>生成<strong>交互式 API 文档</strong>，让您的用户可以直接在浏览器中尝试 API 调用。</li>
<li>使用规范将 API 相关工具连接到您的 API。例如，将规范导入<a href="https://soapui.org/" target="_blank" rel="noopener">SoapUI</a>以创建 API 的自动化测试。</li>
<li>和更多！查看与 Swagger 集成<a href="https://swagger.io/open-source-integrations/" target="_blank" rel="noopener">的开源</a>和<a href="https://swagger.io/commercial-tools/" target="_blank" rel="noopener">商业工具</a>。</li>
</ul>
<h2 id="基本结构"><a href="#基本结构" class="headerlink" title="基本结构"></a>基本结构</h2><p>您可以在<a href="https://en.wikipedia.org/wiki/YAML" target="_blank" rel="noopener">YAML</a>或<a href="https://en.wikipedia.org/wiki/JSON" target="_blank" rel="noopener">JSON 中</a>编写 OpenAPI 定义。在本指南中，我们仅使用 YAML 示例，但 JSON 也同样有效。用 YAML 编写的示例 OpenAPI 3.0 定义如下所示：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">openapi</span><span class="token punctuation">:</span> 3.0.0
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">title</span><span class="token punctuation">:</span> Sample API
  <span class="token key atrule">description</span><span class="token punctuation">:</span> Optional multiline or single<span class="token punctuation">-</span>line description in <span class="token punctuation">[</span>CommonMark<span class="token punctuation">]</span>(http<span class="token punctuation">:</span>//commonmark.org/help/) or HTML.
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 0.1.9
<span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//api.example.com/v1
    <span class="token key atrule">description</span><span class="token punctuation">:</span> Optional server description<span class="token punctuation">,</span> e.g. Main (production) server
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//staging<span class="token punctuation">-</span>api.example.com
    <span class="token key atrule">description</span><span class="token punctuation">:</span> Optional server description<span class="token punctuation">,</span> e.g. Internal staging server for testing
<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/users</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Returns a list of users.
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Optional extended description in CommonMark or HTML.
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># status code</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> A JSON array of user names
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span> 
                <span class="token key atrule">type</span><span class="token punctuation">:</span> array
                <span class="token key atrule">items</span><span class="token punctuation">:</span> 
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>所有关键字名称都<strong>区分大小写</strong>。</p>
<h3 id="元数据"><a href="#元数据" class="headerlink" title="元数据"></a>元数据</h3><p>每个 API 定义都必须包含该定义所基于的 OpenAPI 规范的版本：</p>
<pre><code>openapi: 3.0.0</code></pre><p>OpenAPI 版本定义了 API 定义的整体结构——您可以记录什么以及如何记录。OpenAPI 3.0 使用带有三部分版本号的<a href="http://semver.org/" target="_blank" rel="noopener">语义版本控制</a>。的<a href="https://github.com/OAI/OpenAPI-Specification/releases" target="_blank" rel="noopener">可用版本</a>是<code>3.0.0</code>，<code>3.0.1</code>，<code>3.0.2</code>，和<code>3.0.3</code>; 它们在功能上是相同的。</p>
<p>该<code>info</code>部分包含 API 信息：<code>title</code>，<code>description</code>（可选）<code>version</code>，：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">title</span><span class="token punctuation">:</span> Sample API
  <span class="token key atrule">description</span><span class="token punctuation">:</span> Optional multiline or single<span class="token punctuation">-</span>line description in <span class="token punctuation">[</span>CommonMark<span class="token punctuation">]</span>(http<span class="token punctuation">:</span>//commonmark.org/help/) or HTML.
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 0.1.9<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>title</code>是您的 API 名称。<code>description</code>是关于您的 API 的扩展信息。它可以是<a href="http://stackoverflow.com/a/21699210" target="_blank" rel="noopener">多行的，</a>并支持Markdown的<a href="http://commonmark.org/help/" target="_blank" rel="noopener">CommonMark</a>方言以进行富文本表示。在<a href="http://spec.commonmark.org/0.27/" target="_blank" rel="noopener">CommonMark</a>提供的范围内支持 HTML（请参阅<a href="http://spec.commonmark.org/0.27/" target="_blank" rel="noopener">CommonMark 0.27 规范中的</a><a href="http://spec.commonmark.org/0.27/" target="_blank" rel="noopener">HTML 块</a>）。是指定 API 版本的任意字符串（不要将其与文件修订或版本混淆）。您可以使用诸如<em>Major.minor.patch 之</em>类的<a href="http://semver.org/" target="_blank" rel="noopener">语义版本控制</a>，或诸如<em>1.0-beta</em>或<em>2017-07-25 之</em>类的任意字符串。 <code>version``openapi``info</code> 还支持用于联系信息、许可、服务条款和其他详细信息的其他关键字。</p>
<p>参考：<a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.3.md#infoObject" target="_blank" rel="noopener">信息对象</a>。</p>
<h3 id="服务器"><a href="#服务器" class="headerlink" title="服务器"></a>服务器</h3><p>该<code>servers</code>部分指定 API 服务器和基本 URL。您可以定义一台或多台服务器，例如生产和沙箱。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//api.example.com/v1
    <span class="token key atrule">description</span><span class="token punctuation">:</span> Optional server description<span class="token punctuation">,</span> e.g. Main (production) server
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//staging<span class="token punctuation">-</span>api.example.com
    <span class="token key atrule">description</span><span class="token punctuation">:</span> Optional server description<span class="token punctuation">,</span> e.g. Internal staging server for testing<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>所有 API 路径都相对于服务器 URL。在上面的示例中，<code>/users</code>表示<code>http://api.example.com/v1/users</code>或<code>http://staging-api.example.com/users</code>，具体取决于所使用的服务器。有关更多信息，请参阅<a href="https://swagger.io/docs/specification/api-host-and-base-path/" target="_blank" rel="noopener">API 服务器和基本路径</a>。</p>
<h3 id="路径"><a href="#路径" class="headerlink" title="路径"></a>路径</h3><p>该<code>paths</code>部分定义了 API 中的各个端点（路径），以及这些端点支持的 HTTP 方法（操作）。例如，<code>GET /users</code>可以描述为：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/users</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Returns a list of users.
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Optional extended description in CommonMark or HTML
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> A JSON array of user names
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span> 
                <span class="token key atrule">type</span><span class="token punctuation">:</span> array
                <span class="token key atrule">items</span><span class="token punctuation">:</span> 
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>操作定义包括参数、请求正文（如果有）、可能的响应状态代码（例如 200 OK 或 404 Not Found）和响应内容。有关更多信息，请参阅<a href="https://swagger.io/docs/specification/paths-and-operations/" target="_blank" rel="noopener">路径和操作</a>。</p>
<h3 id="参数-2"><a href="#参数-2" class="headerlink" title="参数"></a>参数</h3><p>操作可以通过 URL 路径 ( <code>/users/{userId}</code>)、查询字符串 ( <code>/users?role=admin</code>)、标头 ( <code>X-CustomHeader: Value</code>) 或 cookie ( <code>Cookie: debug=0</code>)传递参数。您可以定义参数数据类型、格式、它们是必需的还是可选的，以及其他详细信息：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  /users/<span class="token punctuation">{</span>userId<span class="token punctuation">}</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Returns a user by ID.
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> userId
          <span class="token key atrule">in</span><span class="token punctuation">:</span> path
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Parameter description in CommonMark or HTML.
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span> <span class="token punctuation">:</span> integer
            <span class="token key atrule">format</span><span class="token punctuation">:</span> int64
            <span class="token key atrule">minimum</span><span class="token punctuation">:</span> <span class="token number">1</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span> 
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> OK<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>有关更多信息，请参阅<a href="https://swagger.io/docs/specification/describing-parameters/" target="_blank" rel="noopener">描述参数</a>。</p>
<h3 id="请求正文-1"><a href="#请求正文-1" class="headerlink" title="请求正文"></a>请求正文</h3><p>如果操作发送请求正文，则使用<code>requestBody</code>关键字描述正文内容和媒体类型。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/users</span><span class="token punctuation">:</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Creates a user.
      <span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">content</span><span class="token punctuation">:</span>
          <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token key atrule">type</span><span class="token punctuation">:</span> object
              <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                <span class="token key atrule">username</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string
      <span class="token key atrule">responses</span><span class="token punctuation">:</span> 
        <span class="token key atrule">'201'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Created<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>有关更多信息，请参阅<a href="https://swagger.io/docs/specification/describing-request-body/" target="_blank" rel="noopener">描述请求正文</a>。</p>
<h3 id="回应-2"><a href="#回应-2" class="headerlink" title="回应"></a>回应</h3><p>对于每个操作，您可以定义可能的状态代码，例如 200 OK 或 404 Not Found，以及响应正文<code>schema</code>。模式可以内联定义或通过<a href="https://swagger.io/docs/specification/using-ref/" target="_blank" rel="noopener"><code>$ref</code></a>. 您还可以为不同的内容类型提供示例响应：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  /users/<span class="token punctuation">{</span>userId<span class="token punctuation">}</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Returns a user by ID.
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> userId
          <span class="token key atrule">in</span><span class="token punctuation">:</span> path
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> The ID of the user to return.
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
            <span class="token key atrule">format</span><span class="token punctuation">:</span> int64
            <span class="token key atrule">minimum</span><span class="token punctuation">:</span> <span class="token number">1</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> A user object.
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                  <span class="token key atrule">id</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
                    <span class="token key atrule">format</span><span class="token punctuation">:</span> int64
                    <span class="token key atrule">example</span><span class="token punctuation">:</span> <span class="token number">4</span>
                  <span class="token key atrule">name</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                    <span class="token key atrule">example</span><span class="token punctuation">:</span> Jessica Smith
        <span class="token key atrule">'400'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> The specified user ID is invalid (not a number).
        <span class="token key atrule">'404'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> A user with the specified ID was not found.
        <span class="token key atrule">default</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Unexpected error<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>请注意，响应 HTTP 状态代码必须用引号括起来：“200”（OpenAPI 2.0 不需要这样做）。有关更多信息，请参阅<a href="https://swagger.io/docs/specification/describing-responses/" target="_blank" rel="noopener">描述响应</a>。</p>
<h3 id="输入和输出模型"><a href="#输入和输出模型" class="headerlink" title="输入和输出模型"></a>输入和输出模型</h3><p>global<code>components/schemas</code> 部分允许您定义 API 中使用的通用数据结构。它们可以在需要<code>$ref</code>时通过a进行引用<code>schema</code>——在参数、请求主体和响应主体中。例如，这个 JSON 对象：</p>
<pre><code>{
  "id": 4,
  "name": "Arthur Dent"
}</code></pre><p>可以表示为：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
    <span class="token key atrule">User</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> object
      <span class="token key atrule">properties</span><span class="token punctuation">:</span>
        <span class="token key atrule">id</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
          <span class="token key atrule">example</span><span class="token punctuation">:</span> <span class="token number">4</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
          <span class="token key atrule">example</span><span class="token punctuation">:</span> Arthur Dent
      <span class="token comment" spellcheck="true"># Both properties are required</span>
      <span class="token key atrule">required</span><span class="token punctuation">:</span>  
        <span class="token punctuation">-</span> id
        <span class="token punctuation">-</span> name<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>然后在请求正文架构和响应正文架构中引用如下：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  /users/<span class="token punctuation">{</span>userId<span class="token punctuation">}</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Returns a user by ID.
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> path
          <span class="token key atrule">name</span><span class="token punctuation">:</span> userId
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
            <span class="token key atrule">format</span><span class="token punctuation">:</span> int64
            <span class="token key atrule">minimum</span><span class="token punctuation">:</span> <span class="token number">1</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> OK
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/User'    # &lt;-------</span>
  <span class="token key atrule">/users</span><span class="token punctuation">:</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Creates a new user.
      <span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">content</span><span class="token punctuation">:</span>
          <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/User'      # &lt;-------</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'201'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Created<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="验证-1"><a href="#验证-1" class="headerlink" title="验证"></a>验证</h3><p>在<code>securitySchemes</code>和<code>security</code>关键字是用来描述你的API中使用的身份验证方法。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">securitySchemes</span><span class="token punctuation">:</span>
    <span class="token key atrule">BasicAuth</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> http
      <span class="token key atrule">scheme</span><span class="token punctuation">:</span> basic
<span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">BasicAuth</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>支持的身份验证方法有：</p>
<ul>
<li>HTTP 身份验证：<a href="https://swagger.io/docs/specification/authentication/basic-authentication/" target="_blank" rel="noopener">Basic</a>、<a href="https://swagger.io/docs/specification/authentication/bearer-authentication/" target="_blank" rel="noopener">Bearer</a>等。</li>
<li><a href="https://swagger.io/docs/specification/authentication/api-keys/" target="_blank" rel="noopener">API 密钥</a>作为标头或查询参数或在 cookie 中</li>
<li><a href="https://swagger.io/docs/specification/authentication/oauth2/" target="_blank" rel="noopener">OAuth 2</a></li>
<li><a href="https://swagger.io/docs/specification/authentication/openid-connect-discovery/" target="_blank" rel="noopener">OpenID 连接发现</a></li>
</ul>
<p>有关更多信息，请参阅<a href="https://swagger.io/docs/specification/authentication/" target="_blank" rel="noopener">身份验证</a>。</p>
<h3 id="完整规格"><a href="#完整规格" class="headerlink" title="完整规格"></a>完整规格</h3><p>完整的 OpenAPI 3.0 规范可在 GitHub 上获得：<a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.3.md" target="_blank" rel="noopener">https</a> : <a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.3.md" target="_blank" rel="noopener">//github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.3.md</a></p>
<h2 id="API-Server-and-Base-URL"><a href="#API-Server-and-Base-URL" class="headerlink" title="API Server and Base URL"></a>API Server and Base URL</h2><p>所有 API 端点都相对于基本 URL。例如，假设基本 URL 为<code>https://api.example.com/v1</code>，<code>/users</code>端点指的是 <code>https://api.example.com/v1/users</code>。</p>
<pre><code>https://api.example.com/v1/users?role=admin&amp;status=active
\________________________/\____/ \______________________/
         server URL       endpoint    query parameters
                            path</code></pre><p>在 OpenAPI 3.0 中，您可以使用<code>servers</code>数组为 API 指定一个或多个基本 URL。<code>servers</code>替换OpenAPI 2.0 中使用的<code>host</code>,<code>basePath</code>和<code>schemes</code>关键字。每个服务器都有一个<code>url</code>和一个可选的 Markdown 格式的<code>description</code>.</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//api.example.com/v1    <span class="token comment" spellcheck="true"># The "url: " prefix is required</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>您还可以拥有多个服务器，例如生产和沙箱：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//api.example.com/v1
    <span class="token key atrule">description</span><span class="token punctuation">:</span> Production server (uses live data)
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//sandbox<span class="token punctuation">-</span>api.example.com<span class="token punctuation">:</span>8443/v1
    <span class="token key atrule">description</span><span class="token punctuation">:</span> Sandbox server (uses test data)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="服务器-URL-格式"><a href="#服务器-URL-格式" class="headerlink" title="服务器 URL 格式"></a>服务器 URL 格式</h3><p>服务器 URL 格式遵循<a href="https://tools.ietf.org/html/rfc3986" target="_blank" rel="noopener">RFC 3986</a>，通常如下所示：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml">scheme<span class="token punctuation">:</span>//host<span class="token punctuation">[</span><span class="token punctuation">:</span>port<span class="token punctuation">]</span><span class="token punctuation">[</span>/path<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>主机可以是名称或 IP 地址（IPv4 或 IPv6）。OpenAPI 3.0 也支持来自 OpenAPI 2.0 的WebSocket 方案<em>ws://</em>和<em>wss://</em>。有效服务器 URL 的示例：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml">https<span class="token punctuation">:</span>//api.example.com
https<span class="token punctuation">:</span>//api.example.com<span class="token punctuation">:</span>8443/v1/reports
http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3025/v1
http<span class="token punctuation">:</span>//10.0.81.36/v1
ws<span class="token punctuation">:</span>//api.example.com/v1
wss<span class="token punctuation">:</span>//api.example.com/v1
/v1/reports
/
//api.example.com<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果服务器 URL 是相对的，则会针对托管给定 OpenAPI 定义文件的服务器进行解析（更多内容见<a href="https://swagger.io/docs/specification/api-host-and-base-path/#relative-urls" target="_blank" rel="noopener">下文</a>）。<strong>注意：</strong>服务器 URL 不得包含查询字符串参数。例如，这是无效的：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml">https<span class="token punctuation">:</span>//api.example.com/v1<span class="token punctuation">?</span>route=<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>如果<code>servers</code>数组未提供或为空，则服务器 URL 默认为<code>/</code>：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> /<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="服务器模板"><a href="#服务器模板" class="headerlink" title="服务器模板"></a>服务器模板</h3><p>服务器 URL 的任何部分——方案、主机名或其部分、端口、子路径——都可以使用变量进行参数化。变量由服务器 url 中的 {大括号} 表示，如下所示：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//<span class="token punctuation">{</span>customerId<span class="token punctuation">}</span>.saas<span class="token punctuation">-</span>app.com<span class="token punctuation">:</span><span class="token punctuation">{</span>port<span class="token punctuation">}</span>/v2
    <span class="token key atrule">variables</span><span class="token punctuation">:</span>
      <span class="token key atrule">customerId</span><span class="token punctuation">:</span>
        <span class="token key atrule">default</span><span class="token punctuation">:</span> demo
        <span class="token key atrule">description</span><span class="token punctuation">:</span> Customer ID assigned by the service provider
      <span class="token key atrule">port</span><span class="token punctuation">:</span>
        <span class="token key atrule">enum</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> <span class="token string">'443'</span>
          <span class="token punctuation">-</span> <span class="token string">'8443'</span>
        <span class="token key atrule">default</span><span class="token punctuation">:</span> <span class="token string">'443'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>与<a href="https://swagger.io/docs/specification/describing-parameters/#path" target="_blank" rel="noopener">路径参数</a>不同，服务器变量不使用<code>schema</code>. 相反，它们被假定为字符串。变量可以具有任意值，也可以限制为<code>enum</code>. 在任何情况下，<code>default</code>都需要一个值，如果客户端不提供值，将使用该值。变量<code>description</code>是可选的，但对于富文本格式具有并支持 Markdown ( <a href="http://commonmark.org/help/" target="_blank" rel="noopener">CommonMark</a> )很有用。服务器模板的常见用例：</p>
<ul>
<li>指定多个协议（例如 HTTP 与 HTTPS）。</li>
<li>SaaS（托管）应用程序，其中每个客户都有自己的子域。</li>
<li>不同地理区域的区域服务器（例如：Amazon Web Services）。</li>
<li>SaaS 和内部部署 API 的单一 API 定义。</li>
</ul>
<h4 id="例子-1"><a href="#例子-1" class="headerlink" title="例子"></a>例子</h4><h5 id="HTTPS-和-HTTP"><a href="#HTTPS-和-HTTP" class="headerlink" title="HTTPS 和 HTTP"></a>HTTPS 和 HTTP</h5><pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//api.example.com
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//api.example.com<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>或者使用模板：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> <span class="token string">'{protocol}://api.example.com'</span>
    <span class="token key atrule">variables</span><span class="token punctuation">:</span>
      <span class="token key atrule">protocol</span><span class="token punctuation">:</span>
        <span class="token key atrule">enum</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> http
          <span class="token punctuation">-</span> https
        <span class="token key atrule">default</span><span class="token punctuation">:</span> https<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>注意：</strong>这两个示例在语义上是不同的。第二个示例将 HTTPS 服务器显式设置为<code>default</code>，而第一个示例没有默认服务器。</p>
<h5 id="制作、开发和分期"><a href="#制作、开发和分期" class="headerlink" title="制作、开发和分期"></a>制作、开发和分期</h5><pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//<span class="token punctuation">{</span>environment<span class="token punctuation">}</span>.example.com/v2
    <span class="token key atrule">variables</span><span class="token punctuation">:</span>
      <span class="token key atrule">environment</span><span class="token punctuation">:</span>
        <span class="token key atrule">default</span><span class="token punctuation">:</span> api    <span class="token comment" spellcheck="true"># Production server</span>
        <span class="token key atrule">enum</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> api         <span class="token comment" spellcheck="true"># Production server</span>
          <span class="token punctuation">-</span> api.dev     <span class="token comment" spellcheck="true"># Development server</span>
          <span class="token punctuation">-</span> api.staging <span class="token comment" spellcheck="true"># Staging server</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="SaaS-和内部部署"><a href="#SaaS-和内部部署" class="headerlink" title="SaaS 和内部部署"></a>SaaS 和内部部署</h5><pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> <span class="token string">'{server}/v1'</span>
    <span class="token key atrule">variables</span><span class="token punctuation">:</span>
      <span class="token key atrule">server</span><span class="token punctuation">:</span>
        <span class="token key atrule">default</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//api.example.com  <span class="token comment" spellcheck="true"># SaaS server</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="不同地理区域的区域端点"><a href="#不同地理区域的区域端点" class="headerlink" title="不同地理区域的区域端点"></a>不同地理区域的区域端点</h5><pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//<span class="token punctuation">{</span>region<span class="token punctuation">}</span>.api.cognitive.microsoft.com
    <span class="token key atrule">variables</span><span class="token punctuation">:</span>
      <span class="token key atrule">region</span><span class="token punctuation">:</span>
        <span class="token key atrule">default</span><span class="token punctuation">:</span> westus
        <span class="token key atrule">enum</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> westus
          <span class="token punctuation">-</span> eastus2
          <span class="token punctuation">-</span> westcentralus
          <span class="token punctuation">-</span> westeurope
          <span class="token punctuation">-</span> southeastasia<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="覆盖服务器"><a href="#覆盖服务器" class="headerlink" title="覆盖服务器"></a>覆盖服务器</h3><p>全局<code>servers</code>数组可以在路径级别或操作级别被覆盖。如果某些端点使用与 API 的其余部分不同的服务器或基本路径，这会很方便。常见的例子有：</p>
<ul>
<li>文件上传和下载操作的不同基本 URL，</li>
<li>已弃用但仍可使用的端点。</li>
</ul>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//api.example.com/v1
<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/files</span><span class="token punctuation">:</span>
    <span class="token key atrule">description</span><span class="token punctuation">:</span> File upload and download operations
    <span class="token key atrule">servers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//files.example.com
        <span class="token key atrule">description</span><span class="token punctuation">:</span> Override base path for all operations with the /files path
    <span class="token punctuation">...</span>
  <span class="token key atrule">/ping</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">servers</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//echo.example.com
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Override base path for the GET /ping operation<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="相对-URL"><a href="#相对-URL" class="headerlink" title="相对 URL"></a>相对 URL</h3><p><code>servers</code>数组中 的 URL可以是相对的，例如<code>/v2</code>. 在这种情况下，根据托管给定 OpenAPI 定义的服务器解析 URL。这对于托管在客户自己的服务器上的本地安装很有用。例如，如果托管在的定义<code>http://localhost:3001/openapi.yaml</code>指定<code>url: /v2</code>，<code>url</code>则解析为<code>http://localhost:3001/v2</code>。相对 URL 解析规则遵循<a href="https://tools.ietf.org/html/rfc3986" target="_blank" rel="noopener">RFC 3986</a>。此外，API 定义中的几乎所有其他 URL，包括 OAuth 2 流端点<code>termsOfService</code>、外部文档 URL 等，都可以相对于服务器 URL 进行指定。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//api.example.com
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//sandbox<span class="token punctuation">-</span>api.example.com
<span class="token comment" spellcheck="true"># Relative URL to Terms of Service</span>
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 0.0.0
  <span class="token key atrule">title</span><span class="token punctuation">:</span> test
  <span class="token key atrule">termsOfService</span><span class="token punctuation">:</span> /terms<span class="token punctuation">-</span>of<span class="token punctuation">-</span>use
<span class="token comment" spellcheck="true"># Relative URL to external documentation</span>
<span class="token key atrule">externalDocs</span><span class="token punctuation">:</span>
  <span class="token key atrule">url</span><span class="token punctuation">:</span> /docs
  <span class="token key atrule">description</span><span class="token punctuation">:</span> Find more info here
<span class="token comment" spellcheck="true"># Relative URLs to OAuth2 authorization and token URLs</span>
<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">securitySchemes</span><span class="token punctuation">:</span>
    <span class="token key atrule">oauth2</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> oauth2
      <span class="token key atrule">flows</span><span class="token punctuation">:</span>
        <span class="token key atrule">authorizationCode</span><span class="token punctuation">:</span>
          <span class="token key atrule">authorizationUrl</span><span class="token punctuation">:</span> /oauth/dialog
          <span class="token key atrule">tokenUrl</span><span class="token punctuation">:</span> /oauth/token<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>请注意，如果使用多个服务器，则相对 URL 指定的资源应该存在于所有服务器上。</p>
<h2 id="媒体类型"><a href="#媒体类型" class="headerlink" title="媒体类型"></a>媒体类型</h2><p><strong>媒体类型</strong>是请求或响应正文数据的格式。Web 服务操作可以接受和返回不同格式的数据，最常见的是 JSON、XML 和图像。您可以在请求和响应定义中指定媒体类型。下面是一个响应定义的例子：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/employees</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Returns a list of employees.
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>      <span class="token comment" spellcheck="true"># Response</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> OK
          <span class="token key atrule">content</span><span class="token punctuation">:</span>  <span class="token comment" spellcheck="true"># Response body</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>  <span class="token comment" spellcheck="true"># Media type</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>          <span class="token comment" spellcheck="true"># Must-have</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> object   <span class="token comment" spellcheck="true"># Data type</span>
                <span class="token key atrule">properties</span><span class="token punctuation">:</span> 
                  <span class="token key atrule">id</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
                  <span class="token key atrule">name</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                  <span class="token key atrule">fullTime</span><span class="token punctuation">:</span> 
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> boolean
                <span class="token key atrule">example</span><span class="token punctuation">:</span>       <span class="token comment" spellcheck="true"># Sample data</span>
                    <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">1</span>
                    <span class="token key atrule">name</span><span class="token punctuation">:</span> Jessica Right
                    <span class="token key atrule">fullTime</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在<code>responses</code>我们下面有个人反应的定义。如您所见，每个响应都由其代码定义（<code>'200'</code>在我们的示例中）。<code>content</code>代码下方的关键字对应于响应正文。一种或多种媒体类型作为该<code>content</code>关键字的子关键字。每种媒体类型都包括一个<code>schema</code>，定义消息体的数据类型，以及一个或多个示例（可选）。有关定义正文数据的更多信息，请参阅<a href="https://swagger.io/docs/specification/describing-request-body/" target="_blank" rel="noopener">定义请求</a>正文和<a href="https://swagger.io/docs/specification/describing-responses/" target="_blank" rel="noopener">定义响应</a>。</p>
<h3 id="媒体类型名称"><a href="#媒体类型名称" class="headerlink" title="媒体类型名称"></a>媒体类型名称</h3><p>该<code>content</code>字段下方列出的媒体类型应符合<a href="https://datatracker.ietf.org/doc/html/rfc6838" target="_blank" rel="noopener">RFC 6838</a>。例如，您可以使用标准类型或特定于供应商的类型（由 表示<code>.vnd</code>） –</p>
<pre><code>application/json
application/xml
application/x-www-form-urlencoded
multipart/form-data
text/plain; charset=utf-8
text/html
application/pdf
image/png</code></pre><pre><code>application/vnd.mycompany.myapp.v2+json
application/vnd.ms-excel
application/vnd.openstreetmap.data+xml
application/vnd.github-issue.text+json
application/vnd.github.v3.diff
image/vnd.djvu</code></pre><h3 id="多种媒体类型"><a href="#多种媒体类型" class="headerlink" title="多种媒体类型"></a>多种媒体类型</h3><p>您可能需要指定多种媒体类型：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/employees</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Returns a list of employees.
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>      <span class="token comment" spellcheck="true"># Response</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> OK
          <span class="token key atrule">content</span><span class="token punctuation">:</span>  <span class="token comment" spellcheck="true"># Response body</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>   <span class="token comment" spellcheck="true"># One of media types</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                  <span class="token key atrule">id</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
                  <span class="token key atrule">name</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                  <span class="token key atrule">fullTime</span><span class="token punctuation">:</span> 
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> boolean
            <span class="token key atrule">application/xml</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># Another media types</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                  <span class="token key atrule">id</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
                  <span class="token key atrule">name</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                  <span class="token key atrule">fullTime</span><span class="token punctuation">:</span> 
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> boolean<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>要对多种媒体类型使用相同的数据格式<code>components</code>，请在规范的部分定义一个自定义对象，然后在每个媒体类型中引用此对象：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/employees</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>      <span class="token comment" spellcheck="true"># Response</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> OK
          <span class="token key atrule">content</span><span class="token punctuation">:</span>  <span class="token comment" spellcheck="true"># Response body</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>  <span class="token comment" spellcheck="true"># Media type</span>
             <span class="token key atrule">schema</span><span class="token punctuation">:</span> 
               <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/Employee'    # Reference to object definition</span>
            <span class="token key atrule">application/xml</span><span class="token punctuation">:</span>   <span class="token comment" spellcheck="true"># Media type</span>
             <span class="token key atrule">schema</span><span class="token punctuation">:</span> 
               <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/Employee'    # Reference to object definition</span>
<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
    <span class="token key atrule">Employee</span><span class="token punctuation">:</span>      <span class="token comment" spellcheck="true"># Object definition</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> object
      <span class="token key atrule">properties</span><span class="token punctuation">:</span>
        <span class="token key atrule">id</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
        <span class="token key atrule">name</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token key atrule">fullTime</span><span class="token punctuation">:</span> 
          <span class="token key atrule">type</span><span class="token punctuation">:</span> boolean<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>要定义多种媒体类型相同的格式，你也可以使用占位符喜欢<code>*/*</code>，<code>application/*</code>，<code>image/*</code>或其他：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/info/logo</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>           <span class="token comment" spellcheck="true"># Response</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> OK
          <span class="token key atrule">content</span><span class="token punctuation">:</span>       <span class="token comment" spellcheck="true"># Response body</span>
            <span class="token key atrule">image/*</span><span class="token punctuation">:</span>     <span class="token comment" spellcheck="true"># Media type</span>
             <span class="token key atrule">schema</span><span class="token punctuation">:</span> 
               <span class="token key atrule">type</span><span class="token punctuation">:</span> string
               <span class="token key atrule">format</span><span class="token punctuation">:</span> binary<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>您用作媒体类型的值（<code>image/*</code>在我们的示例中）与您在HTTP 请求和响应的<code>Accept</code>或<code>Content-Type</code>标头中看到的非常相似。不要混淆占位符和<code>Accept</code>或<code>Content-Type</code>标头的实际值。例如，<code>image/*</code>响应正文的占位符意味着服务器将对与占位符匹配的所有响应使用相同的数据结构。这并不意味着字符串<em>image/*</em>将在<code>Content-Type</code>标题中指定。的<code>Content-Type</code>报头最有可能将具有<em>图像/ PNG</em>，<em>图像/ JPEG</em>，或一些其他类似的值。</p>
<h2 id="路径和操作"><a href="#路径和操作" class="headerlink" title="路径和操作"></a>路径和操作</h2><p>在 OpenAPI 术语中，<strong>路径</strong>是API 公开的端点（资源），例如<code>/users</code>或<code>/reports/summary/</code>，而<strong>操作</strong>是用于操作这些路径的 HTTP 方法，例如 GET、POST 或 DELETE。</p>
<h3 id="路径-1"><a href="#路径-1" class="headerlink" title="路径"></a>路径</h3><p>API 路径和操作<code>paths</code>在 API 规范的全局部分中定义。</p>
<pre><code>paths:
  /ping:
    ...
  /users:
    ...
  /users/{id}:
    ...</code></pre><p>所有路径都相对于<a href="https://swagger.io/docs/specification/api-host-and-base-path/" target="_blank" rel="noopener">API 服务器 URL</a>。完整的请求 URL 构造为<code>&lt;server-url&gt;/path</code>. <code>servers</code>也可以在路径级别或操作级别覆盖全局（更多内容见<a href="https://swagger.io/docs/specification/paths-and-operations/#overriding-servers" target="_blank" rel="noopener">下文</a>）。出于文档目的，路径可能有一个可选的短<code>summary</code>和长<code>description</code>。此信息应该与此路径中的所有操作相关。<code>description</code>可以是<a href="http://stackoverflow.com/questions/3790454/in-yaml-how-do-i-break-a-string-over-multiple-lines" target="_blank" rel="noopener">多行的，</a>并且支持<a href="http://commonmark.org/help/" target="_blank" rel="noopener">Markdown</a> (CommonMark) 进行富文本表示。</p>
<pre><code>paths:
  /users/{id}:
    summary: Represents a user
    description: &gt;
      This resource represents an individual user in the system.
      Each user is identified by a numeric `id`.
    get:
      ...
    patch:
      ...
    delete:
      ...</code></pre><h3 id="路径模板"><a href="#路径模板" class="headerlink" title="路径模板"></a>路径模板</h3><p>您可以使用花括号<code>{}</code>将 URL 的一部分标记为<a href="https://swagger.io/docs/specification/describing-parameters/#path-parameters" target="_blank" rel="noopener">路径参数</a>：</p>
<pre><code>/users/{id}
/organizations/{orgId}/members/{memberId}
/report.{format}</code></pre><p>API 客户端在进行 API 调用时需要提供适当的参数值，例如<code>/users/5</code>或<code>/users/12</code>。</p>
<h3 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h3><p>对于每个路径，您定义可用于访问该路径的操作（HTTP 方法）。OpenAPI的3.0支持<code>get</code>，<code>post</code>，<code>put</code>，<code>patch</code>，<code>delete</code>，<code>head</code>，<code>options</code>，和<code>trace</code>。单个路径可以支持多个操作，例如<code>GET /users</code>获取用户列表和<code>POST /users</code>添加新用户。OpenAPI 将唯一操作定义为路径和 HTTP 方法的组合。这意味着不允许对同一路径使用两个 GET 或两个 POST 方法——即使它们具有不同的参数（参数对唯一性没有影响）。下面是一个操作的最小示例：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/ping</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> OK<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这是带有参数和响应架构的更详细示例：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  /users/<span class="token punctuation">{</span>id<span class="token punctuation">}</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">tags</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Users
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Gets a user by ID.
      <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token punctuation">></span><span class="token scalar string">
        A detailed description of the operation.
        Use markdown for rich text representation,
        such as **bold**, *italic*, and [links](https://swagger.io).</span>
      <span class="token key atrule">operationId</span><span class="token punctuation">:</span> getUserById
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> id
          <span class="token key atrule">in</span><span class="token punctuation">:</span> path
          <span class="token key atrule">description</span><span class="token punctuation">:</span> User ID
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
            <span class="token key atrule">format</span><span class="token punctuation">:</span> int64
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Successful operation
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/User'</span>
      <span class="token key atrule">externalDocs</span><span class="token punctuation">:</span>
        <span class="token key atrule">description</span><span class="token punctuation">:</span> Learn more about user operations provided by this API.
        <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//api.example.com/docs/user<span class="token punctuation">-</span>operations/
<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
    <span class="token key atrule">User</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> object
      <span class="token key atrule">properties</span><span class="token punctuation">:</span>
        <span class="token key atrule">id</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
          <span class="token key atrule">format</span><span class="token punctuation">:</span> int64
        <span class="token key atrule">name</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
      <span class="token key atrule">required</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> id
        <span class="token punctuation">-</span> name<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>操作还支持一些用于文档目的的可选元素：</p>
<ul>
<li>短<code>summary</code>和长<code>description</code>的什么样的操作一样。<code>description</code>可以是<a href="http://stackoverflow.com/questions/3790454/in-yaml-how-do-i-break-a-string-over-multiple-lines" target="_blank" rel="noopener">多行的，</a>并且支持<a href="http://commonmark.org/help/" target="_blank" rel="noopener">Markdown</a> (CommonMark) 进行富文本表示。</li>
<li><code>tags</code>– 用于按资源或任何其他限定符对操作进行逻辑分组。请参阅<a href="https://swagger.io/docs/specification/grouping-operations-with-tags/" target="_blank" rel="noopener">使用标签对操作进行分组</a>。</li>
<li><code>externalDocs</code> – 用于引用包含附加文档的外部资源。</li>
</ul>
<h3 id="操作参数"><a href="#操作参数" class="headerlink" title="操作参数"></a>操作参数</h3><p>OpenAPI 3.0 支持通过路径、查询字符串、标头和 cookie 传递的操作参数。您还可以为将数据传输到服务器的操作定义请求主体，例如 POST、PUT 和 PATCH。有关详细信息，请参阅<a href="https://swagger.io/docs/specification/describing-parameters/" target="_blank" rel="noopener">描述参数</a>和<a href="https://swagger.io/docs/specification/describing-request-body/" target="_blank" rel="noopener">描述请求正文</a>。</p>
<h3 id="路径中的查询字符串"><a href="#路径中的查询字符串" class="headerlink" title="路径中的查询字符串"></a>路径中的查询字符串</h3><p>查询字符串参数<strong>不得</strong>包含在路径中。它们应该被定义为<a href="https://swagger.io/docs/specification/describing-parameters/#query-parameters" target="_blank" rel="noopener">查询参数</a>。</p>
<p>不正确：</p>
<pre><code>paths:
  /users?role={role}:</code></pre><p>正确的：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/users</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">name</span><span class="token punctuation">:</span> role
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string
            <span class="token key atrule">enum</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>user<span class="token punctuation">,</span> poweruser<span class="token punctuation">,</span> admin<span class="token punctuation">]</span>
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这也意味着不可能有多个仅在查询字符串不同的路径，例如：</p>
<pre><code>GET /users?firstName=value&amp;lastName=value
GET /users?role=value</code></pre><p>这是因为 OpenAPI 将唯一操作视为路径和 HTTP 方法的组合，附加参数不会使操作唯一。相反，您应该使用唯一的路径，例如：</p>
<pre><code>GET /users/findByName?firstName=value&amp;lastName=value
GET /users/findByRole?role=value</code></pre><h3 id="操作编号"><a href="#操作编号" class="headerlink" title="操作编号"></a>操作编号</h3><p><code>operationId</code>是用于标识操作的可选唯一字符串。如果提供，这些 ID 在您的 API 中描述的所有操作中必须是唯一的。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">/users</span><span class="token punctuation">:</span>
  <span class="token key atrule">get</span><span class="token punctuation">:</span>
    <span class="token key atrule">operationId</span><span class="token punctuation">:</span> getUsers
    <span class="token key atrule">summary</span><span class="token punctuation">:</span> Gets all users
    <span class="token punctuation">...</span>
  <span class="token key atrule">post</span><span class="token punctuation">:</span>
    <span class="token key atrule">operationId</span><span class="token punctuation">:</span> addUser
    <span class="token key atrule">summary</span><span class="token punctuation">:</span> Adds a new user
    <span class="token punctuation">...</span>
/user/<span class="token punctuation">{</span>id<span class="token punctuation">}</span><span class="token punctuation">:</span>
  <span class="token key atrule">get</span><span class="token punctuation">:</span>
    <span class="token key atrule">operationId</span><span class="token punctuation">:</span> getUserById
    <span class="token key atrule">summary</span><span class="token punctuation">:</span> Gets a user by user ID
    <span class="token punctuation">...</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>operationId 的一些常见用例是：</p>
<ul>
<li>某些代码生成器使用此值来命名代码中的相应方法。</li>
<li><a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.2.md#linkObject" target="_blank" rel="noopener">链接</a>可以通过 引用链接操作<code>operationId</code>。</li>
</ul>
<h3 id="弃用的操作"><a href="#弃用的操作" class="headerlink" title="弃用的操作"></a>弃用的操作</h3><p>您可以将特定操作标记为<code>deprecated</code>指示它们应停止使用：</p>
<pre><code>/pet/findByTags:
  get:
    deprecated: true</code></pre><p>工具可以以特定方式处理已弃用的操作。例如，Swagger UI 以不同的样式显示它们：</p>
<p><img src="/images/loading.gif" data-original="../images/development/deprecated.png" alt="Swagger UI 中已弃用的操作"></p>
<h3 id="覆盖全局服务器"><a href="#覆盖全局服务器" class="headerlink" title="覆盖全局服务器"></a>覆盖全局服务器</h3><p>全局<code>servers</code>数组可以在路径级别或操作级别被覆盖。如果某些端点使用与 API 的其余部分不同的服务器或基本路径，这将非常有用。常见的例子有：</p>
<ul>
<li>文件上传和下载操作的不同基本 URL。</li>
<li>已弃用但仍可使用的端点。</li>
</ul>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//api.example.com/v1
<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/files</span><span class="token punctuation">:</span>
    <span class="token key atrule">description</span><span class="token punctuation">:</span> File upload and download operations
    <span class="token key atrule">servers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//files.example.com
        <span class="token key atrule">description</span><span class="token punctuation">:</span> Override base path for all operations with the /files path
    <span class="token punctuation">...</span>
  <span class="token key atrule">/ping</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">servers</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//echo.example.com
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Override base path for the GET /ping operation<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="描述参数"><a href="#描述参数" class="headerlink" title="描述参数"></a>描述参数</h2><p>在 OpenAPI 3.0 中，参数在<code>parameters</code>操作或路径的部分中定义。要描述参数，请指定其<code>name</code>、位置 ( <code>in</code>)、数据类型（由<code>schema</code>或定义<code>content</code>）和其他属性，例如<code>description</code>或<code>required</code>。下面是一个例子：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  /users/<span class="token punctuation">{</span>userId<span class="token punctuation">}</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Get a user by ID
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> path
          <span class="token key atrule">name</span><span class="token punctuation">:</span> userId
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Numeric ID of the user to get<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>请注意，这<code>parameters</code>是一个数组，因此，在 YAML 中，每个参数定义都必须<code>-</code>在其前面列出一个破折号 ( )。</p>
<h3 id="参数类型"><a href="#参数类型" class="headerlink" title="参数类型"></a>参数类型</h3><p>OpenAPI 3.0 根据参数位置区分以下参数类型。位置由参数的<code>in</code>键确定，例如，<code>in: query</code>或<code>in: path</code>。</p>
<ul>
<li><a href="https://swagger.io/docs/specification/describing-parameters/#path-parameters" target="_blank" rel="noopener">路径参数</a>，例如<code>/users/{id}</code></li>
<li><a href="https://swagger.io/docs/specification/describing-parameters/#query-parameters" target="_blank" rel="noopener">查询参数</a>，例如<code>/users?role=admin</code></li>
<li><a href="https://swagger.io/docs/specification/describing-parameters/#header-parameters" target="_blank" rel="noopener">标头参数</a>，例如<code>X-MyHeader: Value</code></li>
<li><a href="https://swagger.io/docs/specification/describing-parameters/#cookie-parameters" target="_blank" rel="noopener">cookie 参数</a>，在<code>Cookie</code>header中传递，例如 <code>Cookie: debug=0; csrftoken=BUSe35dohU3O1MZvDCU</code></li>
</ul>
<h3 id="路径参数-2"><a href="#路径参数-2" class="headerlink" title="路径参数"></a>路径参数</h3><p>路径参数是 URL 路径的可变部分。它们通常用于指向集合中的特定资源，例如由 ID 标识的用户。一个 URL 可以有多个路径参数，每个参数都用大括号 表示<code>{ }</code>。</p>
<pre><code>GET /users/{id}
GET /cars/{carId}/drivers/{driverId}
GET /report.{format}</code></pre><p>当客户端进行 API 调用时，每个路径参数都必须替换为实际值。在 OpenAPI 中，路径参数是使用<code>in: path</code>. 参数名称必须与路径中指定的名称相同。还记得添加 <code>required: true</code>，因为路径参数总是需要的。例如，<code>/users/{id}</code>端点将被描述为：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  /users/<span class="token punctuation">{</span>id<span class="token punctuation">}</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> path
          <span class="token key atrule">name</span><span class="token punctuation">:</span> id   <span class="token comment" spellcheck="true"># Note the name is the same as in the path</span>
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
            <span class="token key atrule">minimum</span><span class="token punctuation">:</span> <span class="token number">1</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> The user ID<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>包含数组和对象的路径参数可以用不同的方式序列化：</p>
<ul>
<li>路径样式扩展（矩阵）——以分号为前缀，例如 <code>/map/point;x=50;y=20</code></li>
<li>标签扩展——以点为前缀，例如 <code>/color.R=100.G=200.B=150</code></li>
<li>simple-style – 逗号分隔，例如 <code>/users/12,34,56</code></li>
</ul>
<p>序列化方法由<code>style</code>和<code>explode</code>关键字指定。要了解更多信息，请参阅<a href="https://swagger.io/docs/specification/serialization/" target="_blank" rel="noopener">参数序列化</a>。</p>
<h3 id="查询参数-2"><a href="#查询参数-2" class="headerlink" title="查询参数"></a>查询参数</h3><p>查询参数是最常见的参数类型。它们出现在请求 URL 末尾的问号 ( <code>?</code>) 之后，不同的<code>name=value</code>对由与号 ( )分隔<code>&amp;</code>。查询参数可以是必需的，也可以是可选的。</p>
<pre><code>GET /pets/findByStatus?status=available
GET /notes?offset=100&amp;limit=50</code></pre><p>使用<code>in: query</code>来表示的查询参数：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">name</span><span class="token punctuation">:</span> offset
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
          <span class="token key atrule">description</span><span class="token punctuation">:</span> The number of items to skip before starting to collect the result set
        <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">name</span><span class="token punctuation">:</span> limit
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
          <span class="token key atrule">description</span><span class="token punctuation">:</span> The numbers of items to return<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>注意：</strong>要描述作为查询参数传递的 API 密钥，请使用<code>securitySchemes</code>和<code>security</code>代替。请参阅<a href="https://swagger.io/docs/specification/authentication/api-keys/" target="_blank" rel="noopener">API 密钥</a>。</p>
<p>查询参数可以是原始值、数组和对象。OpenAPI 3.0 提供了多种方法来序列化查询字符串中的对象和数组。</p>
<p>数组可以序列化为：</p>
<ul>
<li><code>form</code>–<code>/products?color=blue,green,red</code>或<code>/products?color=blue&amp;color=green</code>，取决于<code>explode</code>关键字</li>
<li><code>spaceDelimited</code>（与<code>collectionFormat: ssv</code>OpenAPI 2.0相同）——<code>/products?color=blue%20green%20red</code></li>
<li><code>pipeDelimited</code>（与<code>collectionFormat: pipes</code>OpenAPI 2.0相同）——<code>/products?color=blue|green|red</code></li>
</ul>
<p>对象可以序列化为：</p>
<ul>
<li><code>form</code>–<code>/points?color=R,100,G,200,B,150</code>或<code>/points?R=100&amp;G=200&amp;B=150</code>，取决于<code>explode</code>关键字</li>
<li><code>deepObject</code> —— <code>/points?color[R]=100&amp;color[G]=200&amp;color[B]=150</code></li>
</ul>
<p>序列化方法由<code>style</code>和<code>explode</code>关键字指定。要了解更多信息，请参阅<a href="https://swagger.io/docs/specification/serialization/" target="_blank" rel="noopener">参数序列化</a>。</p>
<h4 id="查询参数中的保留字符"><a href="#查询参数中的保留字符" class="headerlink" title="查询参数中的保留字符"></a>查询参数中的保留字符</h4><p><a href="https://tools.ietf.org/html/rfc3986#section-2.2" target="_blank" rel="noopener">RFC 3986</a>定义了一组<code>:/?#[]@!$&amp;'()*+,;=</code>用作 URI 组件分隔符的保留字符。当需要在查询参数值中按字面使用这些字符时，它们通常是百分比编码的。例如，<code>/</code>被编码为<code>%2F</code> (或 <code>%2f</code>)，因此参数值<code>quotes/h2g2.txt</code>将被发送为</p>
<pre><code>GET /file?path=quotes%2Fh2g2.txt</code></pre><p>如果您想要一个不是百分比编码的查询参数，请添加<code>allowReserved: true</code>到参数定义中：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">name</span><span class="token punctuation">:</span> path
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string
          <span class="token key atrule">allowReserved</span><span class="token punctuation">:</span> <span class="token boolean important">true    </span><span class="token comment" spellcheck="true"># &lt;-----</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在这种情况下，参数值将像这样发送：</p>
<pre><code>GET /file?path=quotes/h2g2.txt</code></pre><h3 id="标题参数"><a href="#标题参数" class="headerlink" title="标题参数"></a>标题参数</h3><p>API 调用可能需要使用 HTTP 请求发送自定义标头。OpenAPI 允许您将自定义请求标头定义为<code>in: header</code>参数。例如，假设调用<code>GET /ping</code>需要<code>X-Request-ID</code>标头：</p>
<pre><code>GET /ping HTTP/1.1
Host: example.com
X-Request-ID: 77e1c83b-7bb0-437b-bc50-a7a58e5660ac</code></pre><p>使用 OpenAPI 3.0，您可以按如下方式定义此操作：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/ping</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Checks if the server is alive
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> header
          <span class="token key atrule">name</span><span class="token punctuation">:</span> X<span class="token punctuation">-</span>Request<span class="token punctuation">-</span>ID
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string
            <span class="token key atrule">format</span><span class="token punctuation">:</span> uuid
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>以类似的方式，您可以定义<a href="https://swagger.io/docs/specification/describing-responses/#response-headers" target="_blank" rel="noopener">自定义响应标头</a>。标头参数可以是基元、数组和对象。数组和对象使用<code>simple</code>样式进行序列化。有关更多信息，请参阅<a href="https://swagger.io/docs/specification/serialization/" target="_blank" rel="noopener">参数序列化</a>。</p>
<p><strong>注意：</strong>头参数命名为<code>Accept</code>，<code>Content-Type</code>和<code>Authorization</code>是不允许的。要描述这些标头，请使用相应的 OpenAPI 关键字：</p>
<table>
<thead>
<tr>
<th>标题</th>
<th>OpenAPI 关键字</th>
<th>有关更多信息，请参阅…</th>
</tr>
</thead>
<tbody><tr>
<td><code>Content-Type</code></td>
<td>请求内容类型：<code>requestBody.content.&lt;media-type&gt;</code>  响应内容类型：<code>responses.&lt;code&gt;.content.&lt;media-type&gt;</code></td>
<td><a href="https://swagger.io/docs/specification/describing-request-body/" target="_blank" rel="noopener">描述请求正文</a>， <a href="https://swagger.io/docs/specification/describing-responses/" target="_blank" rel="noopener">描述响应</a>， <a href="https://swagger.io/docs/specification/mime-types" target="_blank" rel="noopener">媒体类型</a></td>
</tr>
<tr>
<td><code>Accept</code></td>
<td><code>responses.&lt;code&gt;.content.&lt;media-type&gt;</code></td>
<td><a href="https://swagger.io/docs/specification/describing-responses/" target="_blank" rel="noopener">描述响应</a>, <a href="https://swagger.io/docs/specification/mime-types" target="_blank" rel="noopener">媒体类型</a></td>
</tr>
<tr>
<td><code>Authorization</code></td>
<td><code>securitySchemes</code>, <code>security</code></td>
<td><a href="https://swagger.io/docs/specification/authentication/" target="_blank" rel="noopener">验证</a></td>
</tr>
</tbody></table>
<h3 id="Cookie-参数"><a href="#Cookie-参数" class="headerlink" title="Cookie 参数"></a>Cookie 参数</h3><p>操作还可以在<code>Cookie</code>标头中传递参数，如<code>Cookie: name=value</code>. 多个 cookie 参数在同一个标头中发送，用分号和空格分隔。</p>
<pre><code>GET /api/users
Host: example.com
Cookie: debug=0; csrftoken=BUSe35dohU3O1MZvDCUOJ</code></pre><p>使用<code>in: cookie</code>定义的cookie参数：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> cookie
          <span class="token key atrule">name</span><span class="token punctuation">:</span> debug
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
            <span class="token key atrule">enum</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
            <span class="token key atrule">default</span><span class="token punctuation">:</span> <span class="token number">0</span>
        <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> cookie
          <span class="token key atrule">name</span><span class="token punctuation">:</span> csrftoken
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Cookie 参数可以是原始值、数组和对象。数组和对象使用<code>form</code>样式进行序列化。有关更多信息，请参阅<a href="https://swagger.io/docs/specification/serialization/" target="_blank" rel="noopener">参数序列化</a>。</p>
<p><strong>注意：</strong>要定义 cookie 身份验证，请改用<a href="https://swagger.io/docs/specification/authentication/api-keys/" target="_blank" rel="noopener">API 密钥</a>。</p>
<h3 id="必需和可选参数"><a href="#必需和可选参数" class="headerlink" title="必需和可选参数"></a>必需和可选参数</h3><p>默认情况下，OpenAPI 将所有请求参数视为可选参数。您可以<code>required: true</code>根据需要添加以标记参数。请注意，路径参数必须有<code>required: true</code>，因为它们始终是必需的。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> path
          <span class="token key atrule">name</span><span class="token punctuation">:</span> userId
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true    </span><span class="token comment" spellcheck="true"># &lt;----------</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Numeric ID of the user to get.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="模式与内容"><a href="#模式与内容" class="headerlink" title="模式与内容"></a>模式与内容</h3><p>要描述参数内容，可以使用<code>schema</code>或<code>content</code>关键字。它们是互斥的，用于不同的场景。在大多数情况下，您会使用<strong><code>schema</code></strong>. 它允许您描述原始值，以及序列化为字符串的简单数组和对象。数组和对象参数的序列化方法由该参数中使用的关键字<code>style</code>和<code>explode</code>关键字定义。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">parameters</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> query
    <span class="token key atrule">name</span><span class="token punctuation">:</span> color
    <span class="token key atrule">schema</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> array
      <span class="token key atrule">items</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
    <span class="token comment" spellcheck="true"># Serialize as color=blue,black,brown (default)</span>
    <span class="token key atrule">style</span><span class="token punctuation">:</span> form
    <span class="token key atrule">explode</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong><code>content</code></strong>用于<code>style</code>和未涵盖的复杂序列化场景<code>explode</code>。例如，如果您需要在查询字符串中发送一个 JSON 字符串，如下所示：</p>
<pre><code>filter={"type":"t-shirt","color":"blue"}</code></pre><p>在这种情况下，您需要将参数包装<code>schema</code>成<code>content/&lt;media-type&gt;</code>如下所示。在<code>schema</code>定义了参数的数据结构，和媒体类型（在本例- <code>application/json</code>）用作到描述串行化格式的外部规范的参考。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">parameters</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> query
    <span class="token key atrule">name</span><span class="token punctuation">:</span> filter

    <span class="token comment" spellcheck="true"># Wrap 'schema' into 'content.&lt;media-type>'</span>
    <span class="token key atrule">content</span><span class="token punctuation">:</span>
      <span class="token key atrule">application/json</span><span class="token punctuation">:</span>  <span class="token comment" spellcheck="true"># &lt;---- media type indicates how to serialize / deserialize the parameter content</span>
        <span class="token key atrule">schema</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> object
          <span class="token key atrule">properties</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span>
              <span class="token key atrule">type</span><span class="token punctuation">:</span> string
            <span class="token key atrule">color</span><span class="token punctuation">:</span>
              <span class="token key atrule">type</span><span class="token punctuation">:</span> string<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>Swagger UI 和 Swagger Editor 用户注意事项：</strong><code>content</code> Swagger UI 3.23.7+ 和 Swagger Editor 3.6.34+ 支持参数。</p>
<h3 id="默认参数值"><a href="#默认参数值" class="headerlink" title="默认参数值"></a>默认参数值</h3><p>使用<code>default</code>参数架构中的关键字来指定可选参数的默认值。如果客户端未在请求中提供参数值，则默认值是服务器使用的值。值类型必须与参数的数据类型相同。一个典型的例子是分页参数，例如<code>offset</code>和<code>limit</code>：</p>
<pre><code>GET /users
GET /users?offset=30&amp;limit=10</code></pre><p>假设<code>offset</code>默认值为 0，<code>limit</code>默认值为 20，范围从 0 到 100，您可以将这些参数定义为：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">name</span><span class="token punctuation">:</span> offset
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
            <span class="token key atrule">minimum</span><span class="token punctuation">:</span> <span class="token number">0</span>
            <span class="token key atrule">default</span><span class="token punctuation">:</span> <span class="token number">0</span>
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> The number of items to skip before starting to collect the result set.
        <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">name</span><span class="token punctuation">:</span> limit
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
            <span class="token key atrule">minimum</span><span class="token punctuation">:</span> <span class="token number">1</span>
            <span class="token key atrule">maximum</span><span class="token punctuation">:</span> <span class="token number">100</span>
            <span class="token key atrule">default</span><span class="token punctuation">:</span> <span class="token number">20</span>
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> The number of items to return.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="常见错误"><a href="#常见错误" class="headerlink" title="常见错误"></a>常见错误</h4><p>使用<code>default</code>关键字时有两个常见错误：</p>
<ul>
<li>使用<code>default</code>与<code>required</code>参数或特性，例如，与路径参数。这没有意义——如果需要一个值，客户端必须始终发送它，并且从不使用默认值。</li>
<li>使用<code>default</code>指定的样本值。这不是预期用途，<code>default</code>并且可能导致某些 Swagger 工具出现意外行为。为此，请使用<code>example</code>or<code>examples</code>关键字。请参阅<a href="https://swagger.io/docs/specification/adding-examples/" target="_blank" rel="noopener">添加示例</a>。</li>
</ul>
<h3 id="枚举参数"><a href="#枚举参数" class="headerlink" title="枚举参数"></a>枚举参数</h3><p>您可以通过将<code>enum</code>参数添加到参数的<code>schema</code>. 枚举值必须与参数数据类型具有相同的类型。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">name</span><span class="token punctuation">:</span> status
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string
            <span class="token key atrule">enum</span><span class="token punctuation">:</span>
              <span class="token punctuation">-</span> available
              <span class="token punctuation">-</span> pending
              <span class="token punctuation">-</span> sold<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>更多信息：<a href="https://swagger.io/docs/specification/enums" target="_blank" rel="noopener">定义一个 Enum</a>。</p>
<h3 id="常数参数"><a href="#常数参数" class="headerlink" title="常数参数"></a>常数参数</h3><p>您可以将常量参数定义为仅具有一个可能值的必需参数：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">name</span><span class="token punctuation">:</span> rel_date
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string
            <span class="token key atrule">enum</span><span class="token punctuation">:</span>
              <span class="token punctuation">-</span> now<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>该<code>enum</code>属性指定可能的值。在此示例中，只能使用一个值，这将是 Swagger UI 中可供用户选择的唯一值。</p>
<p><strong>注意：</strong>常量参数与<a href="https://swagger.io/docs/specification/describing-parameters/#default" target="_blank" rel="noopener">默认参数值不同</a>。一个常量参数总是由客户端发送，而如果参数不是由客户端发送，则默认值是服务器使用的值。</p>
<h3 id="空值和可空参数"><a href="#空值和可空参数" class="headerlink" title="空值和可空参数"></a>空值和可空参数</h3><p>查询字符串参数可能只有名称而没有值，如下所示：</p>
<pre><code>GET /foo?metadata</code></pre><p>使用<code>allowEmptyValue</code>来形容这样的参数：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">name</span><span class="token punctuation">:</span> metadata
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> boolean
          <span class="token key atrule">allowEmptyValue</span><span class="token punctuation">:</span> <span class="token boolean important">true  </span><span class="token comment" spellcheck="true"># &lt;-----</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>OpenAPI 3.0 还支持<code>nullable</code>in 模式，允许操作参数具有<code>null</code>值。例如，以下模式对应<code>int?</code>于 C# 和<code>java.lang.Integer</code>Java：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
            <span class="token key atrule">format</span><span class="token punctuation">:</span> int32
            <span class="token key atrule">nullable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>注意：</strong> <code>nullable</code>与可选参数或空值参数不同。<code>nullable</code>表示参数值可以是<code>null</code>。具体实现可能会选择将一个不存在或空值的参数映射到<code>null</code>，但严格来说这些不是一回事。</p>
<h3 id="参数示例"><a href="#参数示例" class="headerlink" title="参数示例"></a>参数示例</h3><p>您可以为参数指定一个<code>example</code>或多个<code>examples</code>。示例值应与参数架构匹配。单例：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">name</span><span class="token punctuation">:</span> limit
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
            <span class="token key atrule">minimum</span><span class="token punctuation">:</span> <span class="token number">1</span>
          <span class="token key atrule">example</span><span class="token punctuation">:</span> <span class="token number">20</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>多个命名示例：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">name</span><span class="token punctuation">:</span> ids
          <span class="token key atrule">description</span><span class="token punctuation">:</span> One or more IDs
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> array
            <span class="token key atrule">items</span><span class="token punctuation">:</span>
              <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
          <span class="token key atrule">style</span><span class="token punctuation">:</span> form
          <span class="token key atrule">explode</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
          <span class="token key atrule">examples</span><span class="token punctuation">:</span>
            <span class="token key atrule">oneId</span><span class="token punctuation">:</span>
              <span class="token key atrule">summary</span><span class="token punctuation">:</span> Example of a single ID
              <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span>   <span class="token comment" spellcheck="true"># ?ids=5</span>
            <span class="token key atrule">multipleIds</span><span class="token punctuation">:</span>
              <span class="token key atrule">summary</span><span class="token punctuation">:</span> Example of multiple IDs
              <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span>   <span class="token comment" spellcheck="true"># ?ids=1,5,7</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>有关详细信息，请参阅<a href="https://swagger.io/docs/specification/adding-examples/" target="_blank" rel="noopener">添加示例</a>。</p>
<h3 id="弃用的参数"><a href="#弃用的参数" class="headerlink" title="弃用的参数"></a>弃用的参数</h3><p>用于<code>deprecated: true</code>将参数标记为已弃用。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">name</span><span class="token punctuation">:</span> format
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string
            <span class="token key atrule">enum</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>json<span class="token punctuation">,</span> xml<span class="token punctuation">,</span> yaml<span class="token punctuation">]</span>
          <span class="token key atrule">deprecated</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Deprecated<span class="token punctuation">,</span> use the appropriate `Accept` header instead.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="常用参数"><a href="#常用参数" class="headerlink" title="常用参数"></a>常用参数</h3><h4 id="路径所有方法的通用参数"><a href="#路径所有方法的通用参数" class="headerlink" title="路径所有方法的通用参数"></a>路径所有方法的通用参数</h4><p>路径的所有操作共享的参数可以在路径级别而不是操作级别定义。路径级参数由该路径的所有操作继承。一个典型的用例是操作通过路径参数访问的资源的 GET/PUT/PATCH/DELETE 操作。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  /user/<span class="token punctuation">{</span>id<span class="token punctuation">}</span><span class="token punctuation">:</span>
    <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> path
        <span class="token key atrule">name</span><span class="token punctuation">:</span> id
        <span class="token key atrule">schema</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
        <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">description</span><span class="token punctuation">:</span> The user ID
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Gets a user by ID
      <span class="token punctuation">...</span>
    <span class="token key atrule">patch</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Updates an existing user with the specified ID
      <span class="token punctuation">...</span>
    <span class="token key atrule">delete</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Deletes the user with the specified ID
      <span class="token punctuation">...</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在操作级别定义的任何额外参数都与路径级别参数一起使用：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  /users/<span class="token punctuation">{</span>id<span class="token punctuation">}</span><span class="token punctuation">:</span>
    <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> path
        <span class="token key atrule">name</span><span class="token punctuation">:</span> id
        <span class="token key atrule">schema</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
        <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">description</span><span class="token punctuation">:</span> The user ID.
    <span class="token comment" spellcheck="true"># GET/users/{id}?metadata=true</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Gets a user by ID
      <span class="token comment" spellcheck="true"># Note we only define the query parameter, because the {id} is defined at the path level.</span>
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">name</span><span class="token punctuation">:</span> metadata
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> boolean
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> If true<span class="token punctuation">,</span> the endpoint returns only the user metadata.
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> OK<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>特定的路径级参数可以在操作级被覆盖，但不能被删除。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  /users/<span class="token punctuation">{</span>id<span class="token punctuation">}</span><span class="token punctuation">:</span>
    <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> path
        <span class="token key atrule">name</span><span class="token punctuation">:</span> id
        <span class="token key atrule">schema</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
        <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">description</span><span class="token punctuation">:</span> The user ID.
    <span class="token comment" spellcheck="true"># DELETE /users/{id} - uses a single ID.</span>
    <span class="token comment" spellcheck="true"># Reuses the {id} parameter definition from the path level.</span>
    <span class="token key atrule">delete</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Deletes the user with the specified ID.
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'204'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> User was deleted.
    <span class="token comment" spellcheck="true"># GET /users/id1,id2,id3 - uses one or more user IDs.</span>
    <span class="token comment" spellcheck="true"># Overrides the path-level {id} parameter.</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Gets one or more users by ID.
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> path
          <span class="token key atrule">name</span><span class="token punctuation">:</span> id
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> A comma<span class="token punctuation">-</span>separated list of user IDs.
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> array
            <span class="token key atrule">items</span><span class="token punctuation">:</span>
              <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
            <span class="token key atrule">minItems</span><span class="token punctuation">:</span> <span class="token number">1</span>
          <span class="token key atrule">explode</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
          <span class="token key atrule">style</span><span class="token punctuation">:</span> simple
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> OK<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="各种路径的通用参数"><a href="#各种路径的通用参数" class="headerlink" title="各种路径的通用参数"></a>各种路径的通用参数</h4><p>不同的API路径可能有共同的参数，比如分页参数。您可以在全局<code>components</code>部分的参数下定义通用参数，并通过<code>$ref</code>.</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
    <span class="token key atrule">offsetParam</span><span class="token punctuation">:</span>  <span class="token comment" spellcheck="true"># &lt;-- Arbitrary name for the definition that will be used to refer to it.</span>
                  <span class="token comment" spellcheck="true"># Not necessarily the same as the parameter name.</span>
      <span class="token key atrule">in</span><span class="token punctuation">:</span> query
      <span class="token key atrule">name</span><span class="token punctuation">:</span> offset
      <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
      <span class="token key atrule">schema</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
        <span class="token key atrule">minimum</span><span class="token punctuation">:</span> <span class="token number">0</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> The number of items to skip before starting to collect the result set.
    <span class="token key atrule">limitParam</span><span class="token punctuation">:</span>
      <span class="token key atrule">in</span><span class="token punctuation">:</span> query
      <span class="token key atrule">name</span><span class="token punctuation">:</span> limit
      <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
      <span class="token key atrule">schema</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
        <span class="token key atrule">minimum</span><span class="token punctuation">:</span> <span class="token number">1</span>
        <span class="token key atrule">maximum</span><span class="token punctuation">:</span> <span class="token number">50</span>
        <span class="token key atrule">default</span><span class="token punctuation">:</span> <span class="token number">20</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> The numbers of items to return.
<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/users</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Gets a list of users.
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/parameters/offsetParam'</span>
        <span class="token punctuation">-</span> <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/parameters/limitParam'</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> OK
  <span class="token key atrule">/teams</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Gets a list of teams.
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/parameters/offsetParam'</span>
        <span class="token punctuation">-</span> <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/parameters/limitParam'</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> OK<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>请注意，中定义的参数<code>components</code>不是应用于所有操作的参数——它们只是可以轻松重用的全局定义。</p>
<h3 id="参数依赖"><a href="#参数依赖" class="headerlink" title="参数依赖"></a>参数依赖</h3><p>OpenAPI 3.0 不支持参数依赖和互斥参数。<a href="https://github.com/OAI/OpenAPI-Specification/issues/256" target="_blank" rel="noopener">https://github.com/OAI/OpenAPI-Specification/issues/256 上</a>有一个开放功能请求。您可以做的是记录参数描述中的限制并定义 400 Bad Request 响应中的逻辑。例如，考虑<code>/report</code>接受相对日期范围 ( <code>rdate</code>) 或精确范围 ( <code>start_date</code>+ <code>end_date</code>)的端点：</p>
<pre><code>GET /report?rdate=Today
GET /report?start_date=2016-11-15&amp;end_date=2016-11-20</code></pre><p>您可以按如下方式描述此端点：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/report</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> rdate
          <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string
          <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token punctuation">></span><span class="token scalar string">
             A relative date range for the report, such as `Today` or `LastWeek`.
             For an exact range, use `start_date` and `end_date` instead.</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> start_date
          <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string
            <span class="token key atrule">format</span><span class="token punctuation">:</span> date
          <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token punctuation">></span><span class="token scalar string">
            The start date for the report. Must be used together with `end_date`.
            This parameter is incompatible with `rdate`.</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> end_date
          <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string
            <span class="token key atrule">format</span><span class="token punctuation">:</span> date
          <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token punctuation">></span><span class="token scalar string">
            The end date for the report. Must be used together with `start_date`.
            This parameter is incompatible with `rdate`.</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'400'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Either `rdate` or `start_date`+`end_date` are required.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="参数序列化"><a href="#参数序列化" class="headerlink" title="参数序列化"></a>参数序列化</h2><p>序列化意味着将数据结构或对象状态转换为以后可以传输和重构的格式。OpenAPI 3.0 支持<a href="https://swagger.io/docs/specification/describing-parameters/" target="_blank" rel="noopener">操作参数</a>（路径、查询、标头和 cookie）中的数组和对象，并允许您指定这些参数的序列化方式。序列化方法由<strong><code>style</code></strong>和<strong><code>explode</code></strong>关键字定义：</p>
<ul>
<li><code>style</code>定义如何分隔多个值。可能的样式取决于参数位置 - <a href="https://swagger.io/docs/specification/serialization/#path" target="_blank" rel="noopener">path</a>、<a href="https://swagger.io/docs/specification/serialization/#query" target="_blank" rel="noopener">query</a>、<a href="https://swagger.io/docs/specification/serialization/#header" target="_blank" rel="noopener">header</a>或<a href="https://swagger.io/docs/specification/serialization/#cookie" target="_blank" rel="noopener">cookie</a>。</li>
<li><code>explode</code> (true/false) 指定数组和对象是否应为每个数组项或对象属性生成单独的参数。</li>
</ul>
<p>OpenAPI 序列化规则基于<a href="https://tools.ietf.org/html/rfc6570" target="_blank" rel="noopener">RFC 6570</a>定义的 URI 模板模式的子集。工具实现者可以使用现有的 URI 模板库来处理序列化，<a href="https://swagger.io/docs/specification/serialization/#uri-templates" target="_blank" rel="noopener">如下所述</a>。</p>
<h3 id="路径参数-3"><a href="#路径参数-3" class="headerlink" title="路径参数"></a>路径参数</h3><p>路径参数支持以下<code>style</code>值：</p>
<ul>
<li><strong>简单</strong>-（默认）逗号分隔值。对应于<code>{param_name}</code>URI 模板。</li>
<li><strong>label</strong> – 点前缀值，也称为标签扩展。对应于<code>{.param_name}</code>URI 模板。</li>
<li><strong>矩阵</strong>– 以分号为前缀的值，也称为路径样式扩展。对应于<code>{;param_name}</code>URI 模板。</li>
</ul>
<p>默认的序列化方法是<code>style: simple</code>and <code>explode: false</code>。给定 path <code>/users/{id}</code>， path 参数<code>id</code>序列化如下：</p>
<table>
<thead>
<tr>
<th>风格</th>
<th>爆炸</th>
<th><a href="https://swagger.io/docs/specification/serialization/#uri-templates" target="_blank" rel="noopener">URI模板</a></th>
<th>原始值 id = 5</th>
<th>数组 ID = [3, 4, 5]</th>
<th>对象 id = {“role”: “admin”, “firstName”: “Alex”}</th>
</tr>
</thead>
<tbody><tr>
<td>简单*</td>
<td>假*</td>
<td>/用户/{id}</td>
<td>/用户/5</td>
<td>/用户/3,4,5</td>
<td>/用户/角色，管理员，名字，亚历克斯</td>
</tr>
<tr>
<td>简单的</td>
<td>真的</td>
<td>/users/{id*}</td>
<td>/用户/5</td>
<td>/用户/3,4,5</td>
<td>/users/role=admin,firstName=Alex</td>
</tr>
<tr>
<td>标签</td>
<td>错误的</td>
<td>/users/{.id}</td>
<td>/用户/.5</td>
<td>/用户/.3,4,5</td>
<td>/users/.role,admin,firstName,Alex</td>
</tr>
<tr>
<td>标签</td>
<td>真的</td>
<td>/users/{.id*}</td>
<td>/用户/.5</td>
<td>/用户/.3.4.5</td>
<td>/users/.role=admin.firstName=亚历克斯</td>
</tr>
<tr>
<td>矩阵</td>
<td>错误的</td>
<td>/users/{;id}</td>
<td>/users/;id=5</td>
<td>/users/;id=3,4,5</td>
<td>/users/;id=role,admin,firstName,Alex</td>
</tr>
<tr>
<td>矩阵</td>
<td>真的</td>
<td>/users/{;id*}</td>
<td>/users/;id=5</td>
<td>/users/;id=3;id=4;id=5</td>
<td>/users/;role=admin;firstName=Alex</td>
</tr>
</tbody></table>
<p>*默认序列化方法</p>
<p>的<code>label</code>和<code>matrix</code>样式有时与局部路径参数，如所用<code>/users{id}</code>的，因为参数值获得前缀。</p>
<h3 id="查询参数-3"><a href="#查询参数-3" class="headerlink" title="查询参数"></a>查询参数</h3><p>查询参数支持以下<code>style</code>值：</p>
<ul>
<li><strong>form</strong> –（默认）与号分隔的值，也称为表单样式的查询扩展。对应于<code>{?param_name}</code>URI 模板。</li>
<li><strong>spaceDelimited</strong> – 以空格分隔的数组值。与<code>collectionFormat: ssv</code>OpenAPI 2.0相同。仅对非分解数组 ( <code>explode: false</code>) 有效，也就是说，如果数组是<em>单个参数</em>，则空格分隔数组值，如<code>arr=a b c</code>。</li>
<li><strong>pipeDelimited</strong> – 管道分隔的数组值。与<code>collectionFormat: pipes</code>OpenAPI 2.0相同。仅对非分解数组 ( <code>explode: false</code>) 有效，也就是说，如果数组是<em>单个参数</em>，则管道将数组值分开，如<code>arr=a|b|c</code>.</li>
<li><strong>deepObject</strong> – 一种使用表单参数渲染嵌套对象的简单方法（仅适用于对象）。</li>
</ul>
<p>默认的序列化方法是<code>style: form</code>and <code>explode: true</code>。这对应 <code>collectionFormat: multi</code> 于 OpenAPI 2.0。给定<code>/users</code>带有查询参数的路径<code>id</code>，查询字符串序列化如下：</p>
<table>
<thead>
<tr>
<th>风格</th>
<th>爆炸</th>
<th><a href="https://swagger.io/docs/specification/serialization/#uri-templates" target="_blank" rel="noopener">URI模板</a></th>
<th>原始值 id = 5</th>
<th>数组 ID = [3, 4, 5]</th>
<th>对象 id = {“role”: “admin”, “firstName”: “Alex”}</th>
</tr>
</thead>
<tbody><tr>
<td>表格*</td>
<td>真*</td>
<td>/用户{?id*}</td>
<td>/users?id=5</td>
<td>/users?id=3&amp;id=4&amp;id=5</td>
<td>/users?role=admin&amp;firstName=Alex</td>
</tr>
<tr>
<td>形式</td>
<td>错误的</td>
<td>/用户{?id}</td>
<td>/users?id=5</td>
<td>/users?id=3,4,5</td>
<td>/users?id=role,admin,firstName,Alex</td>
</tr>
<tr>
<td>空格分隔</td>
<td>真的</td>
<td>/用户{?id*}</td>
<td>不适用</td>
<td>/users?id=3&amp;id=4&amp;id=5</td>
<td>不适用</td>
</tr>
<tr>
<td>空格分隔</td>
<td>错误的</td>
<td>不适用</td>
<td>不适用</td>
<td>/users?id=3%204%205</td>
<td>不适用</td>
</tr>
<tr>
<td>管道分隔</td>
<td>真的</td>
<td>/用户{?id*}</td>
<td>不适用</td>
<td>/users?id=3&amp;id=4&amp;id=5</td>
<td>不适用</td>
</tr>
<tr>
<td>管道分隔</td>
<td>错误的</td>
<td>不适用</td>
<td>不适用</td>
<td>/users?id=3|4|5</td>
<td>不适用</td>
</tr>
<tr>
<td>深对象</td>
<td>真的</td>
<td>不适用</td>
<td>不适用</td>
<td>不适用</td>
<td>/users?id[role]=admin&amp;id[firstName]=Alex</td>
</tr>
</tbody></table>
<p>*默认序列化方法</p>
<p>此外，该<code>allowReserved</code>关键字指定<code>:/?#[]@!$&amp;'()*+,;=</code>参数值中的保留字符是允许按原样发送，还是应该进行百分比编码。默认情况下，<code>allowReserved</code>is<code>false</code>和保留字符是百分比编码的。例如，<code>/</code>被编码为<code>%2F</code>(或<code>%2f</code>)，因此参数值<code>quotes/h2g2.txt</code>将被发送为<code>quotes%2Fh2g2.txt</code></p>
<h3 id="标题参数-1"><a href="#标题参数-1" class="headerlink" title="标题参数"></a>标题参数</h3><p>标题参数始终使用<code>simple</code>样式，即逗号分隔值。这对应于<code>{param_name}</code>URI 模板。可选<code>explode</code>关键字控制对象序列化。给定名为 的请求标头<code>X-MyHeader</code>，标头值序列化如下：</p>
<table>
<thead>
<tr>
<th>风格</th>
<th>爆炸</th>
<th><a href="https://swagger.io/docs/specification/serialization/#uri-templates" target="_blank" rel="noopener">URI模板</a></th>
<th>原始值 X-MyHeader = 5</th>
<th>数组 X-MyHeader = [3, 4, 5]</th>
<th>Object X-MyHeader = {“role”: “admin”, “firstName”: “Alex”}</th>
</tr>
</thead>
<tbody><tr>
<td>简单*</td>
<td>假*</td>
<td>{ID}</td>
<td>X-MyHeader：5</td>
<td>X-MyHeader：3,4,5</td>
<td>X-MyHeader：角色、管理员、名字、亚历克斯</td>
</tr>
<tr>
<td>简单的</td>
<td>真的</td>
<td>{ID*}</td>
<td>X-MyHeader：5</td>
<td>X-MyHeader：3,4,5</td>
<td>X-MyHeader: role=admin,firstName=Alex</td>
</tr>
</tbody></table>
<p>*默认序列化方法</p>
<h3 id="Cookie-参数-1"><a href="#Cookie-参数-1" class="headerlink" title="Cookie 参数"></a>Cookie 参数</h3><p>Cookie 参数始终使用该<code>form</code>样式。可选<code>explode</code>关键字控制数组和对象序列化。给定名为 的 cookie <code>id</code>，cookie 值按如下方式序列化：</p>
<table>
<thead>
<tr>
<th>风格</th>
<th>爆炸</th>
<th><a href="https://swagger.io/docs/specification/serialization/#uri-templates" target="_blank" rel="noopener">URI模板</a></th>
<th>原始值 id = 5</th>
<th>数组 ID = [3, 4, 5]</th>
<th>对象 id = {“role”: “admin”, “firstName”: “Alex”}</th>
</tr>
</thead>
<tbody><tr>
<td>表格*</td>
<td>真*</td>
<td></td>
<td>饼干：id=5</td>
<td></td>
<td></td>
</tr>
<tr>
<td>形式</td>
<td>错误的</td>
<td>id={id}</td>
<td>饼干：id=5</td>
<td>曲奇：id=3,4,5</td>
<td>Cookie: id=role,admin,firstName,Alex</td>
</tr>
</tbody></table>
<p>*默认序列化方法</p>
<h3 id="序列化和-RFC-6570"><a href="#序列化和-RFC-6570" class="headerlink" title="序列化和 RFC 6570"></a>序列化和 RFC 6570</h3><p>OpenAPI 序列化规则基于<a href="https://tools.ietf.org/html/rfc6570" target="_blank" rel="noopener">RFC 6570</a>定义的 URI 模板子集。工具实现者可以使用现有的 URI 模板库来处理序列化。您将需要根据路径和参数定义构建 URI 模板。下表显示了 OpenAPI 关键字如何映射到 URI 模板修饰符。</p>
<table>
<thead>
<tr>
<th>关键词</th>
<th>URI 模板修饰符</th>
</tr>
</thead>
<tbody><tr>
<td><code>style: simple</code></td>
<td>没有任何</td>
</tr>
<tr>
<td><code>style: label</code></td>
<td><code>.</code> 字首</td>
</tr>
<tr>
<td><code>style: matrix</code></td>
<td><code>;</code> 字首</td>
</tr>
<tr>
<td><code>style: form</code></td>
<td><code>?</code>或<code>&amp;</code>前缀（取决于查询字符串中的参数位置）</td>
</tr>
<tr>
<td><code>style: pipeDelimited</code></td>
<td><code>?</code>或<code>&amp;</code>前缀（取决于查询字符串中的参数位置）——但使用管道`</td>
</tr>
<tr>
<td><code>style: spaceDelimited</code></td>
<td><code>?</code>或<code>&amp;</code>前缀（取决于查询字符串中的参数位置）——但使用空格而不是逗号<code>,</code>来连接数组值</td>
</tr>
<tr>
<td><code>explode: false</code></td>
<td>没有任何</td>
</tr>
<tr>
<td><code>explode: true</code></td>
<td><code>*</code> 后缀</td>
</tr>
<tr>
<td><code>allowReserved: false</code></td>
<td>没有任何</td>
</tr>
<tr>
<td><code>allowReserved: true</code></td>
<td><code>+</code> 字首</td>
</tr>
</tbody></table>
<p>例如，考虑<code>/users{id}</code>带有查询参数的路径<code>metadata</code>，定义如下：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token comment" spellcheck="true"># /users;id=3;id=4?metadata=true</span>
  /users<span class="token punctuation">{</span>id<span class="token punctuation">}</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> path
          <span class="token key atrule">name</span><span class="token punctuation">:</span> id
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> array
            <span class="token key atrule">items</span><span class="token punctuation">:</span>
              <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
            <span class="token key atrule">minItems</span><span class="token punctuation">:</span> <span class="token number">1</span>
          <span class="token key atrule">style</span><span class="token punctuation">:</span> matrix
          <span class="token key atrule">explode</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">name</span><span class="token punctuation">:</span> metadata
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> boolean
          <span class="token comment" spellcheck="true"># Using the default serialization for query parameters:</span>
          <span class="token comment" spellcheck="true"># style=form, explode=false, allowReserved=false</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> A list of users<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>path 参数<code>id</code>使用<code>matrix</code>带有<code>explode</code>修饰符的样式，它对应于<code>{;id*}</code>模板。查询参数<code>metadata</code>使用默认<code>form</code>样式，与<code>{?metadata}</code>模板相对应。完整的 URI 模板如下所示：</p>
<pre><code>/users{;id*}{?metadata}</code></pre><p>然后，客户端应用程序可以使用 URI 模板库根据此模板和特定参数值生成请求 URL。</p>
<h3 id="其他序列化方法"><a href="#其他序列化方法" class="headerlink" title="其他序列化方法"></a>其他序列化方法</h3><p><code>style</code>并<code>explode</code>涵盖最常见的序列化方法，但不是全部。对于更复杂的场景（例如，查询字符串中的 JSON 格式的对象），您可以使用<code>content</code>关键字并指定定义序列化格式的媒体类型。有关更多信息，请参阅<a href="https://swagger.io/docs/specification/describing-parameters/#schema-vs-content" target="_blank" rel="noopener">架构与内容</a>。</p>
<h2 id="描述请求正文"><a href="#描述请求正文" class="headerlink" title="描述请求正文"></a>描述请求正文</h2><p>请求正文通常与“创建”和“更新”操作（POST、PUT、PATCH）一起使用。例如，当使用 POST 或 PUT 创建资源时，请求正文通常包含要创建的资源的表示。OpenAPI 3.0 提供了<code>requestBody</code>描述请求体的关键字。</p>
<h3 id="与-OpenAPI-2-0-的差异"><a href="#与-OpenAPI-2-0-的差异" class="headerlink" title="与 OpenAPI 2.0 的差异"></a>与 OpenAPI 2.0 的差异</h3><p>如果您之前使用过 OpenAPI 2.0，以下是帮助您开始使用 OpenAPI 3.0 的更改摘要：</p>
<ul>
<li>正文和表单参数替换为<code>requestBody</code>.</li>
<li>操作现在可以使用表单数据和其他媒体类型，例如 JSON。</li>
<li>该<code>consumes</code>数组被替换为将<code>requestBody.content</code>媒体类型映射到其模式的映射。</li>
<li>架构可能因媒体类型而异。</li>
<li><code>anyOf</code>并且<code>oneOf</code>可用于指定替代模式。</li>
<li>表单数据现在可以包含对象，您可以为对象和数组指定序列化策略。</li>
<li>GET、DELETE 和 HEAD 不再允许具有请求正文，因为它没有按照<a href="https://tools.ietf.org/html/rfc7231#section-4.3" target="_blank" rel="noopener">RFC 7231</a>定义语义。</li>
</ul>
<h3 id="requestBody、内容和媒体类型"><a href="#requestBody、内容和媒体类型" class="headerlink" title="requestBody、内容和媒体类型"></a>requestBody、内容和媒体类型</h3><p>与 OpenAPI 2.0 使用<code>body</code>和<code>formData</code>参数定义请求正文不同，OpenAPI 3.0 使用<code>requestBody</code>关键字来区分负载和<a href="https://swagger.io/docs/specification/describing-parameters/" target="_blank" rel="noopener">参数</a>（例如查询字符串）。的<code>requestBody</code>是，它可以让你消耗不同的媒体类型，如JSON，XML，表单数据，纯文本，和其他人，并使用不同的媒体类型不同的架构更加灵活。<code>requestBody</code>由<code>content</code>对象、可选的<a href="https://commonmark.org/help/" target="_blank" rel="noopener">Markdown</a>格式<code>description</code>和可选的<code>required</code>标志（<code>false</code>默认情况下）组成。<code>content</code>列出操作使用的媒体类型（例如<code>application/json</code>）并<code>schema</code>为每个媒体类型指定。<strong>默认情况下，请求正文是可选的</strong>. 要根据需要标记正文，请使用<code>required: true</code>。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/pets</span><span class="token punctuation">:</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Add a new pet
      <span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        <span class="token key atrule">description</span><span class="token punctuation">:</span> Optional description in <span class="token important">*Markdown</span>*
        <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">content</span><span class="token punctuation">:</span>
          <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/Pet'</span>
          <span class="token key atrule">application/xml</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/Pet'</span>
          <span class="token key atrule">application/x-www-form-urlencoded</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/PetForm'</span>
          <span class="token key atrule">text/plain</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token key atrule">type</span><span class="token punctuation">:</span> string
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'201'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Created
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>content</code>允许通配符媒体类型。例如，<code>image/*</code>代表所有图像类型；<code>*/*</code> 代表所有类型并且在功能上等同于<code>application/octet-stream</code>. 在解释规范时，特定媒体类型优先于通配符媒体类型，例如，<code>image/png</code>&gt; <code>image/*</code>&gt; <code>*/*</code>。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/avatar</span><span class="token punctuation">:</span>
    <span class="token key atrule">put</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Upload an avatar
      <span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        <span class="token key atrule">content</span><span class="token punctuation">:</span>
          <span class="token key atrule">image/*</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># Can be image/png, image/svg, image/gif, etc.</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token key atrule">type</span><span class="token punctuation">:</span> string
              <span class="token key atrule">format</span><span class="token punctuation">:</span> binary<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="anyOf，oneOf"><a href="#anyOf，oneOf" class="headerlink" title="anyOf，oneOf"></a>anyOf，oneOf</h3><p>OpenAPI 3.0 支持<code>anyOf</code>和<code>oneOf</code>，因此您可以为请求正文指定替代模式：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        <span class="token key atrule">description</span><span class="token punctuation">:</span> A JSON object containing pet information
        <span class="token key atrule">content</span><span class="token punctuation">:</span>
          <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token key atrule">oneOf</span><span class="token punctuation">:</span>
                <span class="token punctuation">-</span> <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/Cat'</span>
                <span class="token punctuation">-</span> <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/Dog'</span>
                <span class="token punctuation">-</span> <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/Hamster'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="上传文件"><a href="#上传文件" class="headerlink" title="上传文件"></a>上传文件</h3><p>要了解如何描述文件上传，请参阅<a href="https://swagger.io/docs/specification/describing-request-body/file-upload/" target="_blank" rel="noopener">文件上传</a>和<a href="https://swagger.io/docs/specification/describing-request-body/multipart-requests/" target="_blank" rel="noopener">分段请求</a>。</p>
<h3 id="请求正文示例"><a href="#请求正文示例" class="headerlink" title="请求正文示例"></a>请求正文示例</h3><p>请求正文可以有一个<code>example</code>或多个<code>examples</code>. <code>example</code>和<code>examples</code>是<code>requestBody.content.&lt;media-type&gt;</code>对象的属性。如果提供，这些示例将覆盖架构提供的示例。这很方便，例如，如果请求和响应使用相同的架构，但您想要不同的示例。<code>example</code>允许单个内联示例：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        <span class="token key atrule">content</span><span class="token punctuation">:</span>
          <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/Pet'</span>
            <span class="token key atrule">example</span><span class="token punctuation">:</span>
              <span class="token key atrule">name</span><span class="token punctuation">:</span> Fluffy
              <span class="token key atrule">petType</span><span class="token punctuation">:</span> dog<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>所述<code>examples</code>（多个）都更灵活-你可以有一个内联例如，<code>$ref</code>参考，或指向包含所述有效负载例如一个外部URL。每个示例也可以有可选的<code>summary</code>和<code>description</code>用于文档目的。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        <span class="token key atrule">content</span><span class="token punctuation">:</span>
          <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/Pet'</span>
            <span class="token key atrule">examples</span><span class="token punctuation">:</span>
              <span class="token key atrule">dog</span><span class="token punctuation">:</span>  <span class="token comment" spellcheck="true"># &lt;--- example name</span>
                <span class="token key atrule">summary</span><span class="token punctuation">:</span> An example of a dog
                <span class="token key atrule">value</span><span class="token punctuation">:</span>
                  <span class="token comment" spellcheck="true"># vv Actual payload goes here vv</span>
                  <span class="token key atrule">name</span><span class="token punctuation">:</span> Fluffy
                  <span class="token key atrule">petType</span><span class="token punctuation">:</span> dog
              <span class="token key atrule">cat</span><span class="token punctuation">:</span>  <span class="token comment" spellcheck="true"># &lt;--- example name</span>
                <span class="token key atrule">summary</span><span class="token punctuation">:</span> An example of a cat
                <span class="token key atrule">externalValue</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//api.example.com/examples/cat.json   <span class="token comment" spellcheck="true"># cat.json contains {"name": "Tiger", "petType": "cat"}</span>
              <span class="token key atrule">hamster</span><span class="token punctuation">:</span>  <span class="token comment" spellcheck="true"># &lt;--- example name</span>
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/examples/hamster'</span>
<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">examples</span><span class="token punctuation">:</span>
    <span class="token key atrule">hamster</span><span class="token punctuation">:</span>  <span class="token comment" spellcheck="true"># &lt;--- example name</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> An example of a hamster
      <span class="token key atrule">value</span><span class="token punctuation">:</span>
        <span class="token comment" spellcheck="true"># vv Actual payload goes here vv</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> Ginger
        <span class="token key atrule">petType</span><span class="token punctuation">:</span> hamster<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>有关更多信息，请参阅<a href="https://swagger.io/docs/specification/adding-examples/" target="_blank" rel="noopener">添加示例</a>。</p>
<h3 id="可重复使用的身体"><a href="#可重复使用的身体" class="headerlink" title="可重复使用的身体"></a>可重复使用的身体</h3><p>您可以将请求正文定义放在全局<code>components.requestBodies</code>部分中，<code>$ref</code>并将它们放在其他地方。如果多个操作具有相同的请求主体，这很方便——这样您就可以轻松地重用相同的定义。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/pets</span><span class="token punctuation">:</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Add a new pet
      <span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/requestBodies/PetBody'</span>
  /pets/<span class="token punctuation">{</span>petId<span class="token punctuation">}</span>
    <span class="token key atrule">put</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Update a pet
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token punctuation">...</span> <span class="token punctuation">]</span>
      <span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/requestBodies/PetBody'</span>
<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">requestBodies</span><span class="token punctuation">:</span>
    <span class="token key atrule">PetBody</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> A JSON object containing pet information
      <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span>
        <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/Pet'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="表单数据"><a href="#表单数据" class="headerlink" title="表单数据"></a>表单数据</h3><p>术语“表单数据”用于媒体类型<code>application/x-www-form-urlencoded</code>和<code>multipart/form-data</code>，它们通常用于提交 HTML 表单。</p>
<ul>
<li><code>application/x-www-form-urlencoded</code>用于<code>key=value</code>成对发送简单的 ASCII 文本数据。负载格式类似于<a href="https://swagger.io/docs/specification/describing-parameters/#query-parameters" target="_blank" rel="noopener">查询参数</a>。</li>
<li><code>multipart/form-data</code>允许在单个消息中提交二进制数据以及多种媒体类型（例如，图像和 JSON）。每个表单字段在带有内部 HTTP 标头的负载中都有自己的部分。<code>multipart</code>请求通常用于<a href="https://swagger.io/docs/specification/file-upload/" target="_blank" rel="noopener">文件上传</a>。</li>
</ul>
<p>为了说明表单数据，请考虑一个 HTML POST 表单：</p>
<pre><code>&lt;form action="http://example.com/survey" method="post"&gt;
  &lt;input type="text"   name="name" /&gt;
  &lt;input type="number" name="fav_number" /&gt;
  &lt;input type="submit"/&gt;
&lt;/form&gt;</code></pre><p>此表单将数据 POST 到表单的端点：</p>
<pre><code>POST /survey HTTP/1.1
Host: example.com
Content-Type: application/x-www-form-urlencoded
Content-Length: 28
name=Amy+Smith&amp;fav_number=42</code></pre><p>在 OpenAPI 3.0 中，表单数据使用<code>type: object</code>模式建模，其中对象属性代表表单字段：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/survey</span><span class="token punctuation">:</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">content</span><span class="token punctuation">:</span>
          <span class="token key atrule">application/x-www-form-urlencoded</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token key atrule">type</span><span class="token punctuation">:</span> object
              <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                <span class="token key atrule">name</span><span class="token punctuation">:</span>          <span class="token comment" spellcheck="true"># &lt;!--- form field name</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                <span class="token key atrule">fav_number</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># &lt;!--- form field name</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
              <span class="token key atrule">required</span><span class="token punctuation">:</span>
                <span class="token punctuation">-</span> name
                <span class="token punctuation">-</span> email<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>表单字段可以包含原始值、数组和对象。默认情况下，数组被序列化为<code>array_name=value1&amp;array_name=value2</code>，对象被序列化为<code>prop1=value1&amp;prop=value2</code>，但您可以使用 OpenAPI 3.0 规范定义的其他序列化策略。序列化策略在<code>encoding</code>部分中指定，如下所示：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        <span class="token key atrule">content</span><span class="token punctuation">:</span>
          <span class="token key atrule">application/x-www-form-urlencoded</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token key atrule">type</span><span class="token punctuation">:</span> object
              <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                <span class="token key atrule">color</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> array
                  <span class="token key atrule">items</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> string
            <span class="token key atrule">encoding</span><span class="token punctuation">:</span>
              <span class="token key atrule">color</span><span class="token punctuation">:</span>            <span class="token comment" spellcheck="true"># color=red,green,blue</span>
                <span class="token key atrule">style</span><span class="token punctuation">:</span> form
                <span class="token key atrule">explode</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>默认情况下，正文<code>:/?#[]@!$&amp;'()*+,;=</code>中表单字段值中的保留字符在发送时<code>application/x-www-form-urlencoded</code>采用<a href="https://en.wikipedia.org/wiki/Percent-encoding" target="_blank" rel="noopener">百分比编码</a>。要允许按原样发送这些字符，请使用如下<code>allowReserved</code>关键字：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        <span class="token key atrule">content</span><span class="token punctuation">:</span>
          <span class="token key atrule">application/x-www-form-urlencoded</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token key atrule">type</span><span class="token punctuation">:</span> object
              <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                <span class="token key atrule">foo</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                <span class="token key atrule">bar</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                <span class="token key atrule">baz</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string
            <span class="token key atrule">encoding</span><span class="token punctuation">:</span>
              <span class="token comment" spellcheck="true"># Don't percent-encode reserved characters in the values of "bar" and "baz" fields</span>
              <span class="token key atrule">bar</span><span class="token punctuation">:</span>
                <span class="token key atrule">allowReserved</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
              <span class="token key atrule">baz</span><span class="token punctuation">:</span>
                <span class="token key atrule">allowReserved</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>key=value</code>可以使用自由格式模式对 任意对进行建模：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        <span class="token key atrule">content</span><span class="token punctuation">:</span>
          <span class="token key atrule">application/x-www-form-urlencoded</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token key atrule">type</span><span class="token punctuation">:</span> object
              <span class="token key atrule">additionalProperties</span><span class="token punctuation">:</span> <span class="token boolean important">true    </span><span class="token comment" spellcheck="true"># this line is optional</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="表单数据中的复杂序列化"><a href="#表单数据中的复杂序列化" class="headerlink" title="表单数据中的复杂序列化"></a>表单数据中的复杂序列化</h4><p><code>style</code>和<code>explode</code>关键字 提供的序列化规则只为具有原始属性的原始数组和对象定义了行为。对于更复杂的场景，例如嵌套数组或表单数据中的JSON，需要使用<code>contentType</code>关键字指定媒体类型，用于对复杂字段的值进行编码。以<a href="https://api.slack.com/incoming-webhooks" target="_blank" rel="noopener">Slack 传入 webhook</a>为例。消息可以直接作为 JSON 发送，或者 JSON 数据可以在名为<code>payload</code>so的表单字段中发送（在应用 URL 编码之前）：</p>
<pre><code>payload={"text":"Swagger is awesome"}</code></pre><p>这可以描述为：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">openapi</span><span class="token punctuation">:</span> 3.0.0
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 1.0.0
  <span class="token key atrule">title</span><span class="token punctuation">:</span> Slack Incoming Webhook
<span class="token key atrule">externalDocs</span><span class="token punctuation">:</span>
  <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//api.slack.com/incoming<span class="token punctuation">-</span>webhooks
<span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//hooks.slack.com
<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXXXXXX</span><span class="token punctuation">:</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Post a message to Slack
      <span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        <span class="token key atrule">content</span><span class="token punctuation">:</span>

          <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/Message'</span>
          <span class="token key atrule">application/x-www-form-urlencoded</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token key atrule">type</span><span class="token punctuation">:</span> object
              <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                <span class="token key atrule">payload</span><span class="token punctuation">:</span>     <span class="token comment" spellcheck="true"># &lt;--- form field that contains the JSON message</span>
                  <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/Message'</span>
            <span class="token key atrule">encoding</span><span class="token punctuation">:</span>
              <span class="token key atrule">payload</span><span class="token punctuation">:</span>
                <span class="token key atrule">contentType</span><span class="token punctuation">:</span> application/json
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> OK
<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
    <span class="token key atrule">Message</span><span class="token punctuation">:</span>
      <span class="token key atrule">title</span><span class="token punctuation">:</span> A Slack message
      <span class="token key atrule">type</span><span class="token punctuation">:</span> object
      <span class="token key atrule">properties</span><span class="token punctuation">:</span>
        <span class="token key atrule">text</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Message text
      <span class="token key atrule">required</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> text<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.3.md#requestBodyObject" target="_blank" rel="noopener">请求体对象</a></p>
<p><a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.3.md#mediaTypeObject" target="_blank" rel="noopener">媒体类型对象</a></p>
<h2 id="上传文件-1"><a href="#上传文件-1" class="headerlink" title="上传文件"></a>上传文件</h2><p>在OpenAPI 3.0中，可以描述直接用请求内容上传的文件和用<code>multipart</code>请求上传的文件。使用<code>requestBody</code>关键字来描述包含文件的请求负载。在 下<code>content</code>，指定请求媒体类型（例如<code>image/png</code>或<code>application/octet-stream</code>）。文件使用<code>type: string</code>带有<code>format: binary</code>或的模式<code>format: base64</code>，具体取决于文件内容的编码方式。例如：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
  <span class="token key atrule">content</span><span class="token punctuation">:</span>
    <span class="token key atrule">image/png</span><span class="token punctuation">:</span>
      <span class="token key atrule">schema</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token key atrule">format</span><span class="token punctuation">:</span> binary<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>此定义对应于如下所示的 HTTP 请求：</p>
<pre><code>POST /upload
Host: example.com
Content-Length: 808
Content-Type: image/png
[file content goes there]</code></pre><h3 id="通过分段请求上传"><a href="#通过分段请求上传" class="headerlink" title="通过分段请求上传"></a>通过分段请求上传</h3><p>要描述与其他数据一起发送的文件，请使用<code>multipart</code>媒体类型。例如：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        <span class="token key atrule">content</span><span class="token punctuation">:</span>
          <span class="token key atrule">multipart/form-data</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token key atrule">type</span><span class="token punctuation">:</span> object
              <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                <span class="token key atrule">orderId</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
                <span class="token key atrule">userId</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
                <span class="token key atrule">fileName</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                  <span class="token key atrule">format</span><span class="token punctuation">:</span> binary<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>相应的 HTTP 请求负载将包括多个部分：</p>
<pre><code>POST /upload
Host: example.com
Content-Length: 2740
Content-Type: multipart/form-data; boundary=abcde12345
--abcde12345
Content-Disposition: form-data; name="orderId"
1195
--abcde12345
Content-Disposition: form-data; name="userId"
545
--abcde12345
Content-Disposition: form-data; name="fileName"; filename="attachment.txt"
Content-Type: text/plain
[file content goes there]
--abcde12345--</code></pre><h3 id="多文件上传"><a href="#多文件上传" class="headerlink" title="多文件上传"></a>多文件上传</h3><p>使用<code>multipart</code>媒体类型定义上传任意数量的文件（文件数组）：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        <span class="token key atrule">content</span><span class="token punctuation">:</span>
          <span class="token key atrule">multipart/form-data</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token key atrule">type</span><span class="token punctuation">:</span> object
              <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                <span class="token key atrule">filename</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> array
                  <span class="token key atrule">items</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                    <span class="token key atrule">format</span><span class="token punctuation">:</span> binary<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>相应的 HTTP 请求将如下所示：</p>
<pre><code>POST /upload
Host: example.com
Content-Length: 2740
Content-Type: multipart/form-data; boundary=abcde12345
--abcde12345
Content-Disposition: form-data; name="fileName"; filename="file1.txt"
Content-Type: text/plain
[file content goes there]
--abcde12345
Content-Disposition: form-data; name="fileName"; filename="file2.png"
Content-Type: image/png
[file content goes there]
------WebKitFormBoundaryWfPNVh4wuWBlyEyQ
Content-Disposition: form-data; name="fileName"; filename="file3.jpg"
Content-Type: image/jpeg
[file content goes there]
--abcde12345--</code></pre><h3 id="参考-1"><a href="#参考-1" class="headerlink" title="参考"></a>参考</h3><p>有关 OpenAPI 中文件上传的更多信息，请参阅 OpenAPI 3.0 规范的以下部分：</p>
<p><a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.3.md#considerations-for-file-uploads" target="_blank" rel="noopener">文件上传的注意事项</a></p>
<p><a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.3.md#special-considerations-for-multipart-content" target="_blank" rel="noopener">多部分内容的特殊注意事项</a></p>
<h2 id="多部分请求"><a href="#多部分请求" class="headerlink" title="多部分请求"></a>多部分请求</h2><p>多部分请求将一组或多组数据组合成一个主体，由边界分隔。您通常将这些请求用于文件上传和在单个请求中传输多种类型的数据（例如，文件和 JSON 对象）。在 OpenAPI 3 中，您可以通过以下方式描述多部分请求：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
  <span class="token key atrule">content</span><span class="token punctuation">:</span> 
    <span class="token key atrule">multipart/form-data</span><span class="token punctuation">:</span> <span class="token comment" spellcheck="true"># Media type</span>
      <span class="token key atrule">schema</span><span class="token punctuation">:</span>            <span class="token comment" spellcheck="true"># Request payload</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> object
        <span class="token key atrule">properties</span><span class="token punctuation">:</span>      <span class="token comment" spellcheck="true"># Request parts</span>
          <span class="token key atrule">id</span><span class="token punctuation">:</span>            <span class="token comment" spellcheck="true"># Part 1 (string value)</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string
            <span class="token key atrule">format</span><span class="token punctuation">:</span> uuid
          <span class="token key atrule">address</span><span class="token punctuation">:</span>       <span class="token comment" spellcheck="true"># Part2 (object)</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> object
            <span class="token key atrule">properties</span><span class="token punctuation">:</span>
              <span class="token key atrule">street</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string
              <span class="token key atrule">city</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string
          <span class="token key atrule">profileImage</span><span class="token punctuation">:</span>  <span class="token comment" spellcheck="true"># Part 3 (an image)</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string
            <span class="token key atrule">format</span><span class="token punctuation">:</span> binary<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>你从<code>requestBody/content</code>关键字开始。然后，您指定请求数据的媒体类型。文件上传通常使用<code>*multipart/form-data*</code>媒体类型，混合数据请求通常使用<code>*multipart/mixed*</code>. 在媒体类型下方，放置<code>schema</code>关键字以指示您开始描述请求负载。您将请求的各个部分描述为<code>schema</code>对象的属性。如您所见，多部分请求可以包含各种数据：字符串、JSON 格式的对象和二进制数据。您还可以指定一个或多个文件进行上传。（要了解更多信息，请参阅<a href="https://swagger.io/docs/specification/describing-request-body/file-upload/" target="_blank" rel="noopener">文件上传</a>。）上面的示例对应于以下请求：</p>
<pre><code>POST /upload HTTP/1.1
Content-Length: 428
Content-Type: multipart/form-data; boundary=abcde12345
--abcde12345
Content-Disposition: form-data; name="id"
Content-Type: text/plain
123e4567-e89b-12d3-a456-426655440000
--abcde12345
Content-Disposition: form-data; name="address"
Content-Type: application/json
{
  "street": "3, Garden St",
  "city": "Hillsbery, UT"
}
--abcde12345
Content-Disposition: form-data; name="profileImage "; filename="image1.png"
Content-Type: application/octet-stream
{…file content…}
--abcde12345--</code></pre><h3 id="指定内容类型"><a href="#指定内容类型" class="headerlink" title="指定内容类型"></a>指定内容类型</h3><p>默认情况下，<code>Content-Type</code>根据<code>schema</code>描述请求部分的属性类型自动设置各个请求部分的 ：</p>
<table>
<thead>
<tr>
<th>架构属性类型</th>
<th>内容类型</th>
</tr>
</thead>
<tbody><tr>
<td>基元或基元数组</td>
<td><code>text/plain</code></td>
</tr>
<tr>
<td>复数值或复数值数组</td>
<td><code>application/json</code></td>
</tr>
<tr>
<td><code>binary</code>或<code>base64</code>格式的字符串</td>
<td><code>application/octet-stream</code></td>
</tr>
</tbody></table>
<p>要<code>Content-Type</code>为请求部分设置特定，请使用该字段。您添加为媒体类型属性的子级，与所在的级别相同。在下面的示例中，我们将多部分请求的部分设置为：<code>encoding/*{property-name}*/contentType``encoding``schema``contentType``profileImage``image/png, image/jpg</code></p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
  <span class="token key atrule">content</span><span class="token punctuation">:</span>
    <span class="token key atrule">multipart/form-data</span><span class="token punctuation">:</span>
      <span class="token key atrule">schema</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> object
        <span class="token key atrule">properties</span><span class="token punctuation">:</span> <span class="token comment" spellcheck="true"># Request parts</span>
          <span class="token key atrule">id</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string
            <span class="token key atrule">format</span><span class="token punctuation">:</span> uuid
          <span class="token key atrule">address</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> object
            <span class="token key atrule">properties</span><span class="token punctuation">:</span>
              <span class="token key atrule">street</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string
              <span class="token key atrule">city</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string
          <span class="token key atrule">profileImage</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string
            <span class="token key atrule">format</span><span class="token punctuation">:</span> base64
      <span class="token key atrule">encoding</span><span class="token punctuation">:</span> <span class="token comment" spellcheck="true"># The same level as schema</span>
        <span class="token key atrule">profileImage</span><span class="token punctuation">:</span> <span class="token comment" spellcheck="true"># Property name (see above)</span>
          <span class="token key atrule">contentType</span><span class="token punctuation">:</span> image/png<span class="token punctuation">,</span> image/jpeg<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="指定自定义标题"><a href="#指定自定义标题" class="headerlink" title="指定自定义标题"></a>指定自定义标题</h3><p>多部分请求的部分通常不使用任何标头，除了<code>Content</code>. 如果您需要包含自定义标题，请使用该字段来描述这些标题（见下文）。有关描述标头的完整信息，请参阅<a href="https://swagger.io/docs/specification/describing-parameters/" target="_blank" rel="noopener">描述参数</a>。以下是为多部分请求的一部分定义的自定义标头示例：<code>encoding/*{property-name}*/headers</code></p>
<pre><code>requestBody:
  content:
    multipart/form-data:
      schema:
        type: object
        properties:
          id:
            type: string
            format: uuid
          profileImage:
            type: string
            format: binary
      encoding:
        profileImage: # Property name
          contentType: image/png, image/jpeg
          headers: # Custom headers
            X-Custom-Header:
              description: This is a custom header
              schema:
                type: string</code></pre><p>此声明符合以下请求：</p>
<pre><code>POST /upload HTTP/1.1
Content-Length: 428
Content-Type: multipart/form-data; boundary=abcde12345
--abcde12345
Content-Disposition: form-data; name="id"
Content-Type: text/plain
123e4567-e89b-12d3-a456-426655440000
--abcde12345
Content-Disposition: form-data; name="profileImage"; filename="image1.png"
Content-Type: image/png
X-Custom-Header: x-header
{…file content…}
--abcde12345--</code></pre><h2 id="描述响应"><a href="#描述响应" class="headerlink" title="描述响应"></a>描述响应</h2><p>API 规范需要<code>responses</code>为所有 API 操作指定。每个操作必须至少定义一个响应，通常是成功的响应。响应由其 HTTP 状态代码和响应正文和/或标头中返回的数据定义。这是一个最小的例子：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/ping</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> OK
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">text/plain</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                <span class="token key atrule">example</span><span class="token punctuation">:</span> pong<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="响应媒体类型"><a href="#响应媒体类型" class="headerlink" title="响应媒体类型"></a>响应媒体类型</h3><p>API 可以响应各种媒体类型。JSON 是最常见的数据交换格式，但不是唯一可能的格式。要指定响应媒体类型，请<code>content</code>在操作级别使用关键字。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/users</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Get all users
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> A list of users
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/ArrayOfUsers'</span>
            <span class="token key atrule">application/xml</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/ArrayOfUsers'</span>
            <span class="token key atrule">text/plain</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string
  <span class="token comment" spellcheck="true"># This operation returns image</span>
  <span class="token key atrule">/logo</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Get the logo image
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Logo image in PNG format
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">image/png</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                <span class="token key atrule">format</span><span class="token punctuation">:</span> binary<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>更多信息：</em> <a href="https://swagger.io/docs/specification/media-types/" target="_blank" rel="noopener">媒体类型</a>。</p>
<h3 id="HTTP-状态代码"><a href="#HTTP-状态代码" class="headerlink" title="HTTP 状态代码"></a>HTTP 状态代码</h3><p>在 下<code>responses</code>，每个响应定义都以状态代码开头，例如 200 或 404。操作通常返回一个成功状态代码和一个或多个错误状态。要定义响应代码的范围，您可以使用以下范围定义：1XX、2XX、3XX、4XX 和 5XX。如果使用显式代码定义响应范围，则显式代码定义优先于该代码的范围定义。每个响应状态都需要一个<code>description</code>. 例如，您可以描述错误响应的条件。Markdown ( <a href="http://commonmark.org/help/" target="_blank" rel="noopener">CommonMark</a> ) 可用于富文本表示。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> OK
        <span class="token key atrule">'400'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Bad request. User ID must be an integer and larger than 0.
        <span class="token key atrule">'401'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Authorization information is missing or invalid.
        <span class="token key atrule">'404'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> A user with the specified ID was not found.
        <span class="token key atrule">'5XX'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Unexpected error.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>请注意，API 规范不一定需要涵盖<em>所有可能的</em>HTTP 响应代码，因为它们可能事先未知。但是，它预计会涵盖成功的响应和任何<em>已知</em>错误。我们所说的“已知错误”是指，例如，对于按 ID 返回资源的操作的 404 Not Found 响应，或在操作参数无效的情况下的 400 Bad Request 响应。</p>
<h3 id="响应体"><a href="#响应体" class="headerlink" title="响应体"></a>响应体</h3><p>所述<code>schema</code>关键字被用于描述响应主体。模式可以定义：</p>
<ul>
<li>an<code>object</code>或 an <code>array</code>— 通常与 JSON 和 XML API 一起使用，</li>
<li>原始数据类型，例如数字或字符串——用于纯文本响应，</li>
<li>一个文件——（见<a href="https://swagger.io/docs/specification/describing-responses/#response-that-returns-a-file" target="_blank" rel="noopener">下文</a>）。</li>
</ul>
<p>可以在操作中内联定义架构：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> A User object
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                  <span class="token key atrule">id</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
                    <span class="token key atrule">description</span><span class="token punctuation">:</span> The user ID.
                  <span class="token key atrule">username</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                    <span class="token key atrule">description</span><span class="token punctuation">:</span> The user name.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>或在全局<code>components.schemas</code>部分中定义并通过<code>$ref</code>. 如果多种媒体类型使用相同的模式，这很有用。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> A User object
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/User'</span>
<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
    <span class="token key atrule">User</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> object
      <span class="token key atrule">properties</span><span class="token punctuation">:</span>
        <span class="token key atrule">id</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
          <span class="token key atrule">description</span><span class="token punctuation">:</span> The user ID.
        <span class="token key atrule">username</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
          <span class="token key atrule">description</span><span class="token punctuation">:</span> The user name.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="返回文件的响应"><a href="#返回文件的响应" class="headerlink" title="返回文件的响应"></a>返回文件的响应</h3><p>API 操作可以返回文件，例如图像或 PDF。OpenAPI 3.0 将文件输入/输出内容定义为<code>type: string</code>with<code>format: binary</code>或<code>format: base64</code>。这与 OpenAPI 2.0 形成对比，后者用于<code>type: file</code>描述文件输入/输出内容。如果响应单独返回文件，您通常会使用二进制字符串模式并为响应指定适当的媒体类型<code>content</code>：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/report</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Returns the report in the PDF format
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> A PDF file
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/pdf</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                <span class="token key atrule">format</span><span class="token punctuation">:</span> binary<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>文件也可以作为 base64 编码字符串嵌入到 JSON 或 XML 中。在这种情况下，您将使用以下内容：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/users/me</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Returns user information
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> A JSON object containing user name and avatar
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                  <span class="token key atrule">username</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                  <span class="token key atrule">avatar</span><span class="token punctuation">:</span>          <span class="token comment" spellcheck="true"># &lt;-- image embedded into JSON</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                    <span class="token key atrule">format</span><span class="token punctuation">:</span> byte
                    <span class="token key atrule">description</span><span class="token punctuation">:</span> Base64<span class="token punctuation">-</span>encoded contents of the avatar image<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="oneOf，anyOf"><a href="#oneOf，anyOf" class="headerlink" title="oneOf，anyOf"></a>oneOf，anyOf</h3><p>OpenAPI 3.0 还支持<code>oneOf</code>和<code>anyOf</code>，因此您可以为响应正文指定替代模式。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> A JSON object containing pet information
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">oneOf</span><span class="token punctuation">:</span>
                  <span class="token punctuation">-</span> <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/Cat'</span>
                  <span class="token punctuation">-</span> <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/Dog'</span>
                  <span class="token punctuation">-</span> <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/Hamster'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="空响应体"><a href="#空响应体" class="headerlink" title="空响应体"></a>空响应体</h3><p>一些响应，例如 204 No Content，没有正文。要指示响应正文为空，请不要<code>content</code>为响应指定 a ：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'204'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> The resource was deleted successfully.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3 id="响应头"><a href="#响应头" class="headerlink" title="响应头"></a>响应头</h3><p>来自 API 的响应可以包含自定义标头，以提供有关 API 调用结果的附加信息。例如，限速 API 可以通过响应头提供限速状态，如下所示：</p>
<pre><code>HTTP 1/1 200 OK
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 99
X-RateLimit-Reset: 2016-10-12T11:00:00Z
{ ... }</code></pre><p>您可以<code>headers</code>为每个响应定义自定义，如下所示：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/ping</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Checks if the server is alive.
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> OK
          <span class="token key atrule">headers</span><span class="token punctuation">:</span>
            <span class="token key atrule">X-RateLimit-Limit</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
              <span class="token key atrule">description</span><span class="token punctuation">:</span> Request limit per hour.
            <span class="token key atrule">X-RateLimit-Remaining</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
              <span class="token key atrule">description</span><span class="token punctuation">:</span> The number of requests left for the time window.
            <span class="token key atrule">X-RateLimit-Reset</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                <span class="token key atrule">format</span><span class="token punctuation">:</span> date<span class="token punctuation">-</span>time
              <span class="token key atrule">description</span><span class="token punctuation">:</span> The UTC date/time at which the current rate limit window resets.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>请注意，目前 OpenAPI 规范不允许为不同的响应代码或不同的 API 操作定义公共响应头。您需要单独定义每个响应的标头。</p>
<h3 id="默认响应"><a href="#默认响应" class="headerlink" title="默认响应"></a>默认响应</h3><p>有时，一个操作可能会返回多个具有不同 HTTP 状态代码的错误，但它们都具有相同的响应结构：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Success
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/User'</span>
        <span class="token comment" spellcheck="true"># These two error responses have the same schema</span>
        <span class="token key atrule">'400'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Bad request
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/Error'</span>
        <span class="token key atrule">'404'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Not found
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/Error'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>您可以使用<code>default</code>响应来共同描述这些错误，而不是单独描述这些错误。“默认”表示此响应用于所有未单独用于此操作的 HTTP 代码。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Success
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/User'</span>
        <span class="token comment" spellcheck="true"># Definition of all error statuses</span>
        <span class="token key atrule">default</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Unexpected error
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/Error'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="重用响应"><a href="#重用响应" class="headerlink" title="重用响应"></a>重用响应</h3><p>如果多个操作返回相同的响应（状态代码和数据），您可以<code>responses</code>在全局<code>components</code>对象的部分中定义它，然后通过<code>$ref</code>在操作级别引用该定义。这对于具有相同状态代码和响应正文的错误响应很有用。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/users</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Gets a list of users.
      <span class="token key atrule">response</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> OK
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/ArrayOfUsers'</span>
        <span class="token key atrule">'401'</span><span class="token punctuation">:</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/responses/Unauthorized'   # &lt;-----</span>
  /users/<span class="token punctuation">{</span>id<span class="token punctuation">}</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Gets a user by ID.
      <span class="token key atrule">response</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> OK
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/User'</span>
        <span class="token key atrule">'401'</span><span class="token punctuation">:</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/responses/Unauthorized'   # &lt;-----</span>
        <span class="token key atrule">'404'</span><span class="token punctuation">:</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/responses/NotFound'       # &lt;-----</span>
<span class="token comment" spellcheck="true"># Descriptions of common components</span>
<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">responses</span><span class="token punctuation">:</span>
    <span class="token key atrule">NotFound</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> The specified resource was not found
      <span class="token key atrule">content</span><span class="token punctuation">:</span>
        <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/Error'</span>
    <span class="token key atrule">Unauthorized</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Unauthorized
      <span class="token key atrule">content</span><span class="token punctuation">:</span>
        <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/Error'</span>
  <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
    <span class="token comment" spellcheck="true"># Schema for error response body</span>
    <span class="token key atrule">Error</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> object
      <span class="token key atrule">properties</span><span class="token punctuation">:</span>
        <span class="token key atrule">code</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token key atrule">message</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
      <span class="token key atrule">required</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> code
        <span class="token punctuation">-</span> message<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>请注意，中定义的响应<code>components.responses</code>不会自动应用于所有操作。这些只是可以被多个操作引用和重用的定义。</p>
<h3 id="将响应值链接到其他操作"><a href="#将响应值链接到其他操作" class="headerlink" title="将响应值链接到其他操作"></a>将响应值链接到其他操作</h3><p>响应中的某些值可以用作其他操作的参数。一个典型的例子是“创建资源”操作，它返回创建的资源的 ID，这个 ID 可用于获取该资源、更新或删除它。OpenAPI 3.0 提供了<code>links</code>关键字来描述响应和其他 API 调用之间的这种关系。有关更多信息，请参阅<a href="https://swagger.io/docs/specification/links/" target="_blank" rel="noopener">链接</a>。</p>
<h3 id="常问问题"><a href="#常问问题" class="headerlink" title="常问问题"></a>常问问题</h3><p><strong>我可以根据请求参数有不同的响应吗？如：</strong></p>
<pre><code>GET /something -&gt; {200, schema_1}
GET /something?foo=bar -&gt; {200, schema_2}</code></pre><p>在 OpenAPI 3.0 中，您可以使用<code>oneOf</code>为响应指定替代模式，并在响应中口头记录可能的依赖关系<code>description</code>。但是，无法将特定模式链接到特定参数组合。</p>
<h3 id="参考-2"><a href="#参考-2" class="headerlink" title="参考"></a>参考</h3><p><a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.3.md#responsesObject" target="_blank" rel="noopener">响应对象</a></p>
<p><a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.3.md#mediaTypeObject" target="_blank" rel="noopener">媒体类型对象</a></p>
<p><a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.3.md#componentsObject" target="_blank" rel="noopener">组件对象</a></p>
<h2 id="数据模型（模式）"><a href="#数据模型（模式）" class="headerlink" title="数据模型（模式）"></a>数据模型（模式）</h2><p>OpenAPI 3.0 数据类型基于扩展子集<a href="https://tools.ietf.org/html/draft-wright-json-schema-00#section-4.2" target="_blank" rel="noopener">JSON 模式规范 Wright Draft 00</a>（又名 Draft 5）。数据类型使用<a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.3.md#schemaObject" target="_blank" rel="noopener">Schema 对象</a>进行描述。要了解如何对各种数据类型进行建模，请参阅以下主题：</p>
<ul>
<li><a href="https://swagger.io/docs/specification/data-models/data-types/" target="_blank" rel="noopener">数据类型</a></li>
<li><a href="https://swagger.io/docs/specification/enums/" target="_blank" rel="noopener">枚举</a></li>
<li><a href="https://swagger.io/docs/specification/data-models/dictionaries/" target="_blank" rel="noopener">字典、哈希图、关联数组</a></li>
<li><a href="https://swagger.io/docs/specification/data-models/oneof-anyof-allof-not/" target="_blank" rel="noopener">oneOf, anyOf, allOf, not</a></li>
<li><a href="https://swagger.io/docs/specification/data-models/inheritance-and-polymorphism/" target="_blank" rel="noopener">继承与多态</a></li>
<li><a href="https://swagger.io/docs/specification/data-models/representing-xml/" target="_blank" rel="noopener">表示 XML</a></li>
<li><a href="https://swagger.io/docs/specification/data-models/keywords/" target="_blank" rel="noopener">支持的 JSON 模式关键字</a></li>
</ul>
<h2 id="添加示例"><a href="#添加示例" class="headerlink" title="添加示例"></a>添加示例</h2><p>您可以向参数、属性和对象添加示例，以使您的 Web 服务的 OpenAPI 规范更加清晰。以某种方式处理您的 API 的工具和库可以读取示例。例如，API 模拟工具可以使用示例值来生成模拟请求。您可以为对象、单个属性和操作参数指定示例。要指定示例，请使用<strong><code>example</code></strong>或<strong><code>examples</code></strong>键。详情请见下文。</p>
<p><strong>Swagger UI 用户注意事项：</strong><code>examples</code>自 Swagger UI 3.23.0 和 Swagger Editor 3.6.31 起支持多个。</p>
<p><strong>注意：</strong>不要将示例值与默认值混淆。一个例子说明了该值应该是什么。如果客户端不提供该值，则默认值是服务器使用的值。</p>
<h3 id="参数示例-1"><a href="#参数示例-1" class="headerlink" title="参数示例"></a>参数示例</h3><p>下面是一个参数值的例子：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">parameters</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> query
    <span class="token key atrule">name</span><span class="token punctuation">:</span> status
    <span class="token key atrule">schema</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> string
      <span class="token key atrule">enum</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>approved<span class="token punctuation">,</span> pending<span class="token punctuation">,</span> closed<span class="token punctuation">,</span> new<span class="token punctuation">]</span>
      <span class="token key atrule">example</span><span class="token punctuation">:</span> approved     <span class="token comment" spellcheck="true"># Example of a parameter value</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>参数的多个示例：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">parameters</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> query
    <span class="token key atrule">name</span><span class="token punctuation">:</span> limit
    <span class="token key atrule">schema</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
      <span class="token key atrule">maximum</span><span class="token punctuation">:</span> <span class="token number">50</span>
    <span class="token key atrule">examples</span><span class="token punctuation">:</span>       <span class="token comment" spellcheck="true"># Multiple examples</span>
      <span class="token key atrule">zero</span><span class="token punctuation">:</span>         <span class="token comment" spellcheck="true"># Distinct name</span>
        <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token number">0    </span><span class="token comment" spellcheck="true"># Example value</span>
        <span class="token key atrule">summary</span><span class="token punctuation">:</span> A sample limit value  <span class="token comment" spellcheck="true"># Optional description</span>
      <span class="token key atrule">max</span><span class="token punctuation">:</span> <span class="token comment" spellcheck="true"># Distinct name</span>
        <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token number">50   </span><span class="token comment" spellcheck="true"># Example value</span>
        <span class="token key atrule">summary</span><span class="token punctuation">:</span> A sample limit value  <span class="token comment" spellcheck="true"># Optional description</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如您所见，每个示例都有一个不同的键名。此外，在上面的代码中，我们使用了<code>summary</code>带有描述的可选键。<strong>注意：</strong>您指定的示例值应与参数数据类型匹配。</p>
<h3 id="请求和响应正文示例"><a href="#请求和响应正文示例" class="headerlink" title="请求和响应正文示例"></a>请求和响应正文示例</h3><p>这是<code>example</code>请求正文中关键字的示例：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/users</span><span class="token punctuation">:</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Adds a new user
      <span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        <span class="token key atrule">content</span><span class="token punctuation">:</span>
          <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>      <span class="token comment" spellcheck="true"># Request body contents</span>
              <span class="token key atrule">type</span><span class="token punctuation">:</span> object
              <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                <span class="token key atrule">id</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
                <span class="token key atrule">name</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string
              <span class="token key atrule">example</span><span class="token punctuation">:</span>   <span class="token comment" spellcheck="true"># Sample object</span>
                <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">10</span>
                <span class="token key atrule">name</span><span class="token punctuation">:</span> Jessica Smith
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> OK<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>请注意，在上面的代码中，<code>example</code>是<code>schema</code>. 如果<code>schema</code>引用该<code>components</code>部分中定义的某个对象，那么您应该创建<code>example</code>media type 关键字的子项：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/users</span><span class="token punctuation">:</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Adds a new user
      <span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        <span class="token key atrule">content</span><span class="token punctuation">:</span>
          <span class="token key atrule">application/json</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># Media type</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>            <span class="token comment" spellcheck="true"># Request body contents</span>
              <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/User'   # Reference to an object</span>
            <span class="token key atrule">example</span><span class="token punctuation">:</span>           <span class="token comment" spellcheck="true"># Child of media type because we use $ref above</span>
              <span class="token comment" spellcheck="true"># Properties of a referenced object</span>
              <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">10</span>
              <span class="token key atrule">name</span><span class="token punctuation">:</span> Jessica Smith
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> OK<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这是必需的，因为会<code>$ref</code>覆盖它旁边的所有兄弟姐妹。如果需要，您可以使用多个示例：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/users</span><span class="token punctuation">:</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Adds a new user
      <span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        <span class="token key atrule">content</span><span class="token punctuation">:</span>
          <span class="token key atrule">application/json</span><span class="token punctuation">:</span>     <span class="token comment" spellcheck="true"># Media type</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>             <span class="token comment" spellcheck="true"># Request body contents</span>
              <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/User'   # Reference to an object</span>
            <span class="token key atrule">examples</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># Child of media type</span>
              <span class="token key atrule">Jessica</span><span class="token punctuation">:</span>   <span class="token comment" spellcheck="true"># Example 1</span>
                <span class="token key atrule">value</span><span class="token punctuation">:</span>
                  <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">10</span>
                  <span class="token key atrule">name</span><span class="token punctuation">:</span> Jessica Smith
              <span class="token key atrule">Ron</span><span class="token punctuation">:</span>       <span class="token comment" spellcheck="true"># Example 2</span>
                <span class="token key atrule">value</span><span class="token punctuation">:</span>
                  <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">11</span>
                  <span class="token key atrule">name</span><span class="token punctuation">:</span> Ron Stewart
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> OK<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>以下是<code>example</code>响应正文的示例：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">responses</span><span class="token punctuation">:</span>
  <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
    <span class="token key atrule">description</span><span class="token punctuation">:</span> A user object.
    <span class="token key atrule">content</span><span class="token punctuation">:</span>
      <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
        <span class="token key atrule">schema</span><span class="token punctuation">:</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/User'   # Reference to an object</span>
        <span class="token key atrule">example</span><span class="token punctuation">:</span> 
          <span class="token comment" spellcheck="true"># Properties of the referenced object</span>
          <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">10</span>
          <span class="token key atrule">name</span><span class="token punctuation">:</span> Jessica Smith<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>响应体中的多个示例：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">responses</span><span class="token punctuation">:</span>
  <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
    <span class="token key atrule">description</span><span class="token punctuation">:</span> A user object.
    <span class="token key atrule">content</span><span class="token punctuation">:</span>
      <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
        <span class="token key atrule">schema</span><span class="token punctuation">:</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/User'   # Reference to an object</span>
        <span class="token key atrule">examples</span><span class="token punctuation">:</span>
          <span class="token key atrule">Jessica</span><span class="token punctuation">:</span>
            <span class="token key atrule">value</span><span class="token punctuation">:</span>
              <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">10</span>
              <span class="token key atrule">name</span><span class="token punctuation">:</span> Jessica Smith
          <span class="token key atrule">Ron</span><span class="token punctuation">:</span>
            <span class="token key atrule">value</span><span class="token punctuation">:</span>
              <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">20</span>
              <span class="token key atrule">name</span><span class="token punctuation">:</span> Ron Stewart<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>注意：</strong>响应和请求正文中的示例是自由格式的，但应与正文模式兼容。</p>
<h3 id="对象和属性示例"><a href="#对象和属性示例" class="headerlink" title="对象和属性示例"></a>对象和属性示例</h3><p>您还可以为该<code>components</code>部分中的对象和各个属性指定示例。</p>
<ul>
<li><p>属性级示例：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
    <span class="token key atrule">User</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># Schema name</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> object
      <span class="token key atrule">properties</span><span class="token punctuation">:</span>
        <span class="token key atrule">id</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
          <span class="token key atrule">format</span><span class="token punctuation">:</span> int64
          <span class="token key atrule">example</span><span class="token punctuation">:</span> <span class="token number">1          </span><span class="token comment" spellcheck="true"># Property example</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
          <span class="token key atrule">example</span><span class="token punctuation">:</span> New order  <span class="token comment" spellcheck="true"># Property example</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>对象级示例：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
    <span class="token key atrule">User</span><span class="token punctuation">:</span>       <span class="token comment" spellcheck="true"># Schema name</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> object
      <span class="token key atrule">properties</span><span class="token punctuation">:</span>
        <span class="token key atrule">id</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
        <span class="token key atrule">name</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
      <span class="token key atrule">example</span><span class="token punctuation">:</span>   <span class="token comment" spellcheck="true"># Object-level example</span>
        <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">1</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> Jessica Smith<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
</ul>
<p>请注意，模式和属性支持单个<code>example</code>但不支持多个<code>examples</code>.</p>
<h3 id="数组示例"><a href="#数组示例" class="headerlink" title="数组示例"></a>数组示例</h3><p>您可以添加单个数组项的示例：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
    <span class="token key atrule">ArrayOfInt</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> array
      <span class="token key atrule">items</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
        <span class="token key atrule">format</span><span class="token punctuation">:</span> int64
        <span class="token key atrule">example</span><span class="token punctuation">:</span> <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>或包含多个项目的数组级示例：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
    <span class="token key atrule">ArrayOfInt</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> array
      <span class="token key atrule">items</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
        <span class="token key atrule">format</span><span class="token punctuation">:</span> int64
      <span class="token key atrule">example</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果数组包含对象，则可以指定多项示例，如下所示：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
    <span class="token key atrule">ArrayOfUsers</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> array
      <span class="token key atrule">items</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> object
        <span class="token key atrule">properties</span><span class="token punctuation">:</span>
          <span class="token key atrule">id</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
          <span class="token key atrule">name</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string
      <span class="token key atrule">example</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">10</span>
          <span class="token key atrule">name</span><span class="token punctuation">:</span> Jessica Smith
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">20</span>
          <span class="token key atrule">name</span><span class="token punctuation">:</span> Ron Stewart<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>请注意，数组和数组项支持单个<code>example</code>但不支持多个<code>examples</code>。</p>
<h3 id="XML-和-HTML-数据示例"><a href="#XML-和-HTML-数据示例" class="headerlink" title="XML 和 HTML 数据示例"></a>XML 和 HTML 数据示例</h3><p>要描述无法以 JSON 或 YAML 格式呈现的示例值，请将其指定为字符串：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">content</span><span class="token punctuation">:</span>
  <span class="token key atrule">application/xml</span><span class="token punctuation">:</span>
    <span class="token key atrule">schema</span><span class="token punctuation">:</span>
      <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/xml'</span>
    <span class="token key atrule">examples</span><span class="token punctuation">:</span>
      <span class="token key atrule">xml</span><span class="token punctuation">:</span>
        <span class="token key atrule">summary</span><span class="token punctuation">:</span> A sample XML response
        <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">'&lt;objects>&lt;object>&lt;id>1&lt;/id>&lt;name>new&lt;/name>&lt;/object>&lt;object>&lt;id>2&lt;/id>&lt;/object>&lt;/objects>'</span>
  <span class="token key atrule">text/html</span><span class="token punctuation">:</span>
    <span class="token key atrule">schema</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> string
    <span class="token key atrule">examples</span><span class="token punctuation">:</span>
      <span class="token key atrule">html</span><span class="token punctuation">:</span>
        <span class="token key atrule">summary</span><span class="token punctuation">:</span> A list containing two items
        <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">'&lt;html>&lt;body>&lt;ul>&lt;li>item 1&lt;/li>&lt;li>item 2&lt;/li>&lt;/ul>&lt;/body>&lt;/html>'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>您可以在此 Stack Overflow 帖子中找到有关在 YAML 中编写多行字符串的信息：<a href="https://stackoverflow.com/questions/3790454/in-yaml-how-do-i-break-a-string-over-multiple-lines" target="_blank" rel="noopener">https</a> : <a href="https://stackoverflow.com/questions/3790454/in-yaml-how-do-i-break-a-string-over-multiple-lines" target="_blank" rel="noopener">//stackoverflow.com/questions/3790454/in-yaml-how-do-i-break-a-string-over-multiple-lines</a>。</p>
<h3 id="外部例子"><a href="#外部例子" class="headerlink" title="外部例子"></a>外部例子</h3><p>如果由于某种原因无法将示例值插入到您的规范中，例如，它既不符合 YAML 规范，也不符合 JSON 规范，您可以使用<code>externalValue</code>关键字来指定示例值的 URL。URL 应指向包含文字示例内容（例如，对象、文件或图像）的资源：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">content</span><span class="token punctuation">:</span>
  <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
    <span class="token key atrule">schema</span><span class="token punctuation">:</span>
      <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/MyObject'</span>
    <span class="token key atrule">examples</span><span class="token punctuation">:</span>
      <span class="token key atrule">jsonObject</span><span class="token punctuation">:</span>
        <span class="token key atrule">summary</span><span class="token punctuation">:</span> A sample object
        <span class="token key atrule">externalValue</span><span class="token punctuation">:</span> <span class="token string">'http://example.com/examples/object-example.json'</span>
  <span class="token key atrule">application/pdf</span><span class="token punctuation">:</span>
    <span class="token key atrule">schema</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> string
      <span class="token key atrule">format</span><span class="token punctuation">:</span> binary
    <span class="token key atrule">examples</span><span class="token punctuation">:</span>
      <span class="token key atrule">sampleFile</span><span class="token punctuation">:</span>
        <span class="token key atrule">summary</span><span class="token punctuation">:</span> A sample file
        <span class="token key atrule">externalValue</span><span class="token punctuation">:</span> <span class="token string">'http://example.com/examples/example.pdf'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="重用示例"><a href="#重用示例" class="headerlink" title="重用示例"></a>重用示例</h3><p>您可以在<code>components/examples</code> 规范的部分中定义常见示例，然后在各种参数描述、请求和响应正文描述、对象和属性中重新使用它们：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">content</span><span class="token punctuation">:</span>
  <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
    <span class="token key atrule">schema</span><span class="token punctuation">:</span>
      <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/MyObject'</span>
    <span class="token key atrule">examples</span><span class="token punctuation">:</span>
      <span class="token key atrule">objectExample</span><span class="token punctuation">:</span>
        <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/examples/objectExample'</span>
<span class="token punctuation">...</span>
<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">examples</span><span class="token punctuation">:</span>
    <span class="token key atrule">objectExample</span><span class="token punctuation">:</span>
      <span class="token key atrule">value</span><span class="token punctuation">:</span>
        <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">1</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> new object
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> A sample object<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="认证和授权"><a href="#认证和授权" class="headerlink" title="认证和授权"></a>认证和授权</h2><p>OpenAPI 使用术语<strong>安全方案</strong>来表示身份验证和授权方案。OpenAPI 3.0 允许您描述使用以下安全方案保护的 API：</p>
<ul>
<li><p>HTTP 身份验证方案（它们使用</p>
<pre><code>Authorization</code></pre><p>标头）：</p>
<ul>
<li><a href="https://swagger.io/docs/specification/authentication/basic-authentication/" target="_blank" rel="noopener">基本的</a></li>
<li><a href="https://swagger.io/docs/specification/authentication/bearer-authentication/" target="_blank" rel="noopener">持票人</a></li>
<li><a href="https://tools.ietf.org/html/rfc7235" target="_blank" rel="noopener">RFC 7235</a>和<a href="https://www.iana.org/assignments/http-authschemes/http-authschemes.xhtml" target="_blank" rel="noopener">HTTP Authentication Scheme Registry</a>定义的其他 HTTP 方案</li>
</ul>
</li>
<li><p>标头、查询字符串或 cookie 中的 <a href="https://swagger.io/docs/specification/authentication/api-keys/" target="_blank" rel="noopener">API 密钥</a></p>
<ul>
<li><a href="https://swagger.io/docs/specification/authentication/cookie-authentication/" target="_blank" rel="noopener">Cookie 认证</a></li>
</ul>
</li>
<li><p><a href="https://swagger.io/docs/specification/authentication/oauth2/" target="_blank" rel="noopener">OAuth 2</a></p>
</li>
<li><p><a href="https://swagger.io/docs/specification/authentication/openid-connect-discovery/" target="_blank" rel="noopener">OpenID 连接发现</a></p>
</li>
</ul>
<p>按照上面的链接获取有关特定安全类型的指南，或继续阅读以了解如何概括描述安全性。</p>
<h3 id="来自-OpenAPI-2-0-的变化"><a href="#来自-OpenAPI-2-0-的变化" class="headerlink" title="来自 OpenAPI 2.0 的变化"></a>来自 OpenAPI 2.0 的变化</h3><p>如果您之前使用过 OpenAPI 2.0，以下是帮助您开始使用 OpenAPI 3.0 的更改摘要：</p>
<ul>
<li><code>securityDefinitions</code>被重命名为<code>securitySchemes</code>并移动到里面<code>components</code>。</li>
<li><code>type: basic</code>被替换为<code>type: http</code>和<code>scheme: basic</code>。</li>
<li>new<code>type: http</code>是所有HTTP安全方案的伞型，包括Basic、Bearer等，<code>scheme</code>关键字表示方案类型。</li>
<li>现在可以发送 API 密钥<code>in: cookie</code>。</li>
<li>添加了对 OpenID Connect Discovery ( <code>type: openIdConnect</code>) 的支持。</li>
<li>OAuth 2 安全方案现在可以定义多个<code>flows</code>.</li>
<li>OAuth 2 流程已重命名以匹配<a href="https://tools.ietf.org/html/rfc6749#section-1.3" target="_blank" rel="noopener">OAuth 2 规范</a>：<code>accessCode</code>现在<code>authorizationCode</code>和<code>application</code>现在<code>clientCredentials</code>。</li>
</ul>
<h3 id="描述安全"><a href="#描述安全" class="headerlink" title="描述安全"></a>描述安全</h3><p>使用<code>securitySchemes</code>和<code>security</code>关键字描述安全性。您用于<code>securitySchemes</code>定义 API 支持的所有安全方案，然后用于<code>security</code>将特定方案应用于整个 API 或单个操作。</p>
<h4 id="步骤-1-定义-securitySchemes"><a href="#步骤-1-定义-securitySchemes" class="headerlink" title="步骤 1. 定义 securitySchemes"></a>步骤 1. 定义 securitySchemes</h4><p>API 使用的所有安全方案都必须在全局<code>components/securitySchemes</code>部分中定义。本节包含命名安全方案的列表，其中每个方案可以是<code>type</code>：</p>
<ul>
<li><code>http</code>– 用于<a href="https://swagger.io/docs/specification/authentication/basic-authentication/" target="_blank" rel="noopener">Basic</a>、<a href="https://swagger.io/docs/specification/authentication/bearer-authentication/" target="_blank" rel="noopener">Bearer</a>和其他 HTTP 身份验证方案</li>
<li><code>apiKey</code>– 用于<a href="https://swagger.io/docs/specification/authentication/api-keys/" target="_blank" rel="noopener">API 密钥</a>和<a href="https://swagger.io/docs/specification/authentication/cookie-authentication/" target="_blank" rel="noopener">cookie 身份验证</a></li>
<li><code>oauth2</code>– 对于<a href="https://swagger.io/docs/specification/authentication/oauth2/" target="_blank" rel="noopener">OAuth 2</a></li>
<li><code>openIdConnect</code>– 用于<a href="https://swagger.io/docs/specification/authentication/openid-connect-discovery/" target="_blank" rel="noopener">OpenID Connect 发现</a></li>
</ul>
<p>安全方案所需的其他属性取决于<code>type</code>. 以下示例显示了如何定义各种安全方案。在<em>基本验证</em>，<em>BearerAuth</em>名称和其他人将被用来指从规范等地这些定义任意名称。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">securitySchemes</span><span class="token punctuation">:</span>
    <span class="token key atrule">BasicAuth</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> http
      <span class="token key atrule">scheme</span><span class="token punctuation">:</span> basic
    <span class="token key atrule">BearerAuth</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> http
      <span class="token key atrule">scheme</span><span class="token punctuation">:</span> bearer
    <span class="token key atrule">ApiKeyAuth</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> apiKey
      <span class="token key atrule">in</span><span class="token punctuation">:</span> header
      <span class="token key atrule">name</span><span class="token punctuation">:</span> X<span class="token punctuation">-</span>API<span class="token punctuation">-</span>Key
    <span class="token key atrule">OpenID</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> openIdConnect
      <span class="token key atrule">openIdConnectUrl</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.com/.well<span class="token punctuation">-</span>known/openid<span class="token punctuation">-</span>configuration
    <span class="token key atrule">OAuth2</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> oauth2
      <span class="token key atrule">flows</span><span class="token punctuation">:</span>
        <span class="token key atrule">authorizationCode</span><span class="token punctuation">:</span>
          <span class="token key atrule">authorizationUrl</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.com/oauth/authorize
          <span class="token key atrule">tokenUrl</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.com/oauth/token
          <span class="token key atrule">scopes</span><span class="token punctuation">:</span>
            <span class="token key atrule">read</span><span class="token punctuation">:</span> Grants read access
            <span class="token key atrule">write</span><span class="token punctuation">:</span> Grants write access
            <span class="token key atrule">admin</span><span class="token punctuation">:</span> Grants access to admin operations<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="步骤-2-应用安全性"><a href="#步骤-2-应用安全性" class="headerlink" title="步骤 2. 应用安全性"></a>步骤 2. 应用安全性</h4><p>在该<code>securitySchemes</code>部分定义安全方案后，您可以通过<code>security</code>分别在根级别或操作级别添加该部分来将它们应用于整个 API 或单个操作。在根级别使用时<code>security</code>，除非在操作级别被覆盖，否则将指定的安全方案全局应用于所有 API 操作。在以下示例中，可以使用 API 密钥或 OAuth 2 对 API 调用进行身份验证。<em>ApiKeyAuth</em>和<em>OAuth2</em>名称指的是之前在 中定义的方案<code>securitySchemes</code>。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">ApiKeyAuth</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">-</span> <span class="token key atrule">OAuth2</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> read
      <span class="token punctuation">-</span> write
<span class="token comment" spellcheck="true"># The syntax is:</span>
<span class="token comment" spellcheck="true"># - scheme name:</span>
<span class="token comment" spellcheck="true">#     - scope 1</span>
<span class="token comment" spellcheck="true">#     - scope 2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>对于每个方案，您指定 API 调用所需的安全范围列表（见<a href="https://swagger.io/docs/specification/authentication/#scopes" target="_blank" rel="noopener">下文</a>）。范围仅用于 OAuth 2 和 OpenID Connect Discovery；其他安全方案<code>[]</code>改为使用空数组。<code>security</code>可以在单个操作中覆盖全局以使用不同的身份验证类型、不同的 OAuth/OpenID 范围或根本不进行身份验证：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/billing_info</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Gets the account billing info
      <span class="token key atrule">security</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">OAuth2</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>admin<span class="token punctuation">]</span>   <span class="token comment" spellcheck="true"># Use OAuth with a different scope</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> OK
        <span class="token key atrule">'401'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Not authenticated
        <span class="token key atrule">'403'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Access token does not have the required scope
  <span class="token key atrule">/ping</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Checks if the server is running
      <span class="token key atrule">security</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>   <span class="token comment" spellcheck="true"># No security</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Server is up and running
        <span class="token key atrule">default</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Something is wrong<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="范围"><a href="#范围" class="headerlink" title="范围"></a>范围</h3><p>OAuth 2 和 OpenID Connect 使用<em>范围</em>来控制对各种用户资源的权限。例如，宠物商店的范围可能包括<code>read_pets</code>、<code>write_pets</code>、<code>read_orders</code>、<code>write_orders</code>、<code>admin</code>。申请时<code>security</code>，OAuth 2 和 OpenID Connect 对应的条目需要指定特定操作（如果<code>security</code>在操作级别使用）或所有 API 调用（如果<code>security</code>在根级别使用）所需的范围列表。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">OAuth2</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> scope1
      <span class="token punctuation">-</span> scope2
  <span class="token punctuation">-</span> <span class="token key atrule">OpenId</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> scopeA
      <span class="token punctuation">-</span> scopeB
  <span class="token punctuation">-</span> <span class="token key atrule">BasicAuth</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>在 OAuth 2 的情况下，使用的范围<code>security</code>必须事先在<code>securitySchemes</code>.</li>
<li>对于 OpenID Connect Discovery，可能的范围在 指定的发现端点中列出<code>openIdConnectUrl</code>。</li>
<li>其他方案（Basic、Bearer、API 密钥等）不使用范围，因此它们的<code>security</code>条目指定一个空数组<code>[]</code>。</li>
</ul>
<p>不同的操作通常需要不同的范围，例如读取、写入和管理。在这种情况下，您应该将作用域<code>security</code>应用于特定操作，而不是全局执行。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true"># Instead of this:</span>
<span class="token comment" spellcheck="true"># security:</span>
<span class="token comment" spellcheck="true">#   - OAuth2:</span>
<span class="token comment" spellcheck="true">#       - read</span>
<span class="token comment" spellcheck="true">#       - write</span>
<span class="token comment" spellcheck="true"># Do this:</span>
<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/users</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Get a list of users
      <span class="token key atrule">security</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">OAuth2</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>read<span class="token punctuation">]</span>     <span class="token comment" spellcheck="true"># &lt;------</span>
      <span class="token punctuation">...</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Add a user
      <span class="token key atrule">security</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">OAuth2</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>write<span class="token punctuation">]</span>    <span class="token comment" spellcheck="true"># &lt;------</span>
      <span class="token punctuation">...</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="使用多种身份验证类型"><a href="#使用多种身份验证类型" class="headerlink" title="使用多种身份验证类型"></a>使用多种身份验证类型</h3><p>某些 REST API 支持多种身份验证类型。该<code>security</code>部分允许您使用逻辑 OR 和 AND 组合安全要求以实现所需的结果。<code>security</code>使用以下逻辑：</p>
<pre><code>security:    # A OR B
  - A
  - B
security:    # A AND B
  - A
    B
security:    # (A AND B) OR (C AND D)
  - A
    B
  - C
    D</code></pre><p>也就是说，<code>security</code>是一个哈希映射数组，其中每个哈希映射包含一个或多个命名的安全方案。哈希图中的项目使用逻辑 AND 组合，数组项目使用逻辑 OR 组合。通过 OR 组合的安全方案是替代方案——任何一种都可以在给定的上下文中使用。通过 AND 组合的安全方案必须在同一请求中同时使用。在这里，我们可以使用基本身份验证或 API 密钥：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">basicAuth</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">-</span> <span class="token key atrule">apiKey</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>这里，API 要求在请求中包含一对 API 密钥：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">apiKey1</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token key atrule">apiKey2</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>在这里，我们可以使用 OAuth 2 或一对 API 密钥：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">oauth2</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>scope1<span class="token punctuation">,</span> scope2<span class="token punctuation">]</span>
  <span class="token punctuation">-</span> <span class="token key atrule">apiKey1</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token key atrule">apiKey2</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="参考-3"><a href="#参考-3" class="headerlink" title="参考"></a>参考</h3><p><a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.3.md#securitySchemeObject" target="_blank" rel="noopener">安全方案对象</a></p>
<p><a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.3.md#security-requirement-object" target="_blank" rel="noopener">安全需求对象</a></p>
<h2 id="基本认证"><a href="#基本认证" class="headerlink" title="基本认证"></a>基本认证</h2><p><a href="https://en.wikipedia.org/wiki/Basic_access_authentication" target="_blank" rel="noopener">基本身份验证</a>是一种内置于 HTTP 协议中的简单身份验证方案。客户端发送 HTTP 请求，<code>Authorization</code>头部包含单词<code>Basic</code>word 后跟一个空格和一个 base64 编码的字符串<code>username:password</code>。例如，授权为<code>demo / p@55w0rd</code>客户端将发送</p>
<pre><code>Authorization: Basic ZGVtbzpwQDU1dzByZA==</code></pre><p><strong>注意：</strong>因为 base64 很容易解码，所以基本身份验证只能与其他安全机制（例如 HTTPS/SSL）一起使用。</p>
<h3 id="描述基本身份验证"><a href="#描述基本身份验证" class="headerlink" title="描述基本身份验证"></a>描述基本身份验证</h3><p>使用 OpenAPI 3.0，您可以将基本身份验证描述如下：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">openapi</span><span class="token punctuation">:</span> 3.0.0
<span class="token punctuation">...</span>
<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">securitySchemes</span><span class="token punctuation">:</span>
    <span class="token key atrule">basicAuth</span><span class="token punctuation">:</span>     <span class="token comment" spellcheck="true"># &lt;-- arbitrary name for the security scheme</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> http
      <span class="token key atrule">scheme</span><span class="token punctuation">:</span> basic
<span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">basicAuth</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token comment" spellcheck="true"># &lt;-- use the same name here</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>第一部分<code>securitySchemes</code>定义了一个名为<em>basicAuth</em>（任意名称）的安全方案。这个方案必须有<code>type: http</code>和<code>scheme: basic</code>。<code>security</code>然后，该部分将基本身份验证应用于整个 API。方括号<code>[]</code>表示使用的安全范围；该列表为空，因为基本身份验证不使用范围。<code>security</code>可以全局设置（如上例所示）或操作级别。如果只有一部分操作需要基本身份验证，则后者很有用：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/something</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">security</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">basicAuth</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>基本身份验证还可以与其他身份验证方法结合使用，如<a href="https://swagger.io/docs/specification/authentication/#multiple" target="_blank" rel="noopener">使用多种身份验证类型中所述</a>。</p>
<h3 id="401响应"><a href="#401响应" class="headerlink" title="401响应"></a>401响应</h3><p>您还可以定义为缺少凭据或凭据不正确的请求返回的 401“未授权”响应。此响应包含<code>WWW-Authenticate</code>您可能想要提及的标头。与其他常见响应一样，401 响应可以在全局<code>components/responses</code>部分中定义并通过<code>$ref</code>.</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/something</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token punctuation">...</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token punctuation">...</span>
        <span class="token key atrule">'401'</span><span class="token punctuation">:</span>
           <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/responses/UnauthorizedError'</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token punctuation">...</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token punctuation">...</span>
        <span class="token key atrule">'401'</span><span class="token punctuation">:</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/responses/UnauthorizedError'</span>
<span class="token punctuation">...</span>
<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">responses</span><span class="token punctuation">:</span>
    <span class="token key atrule">UnauthorizedError</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Authentication information is missing or invalid
      <span class="token key atrule">headers</span><span class="token punctuation">:</span>
        <span class="token key atrule">WWW_Authenticate</span><span class="token punctuation">:</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>要了解有关<code>responses</code>语法的更多信息，请参阅<a href="https://swagger.io/docs/specification/describing-responses/" target="_blank" rel="noopener">描述响应</a>。</p>
<h2 id="API-密钥"><a href="#API-密钥" class="headerlink" title="API 密钥"></a>API 密钥</h2><p>一些 API 使用 API 密钥进行授权。API 密钥是客户端在进行 API 调用时提供的令牌。可以在查询字符串中发送密钥：</p>
<pre><code>GET /something?api_key=abcdef12345</code></pre><p>或作为请求标头：</p>
<pre><code>GET /something HTTP/1.1
X-API-Key: abcdef12345</code></pre><p>或作为<a href="https://swagger.io/docs/specification/authentication/cookie-authentication/" target="_blank" rel="noopener">cookie</a>：</p>
<pre><code>GET /something HTTP/1.1
Cookie: X-API-KEY=abcdef12345</code></pre><p>API 密钥应该是只有客户端和服务器知道的秘密。与<a href="https://swagger.io/docs/specification/authentication/basic-authentication/" target="_blank" rel="noopener">Basic authentication</a>一样 ，基于 API 密钥的身份验证仅在与其他安全机制（例如 HTTPS/SSL）一起使用时才被认为是安全的。</p>
<h3 id="描述-API-密钥"><a href="#描述-API-密钥" class="headerlink" title="描述 API 密钥"></a>描述 API 密钥</h3><p>在 OpenAPI 3.0 中，API 密钥描述如下：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">openapi</span><span class="token punctuation">:</span> 3.0.0
<span class="token punctuation">...</span>
<span class="token comment" spellcheck="true"># 1) Define the key name and location</span>
<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">securitySchemes</span><span class="token punctuation">:</span>
    <span class="token key atrule">ApiKeyAuth</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># arbitrary name for the security scheme</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> apiKey
      <span class="token key atrule">in</span><span class="token punctuation">:</span> header       <span class="token comment" spellcheck="true"># can be "header", "query" or "cookie"</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> X<span class="token punctuation">-</span>API<span class="token punctuation">-</span>KEY  <span class="token comment" spellcheck="true"># name of the header, query parameter or cookie</span>
<span class="token comment" spellcheck="true"># 2) Apply the API key globally to all operations</span>
<span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">ApiKeyAuth</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>     <span class="token comment" spellcheck="true"># use the same name as under securitySchemes</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>此示例定义了一个名为<code>X-API-Key</code>作为请求标头发送的 API 密钥<code>X-API-Key: &lt;key&gt;</code>。密钥名称<em>ApiKeyAuth</em>是安全方案的任意名称（不要与由密钥指定的 API 密钥名称混淆<code>name</code>）。部分中再次使用名称<em>ApiKeyAuth</em><code>security</code>将此安全方案应用于 API。<strong>注意：</strong><code>securitySchemes</code>仅此部分是不够的；您还必须使用<code>security</code>API 密钥才能生效。<code>security</code>也可以在操作级别而不是全局设置。如果只有一部分操作需要 API 密钥，这很有用：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/something</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token comment" spellcheck="true"># Operation-specific security:</span>
      <span class="token key atrule">security</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">ApiKeyAuth</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> OK (successfully authenticated)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>请注意，可以在一个 API 中支持多种授权类型。请参阅<a href="https://swagger.io/docs/specification/authentication/#multiple" target="_blank" rel="noopener">使用多种身份验证类型</a>。</p>
<h3 id="多个-API-密钥"><a href="#多个-API-密钥" class="headerlink" title="多个 API 密钥"></a>多个 API 密钥</h3><p>某些 API 使用一对安全密钥，例如 API Key 和 App ID。要指定键一起使用（如在逻辑 AND 中），请将它们列在数组中的同一数组项中<code>security</code>：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">securitySchemes</span><span class="token punctuation">:</span>
    <span class="token key atrule">apiKey</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> apiKey
      <span class="token key atrule">in</span><span class="token punctuation">:</span> header
      <span class="token key atrule">name</span><span class="token punctuation">:</span> X<span class="token punctuation">-</span>API<span class="token punctuation">-</span>KEY
    <span class="token key atrule">appId</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> apiKey
      <span class="token key atrule">in</span><span class="token punctuation">:</span> header
      <span class="token key atrule">name</span><span class="token punctuation">:</span> X<span class="token punctuation">-</span>APP<span class="token punctuation">-</span>ID
<span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">apiKey</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token key atrule">appId</span><span class="token punctuation">:</span>  <span class="token punctuation">[</span><span class="token punctuation">]</span>   <span class="token comment" spellcheck="true"># &lt;-- no leading dash (-)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>请注意与以下内容的区别：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">apiKey</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">-</span> <span class="token key atrule">appId</span><span class="token punctuation">:</span>  <span class="token punctuation">[</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>这意味着可以使用任一键（如逻辑 OR）。有关更多示例，请参阅<a href="https://swagger.io/docs/specification/authentication/#multiple" target="_blank" rel="noopener">使用多种身份验证类型</a>。</p>
<h3 id="401响应-1"><a href="#401响应-1" class="headerlink" title="401响应"></a>401响应</h3><p>您可以定义为缺少 API 密钥或 API 密钥无效的请求返回的 401“未授权”响应。此响应包含<code>WWW-Authenticate</code>您可能想要提及的标头。与其他常见响应一样，401 响应可以在全局<code>components/responses</code>部分中定义并通过<code>$ref</code>.</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/something</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token punctuation">...</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token punctuation">...</span>
        <span class="token key atrule">'401'</span><span class="token punctuation">:</span>
           <span class="token key atrule">$ref</span><span class="token punctuation">:</span> "<span class="token comment" spellcheck="true">#/components/responses/UnauthorizedError"</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token punctuation">...</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token punctuation">...</span>
        <span class="token key atrule">'401'</span><span class="token punctuation">:</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> "<span class="token comment" spellcheck="true">#/components/responses/UnauthorizedError"</span>
<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">responses</span><span class="token punctuation">:</span>
    <span class="token key atrule">UnauthorizedError</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> API key is missing or invalid
      <span class="token key atrule">headers</span><span class="token punctuation">:</span>
        <span class="token key atrule">WWW_Authenticate</span><span class="token punctuation">:</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>要了解有关描述响应的更多信息，请参阅<a href="https://swagger.io/docs/specification/describing-responses/" target="_blank" rel="noopener">描述响应</a>。</p>
<h2 id="承载认证"><a href="#承载认证" class="headerlink" title="承载认证"></a>承载认证</h2><p><strong>不记名身份验证</strong>（也称为<strong>令牌身份验证</strong>）是一种<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication" target="_blank" rel="noopener">HTTP 身份验证方案</a>，它涉及称为不记名令牌的安全令牌。“Bearer authentication”这个名字可以理解为“给这个token的持有者提供访问权”。不记名令牌是一个神秘的字符串，通常由服务器响应登录请求而生成。<code>Authorization</code>向受保护资源发出请求时，客户端必须在标头中发送此令牌：</p>
<pre><code>Authorization: Bearer &lt;token&gt;</code></pre><p>承载认证方案被作为部分最初创建<a href="https://swagger.io/docs/specification/authentication/oauth2/" target="_blank" rel="noopener">的OAuth 2.0</a>在<a href="https://tools.ietf.org/html/rfc6750" target="_blank" rel="noopener">RFC 6750</a>，但有时也用自身。与<a href="https://swagger.io/docs/specification/authentication/basic-authentication/" target="_blank" rel="noopener">Basic authentication</a>类似，Bearer 身份验证只能通过 HTTPS (SSL) 使用。</p>
<h3 id="描述承载认证"><a href="#描述承载认证" class="headerlink" title="描述承载认证"></a>描述承载认证</h3><p>在 OpenAPI 3.0 中，承载身份验证是一种带有<code>type: http</code>和的安全方案<code>scheme: bearer</code>。您首先需要在 下定义安全方案<code>components/securitySchemes</code>，然后使用<code>security</code>关键字将此方案应用于所需的范围 - 全局（如下例所示）或特定操作：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">openapi</span><span class="token punctuation">:</span> 3.0.0
<span class="token punctuation">...</span>
<span class="token comment" spellcheck="true"># 1) Define the security scheme type (HTTP bearer)</span>
<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">securitySchemes</span><span class="token punctuation">:</span>
    <span class="token key atrule">bearerAuth</span><span class="token punctuation">:</span>            <span class="token comment" spellcheck="true"># arbitrary name for the security scheme</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> http
      <span class="token key atrule">scheme</span><span class="token punctuation">:</span> bearer
      <span class="token key atrule">bearerFormat</span><span class="token punctuation">:</span> JWT    <span class="token comment" spellcheck="true"># optional, arbitrary value for documentation purposes</span>
<span class="token comment" spellcheck="true"># 2) Apply the security globally to all operations</span>
<span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">bearerAuth</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>         <span class="token comment" spellcheck="true"># use the same name as above</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>可选<code>bearerFormat</code>是一个任意字符串，用于指定不记名令牌的格式。由于不记名令牌通常由服务器生成，<code>bearerFormat</code>因此主要用于文档目的，作为对客户端的提示。在上面的例子中，它是“JWT”，意思是<a href="https://jwt.io/" target="_blank" rel="noopener">JSON Web Token </a>。方括号<code>[]</code>中<em>bearerAuth：[]</em>包含范围所需的API调用的安全问题列表。该列表为空，因为范围仅用于 OAuth 2 和<a href="https://swagger.io/docs/specification/authentication/openid-connect-discovery/" target="_blank" rel="noopener">OpenID Connect</a>。在上面的示例中，Bearer 身份验证全局应用于整个 API。如果您只需要将其应用于少数操作，请添加<code>security</code>操作级别而不是全局执行此操作：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/something</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">security</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">bearerAuth</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>承载身份验证还可以与其他身份验证方法结合使用，如<a href="https://swagger.io/docs/specification/authentication/#multiple" target="_blank" rel="noopener">使用多种身份验证类型中所述</a>。</p>
<h3 id="401响应-2"><a href="#401响应-2" class="headerlink" title="401响应"></a>401响应</h3><p>您还可以定义为不包含正确承载令牌的请求返回的 401“未授权”响应。由于 401 响应将被多个操作使用，您可以在全局<code>components/responses</code>部分定义它并通过<code>$ref</code>.</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/something</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token punctuation">...</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'401'</span><span class="token punctuation">:</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/responses/UnauthorizedError'</span>
        <span class="token punctuation">...</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token punctuation">...</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'401'</span><span class="token punctuation">:</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/responses/UnauthorizedError'</span>
        <span class="token punctuation">...</span>
<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">responses</span><span class="token punctuation">:</span>
    <span class="token key atrule">UnauthorizedError</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Access token is missing or invalid<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="OAuth-2-0"><a href="#OAuth-2-0" class="headerlink" title="OAuth 2.0"></a><a href="https://swagger.io/docs/specification/authentication/oauth2/" target="_blank" rel="noopener">OAuth 2.0</a></h2><h2 id="OpenID-Connect-Discovery"><a href="#OpenID-Connect-Discovery" class="headerlink" title="OpenID Connect Discovery"></a><a href="https://swagger.io/docs/specification/authentication/openid-connect-discovery/" target="_blank" rel="noopener">OpenID Connect Discovery</a></h2><h2 id="Cookie-Authentication"><a href="#Cookie-Authentication" class="headerlink" title="Cookie Authentication"></a><a href="https://swagger.io/docs/specification/authentication/cookie-authentication/" target="_blank" rel="noopener">Cookie Authentication</a></h2><h2 id="链接-1"><a href="#链接-1" class="headerlink" title="链接"></a>链接</h2><p>链接是 OpenAPI 3.0 的新特性之一。使用链接，您可以描述一个操作返回的各种值如何用作其他操作的输入。这样，链接提供了操作之间的已知关系和遍历机制。链接的概念有点类似于<a href="https://smartbear.com/learn/api-design/what-is-hypermedia/" target="_blank" rel="noopener">超媒体</a>，但 OpenAPI 链接不需要实际响应中存在的链接信息。</p>
<h3 id="何时使用链接？"><a href="#何时使用链接？" class="headerlink" title="何时使用链接？"></a>何时使用链接？</h3><p>考虑“创建用户”操作：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml">POST /users HTTP/1.1
<span class="token key atrule">Host</span><span class="token punctuation">:</span> example.com
<span class="token key atrule">Content-Type</span><span class="token punctuation">:</span> application/json
<span class="token punctuation">{</span>
  <span class="token key atrule">"name"</span><span class="token punctuation">:</span> <span class="token string">"Alex"</span><span class="token punctuation">,</span>
  <span class="token key atrule">"age"</span><span class="token punctuation">:</span> <span class="token number">27</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>它返回创建的用户的 ID：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml">HTTP/1.1 201 Created
<span class="token key atrule">Content-Type</span><span class="token punctuation">:</span> application/json
<span class="token punctuation">{</span>
  <span class="token key atrule">"id"</span><span class="token punctuation">:</span> <span class="token number">305</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>然后可以使用此用户 ID 读取、更新或删除用户：、和。使用链接，您可以指定“创建用户”返回的值可以用作“获取用户”、“更新用户”和“删除用户”的参数。另一个例子是通过游标进行分页，其中响应包括一个游标来检索下一个数据集：<code>GET /users/305``PATCH /users/305``DELETE /users/305``id</code></p>
<pre class="line-numbers language-yaml"><code class="language-yaml">GET /items<span class="token punctuation">?</span>limit=100
 ⇩
<span class="token punctuation">{</span>
  <span class="token key atrule">"metadata"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token key atrule">"previous"</span><span class="token punctuation">:</span> <span class="token null important">null</span><span class="token punctuation">,</span>
    <span class="token key atrule">"next"</span><span class="token punctuation">:</span> <span class="token string">"Q1MjAwNz"</span><span class="token punctuation">,</span>
    <span class="token key atrule">"count"</span><span class="token punctuation">:</span> <span class="token number">10</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">...</span>
<span class="token punctuation">}</span>
 ⇩
GET /items<span class="token punctuation">?</span>cursor=Q1MjAwNz<span class="token important">&amp;limit</span>=100<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>但是，链接关系不一定在同一资源内，甚至不一定在同一 API 规范内。</p>
<h3 id="定义链接"><a href="#定义链接" class="headerlink" title="定义链接"></a>定义链接</h3><p>链接在<code>links</code>每个响应的部分中定义：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Created
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token punctuation">...</span>
          <span class="token key atrule">links</span><span class="token punctuation">:</span>   <span class="token comment" spellcheck="true"># &lt;----</span>
            <span class="token punctuation">...</span>
        <span class="token key atrule">'400'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Bad request
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token punctuation">...</span>
          <span class="token key atrule">links</span><span class="token punctuation">:</span>   <span class="token comment" spellcheck="true"># &lt;----</span>
            <span class="token punctuation">...</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>为了更好地理解这一点，让我们看一个完整的例子。该API定义了“创建用户”和“获取用户”操作，“创建用户”的结果作为“获取用户”的输入。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">openapi</span><span class="token punctuation">:</span> 3.0.0
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 0.0.0
  <span class="token key atrule">title</span><span class="token punctuation">:</span> Links example
<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/users</span><span class="token punctuation">:</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Creates a user and returns the user ID
      <span class="token key atrule">operationId</span><span class="token punctuation">:</span> createUser
      <span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">description</span><span class="token punctuation">:</span> A JSON object that contains the user name and age.
        <span class="token key atrule">content</span><span class="token punctuation">:</span>
          <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/User'</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'201'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Created
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                  <span class="token key atrule">id</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
                    <span class="token key atrule">format</span><span class="token punctuation">:</span> int64
                    <span class="token key atrule">description</span><span class="token punctuation">:</span> ID of the created user.
          <span class="token comment" spellcheck="true"># -----------------------------------------------------</span>
          <span class="token comment" spellcheck="true"># Links</span>
          <span class="token comment" spellcheck="true"># -----------------------------------------------------</span>
          <span class="token key atrule">links</span><span class="token punctuation">:</span>
            <span class="token key atrule">GetUserByUserId</span><span class="token punctuation">:</span>   <span class="token comment" spellcheck="true"># &lt;---- arbitrary name for the link</span>
              <span class="token key atrule">operationId</span><span class="token punctuation">:</span> getUser
              <span class="token comment" spellcheck="true"># or</span>
              <span class="token comment" spellcheck="true"># operationRef: '#/paths/~1users~1{userId}/get'</span>
              <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
                <span class="token key atrule">userId</span><span class="token punctuation">:</span> '$response.body<span class="token comment" spellcheck="true">#/id'</span>
              <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token punctuation">></span><span class="token scalar string">
                The `id` value returned in the response can be used as
                the `userId` parameter in `GET /users/{userId}`.</span>
          <span class="token comment" spellcheck="true"># -----------------------------------------------------</span>
  /users/<span class="token punctuation">{</span>userId<span class="token punctuation">}</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Gets a user by ID
      <span class="token key atrule">operationId</span><span class="token punctuation">:</span> getUser
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> path
          <span class="token key atrule">name</span><span class="token punctuation">:</span> userId
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
            <span class="token key atrule">format</span><span class="token punctuation">:</span> int64
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> A User object
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/User'</span>
<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
    <span class="token key atrule">User</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> object
      <span class="token key atrule">properties</span><span class="token punctuation">:</span>
        <span class="token key atrule">id</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
          <span class="token key atrule">format</span><span class="token punctuation">:</span> int64
          <span class="token key atrule">readOnly</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>该<code>links</code>部分包含命名链接定义，在本例中 - 只有一个名为<em>GetUserByUserId 的</em>链接。链接名称只能包含以下字符：</p>
<pre><code>A..Z a..z 0..9 . _ -</code></pre><p>每个链接包含以下信息：</p>
<ul>
<li><a href="https://swagger.io/docs/specification/links/#operationId" target="_blank" rel="noopener"><code>operationId</code></a>或<a href="https://swagger.io/docs/specification/links/#operationRef" target="_blank" rel="noopener"><code>operationRef</code></a>指定目标操作。它可以是当前或外部 API 规范中的相同操作或不同操作。<code>operationId</code>仅用于本地链接，<code>operationRef</code>可以链接到本地和外部操作。</li>
<li><a href="https://swagger.io/docs/specification/links/#parameters" target="_blank" rel="noopener"><code>parameters</code></a>和/或<a href="https://swagger.io/docs/specification/links/#requestBody" target="_blank" rel="noopener"><code>requestBody</code></a>指定要传递给目标操作的值的部分。<a href="https://swagger.io/docs/specification/links/#runtime-expressions" target="_blank" rel="noopener">运行时表达式</a>语法用于从父操作中提取这些值。</li>
<li>（可选）<a href="https://swagger.io/docs/specification/links/#server" target="_blank" rel="noopener"><code>server</code></a>目标操作应使用的 ，如果它与默认服务器不同。</li>
<li>（可选）<code>description</code>此链接的A。<a href="http://commonmark.org/help/" target="_blank" rel="noopener">CommonMark</a>语法可用于富文本表示。</li>
</ul>
<p>本页的其余部分将详细介绍这些关键字。</p>
<p><img src="/images/loading.gif" data-original="../images/development/links.png" alt=""></p>
<h3 id="操作编号-1"><a href="#操作编号-1" class="headerlink" title="操作编号"></a>操作编号</h3><p>如果已<a href="https://swagger.io/docs/specification/paths-and-operations/#operationid" target="_blank" rel="noopener"><code>operationId</code></a>指定目标操作，则链接可以指向此 ID - 如上图所示。这种方法只能用于本地链接，因为这些<code>operationId</code>值是在当前 API 规范的范围内解析的。</p>
<h3 id="操作参考"><a href="#操作参考" class="headerlink" title="操作参考"></a>操作参考</h3><p><code>operationRef</code>不可用时可以使用<code>operationId</code>。<code>operationRef</code>是使用 JSON Reference 语法对目标操作的引用 - 与<a href="https://swagger.io/docs/specification/using-ref/" target="_blank" rel="noopener"><code>$ref</code></a>关键字使用的相同。引用可以是本地的（在当前 API 规范内）：</p>
<pre><code>operationRef: '#/paths/~1users~1{userId}/get'</code></pre><p>或外部：</p>
<pre><code>operationRef: 'https://anotherapi.com/openapi.yaml#/paths/~1users~1{userId}/get'
operationRef: './operations/getUser.yaml'</code></pre><p>在这里，字符串<code>#/paths/~1users~1{userId}/get</code>实际上意味着<code>#/paths//users/{userId}/get</code>，但路径名中的内斜线 / 需要转义，<code>~1</code>因为它们是特殊字符。</p>
<pre><code>#/paths/~1users~1{userId}/get
   │       │               │
   │       │               │
paths:     │               │
  /users/{userId}:         │
    get:  ─────────────────┘
      ...</code></pre><p>此语法可能难以阅读，因此我们建议仅将其用于外部链接。在本地链接的情况下，更容易分配<code>operationId</code>给所有操作并链接到这些 ID。</p>
<h3 id="参数和请求体"><a href="#参数和请求体" class="headerlink" title="参数和请求体"></a>参数和请求体</h3><p>链接最重要的部分是根据原始操作的值计算目标操作的输入。这就是关键字<code>parameters</code>和<code>requestBody</code>关键字的用途。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">links</span><span class="token punctuation">:</span>
            <span class="token comment" spellcheck="true"># GET /users/{userId}</span>
            <span class="token key atrule">GetUserByUserId</span><span class="token punctuation">:</span>
              <span class="token key atrule">operationId</span><span class="token punctuation">:</span> getUser
              <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
                <span class="token key atrule">userId</span><span class="token punctuation">:</span> '$response.body<span class="token comment" spellcheck="true">#/id'</span>
            <span class="token comment" spellcheck="true"># POST /users/{userId}/manager with the manager ID in the request body</span>
            <span class="token key atrule">SetManagerId</span><span class="token punctuation">:</span>
              <span class="token key atrule">operationId</span><span class="token punctuation">:</span> setUserManager
              <span class="token key atrule">requestBody</span><span class="token punctuation">:</span> '$response.body<span class="token comment" spellcheck="true">#/id'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>语法是<code>*parameter_name: value*</code>or <em><code>requestBody: value</code><em>。参数名称和请求正文是目标操作的参数名称和请求体。无需列出所有参数，只需列出链接所需的参数即可。同样，<code>requestBody</code>仅当目标操作具有<a href="https://swagger.io/docs/specification/describing-request-body/" target="_blank" rel="noopener">正文</a>并且链接目的是定义正文内容时才使用。如果两个或多个参数具有相同的名称，请在名称前加上参数位置 - *path</em>、<em>query</em>、*header</em> 或<em>cookie</em>，如下所示：</p>
<pre><code>parameters:
  path.id:  ...
  query.id: ...</code></pre><p>参数 和 的值<code>requestBody</code> 可以通过以下方式定义：</p>
<ul>
<li><a href="https://swagger.io/docs/specification/links/#runtime-expressions" target="_blank" rel="noopener">运行时表达式</a>，例如 <code>$response.body#/id</code>，引用原始操作的请求或响应中的值，</li>
<li>包含嵌入式运行时表达式的字符串，例如 <code>ID_{$response.body#/id}</code>，</li>
<li>硬编码值——字符串、数字、数组等，例如<code>mystring</code>or <code>true</code>。</li>
</ul>
<p>如果您需要为目标操作传递评估参数和硬编码参数的特定组合，您通常会使用常量值。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/date_ranges</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Get relative date ranges for the report.
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> OK
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">example</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Today<span class="token punctuation">,</span> Yesterday<span class="token punctuation">,</span> LastWeek<span class="token punctuation">,</span> ThisMonth<span class="token punctuation">]</span>
          <span class="token key atrule">links</span><span class="token punctuation">:</span>
            <span class="token key atrule">ReportRelDate</span><span class="token punctuation">:</span>
              <span class="token key atrule">operationId</span><span class="token punctuation">:</span> getReport
              <span class="token comment" spellcheck="true"># Call "getReport" with the `rdate` parameter and with empty `start_date` and `end_date`</span>
              <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
                <span class="token key atrule">rdate</span><span class="token punctuation">:</span> '$response.body<span class="token comment" spellcheck="true">#/1'</span>
                <span class="token key atrule">start_date</span><span class="token punctuation">:</span> <span class="token string">''</span>
                <span class="token key atrule">end_date</span><span class="token punctuation">:</span> <span class="token string">''</span>
  <span class="token comment" spellcheck="true"># GET /report?rdate=...</span>
  <span class="token comment" spellcheck="true"># GET /report?start_date=...&amp;end_date=...</span>
  <span class="token key atrule">/report</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">operationId</span><span class="token punctuation">:</span> getReport
      <span class="token punctuation">...</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="运行时表达式语法"><a href="#运行时表达式语法" class="headerlink" title="运行时表达式语法"></a>运行时表达式语法</h3><p>OpenAPI 运行时表达式是用于从操作的请求和响应中提取各种值的语法。链接使用运行时表达式来指定要传递给链接操作的参数值。这些表达式被称为“运行时”，因为这些值是从 API 调用的实际请求和响应中提取的，而不是API 规范中提供的<a href="https://swagger.io/docs/specification/adding-examples/" target="_blank" rel="noopener">示例值</a>。下表描述了运行时表达式语法。所有的表述是指在<em>当前操作</em>，其中<code>links</code>被定义。</p>
<table>
<thead>
<tr>
<th>表达</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>$url</code></td>
<td>完整的请求 URL，包括查询字符串。</td>
</tr>
<tr>
<td><code>$method</code></td>
<td>请求 HTTP 方法，例如 GET 或 POST。</td>
</tr>
<tr>
<td><code>$request.query.*param_name*</code></td>
<td>指定查询参数的值。该参数必须在操作的<code>parameters</code>部分中定义，否则无法对其进行评估。参数名称区分大小写。</td>
</tr>
<tr>
<td><code>$request.path.*param_name*</code></td>
<td>指定路径参数的值。该参数必须在操作的<code>parameters</code>部分中定义，否则无法对其进行评估。参数名称区分大小写。</td>
</tr>
<tr>
<td><code>$request.header.*header_name*</code></td>
<td>指定请求头的值。此标头必须在操作的<code>parameters</code>部分中定义，否则无法对其进行评估。标题名称不区分大小写。</td>
</tr>
<tr>
<td><code>$request.body</code></td>
<td>整个请求正文。</td>
</tr>
<tr>
<td><code>$request.body*#/foo/bar*</code></td>
<td>由 JSON 指针指定的请求正文的一部分。</td>
</tr>
<tr>
<td><code>$statusCode</code></td>
<td>响应的 HTTP 状态代码。例如，200 或 404。</td>
</tr>
<tr>
<td><code>$response.header.*header_name*</code></td>
<td>指定响应头的完整值，作为字符串。标题名称不区分大小写。不需要在响应的<code>headers</code>部分中定义标头。</td>
</tr>
<tr>
<td><code>$response.body</code></td>
<td>整个响应体。</td>
</tr>
<tr>
<td><code>$response.body*#/foo/bar*</code></td>
<td>由 JSON 指针指定的请求正文的一部分。</td>
</tr>
<tr>
<td><code>foo{$request.path.id}bar</code></td>
<td>将表达式<code>{}</code>括在花括号中以将其嵌入到字符串中。</td>
</tr>
</tbody></table>
<p>笔记：</p>
<ul>
<li>除非另有说明，否则计算出的表达式与引用的值具有相同的类型。</li>
<li>如果无法计算运行时表达式，则不会将参数值传递给目标操作。</li>
</ul>
<h4 id="例子-2"><a href="#例子-2" class="headerlink" title="例子"></a>例子</h4><p>考虑以下请求和响应：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml">GET /users<span class="token punctuation">?</span>limit=2<span class="token important">&amp;total</span>=true
<span class="token key atrule">Host</span><span class="token punctuation">:</span> api.example.com
<span class="token key atrule">Accept</span><span class="token punctuation">:</span> application/json

HTTP/1.1 200 OK
<span class="token key atrule">Content-Type</span><span class="token punctuation">:</span> application/json
<span class="token key atrule">X-Total-Count</span><span class="token punctuation">:</span> <span class="token number">37</span>
<span class="token punctuation">{</span>
  <span class="token key atrule">"prev_offset"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token key atrule">"next_offset"</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token key atrule">"users"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token key atrule">"id"</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token key atrule">"name"</span><span class="token punctuation">:</span> <span class="token string">"Alice"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token key atrule">"id"</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token key atrule">"name"</span><span class="token punctuation">:</span> <span class="token string">"Bob"</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>下面是运行时表达式的一些示例以及它们计算的值：</p>
<table>
<thead>
<tr>
<th>表达</th>
<th>结果</th>
<th>评论</th>
</tr>
</thead>
<tbody><tr>
<td><code>$url</code></td>
<td><a href="http://api.example.com/users?limit=2&amp;total=true" target="_blank" rel="noopener">http://api.example.com/users?limit=2&amp;total=true</a></td>
<td></td>
</tr>
<tr>
<td><code>$method</code></td>
<td>得到</td>
<td></td>
</tr>
<tr>
<td><code>$request.query.total</code></td>
<td>真的</td>
<td><code>total</code> 必须定义为查询参数。</td>
</tr>
<tr>
<td><code>$statusCode</code></td>
<td>200</td>
<td></td>
</tr>
<tr>
<td><code>$response.header.x-total-count</code></td>
<td>37</td>
<td>假设<code>X-Total-Count</code>定义为响应头。标题名称不区分大小写。</td>
</tr>
<tr>
<td><code>$response.body#/next_offset</code></td>
<td>2</td>
<td></td>
</tr>
<tr>
<td><code>$response.body#/users/0</code></td>
<td><code>{"id": 1, "name": "Alice"}</code></td>
<td>JSON 指针（<code>#/…</code>部分）使用基于 0 的索引来访问数组元素。但是没有通配符语法，因此无效。<code>$response.body#/users/*****/id</code></td>
</tr>
<tr>
<td><code>$response.body#/users/1</code></td>
<td><code>{"id": 2, "name": "Bob"}</code></td>
<td></td>
</tr>
<tr>
<td><code>$response.body#/users/1/name</code></td>
<td>鲍勃</td>
<td></td>
</tr>
<tr>
<td><code>ID_{$response.body#/users/1/id}</code></td>
<td>ID_2</td>
<td></td>
</tr>
</tbody></table>
<h3 id="服务器-1"><a href="#服务器-1" class="headerlink" title="服务器"></a>服务器</h3><p>默认情况下，目标操作是针对其默认<a href="https://swagger.io/docs/specification/api-host-and-base-path/" target="_blank" rel="noopener">服务器</a>调用的- global<code>servers</code>或 operation-specific <code>servers</code>。但是，服务器可以被使用<code>server</code>关键字的链接覆盖。<code>server</code>与全局服务器具有相同的字段，但它是单个服务器而不是数组。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//api.example.com
<span class="token punctuation">...</span>
          <span class="token key atrule">links</span><span class="token punctuation">:</span>
            <span class="token key atrule">GetUserByUserId</span><span class="token punctuation">:</span>
              <span class="token key atrule">operationId</span><span class="token punctuation">:</span> getUser
              <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
                <span class="token key atrule">userId</span><span class="token punctuation">:</span> '$response.body<span class="token comment" spellcheck="true">#/id'</span>
              <span class="token key atrule">server</span><span class="token punctuation">:</span>
                <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//new<span class="token punctuation">-</span>api.example.com/v2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="重用链接"><a href="#重用链接" class="headerlink" title="重用链接"></a>重用链接</h3><p>链接可以内联定义（如在前面的示例中），或放置在全局<code>components/links</code>部分中并<code>links</code>通过<a href="https://swagger.io/docs/specification/using-ref/" target="_blank" rel="noopener"><code>$ref</code></a>. 如果多个操作以相同的方式链接到另一个操作，这会很有用 - 引用有助于减少代码重复。在以下示例中，“创建用户”和“更新用户”操作都在响应正文中返回用户 ID，该 ID 用于“获取用户”操作。源操作重用来自 的相同链接定义<code>components/links</code>。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/users</span><span class="token punctuation">:</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Create a user
      <span class="token key atrule">operationId</span><span class="token punctuation">:</span> createUser
      <span class="token punctuation">...</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'201'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Created
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                  <span class="token key atrule">id</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
                    <span class="token key atrule">format</span><span class="token punctuation">:</span> int64
                    <span class="token key atrule">description</span><span class="token punctuation">:</span> ID of the created user.
          <span class="token key atrule">links</span><span class="token punctuation">:</span>
            <span class="token key atrule">GetUserByUserId</span><span class="token punctuation">:</span>
              <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/links/GetUserByUserId'    # &lt;-------</span>
  /user/<span class="token punctuation">{</span>userId<span class="token punctuation">}</span><span class="token punctuation">:</span>
    <span class="token key atrule">patch</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Update user
      <span class="token key atrule">operationId</span><span class="token punctuation">:</span> updateUser
      <span class="token punctuation">...</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> The updated user object
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/User'</span>
          <span class="token key atrule">links</span><span class="token punctuation">:</span>
            <span class="token key atrule">GetUserByUserId</span><span class="token punctuation">:</span>
              <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/links/GetUserByUserId'    # &lt;-------</span>

    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Get a user by ID
      <span class="token key atrule">operationId</span><span class="token punctuation">:</span> getUser
      <span class="token punctuation">...</span>
<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">links</span><span class="token punctuation">:</span>
    <span class="token key atrule">GetUserByUserId</span><span class="token punctuation">:</span>   <span class="token comment" spellcheck="true"># &lt;----- The $ref's above point here</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token punctuation">></span><span class="token scalar string">
        The `id` value returned in the response can be used as
        the `userId` parameter in `GET /users/{userId}`.</span>
      <span class="token key atrule">operationId</span><span class="token punctuation">:</span> getUser
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token key atrule">userId</span><span class="token punctuation">:</span> '$response.body<span class="token comment" spellcheck="true">#/id'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="参考-4"><a href="#参考-4" class="headerlink" title="参考"></a>参考</h3><p><a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.3.md#linkObject" target="_blank" rel="noopener">链接对象</a></p>
<h2 id="回调"><a href="#回调" class="headerlink" title="回调"></a>回调</h2><p>在 OpenAPI 3 规范中，您可以定义<strong>回调</strong>– 异步、带外请求，您的服务将发送到其他服务以响应某些事件。这有助于您改进 API 提供给客户的工作流程。回调的一个典型例子是订阅功能——用户订阅你服务的某些事件，并在这个或那个事件发生时收到通知。例如，电子商店可以在每次购买时向经理发送通知。这些通知将是“带外”的，也就是说，它们将通过访问者工作的连接之外的连接，并且它们将是异步的，因为它们将超出常规的请求-响应流。在 OpenAPI 3 中，您可以定义“订阅”操作的格式以及回调消息的格式和对这些消息的预期响应。</p>
<h3 id="回调示例"><a href="#回调示例" class="headerlink" title="回调示例"></a>回调示例</h3><p>让我们创建一个回调定义——一个简单的 webhook 通知。假设您的 API 提供了一个<code>POST /subscribe</code>需要在请求正文中包含回调 URL的操作：</p>
<pre><code>POST /subscribe
Host: my.example.com
Content-Type: application/json
{
  "callbackUrl": "https://myserver.com/send/callback/here"
}</code></pre><p>API 确认订阅——</p>
<pre><code>HTTP/1.1 201 Created</code></pre><p>— 稍后发送有关某些事件的通知：</p>
<pre><code>POST /send/callback/here
Host: myserver.com
Content-Type: application/json
{
  "message": "Something happened"
}</code></pre><p>现在让我们定义<code>/subscribe</code>操作：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">openapi</span><span class="token punctuation">:</span> 3.0.0
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 0.0.0
  <span class="token key atrule">title</span><span class="token punctuation">:</span> test
<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/subscribe</span><span class="token punctuation">:</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Subscribe to a webhook
      <span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">content</span><span class="token punctuation">:</span>
          <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token key atrule">type</span><span class="token punctuation">:</span> object
              <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                <span class="token key atrule">callbackUrl</span><span class="token punctuation">:</span>   <span class="token comment" spellcheck="true"># Callback URL</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                  <span class="token key atrule">format</span><span class="token punctuation">:</span> uri
                  <span class="token key atrule">example</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//myserver.com/send/callback/here
              <span class="token key atrule">required</span><span class="token punctuation">:</span>
                <span class="token punctuation">-</span> callbackUrl
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'201'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Webhook created<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>现在让我们在这个操作中添加 callbacks 关键字来定义一个回调：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/subscribe</span><span class="token punctuation">:</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Subscribe to a webhook
      <span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        …
      <span class="token key atrule">callbacks</span><span class="token punctuation">:</span>   <span class="token comment" spellcheck="true"># Callback definition</span>
        <span class="token key atrule">myEvent</span><span class="token punctuation">:</span>   <span class="token comment" spellcheck="true"># Event name</span>
          '<span class="token punctuation">{</span>$request.body<span class="token comment" spellcheck="true">#/callbackUrl}':   # The callback URL,</span>
                                            <span class="token comment" spellcheck="true"># Refers to the passed URL</span>
            <span class="token key atrule">post</span><span class="token punctuation">:</span>
              <span class="token key atrule">requestBody</span><span class="token punctuation">:</span>   <span class="token comment" spellcheck="true"># Contents of the callback message</span>
                <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
                <span class="token key atrule">content</span><span class="token punctuation">:</span>
                  <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
                    <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                      <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                        <span class="token key atrule">message</span><span class="token punctuation">:</span>
                          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                          <span class="token key atrule">example</span><span class="token punctuation">:</span> Some event happened
                      <span class="token key atrule">required</span><span class="token punctuation">:</span>
                        <span class="token punctuation">-</span> message
              <span class="token key atrule">responses</span><span class="token punctuation">:</span>   <span class="token comment" spellcheck="true"># Expected responses to the callback message</span>
                <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
                  <span class="token key atrule">description</span><span class="token punctuation">:</span> Your server returns this code if it accepts the callback<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="使用运行时表达式来引用请求字段"><a href="#使用运行时表达式来引用请求字段" class="headerlink" title="使用运行时表达式来引用请求字段"></a>使用运行时表达式来引用请求字段</h3><p>如您所见，我们<code>{$request.body#/callbackUrl}</code>在示例中使用了表达式。它是一个<a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.3.md#runtimeExpression" target="_blank" rel="noopener">运行时表达式</a>，用于设置<code>POST /subscribe</code>将在回调中使用请求的哪些数据。<em>运行时</em>意味着与 API 端点不同，此 URL 事先未知，并在运行时根据 API 客户端提供的数据进行评估。此值因客户端而异。例如，<code>POST /subscribe</code>请求可以如下所示：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml">POST /subscribe<span class="token punctuation">?</span>p1=query<span class="token punctuation">-</span>param<span class="token punctuation">-</span>value HTTP/1.1
<span class="token key atrule">Host</span><span class="token punctuation">:</span> my.example.com
<span class="token key atrule">Content-Type</span><span class="token punctuation">:</span> application/json
<span class="token key atrule">Content-Length</span><span class="token punctuation">:</span> <span class="token number">187</span>
<span class="token punctuation">{</span>
  <span class="token key atrule">"callbackUrl"</span> <span class="token punctuation">:</span> <span class="token string">"http://my.client.com/callback"</span>
<span class="token punctuation">}</span>
201 Created
<span class="token key atrule">Location</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//my.example.com<span class="token punctuation">?</span>id=123<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>您可以使用以下表达式来引用其数据：</p>
<table>
<thead>
<tr>
<th>表达</th>
<th>例子</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>{$url}</code></td>
<td><code>/subscribe</code></td>
<td>父操作 URL。</td>
</tr>
<tr>
<td><code>{$method}</code></td>
<td><code>POST</code></td>
<td>回调请求的方法。</td>
</tr>
<tr>
<td><code>{$request.path.eventType}</code></td>
<td><code>myEvent</code></td>
<td>事件名称。</td>
</tr>
<tr>
<td><code>{$request.query.*param-name*}</code></td>
<td><code>query-param-value</code> （<em>p1</em>查询参数）</td>
<td>指定查询参数的值。</td>
</tr>
<tr>
<td><code>{$request.header.*header-name*}</code></td>
<td><code>application/json</code> （内容类型标头）</td>
<td>“订阅”请求的指定标头。</td>
</tr>
<tr>
<td><code>{$request.body#/*field-name*}</code></td>
<td><code>callbackUrl</code></td>
<td>请求正文中的一个字段。 如果该字段是一个数组，请使用类似的语法。<code>{$request.body#/*arrayField*/*2*}</code></td>
</tr>
<tr>
<td><code>{$response.header.*header-name*}</code></td>
<td><code>http://my.example.com?id=123</code> （位置标题）</td>
<td>指定响应头的值 （对“订阅”请求的响应）。</td>
</tr>
</tbody></table>
<p>您可以在回调定义中将运行时表达式与静态数据结合使用。例如，您可以通过以下方式定义回调 URL：</p>
<pre><code>{$request.body#callbackUrl}/data:
– or –
{$request.body#/callbackUrl}/{$request.query.eventType}:</code></pre><p>您可以使用表达式来指定查询参数：</p>
<pre><code>{$request.body#/callbackUrl}/data?p1={$request.query.eventType}</code></pre><p>如果字符串同时包含运行时表达式和静态文本，则应将运行时表达式括在花括号中。如果整个字符串是运行时表达式，则可以跳过大括号。</p>
<h3 id="多次回调"><a href="#多次回调" class="headerlink" title="多次回调"></a>多次回调</h3><p>正如我们上面所说，您可以使用一个“订阅”操作来定义多个回调：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">/subscribe</span><span class="token punctuation">:</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span> 
      <span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        <span class="token key atrule">content</span><span class="token punctuation">:</span>
          <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token key atrule">type</span><span class="token punctuation">:</span> object
              <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                <span class="token key atrule">inProgressUrl</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                <span class="token key atrule">failedUrl</span><span class="token punctuation">:</span>  
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                <span class="token key atrule">successUrl</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span> 
          <span class="token key atrule">description</span><span class="token punctuation">:</span> OK
      <span class="token key atrule">callbacks</span><span class="token punctuation">:</span>
        <span class="token key atrule">inProgress</span><span class="token punctuation">:</span>
          '<span class="token punctuation">{</span>$request.body<span class="token comment" spellcheck="true">#/inProgressUrl}':</span>
            <span class="token key atrule">post</span><span class="token punctuation">:</span>
              <span class="token key atrule">requestBody</span><span class="token punctuation">:</span> 
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/requestBodies/callbackMessage1'</span>
              <span class="token key atrule">responses</span><span class="token punctuation">:</span>
                <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
                  <span class="token key atrule">description</span><span class="token punctuation">:</span> OK
          '<span class="token punctuation">{</span>$request.body<span class="token comment" spellcheck="true">#/failedUrl}':</span>
            <span class="token key atrule">post</span><span class="token punctuation">:</span>
              <span class="token key atrule">requestBody</span><span class="token punctuation">:</span> 
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/requestBodies/callbackMessage2'</span>
              <span class="token key atrule">responses</span><span class="token punctuation">:</span>
                <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
                  <span class="token key atrule">description</span><span class="token punctuation">:</span> OK
          '<span class="token punctuation">{</span>$request.body<span class="token comment" spellcheck="true">#/successUrl}':</span>
            <span class="token key atrule">post</span><span class="token punctuation">:</span>
              <span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/requestBodies/callbackMessage3'</span>
              <span class="token key atrule">responses</span><span class="token punctuation">:</span>
                <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
                  <span class="token key atrule">description</span><span class="token punctuation">:</span> OK<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="取消订阅回调"><a href="#取消订阅回调" class="headerlink" title="取消订阅回调"></a>取消订阅回调</h3><p>您实现取消订阅机制的方式取决于您。例如，接收服务器可以响应回调消息返回特定代码，以表明它不再对回调感兴趣。在这种情况下，客户端只能在响应回调请求时取消订阅。为了允许客户端随时取消订阅，您的 API 可以提供特殊的“取消订阅”操作。这是一种比较常见的做法。在这种情况下，您的服务可以为每个订阅者生成一个 ID 或令牌，并在响应“订阅”请求时返回此 ID 或令牌。要取消订阅，客户端可以将此 ID 传递给“取消订阅”操作以指定要删除的订阅者。以下示例演示了如何在规范中定义此行为：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/subscribe</span><span class="token punctuation">:</span>
    <span class="token key atrule">description</span><span class="token punctuation">:</span> Add a subscriber
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> callbackUrl
          <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string
            <span class="token key atrule">format</span><span class="token punctuation">:</span> uri
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> event
          <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'201'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Added
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">type</span><span class="token punctuation">:</span> object
              <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                <span class="token key atrule">subscriberId</span><span class="token punctuation">:</span> 
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                  <span class="token key atrule">example</span><span class="token punctuation">:</span> AAA<span class="token punctuation">-</span>123<span class="token punctuation">-</span>BBB<span class="token punctuation">-</span><span class="token number">456                    </span>
      <span class="token key atrule">links</span><span class="token punctuation">:</span>  <span class="token comment" spellcheck="true"># Link the returned id with the unsubscribe operation</span>
        <span class="token key atrule">unsubscribeOp</span><span class="token punctuation">:</span>
          <span class="token key atrule">operationId</span><span class="token punctuation">:</span> unsubscribeOperation
              <span class="token key atrule">parameters</span><span class="token punctuation">:</span> 
                <span class="token key atrule">Id</span><span class="token punctuation">:</span> $response.body<span class="token comment" spellcheck="true">#/subscriberId</span>
      <span class="token key atrule">callbacks</span><span class="token punctuation">:</span>
        <span class="token key atrule">myEvent</span><span class="token punctuation">:</span>
          '<span class="token punctuation">{</span>$request.query.callbackUrl<span class="token punctuation">}</span><span class="token punctuation">?</span>event=<span class="token punctuation">{</span>$request.query.event<span class="token punctuation">}</span>'<span class="token punctuation">:</span>
            <span class="token key atrule">post</span><span class="token punctuation">:</span>
              <span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
                <span class="token key atrule">content</span><span class="token punctuation">:</span>
                  <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
                    <span class="token key atrule">example</span><span class="token punctuation">:</span>
                      <span class="token key atrule">message</span><span class="token punctuation">:</span> Some event
              <span class="token key atrule">responses</span><span class="token punctuation">:</span>
                <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
                  <span class="token key atrule">description</span><span class="token punctuation">:</span> OK

  <span class="token key atrule">/unsubscribe</span><span class="token punctuation">:</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">operationId</span><span class="token punctuation">:</span> unsubscribeOperation
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Id
          <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="组件部分"><a href="#组件部分" class="headerlink" title="组件部分"></a>组件部分</h2><p>通常，多个 API 操作具有一些公共参数或返回相同的响应结构。为避免代码重复，您可以将公共定义放在全局 <code>components</code>部分并使用<a href="https://swagger.io/docs/specification/using-ref/" target="_blank" rel="noopener"><code>$ref</code></a>. 在下面的示例中，用户对象的重复定义被替换为单个组件和对该组件的引用。前：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  /users/<span class="token punctuation">{</span>userId<span class="token punctuation">}</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Get a user by ID
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">...</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> A single user.
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                  <span class="token key atrule">id</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
                  <span class="token key atrule">name</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> string
  <span class="token key atrule">/users</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Get all users
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> A list of users.
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> array
                <span class="token key atrule">items</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                  <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                    <span class="token key atrule">id</span><span class="token punctuation">:</span>
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
                    <span class="token key atrule">name</span><span class="token punctuation">:</span>
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> string<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>后：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  /users/<span class="token punctuation">{</span>userId<span class="token punctuation">}</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Get a user by ID
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">...</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> A single user.
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/User'</span>
  <span class="token key atrule">/users</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Get all users
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> A list of users.
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> array
                <span class="token key atrule">items</span><span class="token punctuation">:</span>
                  <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/User'</span>
<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
    <span class="token key atrule">User</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> object
      <span class="token key atrule">properties</span><span class="token punctuation">:</span>
        <span class="token key atrule">id</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
        <span class="token key atrule">name</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="组件结构"><a href="#组件结构" class="headerlink" title="组件结构"></a>组件结构</h3><p><code>components</code>作为各种可重用定义的容器——模式（数据模型）、参数、响应、示例等。中的定义<code>components</code>对 API 没有直接影响，除非您从<code>components</code>. 也就是说，<code>components</code>不是适用于所有操作的参数和响应；它们只是可以在其他地方引用的信息。在 下<code>components</code>，定义按类型分组 – <code>schemas</code>，<code>parameters</code>依此类推。以下示例列出了可用的小节。所有小节都是可选的。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token comment" spellcheck="true"># Reusable schemas (data models)</span>
  <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
    <span class="token punctuation">...</span>
  <span class="token comment" spellcheck="true"># Reusable path, query, header and cookie parameters</span>
  <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
    <span class="token punctuation">...</span>
  <span class="token comment" spellcheck="true"># Security scheme definitions (see Authentication)</span>
  <span class="token key atrule">securitySchemes</span><span class="token punctuation">:</span>
    <span class="token punctuation">...</span>
  <span class="token comment" spellcheck="true"># Reusable request bodies</span>
  <span class="token key atrule">requestBodies</span><span class="token punctuation">:</span>
    <span class="token punctuation">...</span>
  <span class="token comment" spellcheck="true"># Reusable responses, such as 401 Unauthorized or 400 Bad Request</span>
  <span class="token key atrule">responses</span><span class="token punctuation">:</span>
    <span class="token punctuation">...</span>
  <span class="token comment" spellcheck="true"># Reusable response headers</span>
  <span class="token key atrule">headers</span><span class="token punctuation">:</span>
    <span class="token punctuation">...</span>
  <span class="token comment" spellcheck="true"># Reusable examples</span>
  <span class="token key atrule">examples</span><span class="token punctuation">:</span>
    <span class="token punctuation">...</span>
  <span class="token comment" spellcheck="true"># Reusable links</span>
  <span class="token key atrule">links</span><span class="token punctuation">:</span>
    <span class="token punctuation">...</span>
  <span class="token comment" spellcheck="true"># Reusable callbacks</span>
  <span class="token key atrule">callbacks</span><span class="token punctuation">:</span>
    <span class="token punctuation">...</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>每个小节包含一个或多个命名组件（定义）：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
    <span class="token key atrule">User</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> object
      <span class="token punctuation">...</span>
    <span class="token key atrule">Pet</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> object
      <span class="token punctuation">...</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>组件名称只能包含以下字符：</p>
<pre><code>A..Z a..z 0..9 . _ -</code></pre><p>有效名称的示例：</p>
<pre><code>User
New_User
org.example.User
401-Unauthorized</code></pre><p>组件名称用于通过<code>$ref</code>API 规范的其他部分引用组件：</p>
<pre><code>$ref: '#/components/&lt;type&gt;/&lt;name&gt;'</code></pre><p>例如：</p>
<pre><code>$ref: '#/components/schemas/User'</code></pre><p>一个例外是<code>securitySchemes</code>通过名称直接引用的定义 （请参阅<a href="https://swagger.io/docs/specification/authentication/" target="_blank" rel="noopener">身份验证</a>）。</p>
<h3 id="组件示例"><a href="#组件示例" class="headerlink" title="组件示例"></a>组件示例</h3><p>下面是一个<code>components</code>包含可重用数据模式、参数和响应的示例。其他组件类型（链接、示例等）的定义类似。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token comment" spellcheck="true">#-------------------------------</span>
  <span class="token comment" spellcheck="true"># Reusable schemas (data models)</span>
  <span class="token comment" spellcheck="true">#-------------------------------</span>
  <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
    <span class="token key atrule">User</span><span class="token punctuation">:</span>             <span class="token comment" spellcheck="true"># Can be referenced as '#/components/schemas/User'</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> object
      <span class="token key atrule">properties</span><span class="token punctuation">:</span>
        <span class="token key atrule">id</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
          <span class="token key atrule">format</span><span class="token punctuation">:</span> int64
        <span class="token key atrule">name</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
    <span class="token key atrule">Error</span><span class="token punctuation">:</span>            <span class="token comment" spellcheck="true"># Can be referenced as '#/components/schemas/Error'</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> object
      <span class="token key atrule">properties</span><span class="token punctuation">:</span>
        <span class="token key atrule">code</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
        <span class="token key atrule">message</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
  <span class="token comment" spellcheck="true">#-------------------------------</span>
  <span class="token comment" spellcheck="true"># Reusable operation parameters</span>
  <span class="token comment" spellcheck="true">#-------------------------------</span>
  <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
    <span class="token key atrule">offsetParam</span><span class="token punctuation">:</span>      <span class="token comment" spellcheck="true"># Can be referenced via '#/components/parameters/offsetParam'</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> offset
      <span class="token key atrule">in</span><span class="token punctuation">:</span> query
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Number of items to skip before returning the results.
      <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
      <span class="token key atrule">schema</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
        <span class="token key atrule">format</span><span class="token punctuation">:</span> int32
        <span class="token key atrule">minimum</span><span class="token punctuation">:</span> <span class="token number">0</span>
        <span class="token key atrule">default</span><span class="token punctuation">:</span> <span class="token number">0</span>
    <span class="token key atrule">limitParam</span><span class="token punctuation">:</span>       <span class="token comment" spellcheck="true"># Can be referenced as '#/components/parameters/limitParam'</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> limit
      <span class="token key atrule">in</span><span class="token punctuation">:</span> query
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Maximum number of items to return.
      <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
      <span class="token key atrule">schema</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
        <span class="token key atrule">format</span><span class="token punctuation">:</span> int32
        <span class="token key atrule">minimum</span><span class="token punctuation">:</span> <span class="token number">1</span>
        <span class="token key atrule">maximum</span><span class="token punctuation">:</span> <span class="token number">100</span>
        <span class="token key atrule">default</span><span class="token punctuation">:</span> <span class="token number">20</span>
  <span class="token comment" spellcheck="true">#-------------------------------</span>
  <span class="token comment" spellcheck="true"># Reusable responses</span>
  <span class="token comment" spellcheck="true">#-------------------------------</span>
  <span class="token key atrule">responses</span><span class="token punctuation">:</span>
    <span class="token key atrule">404NotFound</span><span class="token punctuation">:</span>       <span class="token comment" spellcheck="true"># Can be referenced as '#/components/responses/404NotFound'</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> The specified resource was not found.
    <span class="token key atrule">ImageResponse</span><span class="token punctuation">:</span>     <span class="token comment" spellcheck="true"># Can be referenced as '#/components/responses/ImageResponse'</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> An image.
      <span class="token key atrule">content</span><span class="token punctuation">:</span>
        <span class="token key atrule">image/*</span><span class="token punctuation">:</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string
            <span class="token key atrule">format</span><span class="token punctuation">:</span> binary
    <span class="token key atrule">GenericError</span><span class="token punctuation">:</span>      <span class="token comment" spellcheck="true"># Can be referenced as '#/components/responses/GenericError'</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> An error occurred.
      <span class="token key atrule">content</span><span class="token punctuation">:</span>
        <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/Error'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="外部定义的组件"><a href="#外部定义的组件" class="headerlink" title="外部定义的组件"></a>外部定义的组件</h3><p>在个别定义<code>components</code>可内联指定（如在前面的例子中）或使用一个<code>$ref</code>外部定义参考：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
    <span class="token key atrule">Pet</span><span class="token punctuation">:</span>
      <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'../models/pet.yaml'</span>
      <span class="token comment" spellcheck="true"># Can now use use '#/components/schemas/Pet' instead</span>
    <span class="token key atrule">User</span><span class="token punctuation">:</span>
      <span class="token key atrule">$ref</span><span class="token punctuation">:</span> 'https<span class="token punctuation">:</span>//api.example.com/v2/openapi.yaml<span class="token comment" spellcheck="true">#/components/schemas/User'</span>
      <span class="token comment" spellcheck="true"># Can now use '#/components/schemas/User' instead</span>
  <span class="token key atrule">responses</span><span class="token punctuation">:</span>
    <span class="token key atrule">GenericError</span><span class="token punctuation">:</span>
      <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '../template<span class="token punctuation">-</span>api.yaml<span class="token comment" spellcheck="true">#/components/responses/GenericError'</span>
      <span class="token comment" spellcheck="true"># Can now use '#/components/responses/GenericError' instead</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>通过这种方式，您可以为可以使用的外部定义定义本地“别名”，而不是在所有引用中重复外部文件路径。如果引用文件的位置发生变化，您只需在一个地方（在<code>components</code>）而不是在所有引用中更改它。</p>
<h3 id="与-OpenAPI-2-0-的差异-1"><a href="#与-OpenAPI-2-0-的差异-1" class="headerlink" title="与 OpenAPI 2.0 的差异"></a>与 OpenAPI 2.0 的差异</h3><p>OpenAPI的2.0对可重用组件单独的章节- ，，和。在 OpenAPI 3.0 中，它们都被移到了. 此外，被重命名为和 被重命名为（注意不同的拼写：vs ）。引用会相应地更改以反映新结构：<code>definitions``parameters``responses``securityDefinitions``components``definitions``schemas``securityDefinitions``securitySchemes``schem*A*s``securitySchem*E*s</code></p>
<pre class="line-numbers language-yaml"><code class="language-yaml">OpenAPI 2.0                    OpenAPI 3.0
'<span class="token comment" spellcheck="true">#/definitions/User'         → '#/components/schemas/User'</span>
'<span class="token comment" spellcheck="true">#/parameters/offsetParam'   → '#/components/parameters/offsetParam'</span>
'<span class="token comment" spellcheck="true">#/responses/ErrorResponse'  → '#/components/responses/ErrorResponse'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="使用-ref"><a href="#使用-ref" class="headerlink" title="使用 $ref"></a>使用 $ref</h2><p>当您记录 API 时，通常会有一些您在多个 API 资源中使用的功能。在这种情况下，您可以为此类元素创建一个片段，以便在需要时多次使用它们。使用 OpenAPI 3.0，您可以引用托管在任何位置的定义。它可以是同一台服务器，也可以是另一台服务器，例如 GitHub、SwaggerHub 等。要引用定义，请使用<code>$ref</code>关键字：</p>
<pre><code>$ref: 'reference to definition'</code></pre><p>例如，假设您有以下架构对象，您想在响应中使用它：</p>
<table>
<thead>
<tr>
<th>JSON 示例</th>
<th>YAML 示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>"components": {  "schemas": {    "user": {      "properties": {        "id": {          "type": "integer"        },        "name": {          "type": "string"        }      }    }  }}</code></td>
<td><code>components:  schemas:    User:      properties:        id:          type: integer        name:          type: string</code></td>
</tr>
</tbody></table>
<p>要引用该对象，您需要<code>$ref</code>在响应中添加相应的路径：</p>
<table>
<thead>
<tr>
<th>JSON 示例</th>
<th>YAML 示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>"responses": {  "200": {    "description": "The response",    "schema": {      "$ref": "#/components/schemas/user"     }  }}</code></td>
<td><code>responses:  '200':    description: The response    schema:       $ref: '#/components/schemas/User'</code></td>
</tr>
</tbody></table>
<p>的值<code>$ref</code>使用<a href="https://tools.ietf.org/html/draft-pbryan-zyp-json-ref-03" target="_blank" rel="noopener">JSON Reference</a>表示法，以 开头的部分<code>#</code>使用<a href="https://tools.ietf.org/html/rfc6901" target="_blank" rel="noopener">JSON Pointer</a>表示法。此表示法允许您指定要引用的目标文件或文件的特定部分。在前面的例子中，<code>#/components/schemas/User</code>意味着解析从当前文档的根开始，然后一个接一个地找到<code>components</code>、<code>schemas</code>、的值<code>User</code>。</p>
<h3 id="ref-语法"><a href="#ref-语法" class="headerlink" title="$ref 语法"></a>$ref 语法</h3><p>根据<a href="https://tools.ietf.org/html/rfc3986" target="_blank" rel="noopener">RFC3986</a>，<code>$ref</code>字符串值 ( <strong>JSON Reference</strong> ) 应该包含一个 URI，它标识您引用的 JSON 值的位置。如果字符串值不符合 URI 语法规则，则在解析过程中会导致错误。<code>$ref</code>JSON Reference 对象之外的任何成员都将被忽略。检查此列表以获取特定情况下 JSON 引用的示例值：</p>
<ul>
<li><p><strong>本地参考</strong>-<code>$ref: '#/definitions/myElement'</code> <code>#</code>手段去到当前文档的根目录，然后找到元素<code>definitions</code>和<code>myElement</code>一个一个之后。</p>
</li>
<li><p>远程参考</p>
<pre><code>$ref: 'document.json'</code></pre><p>使用位于同一服务器和同一位置的整个文档。</p>
<ul>
<li><strong>位于同一文件夹中的文档元素</strong>-<code>$ref: 'document.json#/myElement'</code></li>
<li><strong>位于父文件夹中的文档元素</strong>-<code>$ref: '../document.json#/myElement'</code></li>
<li><strong>位于另一个文件夹中的文档元素</strong>-<code>$ref: '../another-folder/document.json#/myElement'</code></li>
</ul>
</li>
<li><p>URL 引用</p>
<pre><code>$ref: 'http://path/to/your/resource'</code></pre><p>使用位于不同服务器上的整个文档。</p>
<ul>
<li><strong>存储在不同服务器上的文档的特定元素</strong>-<code>$ref: 'http://path/to/your/resource.json#/myElement'</code></li>
<li><strong>使用相同协议</strong>（例如 HTTP 或 HTTPS）<strong>的不同服务器上的文档</strong>–<code>$ref: '//anotherserver.com/files/example.json'</code></li>
</ul>
</li>
</ul>
<p><strong>注意</strong>：<code>#/components/schemas/User</code>在 YAML等使用本地引用时，请将值括在引号中：<code>'#/components/schemas/User'</code>. 否则将被视为注释。</p>
<h3 id="转义字符"><a href="#转义字符" class="headerlink" title="转义字符"></a>转义字符</h3><p><code>/</code>和<code>~</code>是 JSON 指针中的特殊字符，按字面使用时需要转义（例如，在路径名中）。</p>
<table>
<thead>
<tr>
<th>特点</th>
<th>逃脱</th>
</tr>
</thead>
<tbody><tr>
<td>~</td>
<td>~0</td>
</tr>
<tr>
<td>/</td>
<td>~1</td>
</tr>
</tbody></table>
<p>例如，要引用 path <code>/blogs/{blog_id}/new~posts</code>，您可以使用：</p>
<pre><code>$ref: '#/paths/~1blogs~1{blog_id}~1new~0posts'</code></pre><h3 id="注意事项-1"><a href="#注意事项-1" class="headerlink" title="注意事项"></a>注意事项</h3><h4 id="可以使用-ref-的地方"><a href="#可以使用-ref-的地方" class="headerlink" title="可以使用 $ref 的地方"></a>可以使用 $ref 的地方</h4><p>一个常见的误解是<code>$ref</code>允许在 OpenAPI 规范文件中的任何位置。实际上<code>$ref</code>只允许在<a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.3.md" target="_blank" rel="noopener">OpenAPI 3.0 规范</a>明确指出该值可能是<em>引用的地方</em>。例如，<code>$ref</code>不能在<code>info</code>节和直接下使用<code>paths</code>：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">openapi</span><span class="token punctuation">:</span> 3.0.0
<span class="token comment" spellcheck="true"># Incorrect!</span>
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">$ref</span><span class="token punctuation">:</span> info.yaml
<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">$ref</span><span class="token punctuation">:</span> paths.yaml<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>但是，您可以使用<code>$ref</code>单独的路径，如下所示：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/users</span><span class="token punctuation">:</span>
    <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'../resources/users.yaml'</span>
  /users/<span class="token punctuation">{</span>userId<span class="token punctuation">}</span><span class="token punctuation">:</span>
    <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'../resources/users-by-id.yaml'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="ref-和兄弟元素"><a href="#ref-和兄弟元素" class="headerlink" title="$ref 和兄弟元素"></a>$ref 和兄弟元素</h4><p>a 的任何同级元素都将<code>$ref</code>被忽略。这是因为它的<code>$ref</code>工作原理是用它所指向的定义替换自身及其级别上的所有内容。考虑这个例子：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
    <span class="token key atrule">Date</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> string
      <span class="token key atrule">format</span><span class="token punctuation">:</span> date
    <span class="token key atrule">DateWithExample</span><span class="token punctuation">:</span>
      <span class="token key atrule">$ref</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#/components/schemas/Date'</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Date schema extended with a `default` value<span class="token punctuation">...</span> Or not<span class="token punctuation">?</span>
      <span class="token key atrule">default</span><span class="token punctuation">:</span> <span class="token datetime number">2000-01-01</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在第二个模式中，<code>description</code>和<code>default</code>属性被忽略，因此该模式最终与引用的<code>Date</code>模式完全相同。</p>
<h2 id="API-一般信息"><a href="#API-一般信息" class="headerlink" title="API 一般信息"></a>API 一般信息</h2><p>在规范中包含有关 API 的一般信息被认为是一种很好的做法：版本号、许可说明、联系数据、文档链接等。我们特别建议对公开可用的 API 执行此操作；因为这会增加用户对贵公司提供的服务的信心。要指定 API 元数据，请使用顶级<code>info</code>对象的属性：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">openapi</span><span class="token punctuation">:</span> 3.0.0
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token comment" spellcheck="true"># You application title. Required.</span>
  <span class="token key atrule">title</span><span class="token punctuation">:</span> Sample Pet Store App
  <span class="token comment" spellcheck="true"># API version. You can use semantic versioning like 1.0.0, </span>
  <span class="token comment" spellcheck="true"># or an arbitrary string like 0.99-beta. Required.</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 1.0.0 
  <span class="token comment" spellcheck="true"># API description. Arbitrary text in CommonMark or HTML.</span>
  <span class="token key atrule">description</span><span class="token punctuation">:</span> This is a sample server for a pet store.
  <span class="token comment" spellcheck="true"># Link to the page that describes the terms of service.</span>
  <span class="token comment" spellcheck="true"># Must be in the URL format.</span>
  <span class="token key atrule">termsOfService</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//example.com/terms/
  <span class="token comment" spellcheck="true"># Contact information: name, email, URL.</span>
  <span class="token key atrule">contact</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> API Support
    <span class="token key atrule">email</span><span class="token punctuation">:</span> support@example.com
    <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//example.com/support
  <span class="token comment" spellcheck="true"># Name of the license and a URL to the license description.</span>
  <span class="token key atrule">license</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> Apache 2.0
    <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//www.apache.org/licenses/LICENSE<span class="token punctuation">-</span>2.0.html
  <span class="token comment" spellcheck="true"># Link to the external documentation (if any).</span>
  <span class="token comment" spellcheck="true"># Code or documentation generation tools can use description as the text of the link. </span>
  <span class="token key atrule">externalDocs</span><span class="token punctuation">:</span>
    <span class="token key atrule">description</span><span class="token punctuation">:</span> Find out more
    <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//example.com<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>将<code>title</code>和<code>version</code>属性是必需的，其他都是可选的。</p>
<h2 id="使用标签对操作进行分组"><a href="#使用标签对操作进行分组" class="headerlink" title="使用标签对操作进行分组"></a>使用标签对操作进行分组</h2><p>您可以<code>tags</code>为每个 API 操作分配一个列表。标记操作可能由工具和库以不同方式处理。例如，Swagger UI 用于<code>tags</code>对显示的操作进行分组。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/pet/findByStatus</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Finds pets by Status
      <span class="token key atrule">tags</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> pets
      <span class="token punctuation">...</span>
  <span class="token key atrule">/pet</span><span class="token punctuation">:</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Adds a new pet to the store
      <span class="token key atrule">tags</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> pets
      <span class="token punctuation">...</span>
  <span class="token key atrule">/store/inventory</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Returns pet inventories
      <span class="token key atrule">tags</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> store
      <span class="token punctuation">...</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="/images/loading.gif" data-original="../images/development/swagger-ui-tags-(1).png" alt=""></p>
<p>或者，您可以使用根级别的全局部分为每个标签指定<code>description</code>和。此处的标签名称应与操作中使用的标签名称相匹配。<code>externalDocs``tags</code></p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">tags</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> pets
    <span class="token key atrule">description</span><span class="token punctuation">:</span> Everything about your Pets
    <span class="token key atrule">externalDocs</span><span class="token punctuation">:</span>
      <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//docs.my<span class="token punctuation">-</span>api.com/pet<span class="token punctuation">-</span>operations.htm
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> store
    <span class="token key atrule">description</span><span class="token punctuation">:</span> Access to Petstore orders
    <span class="token key atrule">externalDocs</span><span class="token punctuation">:</span>
      <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//docs.my<span class="token punctuation">-</span>api.com/store<span class="token punctuation">-</span>orders.htm<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>全局标签部分中的标签顺序还控制 Swagger UI 中的默认排序。请注意，即使未在根级别定义，也可以在操作中使用标签。</p>
<h2 id="OpenAPI-扩展"><a href="#OpenAPI-扩展" class="headerlink" title="OpenAPI 扩展"></a>OpenAPI 扩展</h2><p>扩展（也称为<em>规范扩展</em>或<em>供应商扩展</em>）是以 开头的自定义属性<code>x-</code>，例如<code>x-logo</code>. 它们可用于描述标准 OpenAPI 规范未涵盖的额外功能。许多支持 OpenAPI 的 API 相关产品使用扩展来记录它们自己的属性，例如 Amazon API Gateway、ReDoc、APIMatic 等。API 规范的根级别和以下位置支持扩展：</p>
<ul>
<li><code>info</code> 部分</li>
<li><code>paths</code> 部分、单独的路径和操作</li>
<li>运行参数</li>
<li><code>responses</code></li>
<li><code>tags</code></li>
<li>安全方案</li>
</ul>
<p>扩展值可以是原始值、数组、对象或<code>null</code>. 如果值是一个对象或对象数组，则该对象的属性名称不需要以 开头<code>x-</code>。</p>
<h3 id="例子-3"><a href="#例子-3" class="headerlink" title="例子"></a>例子</h3><p>使用 Amazon API Gateway 自定义授权方的 API 可能包含类似于以下内容的扩展：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">securitySchemes</span><span class="token punctuation">:</span>
    <span class="token key atrule">APIGatewayAuthorizer</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> apiKey
      <span class="token key atrule">name</span><span class="token punctuation">:</span> Authorization
      <span class="token key atrule">in</span><span class="token punctuation">:</span> header
      <span class="token key atrule">x-amazon-apigateway-authtype</span><span class="token punctuation">:</span> oauth2
      <span class="token key atrule">x-amazon-apigateway-authorizer</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> token
        <span class="token key atrule">authorizerUri</span><span class="token punctuation">:</span> arn<span class="token punctuation">:</span>aws<span class="token punctuation">:</span>apigateway<span class="token punctuation">:</span>us<span class="token punctuation">-</span>east<span class="token punctuation">-</span>1<span class="token punctuation">:</span>lambda<span class="token punctuation">:</span>path/2015<span class="token punctuation">-</span>03<span class="token punctuation">-</span>31/functions/arn<span class="token punctuation">:</span>aws<span class="token punctuation">:</span>lambda<span class="token punctuation">:</span>us<span class="token punctuation">-</span>east<span class="token punctuation">-</span>1<span class="token punctuation">:</span>account<span class="token punctuation">-</span>id<span class="token punctuation">:</span>function<span class="token punctuation">:</span>function<span class="token punctuation">-</span>name/invocations
        <span class="token key atrule">authorizerCredentials</span><span class="token punctuation">:</span> arn<span class="token punctuation">:</span>aws<span class="token punctuation">:</span>iam<span class="token punctuation">:</span><span class="token punctuation">:</span>account<span class="token punctuation">-</span>id<span class="token punctuation">:</span>role
        <span class="token key atrule">identityValidationExpression</span><span class="token punctuation">:</span> <span class="token string">"^x-[a-z]+"</span>
        <span class="token key atrule">authorizerResultTtlInSeconds</span><span class="token punctuation">:</span> <span class="token number">60</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="2-0"><a href="#2-0" class="headerlink" title="2.0"></a><a href="https://swagger.io/docs/specification/2-0" target="_blank" rel="noopener">2.0</a></h2><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://jackhcc.github.io" rel="external nofollow noreferrer">杰克成</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://jackhcc.github.io/posts/Swagger.html">https://jackhcc.github.io/posts/Swagger.html</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="https://jackhcc.github.io" target="_blank">杰克成</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Swagger/">
                                    <span class="chip bg-color">Swagger</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/share/css/share.min.css">

<div id="article-share">
    
    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/reward/aliqr.png" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/reward/wxqr.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>
            
        </div>
    </div>

    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/gitalk/gitalk.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/css/my-gitalk.css">

<div class="card gitalk-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="gitalk-container" class="card-content"></div>
</div>

<script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/gitalk/gitalk.min.js"></script>
<script>
    let gitalk = new Gitalk({
        clientID: '3821a0bbb773038a51fc',
        clientSecret: '4b30b507d67ec5497ec0e77f43f80cb3e0d7dd3a',
        repo: 'JackHCC.github.io',
        owner: 'JackHCC',
        admin: "JackHCC",
        id: '2021-12-19T22-07-53',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });

    gitalk.render('gitalk-container');
</script>
    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/posts/Awesome-Sundary.html">
                    <div class="card-image">
                        
                        
                        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/featureimages/6.jpg" class="responsive-img" alt="Awesome Sundary Share">
                        
                        <span class="card-title">Awesome Sundary Share</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            杂项优质文章汇总
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2022-01-01
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Awesome/" class="post-category">
                                    Awesome
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Sundary/">
                        <span class="chip bg-color">Sundary</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/posts/FrontEnd-React.html">
                    <div class="card-image">
                        
                        
                        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/featureimages/3.jpg" class="responsive-img" alt="前端React基础">
                        
                        <span class="card-title">前端React基础</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            React学习记录
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-12-12
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Front-End/" class="post-category">
                                    Front End
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/React/">
                        <span class="chip bg-color">React</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('4'),
            headingSelector: 'h1, h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>



    <footer class="page-footer bg-color">
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2020</span>
            <a href="https://jackhcc.github.io" target="_blank">杰克成</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">3591.2k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2020";
                    var startMonth = "2";
                    var startDate = "27";
                    var startHour = "6";
                    var startMinute = "30";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/JackHCC" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:jackcc0701@163.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>



    <a href="https://www.facebook.com/profile.php?id=100046343443643" class="tooltipped" target="_blank" data-tooltip="关注我的Facebook: https://www.facebook.com/profile.php?id=100046343443643" data-position="top" data-delay="50">
        <i class="fab fa-facebook-f"></i>
    </a>



    <a href="https://twitter.com/JackChe66021834" class="tooltipped" target="_blank" data-tooltip="关注我的Twitter: https://twitter.com/JackChe66021834" data-position="top" data-delay="50">
        <i class="fab fa-twitter"></i>
    </a>



    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=2508074836" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 2508074836" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>



    <a href="https://weibo.com/u/6885584679" class="tooltipped" target="_blank" data-tooltip="关注我的微博: https://weibo.com/u/6885584679" data-position="top" data-delay="50">
        <i class="fab fa-weibo"></i>
    </a>



    <a href="https://www.zhihu.com/people/8f8482f01f0d6a04e844efe32e0f0710" class="tooltipped" target="_blank" data-tooltip="关注我的知乎: https://www.zhihu.com/people/8f8482f01f0d6a04e844efe32e0f0710" data-position="top" data-delay="50">
        <i class="fab fa-zhihu1">知</i>
    </a>



</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/materialize/materialize.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/aos/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/js/matery.js"></script>

    <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas>
    <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script>
    <script type="text/javascript" src="/js/fireworks.js"></script>

    <script type="text/javascript">
        //只在桌面版网页启用特效
        var windowWidth = $(window).width();
        if (windowWidth > 768) {
            document.write('<script type="text/javascript" src="/js/sakura.js"><\/script>'); }
    </script>

    <!-- weather -->
	<script type="text/javascript">
	WIDGET = {FID: 'TToslpmkVO'}
	</script>
	<script type="text/javascript" src="https://apip.weatherdt.com/float/static/js/r.js?v=1111"></script>


    <!-- Global site tag (gtag.js) - Google Analytics -->


    <!-- Baidu Analytics -->

<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

    <!-- Baidu Push -->

    
    
    <script async src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/others/busuanzi.pure.mini.js"></script>
    

    
        <script src="//code.tidio.co/kqhlkxviiccyoa0czpfpu4ijuey9hfre.js"></script>
        <script> 
            $(document).ready(function () {
                setInterval(change_Tidio, 50);  
                function change_Tidio() { 
                    var tidio=$("#tidio-chat iframe");
                    if(tidio.css("display")=="block"&& $(window).width()>977 ){
                        document.getElementById("tidio-chat-iframe").style.bottom= ($("div#backTop.top-scroll").css("display")=="none" &&$(window).width()>977)>0? "-40px" : ($("div.toc-title").length&&$(window).width()>977)>0?"85px":"20px";   
                        document.getElementById("tidio-chat-iframe").style.right="-15px";   
                        document.getElementById("tidio-chat-iframe").style.height=parseInt(tidio.css("height"))>=520?"520px":tidio.css("height");
                        document.getElementById("tidio-chat-iframe").style.zIndex="997";
                    } 
                    else if(tidio.css("display")=="block"&&$(window).width()>601 &&$(window).width()<992 ){
                        document.getElementById("tidio-chat-iframe").style.bottom= ($("div#backTop.top-scroll").css("display")=="none" && 601< $(window).width()<992)>0? "-40px":"20px" ;   
                        document.getElementById("tidio-chat-iframe").style.right="-15px"; 
                        document.getElementById("tidio-chat-iframe").style.zIndex="997";
                    }
                    else if(tidio.css("display")=="block"&&$(window).width()<601 && parseInt(tidio.css("height"))<230){
                        document.getElementById("tidio-chat-iframe").style.bottom= ($("div#backTop.top-scroll").css("display")=="none" && $(window).width()<601)>0? "-10px":"45px" ;   
                        document.getElementById("tidio-chat-iframe").style.zIndex="997";
                    }
                    if( tidio.css("display")=="block"&&$(window).width()<601 && parseInt(tidio.css("height"))>=230){
                        document.getElementById("tidio-chat-iframe").style.zIndex="998";
                    }
                } 
            }); 
        </script>
    

    

    
    <script type="text/javascript" color="0,0,255"
        pointColor="0,0,255" opacity='0.7'
        zIndex="-1" count="99"
        src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/background/canvas-nest.js"></script>
    

    

    
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/background/ribbon-dynamic.js" async="async"></script>
    
    
    
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/instantpage/instantpage.js" type="module"></script>
    

        <script src="//cdn.jsdelivr.net/npm/js-base64/base64.min.js"></script>
        <script>
        $('a').each(function() {
          const $this = $(this);
          const href = $this.attr('href');
          if (href && href.match('^((http|https|thunder|qqdl|ed2k|Flashget|qbrowser|ftp|rtsp|mms)://)')) {
            const strs = href.split('/');
            if (strs.length >= 3) {
                const host = strs[2];
                if (host !== 'your_domain' || window.location.host) {
                    $this.attr('href', '/go.html?u='+Base64.encode(href)+'').attr('rel', 'external nofollow noopener noreferrer');
                    if (true) {
                        $this.attr('target', '_blank');
                    }
                }
            }
          }
        });
        </script><script>!function(e){var c=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function i(){for(var r=0;r<c.length;r++)t=c[r],0<=(n=t.getBoundingClientRect()).bottom&&0<=n.left&&n.top<=(e.innerHeight||document.documentElement.clientHeight)&&function(){var t,n,e,i,o=c[r];t=o,n=function(){c=c.filter(function(t){return o!==t})},e=new Image,i=t.getAttribute("data-original"),e.onload=function(){t.src=i,n&&n()},e.src=i}();var t,n}i(),e.addEventListener("scroll",function(){var t,n;t=i,n=e,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(n)},500)})}(this);</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script></body>

</html>

